{"version":3,"sources":["webaudio-starter.js","node_modules/browser-pack/_prelude.js","node_modules/crnx-base/array-option-output.js","node_modules/crnx-base/code-output-i18n.js","node_modules/crnx-base/code-output.js","node_modules/crnx-base/code-section.js","node_modules/crnx-base/details-polyfill.js","node_modules/crnx-base/fake-lodash/camelcase.js","node_modules/crnx-base/fake-lodash/capitalize.js","node_modules/crnx-base/fake-lodash/debounce.js","node_modules/crnx-base/fake-lodash/escape.js","node_modules/crnx-base/format-numbers.js","node_modules/crnx-base/group-option-output.js","node_modules/crnx-base/i18n-expand-curly.js","node_modules/crnx-base/i18n-link-wikipedia.js","node_modules/crnx-base/i18n.js","node_modules/crnx-base/interleave-lines.js","node_modules/crnx-base/js-lines.js","node_modules/crnx-base/lines.js","node_modules/crnx-base/nose-wrap-lines.js","node_modules/crnx-base/option-classes.js","node_modules/crnx-base/options-output-i18n.js","node_modules/crnx-base/options-output.js","node_modules/crnx-base/options.js","node_modules/crnx-base/ref-lines.js","node_modules/crnx-base/tip.js","node_modules/crnx-base/web-code.js","node_modules/crnx-base/wrap-lines.js","node_modules/crnx-build/babel-helpers/math-log10.es5","node_modules/crnx-build/babel-helpers/string-prototype-includes.es5","node_modules/crnx-build/babel-helpers/string-prototype-repeat.es5","src/audio-context.js","src/biquad-filter-option-output.js","src/canvas.js","src/code-output.js","src/code.js","src/collection-feature.js","src/destination.js","src/equalizer-filter-option-output.js","src/feature.js","src/filter-option-output.js","src/filter-sequence.js","src/i18n.js","src/iir-filter-option-output.js","src/loader.js","src/main.js","src/option-classes.js","src/options-output.js","src/options.js","src/source-set.js"],"names":["___babelHelper___createClass","Constructor","protoProps","staticProps","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","prototype","___babelHelper___classCallCheck","instance","TypeError","___babelHelper___possibleConstructorReturn","self","call","ReferenceError","___babelHelper___inherits","subClass","superClass","defaults","obj","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","constructor","___babelHelper___taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","ArrayOptionOutput","option","writeOption","i18n","generateId","_this","this","$dragged","$entries","$","append","entries","map","subOption","writeDraggableSubOption","$buttons","availableTypes","forEach","type","html","fullName","click","makeEntry","updateArrayEntries","$output","canDeleteEntry","$entry","children","data","get","_this2","moveUp","$moved","prev","before","moveDown","next","after","attemptDelete","remove","This","on","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","name","setDragImage","setTimeout","addClass","$sorted","h","height","offset","top","y","touches","pageY","$prev","$next","removeClass","keydown","$handle","keyCode","focus","preventDefault","dropEffect","$target","is","dh","nextAll","th","_dh","_y","prevAll",2,"lang","additionalStringsPrefix","additionalStrings","en","save","run","open.codepen","open.jsfiddle","open.plunker","section.html","section.css","section.js","embedded","mode.full","mode.body","mode.embed","mode.paste","mode.file","formatting","formatting.indent","formatting.indentNumber","formatting.jsSemicolons","warning.no-hljs","ru","id",3,"debounce","detailsPolyfill","getHtmlDataUri","encodeURIComponent","makeObjectWithSetters","values","setCallback","_loop","prop","set","v","CodeOutput","generateCode","defaultFormatting","update","flush","applyUpdatedCode","sectionModes","css","js","_code","initDomProps","writeFormattingControls","$indentCheckbox","$indentNumber","updateIndent","indent","checkValidity","Number","val","change","jsSemicolons","checked","each","writeSection","sectionName","writeSectionSummary","$sectionCode","writeButtons","window","hljs","$saveButtons","sections","extractSections","empty","$code","getHtml","join","highlightBlock","postData","url","$form","attr","appendTo","submit","navigator","msSaveOrOpenBlob","w","open","document","write","close","getSection","JSON","stringify","title","wrap","_postData","filename","$summary","mode","section","blob","Blob","mimeType","$a","URL","createObjectURL","29","5","8",4,"CodeSection","lines","detailsSupported","createElement","$details","toggleOpen","removeAttr","keyCodeEnter","keyCodeSpace","handleEvent","closest",6,"capitalize","split","7","charAt","toUpperCase","slice","func","wait","timeoutId","debounced","clearTimeout",9,"entityMap","&","<",">","\"","'","String","replace","m",10,"formatNumbersInternal","numbers","precision","keepDot","noPlus","maxPrecision","hasNegative","p","number","toFixed","match","ss","Array","isArray","_i","_number","_s","formatNumbers","glsl",11,"GroupOptionOutput",12,"inStrings","expandIdAndString","string","idMatch","expandRegexp","exec","idStart","idMidsStr","idEnd","idMids","stringMatch","stringStart","stringMidsStr","stringEnd","stringMids","idMid","stringMid",13,"p1","link","text","indexOf",14,"escape","langStrings","defaultLang","has","pluralSuffix","ns","nn","Math","abs","teen","plural","numberWithUnits","unit","abbrFn","abbr","expansion","test","28",15,"Lines","InterleaveLines","_Lines","apply","arguments","doGet","out","first","fp","push","_arr","item","subOut","17",16,"JsLines","processStringInGet","TO","isDataEmpty","isEmpty","addTo","_arr2","_i2","pop","shift","b","_arguments","makeLines","Function","bind","concat","ae","ba","_b","be","bae","_b2","count","_arguments2","reduce",18,"WrapLines","NoseWrapLines","_WrapLines","26",19,"Option","Base","_class","settings","visibilityManager","updateCallbacks","_$","isVisible","register","visibilityData","visibilityDataLogic","testName","options","declareAffectedBy","make","nScalars","nArrays","nObjects","scalarArg","arrayArg","objectArg","_len","rest","_key","arg","optionClass","collectArgs","updateVisibility","toggle","updateCallback","addUpdateCallback","shortenExport","dataKeys","shortenExportAssign","parentData","Input","_Option$Base","_class2","defaultValue","_value","Boolean","_Option$Input","_class3","fix","NonBoolean","_Option$Input2","_class4","valueOf","toString","Factor","_Option$NonBoolean","_class5","_this4","availableValues","_Option$NonBoolean2","_class6","_this5","availableMin","availableMax","fixed","Collection","_Option$Base2","_class7","_this6","descriptions","x","subName","subData","entry","fixedEntries","_i3","Void","_Option$Base3","_class8","Checkbox","_Option$Boolean","_class9","Select","_Option$Factor","_class10","Text","_Option$Factor2","_class11","Int","_Option$Number","_class12","Float","_Option$Number2","_class13","_this12","Root","_Option$Collection","_class14","Group","_Option$Collection2","_class15","_Option$Base4","_class16","_this15","availableConstructors","Map","enterArray","_arr3","_i4","ctor","exitArray","typePropertyName","_entries","subDatas","defaultType","_i5","subType","subCtor","_this16","_this17","subFixed","types","_",20,"reset","drag","drag.tip","delete","delete.tip",21,"writeTip","OptionsOutput","optionProto","getPrototypeOf","optionClassWriter","optionClassWriters","setOptionClassWriters","root","getLeadLabel","valueId","valueInfoId","$select","availableValue","some","$tip","handler","find","listId","setInputAttrs","$input","pow","setInputAttrsAndListeners","getOtherInput","$that","parseFloat","$sliderInput","$numberInput","fmt","min","max","infoId","24",22,"OptionVisibilityManager","affects","inArray","updateVisibilityAffectedBy","byFullName","Options","optionClasses","description","_Option$className","className","makeArgs","entriesDescription",23,"RefLines","ref","parse","re","substr","plainOut","href","refs","tipClass","tipContent","popupTimeoutId","popupLevel","handlePopup","dLevel","delay","mouseenter","focusin",25,"_templateObject","_templateObject2","_templateObject3","WebCode","getLines","stylePlaceLines","cachedStyleLines","styleExtractLines","getSectionPasteComment","basename","scriptPlaceLines","cachedScriptLines","scriptExtractLines","htmlExtractLines","getBodyHtmlSectionLines","getFullHtmlSectionLines","cachedHeadLines","cachedBodyLines","_styleLines","styleLines","_headLines","headLines","_bodyLines","bodyLines","_scriptLines","scriptLines","wrappers","pushWrapper",27,"log10","log","LN10","haystack","needle","start","includes","repeat",30,"Feature","AudioContext","_Feature","requestFeatureContext","featureContext","getJsConnectAssignLines","decl","connectors","connectArgs","declTarget","connectArgsConcat","connectReturnValue","connector","_connector","getJsInitLines","prevNodeJsNames","audioContext","noVendorPrefix","38",31,"FilterOptionOutput","BiquadFilterOptionOutput","_FilterOptionOutput","computeCoefs","sampleRate","frequency","detune","Q","gain","post20160415","F_s","f_0","G","A","omega_0","PI","alpha_Q","sin","Q_dB","alpha_B","sqrt","alpha_Q_dB","S","alpha_S","c","cos","aSA2","feedforward","feedback","$cloneUi","writeCloneButton","runIfCanCreateAudioContext","fixedOption","coefs","removeData","getFilterNodes","biquadNode","createBiquadFilter","39",32,"Canvas","getStyleLines","canvasContextProperty","colorOption","cs","color","isBlack","every","getHtmlLines","canvas","width","canvasVolumeGradient","getJsLoopPreLines","background",33,"BaseCodeOutput","_BaseCodeOutput","$warnings","isInteresting","$warning","$section","add","context","source","panner","biquad","iir","convolver","peaking","destination","compressor","analyser","splitter","buffer",34,"Loader","SourceSet","FilterSequence","Destination","BaseWebCode","Code","_BaseWebCode","features","api","loader","sources","filters","feature","alignedInputs","_NoseWrapLines$b","_this3","getNodeJsNames","getJsLoopVisLines","36","40","43","48",35,"CollectionFeature","entryOptions","entryCounts","entryOption","entryClass","getEntryClass","entryCounts2","audioProcessing","enabled","waveform","frequencies","volume","connectSampleToJsNames","connectSampleToCompressor","useDirectAnalyser","useSplitAnalyser","getAnalyserNodeLines","jsName","logFftSize","getCompressorLines","nextNodeJsName","prevNodeJsName","getDirectAnalyserLines","comment","getSplitAnalyserLines","getDestinationLines","getEnterFunctionLines","pushContextForEach","getExitFunctionLines","getVisualizeVolumeLines","getVolumeMeterLines","analyserNodeJsName","xOffset","stereo","getVisualizeFrequenciesLines","nBars","cutoff","base","colorInput","coloringInput","fillStyle","coloring","outline","writeOutline","getVisualizeWaveformLines","conditionAndNameAndFn","condition","fn","pushContextForAll",37,"EqualizerFilterOptionOutput","EqualizerFilter","freq","45","pad","maxNGridLines","fontSize","fontOffset","minFrequencyInLogMode","linearFrequencyArray","logFrequencyArray","logFrequencyArrayLinearLimit0","logFrequencyArrayLinearLimit1","magnitudeArray","phaseArray","magnitudeArray0","phaseArray0","mix","_GroupOptionOutput","$freqResponseUi","isFreqResponseUiShown","magnitudeCanvasContext","phaseCanvasContext","magnitudeLogScale","frequencyLogScale","updatePlots","filterNodes","maxAbs","removeNans","array","interpolate","i0","i1","hasStartValue","hasEndValue","v0","v1","nanStart","isFinite","frequencyArray","filterNode","getFrequencyResponse","_i8","_i9","k","plotResponse","canvasContext","units","enforcedCenter","enforcedRange","enforcedFloor","majorGridLineTest","_Math","_Math2","setPlotRange","min0","max0","ph","minArr","maxArr","minArrCentered","maxArrCentered","calcY","getGridNumbers","numLogs","Infinity","tk","tp","ceil","dv","drawGrid","visibleNumbers","calcPosition","labelLimit","_Math3","translate","font","textAlign","getLabel","labelWidth","measureText","_i6","round","drawLine","beginPath","moveTo","lineTo","stroke","majorGridLine","strokeStyle","setLineDash","lineWidth","fillText","restore","drawYGrid","yGridNumbersAndPrecision","yVisibleGridNumbers","drawXGrid","yLabelWidth","rotate","calcX","xGridNumbersAndPrecision","xVisibleGridNumbers","drawGraph","_i7","clearRect","delayedUpdate","$frOption","$button","replaceWith","$magnitudeCanvas","$phaseCanvas","getContext","$ui","errorMessage","initAudioContext","webkitAudioContext","Float32Array","maxFrequency","log10minFrequency","log10maxFrequency","_templateObject4","_templateObject5","_templateObject6","camelCase","Filter","getPropertyOptionName","property","getPropertyInputHtmlName","propertyName","nSuffix","getPropertyInputJsName","hasRangeInputs","nodeProperties","input","getHtmlPropertyLines","skip","inputHtmlName","fmtAttrs","fmtLabels","minMax","_WrapLines$b","nodeJsName","ctxCreateMethodName","nodeJsNames","SinglePathFilter","_Filter","nodePropertyJsName","inputJsName","eventProp","PassiveByDefaultSinglePathFilter","_SinglePathFilter","_this7","filterClasses","_PassiveByDefaultSing","_PassiveByDefaultSing2","_SinglePathFilter2","BiquadFilter","typeUsesQ","typeUsesGain","_SinglePathFilter3","_Filter2","messageHtmlName","reverb","wetGainNodeJsName","dryGainNodeJsName","loaderOnError","equalizer","_Filter3","getFrequencyOption","allGainsConstant","_this14","singleFreq","affectedFreqsAndOptions","fo","noGainsConstant","getJsData","getJsDataItem","getJsLoopLines","inputHtmlNameExpr","setConnectSampleToJsNames","connectToNodeJsName","constLines","varLines","outerNodeJsName","filter","_CollectionFeature","skipNode","connectToNodeJsNames",41,"webaudioSpec","webaudioIssue","webaudioDetect","enColors","ruColors","options.sources","options.sources.{audio,video}","options.sources.{audio,video}.add","options.sources.sample","options.sources.sample.add","options.sources.sample.buffer.loading","options.sources.sample.buffer.error","options.sources.sample.repeat","options.sources.sample.interval","options.sources.sample.randomShift","options.sources.sample.pitch","options.sources.sample.randomPitch","options.sources.sample.gain","options.sources.sample.randomGain","options.sources.{audio,video,sample}.url","options.sources.video.{width,height}","options.filters","options.filters.gain","options.filters.gain.add","options.filters.gain.gain","options.filters.panner","options.filters.panner.add","options.filters.panner.pan","options.filters.biquad","options.filters.biquad.add","options.filters.biquad.type","options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}","options.filters.biquad.frequency","options.filters.biquad.detune","options.filters.biquad.Q","options.filters.biquad.gain","options.filters.iir","options.filters.iir.add","options.filters.iir.feedforward","options.filters.iir.feedforward.b","options.filters.iir.feedforward.b.add","options.filters.iir.feedback","options.filters.iir.feedback.a","options.filters.iir.feedback.a.add","options.filters.convolver","options.filters.convolver.add","options.filters.convolver.url","options.filters.convolver.reverb","options.filters.convolver.buffer.loading","options.filters.convolver.buffer.error","options.filters.equalizer","options.filters.equalizer.add","options.filters.equalizer.gain{60,170,350,1000,3500,10000}","options.destination","options.destination.compressor","options.destination.compressor.enabled","options.destination.{waveform,frequencies}","options.destination.{waveform,frequencies}.enabled","options.destination.waveform.width","options.destination.waveform.color","options.destination.waveform.color.{r,g,b,a}","options.destination.frequencies.cutoff","options.destination.frequencies.base","options.destination.frequencies.base.{bottom,middle}","options.destination.frequencies.coloring","options.destination.frequencies.coloring.component","options.destination.frequencies.coloring.spectral","options.destination.frequencies.coloringInput","options.destination.frequencies.coloringInput.{amplitude,frequency}","options.destination.frequencies.outline","options.destination.frequencies.outline.enabled","options.destination.frequencies.outline.width","options.destination.frequencies.outline.color","options.destination.frequencies.outline.color.{r,g,b,a}","options.destination.volume","options.destination.volume.enabled","options.destination.volume.stereo","options.destination.analyser","options.destination.analyser.logFftSize","options.canvas","options.canvas.{width,height}","options.canvas.background","options.canvas.background.type","options.canvas.background.type.{clear,filled}","options.canvas.background.color","options.canvas.background.color.{r,g,b,a}","options.loader","options.loader.errors","options.loader.errors.none","options.loader.errors.network","options.loader.errors.http","options.api","options.api.noVendorPrefix","options.api.connectReturnValue","options-info.destination.analyser.logFftSize","options-info.canvas.background.color.a","options-output.input","options-output.range","options-output.filter.frequencyResponse","options-output.filter.magnitude","options-output.filter.phase","options-output.filter.logMagnitude","options-output.filter.logFrequency","options-output.filter.contextError","options-output.filter.nodeError","options-output.filter.biquad.clone","options-output.filter.biquad.clone.{pre,post}","options-output.filter.biquad.clone.info","options-output.show","options-output.hide","code-output.warning.jsfiddle-run","code-output.warning.interesting","code.title","label.sources.sample.play","label.destination.compressor","comment.context","comment.sources.audio","comment.sources.video","comment.sources.sample","comment.filters.gain","comment.filters.panner","comment.filters.biquad","comment.filters.iir","comment.filters.convolver","comment.filters.convolver.single","comment.filters.equalizer","comment.filters.equalizer.single","comment.destination","comment.destination.compressor","comment.destination.analyser","comment.destination.analyser.{waveform,frequencies,waveform+frequencies}","comment.destination.analyser.split","units.pixel.a","units.pixel.{1,2}","units.hertz.a","units.hertz.{1,2}","units.decibel.a","units.decibel.{1,2}","units.second.a","units.second.{1,2}","options.filters.biquad.type.lowpass","options.filters.biquad.type.highpass","options.filters.biquad.type.bandpass","options.filters.biquad.type.{lowshelf,highshelf,peaking}","options.filters.biquad.type.notch","options.filters.biquad.type.allpass","units.pixel.{1,2,5}","units.hertz.{1,2,5}","units.decibel.{1,2,5}","units.second.{1,2,5}",42,"IIRFilterOptionOutput","createIIRFilter","errors",44,"idCounter","i18ns","$container","codeOutput","optionsOutput","46","47","LiveNumber","dataValue","dataMin","dataMax","dataInput","defaultMin","defaultMax","_min","_max","_input","_$range","updateInternalVisibility","exportHelper","src","$range","LiveInt","_Option$LiveNumber","LiveFloat","_Option$LiveNumber2","FixedLiveSelect","LiveSelect","_Option$Select","AnyFloat","_Option$Group","lowpass","highpass","bandpass","notch","allpass","lowshelf","highshelf","IIRFilterCoefs","_Option$Array","IIRFilter","_Option$Group2","_Option$Group3","Filters","_Option$Array2","BaseOptionsOutput","FiltersOptionOutput","_ArrayOptionOutput","$subOutput","IIRFilterCoefsOptionOutput","_ArrayOptionOutput2","updateArrayEntryLabels","_BaseOptionsOutput","writeMinMaxInput","minOrMax","$inputCheckbox","$rangeMinInput","$rangeMaxInput","BaseOptions","_BaseOptions","destination.waveform.enabled","destination.frequencies.enabled","destination.frequencies.outline.enabled","destination.volume.enabled","canvas.background.type","Source","getElementHtmlLines","elementHtmlName","sourceClasses","audio","_Source","video","_Source2","sample","_Source3","fmtMul","fmtNum","getSampleLines","startOptions","randomValue","baseOption","randomOption","random","lastNodeName","pitch","randomPitch","randomGain","getOnClickLines","interval","randomShift","getOnDecodeLines","getOnErrorLines","leadLines","midLines","endLines"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    'use strict';\n    function ___babelHelper___typeof(obj) {\n        return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n    }\n    function ___babelHelper___createClass(Constructor, protoProps, staticProps) {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if ('value' in descriptor)\n                    descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n        if (protoProps)\n            defineProperties(Constructor.prototype, protoProps);\n        if (staticProps)\n            defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n    function ___babelHelper___classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n    function ___babelHelper___possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n        }\n        return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n    }\n    function ___babelHelper___inherits(subClass, superClass) {\n        function defaults(obj, defaults) {\n            var keys = Object.getOwnPropertyNames(defaults);\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = Object.getOwnPropertyDescriptor(defaults, key);\n                if (value && value.configurable && obj[key] === undefined) {\n                    Object.defineProperty(obj, key, value);\n                }\n            }\n            return obj;\n        }\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n        }\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass)\n            defaults(subClass, superClass);\n    }\n    function ___babelHelper___taggedTemplateLiteralLoose(strings, raw) {\n        strings.raw = raw;\n        return strings;\n    }\n    ;\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                var ArrayOptionOutput = function () {\n                    function ArrayOptionOutput(option, writeOption, i18n, generateId) {\n                        var _this = this;\n                        ___babelHelper___classCallCheck(this, ArrayOptionOutput);\n                        this.option = option;\n                        this.$dragged = null;\n                        this.$entries = $('<div>').append(option.entries.map(function (subOption) {\n                            return _this.writeDraggableSubOption(subOption, writeOption, i18n);\n                        }));\n                        var $buttons = $('<div class=\\'buttons\\'>');\n                        option.availableTypes.forEach(function (type, i) {\n                            if (i)\n                                $buttons.append(' ');\n                            $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                //option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\n                                _this.$entries.append(_this.writeDraggableSubOption(option.makeEntry(type), writeOption, i18n));\n                                _this.updateArrayEntries();\n                            }));\n                        });\n                        this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>', this.$entries, $buttons);\n                    }\n                    ArrayOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return true;\n                    };\n                    ArrayOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        this.option.entries = this.$entries.children().map(function () {\n                            return $(this).data('option');\n                        }).get();\n                    };\n                    ArrayOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var _this2 = this;\n                        // have to make drag handler 'draggable', not the whole item\n                        // because inputs and labels don't like to be inside 'draggable'\n                        // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                        var moveUp = function ($moved) {\n                            $moved.prev().before($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var moveDown = function ($moved) {\n                            $moved.next().after($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var attemptDelete = function ($entry) {\n                            if (_this2.canDeleteEntry($entry)) {\n                                $entry.remove();\n                                _this2.updateArrayEntries();\n                            }\n                        };\n                        var This = this;\n                        return $('<div class=\\'draggable-with-handle\\'>').data('option', subOption).append(writeOption(subOption), ' ', $('<span draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag.tip') + '\\'>').append('<span>' + i18n('options-output.drag') + '</span>').on('dragstart', function (ev) {\n                            This.$dragged = $(this).parent();\n                            ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                            ev.originalEvent.dataTransfer.setData('Text', name);\n                            if (ev.originalEvent.dataTransfer.setDragImage) {\n                                // doesn't work in IE\n                                ev.originalEvent.dataTransfer.setDragImage(This.$dragged[0], 0, 0);\n                            }\n                            setTimeout(function () {\n                                This.$dragged.addClass('ghost');\n                            }, 0);\n                        }).on('touchstart', function (ev) {\n                            var $sorted = $(this).parent();\n                            $sorted.addClass('ghost');\n                            return false;    // disable touch panning on Firefox\n                        }).on('touchmove', function (ev) {\n                            var $sorted = $(this).parent();\n                            var h = $sorted.height();\n                            var t = $sorted.offset().top;\n                            var y = ev.originalEvent.touches[0].pageY;\n                            // TODO test if length of touches is 1\n                            var $prev = $sorted.prev();\n                            if ($prev.length && y < t && y - $prev.offset().top < h) {\n                                moveUp($sorted);\n                            }\n                            var $next = $sorted.next();\n                            if ($next.length && y > t + h && y - $next.offset().top > $next.height() - h) {\n                                moveDown($sorted);\n                            }\n                            return false;    // disable touch panning\n                        }).on('touchend touchcancel', function (ev) {\n                            var $sorted = $(this).parent();\n                            $sorted.removeClass('ghost');\n                        }).keydown(function (ev) {\n                            var $handle = $(this);\n                            var $sorted = $handle.parent();\n                            if (ev.keyCode == 38) {\n                                moveUp($sorted);\n                                $handle.focus();\n                                return false;\n                            } else if (ev.keyCode == 40) {\n                                moveDown($sorted);\n                                $handle.focus();\n                                return false;\n                            }\n                        }), ' ', $('<button class=\\'delete\\' title=\\'' + i18n('options-output.delete.tip') + '\\'>').append('<span>' + i18n('options-output.delete') + '</span>').click(function () {\n                            attemptDelete($(this).parent());\n                        }).keydown(function (ev) {\n                            if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                attemptDelete($(this).parent());\n                                return false;\n                            }\n                        })).on('dragover', function (ev) {\n                            ev.preventDefault();\n                            ev.originalEvent.dataTransfer.dropEffect = 'move';\n                            var $target = $(this);\n                            if (This.$dragged) {\n                                if ($target.next().is(This.$dragged)) {\n                                    var dh = This.$dragged.height();\n                                    var y = ev.pageY - $target.offset().top;\n                                    if (y < dh) {\n                                        moveUp(This.$dragged);\n                                    }\n                                } else if ($target.nextAll().is(This.$dragged)) {\n                                    moveUp(This.$dragged);\n                                } else if ($target.prev().is(This.$dragged)) {\n                                    var th = $target.height();\n                                    var _dh = This.$dragged.height();\n                                    var _y = ev.pageY - $target.offset().top;\n                                    if (_y > th - _dh) {\n                                        moveDown(This.$dragged);\n                                    }\n                                } else if ($target.prevAll().is(This.$dragged)) {\n                                    moveDown(This.$dragged);\n                                }\n                            }\n                        }).on('drop', function (ev) {\n                            ev.preventDefault();\n                        }).on('dragend', function (ev) {\n                            ev.preventDefault();\n                            if (This.$dragged) {\n                                This.$dragged.removeClass('ghost');\n                                This.$dragged = null;\n                            }\n                        });\n                    };\n                    return ArrayOptionOutput;\n                }();\n                module.exports = ArrayOptionOutput;\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'code-output';\n                        var additionalStrings = {\n                            en: {\n                                'save': 'Save source code',\n                                'run': 'Run in new window',\n                                'open.codepen': 'Open in CodePen',\n                                'open.jsfiddle': 'Open in JSFiddle',\n                                'open.plunker': 'Open in Plunker',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': 'embedded in HTML source code',\n                                'mode.full': 'complete HTML',\n                                'mode.body': 'only HTML body',\n                                'mode.embed': 'embed in HTML',\n                                'mode.paste': 'extract to paste into HTML later',\n                                'mode.file': 'extract to load as external resource',\n                                'formatting': 'Formatting',\n                                'formatting.indent': 'indent with tabs',\n                                'formatting.indentNumber': 'spaces per indent',\n                                'formatting.jsSemicolons': 'JavaScript semicolons',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.'\n                            },\n                            ru: {\n                                'save': 'Сохранить исходный код',\n                                'run': 'Запустить в новом окне',\n                                'open.codepen': 'Открыть в CodePen',\n                                'open.jsfiddle': 'Открыть в JSFiddle',\n                                'open.plunker': 'Открыть в Plunker',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': 'встроен в код HTML',\n                                'mode.full': 'полностью',\n                                'mode.body': 'только <code>body</code>',\n                                'mode.embed': 'встроить в HTML',\n                                'mode.paste': 'извлечь для последующей вставки в HTML',\n                                'mode.file': 'извлечь для загрузки в качестве внешнего ресурса',\n                                'formatting': 'Форматирование',\n                                'formatting.indent': 'отступы с помощью tab',\n                                'formatting.indentNumber': 'пробелов в отступе',\n                                'formatting.jsSemicolons': '<code>;</code> в JavaScript',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена.'\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        3: [\n            function (require, module, exports) {\n                var debounce = require(8);\n                var detailsPolyfill = require(5);\n                var getHtmlDataUri = function (html) {\n                    return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                };\n                var makeObjectWithSetters = function (values, setCallback) {\n                    var obj = {};\n                    var _loop = function (prop) {\n                        Object.defineProperty(obj, prop, {\n                            get: function () {\n                                return values[prop];\n                            },\n                            set: function (v) {\n                                values[prop] = v;\n                                setCallback();\n                            }\n                        });\n                    };\n                    for (var prop in values) {\n                        _loop(prop);\n                    }\n                    return obj;\n                };\n                var CodeOutput = function () {\n                    function CodeOutput(generateCode, i18n) {\n                        var _this = this;\n                        ___babelHelper___classCallCheck(this, CodeOutput);\n                        this.formatting = makeObjectWithSetters(this.defaultFormatting, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this.sectionModes = makeObjectWithSetters({\n                            html: 'full',\n                            css: 'embed',\n                            js: 'embed'\n                        }, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this._code = generateCode();\n                        this.update = debounce(function () {\n                            _this._code = generateCode();\n                            _this.applyUpdatedCode(i18n);\n                        }, 200);\n                        this.initDomProps();\n                        var writeFormattingControls = function () {\n                            var This = _this;\n                            var $indentCheckbox = undefined, $indentNumber = undefined;\n                            var updateIndent = function () {\n                                var indent = '\\t';\n                                if (!$indentCheckbox.prop('checked')) {\n                                    var n = 4;\n                                    if ($indentNumber[0].checkValidity()) {\n                                        n = Number($indentNumber.val());\n                                    }\n                                    indent = require(29)(' ')(n);\n                                }\n                                _this.formatting.indent = indent;\n                            };\n                            return $('<details>').append('<summary>' + i18n('code-output.formatting') + '</summary>', $('<div>').append($('<label>').append($indentCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.indent == '\\t').change(updateIndent), ' ' + i18n('code-output.formatting.indent'))), $('<div>').append($('<label>').append($indentNumber = $('<input type=\\'number\\' min=\\'0\\' max=\\'32\\' required>').val(_this.formatting.indent == '\\t' ? 4 : _this.formatting.indent.length).on('input change', updateIndent), ' ' + i18n('code-output.formatting.indentNumber'))), $('<div>').append($('<label>').append($('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.jsSemicolons).change(function () {\n                                This.formatting.jsSemicolons = this.checked;\n                            }), ' ' + i18n('code-output.formatting.jsSemicolons')))).each(detailsPolyfill);\n                        };\n                        var writeSection = function (sectionName) {\n                            return $('<details open>').append(_this.writeSectionSummary(sectionName, i18n), _this.$sectionCode[sectionName] = $('<div class=\\'code\\'>')).each(detailsPolyfill);\n                        };\n                        var $output = $('<div class=\\'code-output\\'>').append(this.writeButtons(i18n)).append(writeFormattingControls(), writeSection('html'), writeSection('css'), writeSection('js'));\n                        if (!window.hljs) {\n                            $output.append('<p>' + i18n('code-output.warning.no-hljs') + '</p>');\n                        }\n                        $output.append(this.writeButtons(i18n));\n                        this.applyUpdatedCode(i18n);\n                        // public interface:\n                        // this.update\n                        this.$output = $output;\n                    }\n                    // private interface:\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        this.$sectionCode = {};\n                        this.$saveButtons = {};\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\n                        var sections = this.code.extractSections(this.sectionModes);\n                        for (var sectionName in sections) {\n                            if (this.sectionModes[sectionName] == 'embed') {\n                                this.$sectionCode[sectionName].empty().append('<p>' + i18n('code-output.embedded') + '</p>');\n                            } else {\n                                var $code = undefined;\n                                this.$sectionCode[sectionName].empty().append($('<pre>').append($code = $('<code class=\\'' + sectionName + '\\'>')));\n                                $code.html(sections[sectionName].getHtml(this.formatting).join('\\n'));\n                                if (window.hljs) {\n                                    hljs.highlightBlock($code[0]);\n                                }\n                            }\n                            if (sectionName != 'html') {\n                                // extractable section\n                                this.$saveButtons[sectionName].prop('disabled', this.sectionModes[sectionName] == 'embed');\n                            }\n                        }\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        var This = this;\n                        var postData = function (url, target, data) {\n                            var $form = $('<form method=\\'post\\' action=\\'' + url + '\\' target=\\'' + target + '\\'>');\n                            for (var name in data) {\n                                $form.append($('<input type=\\'hidden\\'>').attr('name', name).val(data[name]));\n                            }\n                            $form.appendTo('body').submit().remove();\n                        };\n                        return $('<div>').append($('<button type=\\'button\\'>' + i18n('code-output.run') + '</button>').click(function () {\n                            var html = This.code.get(This.formatting).join('\\n');\n                            if (navigator.msSaveOrOpenBlob) {\n                                // has drawbacks:\n                                // * Firefox and Chrome have trouble showing the source\n                                // * weird bug in Firefox:\n                                //   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\n                                // * Firefox shows url of a generator page\n                                var w = window.open('', 'generatedCode');\n                                w.document.open();\n                                w.document.write(html);\n                                w.document.close();\n                            } else {\n                                // has drawbacks:\n                                // * doesn't work in IE b/c they decided it's security risk\n                                // * long url\n                                window.open(getHtmlDataUri(html), 'generatedCode');\n                            }\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.codepen') + '</button>').click(function () {\n                            // http://blog.codepen.io/documentation/api/prefill/\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://codepen.io/pen/define/', 'codepenGeneratedCode', {\n                                data: JSON.stringify({\n                                    html: getSection('html'),\n                                    css: getSection('css'),\n                                    js: getSection('js'),\n                                    title: This.code.title\n                                })\n                            });\n                        }), // doesn't work?\n                        ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.jsfiddle') + '</button>').click(function () {\n                            // http://doc.jsfiddle.net/api/post.html\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://jsfiddle.net/api/post/library/pure/', 'jsfiddleGeneratedCode', {\n                                html: getSection('html'),\n                                css: getSection('css'),\n                                js: getSection('js'),\n                                title: This.code.title,\n                                wrap: 'b'\n                            });\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.plunker') + '</button>').click(function () {\n                            var _postData;\n                            // https://github.com/angular/angular.js/blob/489835dd0b36a108bedd5ded439a186aca4fa739/docs/app/src/examples.js#L139-L157\n                            var sections = This.code.extractSections({\n                                html: 'full',\n                                css: 'file',\n                                js: 'file'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://plnkr.co/edit/?p=preview', 'plunkerGeneratedCode', (_postData = {}, _postData['files[index.html]'] = getSection('html'), _postData['files[' + sections['css'].filename + ']'] = getSection('css'), _postData['files[' + sections['js'].filename + ']'] = getSection('js'), _postData['private'] = true, _postData));\n                        }));\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var This = this;\n                        var $summary = $('<summary>' + i18n('code-output.section.' + sectionName) + '</summary>');\n                        $summary.append(' ', $('<select>').append((sectionName == 'html' ? [\n                            'full',\n                            'body'\n                        ] : [\n                            'embed',\n                            'paste',\n                            'file'\n                        ]).map(function (mode) {\n                            return $('<option>').val(mode).html(i18n('code-output.mode.' + mode));\n                        })).val(this.sectionModes[sectionName]).change(function () {\n                            This.sectionModes[sectionName] = this.value;\n                        }), ' ', // doesn't work in IE\n                        //$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\n                        //\t// yes I want a button, but download attr is only available for links\n                        //\t$(this).attr('href',getHtmlDataUri(\n                        //\t\tsection.get(this.formatting).join(\"\\n\")\n                        //\t))\n                        //})\n                        this.$saveButtons[sectionName] = $('<button type=\\'button\\'>' + i18n('code-output.save') + '</button>').click(function () {\n                            var section = This.code.extractSections(This.sectionModes)[sectionName];\n                            // http://stackoverflow.com/a/24354303\n                            var blob = new Blob([section.get(This.formatting).join('\\n')], { type: section.mimeType });\n                            if (navigator.msSaveOrOpenBlob) {\n                                navigator.msSaveOrOpenBlob(blob, section.filename);\n                            } else {\n                                var $a = $('<a>').attr('download', section.filename).attr('href', URL.createObjectURL(blob)).appendTo('body');\n                                $a.get(0).click();\n                                $a.remove();\n                            }\n                        }));\n                        return $summary;\n                    };\n                    ___babelHelper___createClass(CodeOutput, [\n                        {\n                            key: 'code',\n                            get: function () {\n                                this.update.flush();\n                                return this._code;\n                            }    // extend/override fns:\n                        },\n                        {\n                            key: 'defaultFormatting',\n                            get: function () {\n                                return {\n                                    indent: '\\t',\n                                    jsSemicolons: false\n                                };\n                            }\n                        }\n                    ]);\n                    return CodeOutput;\n                }();\n                module.exports = CodeOutput;\n            },\n            {\n                '29': 29,\n                '5': 5,\n                '8': 8\n            }\n        ],\n        4: [\n            function (require, module, exports) {\n                var CodeSection = function () {\n                    function CodeSection(filename, mimeType, lines) {\n                        ___babelHelper___classCallCheck(this, CodeSection);\n                        this.filename = filename;\n                        this.mimeType = mimeType;\n                        this.lines = lines;\n                    }\n                    CodeSection.prototype.get = function get(formatting) {\n                        return this.lines.get(formatting);\n                    };\n                    CodeSection.prototype.getHtml = function getHtml(formatting) {\n                        return this.lines.getHtml(formatting);\n                    };\n                    return CodeSection;\n                }();\n                module.exports = CodeSection;\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                var detailsSupported = 'open' in document.createElement('details');\n                // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\n                module.exports = function () {\n                    // to be called in .each()\n                    if (detailsSupported)\n                        return;\n                    var $details = $(this);\n                    var toggleOpen = function () {\n                        if (!$details.attr('open')) {\n                            $details.attr('open', '');\n                        } else {\n                            $details.removeAttr('open');\n                        }\n                    };\n                    var keyCodeEnter = 13;\n                    var keyCodeSpace = 32;\n                    var handleEvent = function (ev) {\n                        return $(ev.target).closest('summary, :input, a[href]').is('summary');\n                    };\n                    // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\n                    $details.addClass('polyfill').children('summary').attr('tabindex', 0).click(function (ev) {\n                        if (handleEvent(ev)) {\n                            toggleOpen();\n                        }\n                    }).keydown(function (ev) {\n                        if (handleEvent(ev) && (ev.keyCode == keyCodeEnter || ev.keyCode == keyCodeSpace)) {\n                            toggleOpen();\n                            return false;\n                        }\n                    });\n                };\n            },\n            {}\n        ],\n        6: [\n            function (require, module, exports) {\n                // assumes string is dot-separated, like this: \"some.html.id\"\n                var capitalize = require(7);\n                module.exports = function (s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                };\n            },\n            { '7': 7 }\n        ],\n        7: [\n            function (require, module, exports) {\n                // assumes string is lowercase\n                module.exports = function (s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                };\n            },\n            {}\n        ],\n        8: [\n            function (require, module, exports) {\n                // no options\n                module.exports = function (func, wait) {\n                    var timeoutId = null;\n                    var debounced = function () {\n                        clearTimeout(timeoutId);\n                        timeoutId = setTimeout(function () {\n                            timeoutId = null;\n                            func();\n                        }, wait);\n                    };\n                    debounced.flush = function () {\n                        if (timeoutId) {\n                            timeoutId = null;\n                            func();\n                        }\n                    };\n                    return debounced;\n                };\n            },\n            {}\n        ],\n        9: [\n            function (require, module, exports) {\n                module.exports = function (s) {\n                    var entityMap = {\n                        '&': '&amp;',\n                        '<': '&lt;',\n                        '>': '&gt;',\n                        '\"': '&quot;',\n                        '\\'': '&#39;'\n                    };\n                    // lodash also escapes `\n                    return String(s).replace(/[&<>\"']/g, function (m) {\n                        return entityMap[m];\n                    });\n                };\n            },\n            {}\n        ],\n        10: [\n            function (require, module, exports) {\n                var formatNumbersInternal = function (numbers, precision, keepDot, noPlus) {\n                    var maxPrecision = 0;\n                    if (keepDot) {\n                        maxPrecision = 1;\n                    }\n                    var hasNegative = false;\n                    for (var i in numbers) {\n                        var p = undefined;\n                        if (precision !== undefined) {\n                            p = precision;\n                        } else if (numbers[i].precision !== undefined) {\n                            p = numbers[i].precision;\n                        } else {\n                            throw new Error('formatNumbers received no precision');\n                        }\n                        var number = Number(numbers[i]);\n                        var s = number.toFixed(p);\n                        if (Number(s) < 0) {\n                            // protects against negative zero\n                            hasNegative = true;\n                        }\n                        if (p > 0) {\n                            p -= s.match(/0*$/)[0].length;\n                        }\n                        if (p > maxPrecision) {\n                            maxPrecision = p;\n                        }\n                    }\n                    var ss = Array.isArray(numbers) ? [] : {};\n                    for (var _i in numbers) {\n                        var _number = Number(numbers[_i]);\n                        var _s = _number.toFixed(maxPrecision);\n                        if (Number(_s) >= 0 && _s.charAt(0) == '-') {\n                            // protects against negative zero\n                            _s = _s.slice(1);\n                        }\n                        if (!noPlus && hasNegative && _number > 0) {\n                            _s = '+' + _s;\n                        }\n                        ss[_i] = _s;\n                    }\n                    return ss;\n                };\n                var formatNumbers = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.html = function (number, precision) {\n                    return formatNumbersInternal(number, precision, false, true);\n                };\n                formatNumbers.js = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.glsl = function (number, precision) {\n                    return formatNumbersInternal(number, precision, true);\n                };\n                module.exports = formatNumbers;\n            },\n            {}\n        ],\n        11: [\n            function (require, module, exports) {\n                var GroupOptionOutput = function GroupOptionOutput(option, writeOption, i18n, generateId) {\n                    ___babelHelper___classCallCheck(this, GroupOptionOutput);\n                    this.option = option;\n                    this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append(option.entries.map(writeOption));\n                };\n                module.exports = GroupOptionOutput;\n            },\n            {}\n        ],\n        12: [\n            function (require, module, exports) {\n                module.exports = function (inStrings) {\n                    var strings = {};\n                    var expandRegexp = /^([^{]*)\\{([^}]*)\\}(.*)$/;\n                    function expandIdAndString(id, string) {\n                        var idMatch = expandRegexp.exec(id);\n                        if (idMatch) {\n                            (function () {\n                                var idStart = idMatch[1];\n                                var idMidsStr = idMatch[2];\n                                var idEnd = idMatch[3];\n                                var idMids = idMidsStr.split(',');\n                                var stringMatch = expandRegexp.exec(string);\n                                if (stringMatch) {\n                                    (function () {\n                                        var stringStart = stringMatch[1];\n                                        var stringMidsStr = stringMatch[2];\n                                        var stringEnd = stringMatch[3];\n                                        var stringMids = stringMidsStr.split(',');\n                                        idMids.forEach(function (idMid, i) {\n                                            if (stringMidsStr != '') {\n                                                var stringMid = stringMids[i];\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + stringMid + stringEnd);\n                                            } else {\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + idMid + stringEnd);\n                                            }\n                                        });\n                                    }());\n                                } else {\n                                    idMids.forEach(function (idMid) {\n                                        expandIdAndString(idStart + idMid + idEnd, string);\n                                    });\n                                }\n                            }());\n                        } else {\n                            strings[id] = string;\n                        }\n                    }\n                    for (var id in inStrings) {\n                        expandIdAndString(id, inStrings[id]);\n                    }\n                    return strings;\n                };\n            },\n            {}\n        ],\n        13: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        for (var id in strings) {\n                            strings[id] = strings[id].replace(/\\[\\[(.*?)\\]\\]/g, function (match, p1) {\n                                var link = undefined, text = undefined;\n                                var i = p1.indexOf('|');\n                                if (i < 0) {\n                                    link = p1;\n                                    text = p1;\n                                } else {\n                                    link = p1.slice(0, i);\n                                    text = p1.slice(i + 1);\n                                }\n                                return '<a href=\\'https://' + lang + '.wikipedia.org/wiki/' + link.replace(/ /g, '_') + '\\'>' + text + '</a>';\n                            });\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        14: [\n            function (require, module, exports) {\n                var escape = require(9);\n                module.exports = function (langStrings) {\n                    return function (lang) {\n                        var defaultLang = 'en';\n                        lang = lang || defaultLang;\n                        lang = lang.split('-')[0];\n                        // get primary language subtag\n                        var strings = langStrings[lang];\n                        if (strings === undefined) {\n                            lang = defaultLang;\n                            strings = langStrings[lang];\n                        }\n                        var i18n = function (id) {\n                            if (strings[id] !== undefined) {\n                                return strings[id];\n                            } else {\n                                throw new Error('undefined string ' + id);\n                            }\n                        };\n                        i18n.lang = lang;\n                        i18n.has = function (id) {\n                            return strings[id] !== undefined;\n                        };\n                        if (lang == 'en') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (require(28)(ns    /*:string*/)('.')) {\n                                    return '2';\n                                } else {\n                                    var nn = Number(n);\n                                    if (Math.abs(nn) == 1) {\n                                        return '1';\n                                    } else {\n                                        return '2';\n                                    }\n                                }\n                            };\n                        } else if (lang == 'ru') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212').replace('.', ',');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (require(28)(ns    /*:string*/)('.')) {\n                                    return '2';\n                                } else {\n                                    var teen = ns.slice(-2, -1) === '1';\n                                    if (ns.slice(-1) === '1' && !teen) {\n                                        return '1';\n                                    } else if (require(28)('234')(ns.slice(-1)) && !teen) {\n                                        return '2';\n                                    } else {\n                                        return '5';\n                                    }\n                                }\n                            };\n                        }\n                        i18n.plural = function (n, id) {\n                            return this(id + '.' + this.pluralSuffix(n));\n                        };\n                        i18n.numberWithUnits = function (n, unit, abbrFn) {\n                            if (abbrFn === undefined) {\n                                // codegen needs its own fn\n                                abbrFn = function (abbr, expansion) {\n                                    return '<abbr title=\\'' + escape(expansion) + '\\'>' + abbr + '</abbr>';\n                                };    // expansion is html for stuff like s^(-1)\n                            }\n                            var s = this.number(n);\n                            if (unit !== undefined) {\n                                if (unit.length == 1 && /^\\W/.test(unit)) {\n                                    s += unit;\n                                } else {\n                                    s += ' ';\n                                    // nbsp\n                                    var abbr = undefined;\n                                    if (unit == '1/second') {\n                                        abbr = i18n('units.second.a') + '<sup>\\u22121</sup>';\n                                    } else {\n                                        abbr = i18n('units.' + unit + '.a');\n                                    }\n                                    var expansion = this.plural(n, 'units.' + unit);\n                                    s += abbrFn(abbr, expansion);\n                                }\n                            }\n                            return s;\n                        };\n                        return i18n;\n                    };\n                };\n            },\n            {\n                '28': 28,\n                '9': 9\n            }\n        ],\n        15: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var InterleaveLines = function (_Lines) {\n                    ___babelHelper___inherits(InterleaveLines, _Lines);\n                    function InterleaveLines() {\n                        ___babelHelper___classCallCheck(this, InterleaveLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    InterleaveLines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var first = true;\n                        var fp = function () {\n                            if (first) {\n                                first = false;\n                            } else {\n                                out.push('');\n                            }\n                        };\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (subOut.length > 0) {\n                                    fp();\n                                    out.push.apply(out, subOut);\n                                }\n                            } else if (typeof item == 'string') {\n                                fp();\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                        }\n                        return out;\n                    };\n                    return InterleaveLines;\n                }(Lines);\n                module.exports = InterleaveLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        16: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var JsLines = function (_Lines) {\n                    ___babelHelper___inherits(JsLines, _Lines);\n                    function JsLines() {\n                        ___babelHelper___classCallCheck(this, JsLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    JsLines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        if (formatting.jsSemicolons) {\n                            return s.replace(/^;/, '');\n                        } else {\n                            return s.replace(/;$/, '');\n                        }\n                    };\n                    return JsLines;\n                }(Lines);\n                module.exports = JsLines;\n            },\n            { '17': 17 }\n        ],\n        17: [\n            function (require, module, exports) {\n                /*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\n                var escape = require(9);\n                var TO = {};\n                // TODO Symbol\n                var Lines = function () {\n                    // lines private interface:\n                    function Lines(data) {\n                        ___babelHelper___classCallCheck(this, Lines);\n                        if (!Array.isArray(data)) {\n                            throw new TypeError('attempted to construct Lines with non-array data argument');\n                        }\n                        this.data = data;\n                    }\n                    Lines.prototype.isDataEmpty = function isDataEmpty() {\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                if (!item.isEmpty()) {\n                                    return false;\n                                }\n                            } else if (typeof item == 'string') {\n                                return false;\n                            }\n                        }\n                        return true;\n                    };\n                    Lines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        return s;\n                    };\n                    Lines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var addTo = false;\n                        var _arr2 = this.data;\n                        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n                            var item = _arr2[_i2];\n                            if (item === TO) {\n                                addTo = true;\n                            } else if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (addTo && subOut.length > 0) {\n                                    out.push(out.pop() + subOut.shift());\n                                }\n                                out.push.apply(out, subOut);\n                                addTo = false;\n                            } else if (typeof item == 'string') {\n                                var s = this.processStringInGet(item, formatting);\n                                if (formatting.indent !== undefined && formatting.indent != '\\t') {\n                                    s = s.replace(/^(\\t)+/, function (match) {\n                                        return require(29)(formatting.indent)(match.length);\n                                    });\n                                }\n                                s = html ? escape(s) : s;\n                                if (addTo) {\n                                    out.push(out.pop() + s);\n                                } else {\n                                    out.push(s);\n                                }\n                                addTo = false;\n                            }\n                        }\n                        return out;\n                    };\n                    // lines public interface:\n                    Lines.b = function b() {\n                        var _this = this, _arguments = arguments;\n                        var data = [];\n                        var makeLines = function () {\n                            return new (Function.prototype.bind.apply(_this, [null].concat([data], Array.prototype.slice.call(_arguments))))();\n                        };\n                        var a = function () {\n                            return a.a.apply(a, arguments);\n                        };\n                        a.a = function () {\n                            data.push.apply(data, arguments);\n                            return this;\n                        };\n                        a.t = function () {\n                            data.push.apply(data, [TO].concat(Array.prototype.slice.call(arguments)));\n                            return this;\n                        };\n                        a.e = makeLines;\n                        a.ae = function () {\n                            return this.a.apply(this, arguments).e();\n                        };\n                        return a;\n                    };\n                    Lines.ba = function ba() {\n                        var _b;\n                        return (_b = this.b()).a.apply(_b, arguments);\n                    };\n                    Lines.be = function be() {\n                        return this.b().e();\n                    };\n                    Lines.bae = function bae() {\n                        var _b2;\n                        return (_b2 = this.b()).a.apply(_b2, arguments).e();\n                    };\n                    Lines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    Lines.prototype.get = function get(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, false);\n                    };\n                    Lines.prototype.getHtml = function getHtml(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, true);\n                    };\n                    Lines.prototype.count = function count() {\n                        return this.doGet({}, false).length;    // can be faster b/c don't need to output stuff\n                    };\n                    // TODO make HtmlLines\n                    Lines.html = function html(strings) {\n                        var _arguments2 = arguments;\n                        // html template tag\n                        // usage example for attributes: Lines.html`<input type=text value=${value}>`\n                        // usage example for elements: Lines.html`<option>${option}</option>`\n                        return strings.reduce(function (r, s, i) {\n                            var v = _arguments2[i];\n                            switch (r.slice(-1)) {\n                            case '=':\n                                if (v === false) {\n                                    return r.replace(/\\s+[a-zA-Z0-9-]+=$/, '') + s;    // TODO more permitting attr name regexp\n                                } else if (v === true) {\n                                    return r.replace(/=$/, '') + s;\n                                }\n                                v = String(v).replace(/&/g, '&amp;');\n                                if (v == '') {\n                                    return r.replace(/=$/, '') + s;\n                                } else if (!/[\\s\"'=<>`]/.test(v)) {\n                                    return r + v + s;\n                                } else if (!/'/.test(v)) {\n                                    return r + '\\'' + v + '\\'' + s;\n                                } else {\n                                    v = v.replace(/\"/g, '&quot;');\n                                    return r + '\"' + v + '\"' + s;\n                                }\n                            case '>':\n                                v = String(v).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n                                return r + v + s;\n                            }\n                            throw new Error('invalid character before substitution');\n                        });\n                    };\n                    return Lines;\n                }();\n                module.exports = Lines;\n            },\n            {\n                '29': 29,\n                '9': 9\n            }\n        ],\n        18: [\n            function (require, module, exports) {\n                var WrapLines = require(26);\n                var NoseWrapLines = function (_WrapLines) {\n                    ___babelHelper___inherits(NoseWrapLines, _WrapLines);\n                    function NoseWrapLines() {\n                        ___babelHelper___classCallCheck(this, NoseWrapLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _WrapLines.apply(this, arguments));\n                    }\n                    NoseWrapLines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    NoseWrapLines.prototype.doGet = function doGet(formatting, html) {\n                        if (this.isEmpty()) {\n                            return [];\n                        } else {\n                            return _WrapLines.prototype.doGet.call(this, formatting, html);\n                        }\n                    };\n                    return NoseWrapLines;\n                }(WrapLines);\n                module.exports = NoseWrapLines;\n            },\n            { '26': 26 }\n        ],\n        19: [\n            function (require, module, exports) {\n                /*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    _class.make = function make(name) {\n                        var nScalars = 0, nArrays = 0, nObjects = 0;\n                        var scalarArg = undefined, arrayArg = [], objectArg = {};\n                        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                            rest[_key - 1] = arguments[_key];\n                        }\n                        for (var _i = 0; _i < rest.length; _i++) {\n                            var arg = rest[_i];\n                            if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                if (nScalars++ == 0)\n                                    scalarArg = arg;\n                            } else if (Array.isArray(arg)) {\n                                if (nArrays++ == 0)\n                                    arrayArg = arg;\n                            } else if (arg instanceof Object) {\n                                if (nObjects++ == 0)\n                                    objectArg = arg;\n                            }\n                        }\n                        var optionClass = this;\n                        var settings = this.collectArgs(scalarArg, arrayArg, objectArg);\n                        return function (data, parent, visibilityManager, makeEntry) {\n                            return new optionClass(name, settings, data, parent, visibilityManager, makeEntry);\n                        };\n                    };\n                    _class.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return settings;\n                    };\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class);\n                        this.parent = parent;\n                        this.name = name;\n                        this.fullName = name;\n                        if (parent && parent.fullName !== null) {\n                            this.fullName = parent.fullName + '.' + name;\n                        }\n                        this.updateCallbacks = [];\n                        this._$ = null;\n                        // visibility and callbacks\n                        this.isVisible = function () {\n                            return true;\n                        };\n                        if (visibilityManager) {\n                            visibilityManager.register(this);\n                            if (settings.visibilityData !== undefined) {\n                                if (settings.visibilityDataLogic != 'or') {\n                                    this.isVisible = function () {\n                                        for (var testName in settings.visibilityData) {\n                                            var value = visibilityManager.options[testName].value;\n                                            if (settings.visibilityData[testName].indexOf(value) < 0) {\n                                                return false;\n                                            }\n                                        }\n                                        return true;\n                                    };\n                                } else {\n                                    this.isVisible = function () {\n                                        for (var testName in settings.visibilityData) {\n                                            var value = visibilityManager.options[testName].value;\n                                            if (settings.visibilityData[testName].indexOf(value) >= 0) {\n                                                return true;\n                                            }\n                                        }\n                                        return false;\n                                    };\n                                }\n                                for (var testName in settings.visibilityData) {\n                                    visibilityManager.declareAffectedBy(this, testName);\n                                }\n                            }\n                        }\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.update = function update() {\n                        this.updateCallbacks.forEach(function (updateCallback) {\n                            updateCallback();\n                        });\n                        if (this.parent) {\n                            this.parent.update();\n                        }\n                    };\n                    _class.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.updateCallbacks.push(updateCallback);\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    ___babelHelper___createClass(_class, [{\n                            key: '$',\n                            get: function () {\n                                return this._$;\n                            },\n                            set: function ($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    ___babelHelper___inherits(_class2, _Option$Base);\n                    _class2.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.defaultValue === undefined)\n                            settings.defaultValue = scalarArg;\n                        return _Option$Base.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class2(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class2);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        _this.defaultValue = settings.defaultValue;\n                        if (typeof data == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    ___babelHelper___createClass(_class2, [{\n                            key: 'value',\n                            get: function () {\n                                return this._value;\n                            },\n                            set: function (value) {\n                                this._value = value;\n                                this.update();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.Boolean = function (_Option$Input) {\n                    ___babelHelper___inherits(_class3, _Option$Input);\n                    function _class3() {\n                        ___babelHelper___classCallCheck(this, _class3);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return _Option$Input.collectArgs.call(this, !!scalarArg, arrayArg, settings);\n                    };\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBoolean = function (_Option$Input2) {\n                    ___babelHelper___inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        ___babelHelper___classCallCheck(this, _class4);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function () {\n                                return value;\n                            },\n                            toString: function () {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.Factor = function (_Option$NonBoolean) {\n                    ___babelHelper___inherits(_class5, _Option$NonBoolean);\n                    _class5.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableValues === undefined)\n                            settings.availableValues = arrayArg;\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableValues[0];\n                        return _Option$NonBoolean.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class5(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class5);\n                        var _this4 = ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                        _this4.availableValues = settings.availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.Number = function (_Option$NonBoolean2) {\n                    ___babelHelper___inherits(_class6, _Option$NonBoolean2);\n                    // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableMin === undefined)\n                            settings.availableMin = arrayArg[0];\n                        if (settings.availableMax === undefined)\n                            settings.availableMax = arrayArg[1];\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableMin;\n                        return _Option$NonBoolean2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class6(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class6);\n                        var _this5 = ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean2.apply(this, arguments));\n                        _this5.availableMin = settings.availableMin;\n                        _this5.availableMax = settings.availableMax;\n                        _this5.unit = settings.unit;\n                        return _this5;\n                    }\n                    _class6.prototype.fix = function fix() {\n                        var fixed = _Option$NonBoolean2.prototype.fix.call(this);\n                        fixed.precision = this.precision;\n                        fixed.unit = this.unit;\n                        return fixed;\n                    };\n                    return _class6;\n                }(Option.NonBoolean);\n                Option.Collection = function (_Option$Base2) {\n                    ___babelHelper___inherits(_class7, _Option$Base2);\n                    _class7.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        return _Option$Base2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class7);\n                        var _this6 = ___babelHelper___possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = settings.descriptions.map(function (x) {\n                            var subName = x[1];\n                            var subData = undefined;\n                            if (typeof data == 'object')\n                                subData = data[subName];\n                            return makeEntry(x, subData, _this6, visibilityManager);    // nested option\n                        });\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        var _arr = this.entries;\n                        for (var _i2 = 0; _i2 < _arr.length; _i2++) {\n                            var entry = _arr[_i2];\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        }\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        var _arr2 = this.entries;\n                        for (var _i3 = 0; _i3 < _arr2.length; _i3++) {\n                            var entry = _arr2[_i3];\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        }\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    ___babelHelper___inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        ___babelHelper___classCallCheck(this, _class8);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$Boolean) {\n                    ___babelHelper___inherits(_class9, _Option$Boolean);\n                    function _class9() {\n                        ___babelHelper___classCallCheck(this, _class9);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Boolean.apply(this, arguments));\n                    }\n                    return _class9;\n                }(Option.Boolean);\n                Option.Select = function (_Option$Factor) {\n                    ___babelHelper___inherits(_class10, _Option$Factor);\n                    function _class10() {\n                        ___babelHelper___classCallCheck(this, _class10);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Factor.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.Factor);\n                Option.Text = function (_Option$Factor2) {\n                    ___babelHelper___inherits(_class11, _Option$Factor2);\n                    function _class11() {\n                        ___babelHelper___classCallCheck(this, _class11);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Factor2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.Factor);\n                Option.Int = function (_Option$Number) {\n                    ___babelHelper___inherits(_class12, _Option$Number);\n                    function _class12() {\n                        ___babelHelper___classCallCheck(this, _class12);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class12, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class12;\n                }(Option.Number);\n                Option.Float = function (_Option$Number2) {\n                    ___babelHelper___inherits(_class13, _Option$Number2);\n                    function _class13(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class13);\n                        var _this12 = ___babelHelper___possibleConstructorReturn(this, _Option$Number2.apply(this, arguments));\n                        if (settings.precision !== undefined) {\n                            _this12.precision = settings.precision;\n                        } else {\n                            if (_this12.availableMax >= 100) {\n                                _this12.precision = 1;\n                            } else if (_this12.availableMax >= 10) {\n                                _this12.precision = 2;\n                            } else {\n                                _this12.precision = 3;\n                            }\n                        }\n                        return _this12;\n                    }\n                    return _class13;\n                }(Option.Number);\n                Option.Root = function (_Option$Collection) {\n                    ___babelHelper___inherits(_class14, _Option$Collection);\n                    function _class14() {\n                        ___babelHelper___classCallCheck(this, _class14);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class14;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    ___babelHelper___inherits(_class15, _Option$Collection2);\n                    function _class15() {\n                        ___babelHelper___classCallCheck(this, _class15);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class15;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    ___babelHelper___inherits(_class16, _Option$Base4);\n                    // TODO consider extending Collection\n                    _class16.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        if (settings.typePropertyName === undefined)\n                            settings.typePropertyName = scalarArg;\n                        return _Option$Base4.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class16(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class16);\n                        var _this15 = ___babelHelper___possibleConstructorReturn(this, _Option$Base4.apply(this, arguments));\n                        _this15.availableConstructors = new Map();\n                        if (visibilityManager)\n                            visibilityManager.enterArray();\n                        var _arr3 = settings.descriptions;\n                        var _loop = function () {\n                            var x = _arr3[_i4];\n                            // TODO test array inside array\n                            var type = x[1];\n                            var ctor = function (subData) {\n                                return makeEntry(x, subData, _this15, visibilityManager);\n                            };\n                            _this15.availableConstructors.set(type, ctor);\n                        };\n                        for (var _i4 = 0; _i4 < _arr3.length; _i4++) {\n                            _loop();\n                        }\n                        if (visibilityManager)\n                            visibilityManager.exitArray();\n                        if (settings.typePropertyName !== undefined) {\n                            _this15.typePropertyName = settings.typePropertyName;\n                        } else {\n                            _this15.typePropertyName = 'type';\n                        }\n                        // populate array entries from data:\n                        _this15._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if (typeof data == 'object') {\n                            subDatas = data.value;\n                        }\n                        var defaultType = _this15.availableTypes[0];\n                        for (var _i5 = 0; _i5 < subDatas.length; _i5++) {\n                            var subData = subDatas[_i5];\n                            var subType = defaultType;\n                            if (typeof subData == 'object' && subData[_this15.typePropertyName] !== undefined) {\n                                subType = subData[_this15.typePropertyName];\n                            }\n                            var subCtor = _this15.availableConstructors.get(subType);\n                            if (subCtor) {\n                                _this15._entries.push(subCtor(subData));\n                            }\n                        }\n                        return _this15;\n                    }\n                    _class16.prototype.makeEntry = function makeEntry(type, data) {\n                        return this.availableConstructors.get(type)(data);\n                    };\n                    _class16.prototype.export = function _export() {\n                        var _this16 = this;\n                        var defaultType = this.availableTypes[0];\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != defaultType)\n                                    subData[_this16.typePropertyName] = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class16.prototype.fix = function fix() {\n                        var _this17 = this;\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if (typeof subFixed == 'object')\n                                    subFixed[_this17.typePropertyName] = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    ___babelHelper___createClass(_class16, [\n                        {\n                            key: 'availableTypes',\n                            get: function () {\n                                var types = [];\n                                this.availableConstructors.forEach(function (_, type) {\n                                    types.push(type);\n                                });\n                                return types;\n                            }\n                        },\n                        {\n                            key: 'entries',\n                            get: function () {\n                                return this._entries;\n                            },\n                            set: function (entries) {\n                                this._entries = entries;\n                                this.update();\n                            }\n                        }\n                    ]);\n                    return _class16;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        20: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'options-output';\n                        var additionalStrings = {\n                            en: {\n                                'reset': 'Reset',\n                                'drag': 'Drag',\n                                'drag.tip': 'Drag or press \\u2191/\\u2193 while in focus to reorder items',\n                                'delete': 'Delete',\n                                'delete.tip': 'Delete item'\n                            },\n                            ru: {\n                                'reset': 'Сбросить',\n                                'drag': 'Перетащить',\n                                'drag.tip': 'Перетаскивайте или нажимайте \\u2191/\\u2193, пока элемент в фокусе, чтобы изменить порядок элементов',\n                                'delete': 'Удалить',\n                                'delete.tip': 'Удалить элемент'\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        21: [\n            function (require, module, exports) {\n                var formatNumbers = require(10);\n                var writeTip = require(24);\n                var Option = require(19);\n                var ArrayOptionOutput = require(1);\n                var GroupOptionOutput = require(11);\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        ___babelHelper___classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = new Map();\n                        this.setOptionClassWriters(optionClassWriters);\n                        function writeOption(option) {\n                            var optionProto = option;\n                            while (optionProto = Object.getPrototypeOf(optionProto)) {\n                                var optionClassWriter = optionClassWriters.get(optionProto.constructor);\n                                if (optionClassWriter) {\n                                    return optionClassWriter(option, writeOption, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = writeOption(options.root);\n                    }\n                    OptionsOutput.prototype.getLeadLabel = function getLeadLabel(id, i18n, option) {\n                        return '<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label><span class=\\'space\\'> </span>';\n                    };\n                    // override this fn for custom writers\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        var _this = this;\n                        optionClassWriters.set(Option.Root, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Group, function () {\n                            return new (Function.prototype.bind.apply(GroupOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Void, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'option no-lead\\'>').html(i18n('options.' + option.fullName));\n                        });\n                        optionClassWriters.set(Option.Checkbox, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option no-lead\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').prop('checked', option.value).change(function () {\n                                option.value = $(this).prop('checked');\n                            }), ' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                        });\n                        optionClassWriters.set(Option.Select, function (option, writeOption, i18n, generateId) {\n                            var valueId = function (value) {\n                                return 'options.' + option.fullName + '.' + value;\n                            };\n                            var valueInfoId = function (value) {\n                                return 'options-info.' + option.fullName + '.' + value;\n                            };\n                            var id = generateId();\n                            var $select = undefined;\n                            option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n(valueId(availableValue)));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }));\n                            if (option.availableValues.some(function (availableValue) {\n                                    return i18n.has(valueInfoId(availableValue));\n                                })) {\n                                (function () {\n                                    var $tip = writeTip('info', '');\n                                    option.$.append(' ', $tip);\n                                    var handler = function () {\n                                        if (i18n.has(valueInfoId(this.value))) {\n                                            $tip.find('.tip-content').html(i18n(valueInfoId(this.value)));\n                                            $tip.css('display', '');    // $tip.show() won't work right with inline-block\n                                        } else {\n                                            $tip.css('display', 'none');\n                                            $tip.find('.tip-content').empty();\n                                        }\n                                    };\n                                    handler.call($select[0]);\n                                    $select.change(handler);\n                                }());\n                            }\n                            return option.$;\n                        });\n                        optionClassWriters.set(Option.Text, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var listId = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $('<input type=\\'text\\' id=\\'' + id + '\\' list=\\'' + listId + '\\' />').val(option.value).on('input change', function () {\n                                option.value = this.value;\n                            }), ' ', $('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').text(availableValue);\n                            })));\n                        });\n                        optionClassWriters.set(Option.Number, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var setInputAttrsAndListeners = function ($input, getOtherInput) {\n                                return setInputAttrs($input).val(option.value).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        var $that = getOtherInput();\n                                        $that.val(this.value);\n                                        option.value = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var id = generateId();\n                            var $sliderInput = undefined, $numberInput = undefined;\n                            var $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var fmt = formatNumbers({\n                                min: option.availableMin,\n                                max: option.availableMax\n                            }, option.precision);\n                            option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $('<span class=\\'nowrap\\'>').append('<span class=\\'min\\'>' + i18n.numberWithUnits(fmt.min, option.unit) + '</span> ', $sliderInput = setInputAttrsAndListeners($('<input type=\\'range\\' id=\\'' + id + '\\'>'), function () {\n                                return $numberInput;\n                            }), ' <span class=\\'max\\'>' + i18n.numberWithUnits(fmt.max, option.unit) + '</span>'), ' ', $numberInput = setInputAttrsAndListeners($('<input type=\\'number\\' required>'), function () {\n                                return $sliderInput;\n                            }), ' ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $sliderInput.val(option.defaultValue).change();\n                            }));\n                            var infoId = 'options-info.' + option.fullName;\n                            if (i18n.has(infoId)) {\n                                option.$.append(' ', writeTip('info', i18n(infoId)));\n                            }\n                            return option.$;\n                        });\n                        optionClassWriters.set(Option.Array, function () {\n                            return new (Function.prototype.bind.apply(ArrayOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '10': 10,\n                '11': 11,\n                '19': 19,\n                '24': 24\n            }\n        ],\n        22: [\n            function (require, module, exports) {\n                var OptionVisibilityManager = function () {\n                    function OptionVisibilityManager() {\n                        ___babelHelper___classCallCheck(this, OptionVisibilityManager);\n                        this.options = {};\n                        this.affects = {};\n                        this.inArray = 0;\n                    }\n                    OptionVisibilityManager.prototype.register = function register(option) {\n                        var _this = this;\n                        if (!this.inArray) {\n                            this.options[option.fullName] = option;\n                            option.addUpdateCallback(function () {\n                                _this.updateVisibilityAffectedBy(option.fullName);\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.declareAffectedBy = function declareAffectedBy(option, byFullName) {\n                        if (this.affects[byFullName] === undefined) {\n                            this.affects[byFullName] = [];\n                        }\n                        this.affects[byFullName].push(option);\n                    };\n                    OptionVisibilityManager.prototype.updateVisibilityAffectedBy = function updateVisibilityAffectedBy(byFullName) {\n                        if (this.affects[byFullName] !== undefined) {\n                            this.affects[byFullName].forEach(function (option) {\n                                option.updateVisibility();\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.enterArray = function enterArray() {\n                        this.inArray += 1;\n                    };\n                    OptionVisibilityManager.prototype.exitArray = function exitArray() {\n                        this.inArray -= 1;\n                    };\n                    return OptionVisibilityManager;\n                }();\n                var Options = function () {\n                    function Options(data) {\n                        ___babelHelper___classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        var Option = this.optionClasses;\n                        var makeEntry = function (description, data, parent, visibilityManager) {\n                            var _Option$className;\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var makeArgs = description.slice(1);\n                            return (_Option$className = Option[className]).make.apply(_Option$className, makeArgs)(data, parent, visibilityManager, makeEntry);\n                        };\n                        this.root = Option.Root.make(null, this.entriesDescription)(data, null, new OptionVisibilityManager(), makeEntry);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.root.addUpdateCallback(updateCallback);\n                    };\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    ___babelHelper___createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(19);\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { '19': 19 }\n        ],\n        23: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var RefLines = function (_Lines) {\n                    ___babelHelper___inherits(RefLines, _Lines);\n                    function RefLines(data, ref) {\n                        ___babelHelper___classCallCheck(this, RefLines);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.ref = ref;\n                        return _this;\n                    }\n                    RefLines.parse = function parse(s) {\n                        var a = Lines.ba('');\n                        var re = /^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/;\n                        for (; s.length > 0;) {\n                            var match = re.exec(s);\n                            if (match) {\n                                a.t(match[1]);\n                                a.t(this.b(match[3]).ae(match[2]));\n                                s = s.substr(match[0].length);\n                            } else {\n                                a.t(s);\n                                break;\n                            }\n                        }\n                        return a.e();\n                    };\n                    RefLines.prototype.doGet = function doGet(formatting, html) {\n                        var plainOut = _Lines.prototype.doGet.call(this, formatting, html);\n                        var href = undefined;\n                        if (html && typeof formatting.refs == 'object') {\n                            href = formatting.refs[this.ref];\n                        }\n                        if (href !== undefined) {\n                            return plainOut.map(function (s) {\n                                return '<a href=\\'' + escape(href) + '\\'>' + s + '</a>';\n                            });\n                        } else {\n                            return plainOut;\n                        }\n                    };\n                    return RefLines;\n                }(Lines);\n                module.exports = RefLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        24: [\n            function (require, module, exports) {\n                module.exports = function (tipClass, tipContent) {\n                    var $tip = $('<span class=\\'tip-' + tipClass + '\\' tabindex=\\'0\\'><span class=\\'tip-content\\'>' + tipContent + '</span></span>');\n                    var popupTimeoutId = null;\n                    var popupLevel = 0;\n                    var handlePopup = function (dLevel, delay) {\n                        if (delay === undefined) {\n                            delay = 200;\n                        }\n                        if (dLevel == +1 && popupLevel == 0) {\n                            clearTimeout(popupTimeoutId);\n                            popupTimeoutId = setTimeout(function () {\n                                // sort of hoverintent, simple delay will do b/c tip icon is small\n                                $tip.addClass('open');\n                            }, delay);\n                        } else if (dLevel == -1 && popupLevel == 1) {\n                            clearTimeout(popupTimeoutId);\n                            popupTimeoutId = setTimeout(function () {\n                                $tip.removeClass('open');\n                            }, delay);\n                        }\n                        popupLevel += dLevel;\n                    };\n                    $tip.mouseenter(function () {\n                        handlePopup(+1);\n                    }).focusin(function () {\n                        handlePopup(+1, 0);    // need immediate popup on focusin\n                    }).on('mouseleave focusout', function () {\n                        handlePopup(-1);\n                    });\n                    return $tip;\n                };\n            },\n            {}\n        ],\n        25: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ], [\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<script src=',\n                        '></script>'\n                    ], [\n                        '<script src=',\n                        '></script>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<html lang=',\n                        '>'\n                    ], [\n                        '<html lang=',\n                        '>'\n                    ]);\n                var Lines = require(17);\n                var NoseWrapLines = require(18);\n                var CodeSection = require(4);\n                var WebCode = function () {\n                    function WebCode() {\n                        ___babelHelper___classCallCheck(this, WebCode);\n                    }\n                    WebCode.prototype.get = function get(formatting) {\n                        return this.getLines().get(formatting);\n                    };\n                    WebCode.prototype.getHtml = function getHtml(formatting) {\n                        return this.getLines().getHtml(formatting);\n                    };\n                    WebCode.prototype.extractSections = function extractSections(sectionModes) {\n                        if (sectionModes === undefined) {\n                            sectionModes = {};\n                        }\n                        var stylePlaceLines = NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines);\n                        var styleExtractLines = Lines.be();\n                        if (sectionModes.css == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                stylePlaceLines = Lines.be();\n                            } else {\n                                stylePlaceLines = Lines.bae('<!-- <style> ' + this.getSectionPasteComment('css') + ' </style> -->');\n                            }\n                            styleExtractLines = this.cachedStyleLines;\n                        } else if (sectionModes.css == 'file') {\n                            stylePlaceLines = Lines.bae(Lines.html(_templateObject, this.basename + '.css'));\n                            styleExtractLines = this.cachedStyleLines;\n                        }\n                        var scriptPlaceLines = NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines);\n                        var scriptExtractLines = Lines.be();\n                        if (sectionModes.js == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                scriptPlaceLines = Lines.be();\n                            } else {\n                                scriptPlaceLines = Lines.bae('<!-- <script> ' + this.getSectionPasteComment('js') + ' </script> -->');\n                            }\n                            scriptExtractLines = this.cachedScriptLines;\n                        } else if (sectionModes.js == 'file') {\n                            scriptPlaceLines = Lines.bae(Lines.html(_templateObject2, this.basename + '.js'));\n                            scriptExtractLines = this.cachedScriptLines;\n                        }\n                        var htmlExtractLines = undefined;\n                        if (sectionModes.html == 'body') {\n                            htmlExtractLines = this.getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        } else {\n                            htmlExtractLines = this.getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        }\n                        var type = function (sectionName) {\n                            return 'text/' + (sectionName == 'js' ? 'javascript' : sectionName);\n                        };\n                        return {\n                            html: new CodeSection(this.filename, type('html'), htmlExtractLines),\n                            css: new CodeSection(this.basename + '.css', type('css'), styleExtractLines),\n                            js: new CodeSection(this.basename + '.js', type('js'), scriptExtractLines)\n                        };\n                    };\n                    // get title()\n                    // private:\n                    WebCode.prototype.getLines = function getLines() {\n                        return this.getFullHtmlSectionLines(NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines), NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines));\n                    };\n                    WebCode.prototype.getFullHtmlSectionLines = function getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        var a = Lines.b();\n                        a('<!DOCTYPE html>');\n                        if (this.lang !== null) {\n                            a(Lines.html(_templateObject3, this.lang));\n                        } else {\n                            a('<html>');\n                        }\n                        a('<head>', '<meta charset=utf-8>');\n                        if (this.title !== null) {\n                            a('<title>' + this.title + '</title>');\n                        }\n                        a(stylePlaceLines, this.cachedHeadLines, '</head>', '<body>', this.cachedBodyLines, scriptPlaceLines, '</body>', '</html>');\n                        return a.e();\n                    };\n                    WebCode.prototype.getBodyHtmlSectionLines = function getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        return Lines.bae(stylePlaceLines, this.cachedHeadLines, this.cachedBodyLines, scriptPlaceLines);\n                    };\n                    WebCode.prototype.getSectionPasteComment = function getSectionPasteComment(sectionName) {\n                        // section placeholder comment in paste mode - likely to be overridden with i18n\n                        return sectionName + ' goes here';\n                    };\n                    ___babelHelper___createClass(WebCode, [\n                        {\n                            key: 'filename',\n                            // public:\n                            get: function () {\n                                return this.basename + '.html';\n                            }\n                        },\n                        {\n                            key: 'mimeType',\n                            get: function () {\n                                return 'text/html';\n                            }\n                        },\n                        {\n                            key: 'cachedStyleLines',\n                            get: function () {\n                                if (!this._styleLines)\n                                    this._styleLines = this.styleLines;\n                                return this._styleLines;\n                            }\n                        },\n                        {\n                            key: 'cachedHeadLines',\n                            get: function () {\n                                if (!this._headLines)\n                                    this._headLines = this.headLines;\n                                return this._headLines;\n                            }\n                        },\n                        {\n                            key: 'cachedBodyLines',\n                            get: function () {\n                                if (!this._bodyLines)\n                                    this._bodyLines = this.bodyLines;\n                                return this._bodyLines;\n                            }\n                        },\n                        {\n                            key: 'cachedScriptLines',\n                            get: function () {\n                                if (!this._scriptLines)\n                                    this._scriptLines = this.scriptLines;\n                                return this._scriptLines;\n                            }    // to be redefined in subclasses:\n                        },\n                        {\n                            key: 'basename',\n                            get: function () {\n                                // filename base\n                                return 'source';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                // language tag for <html lang=xx> or null to skip it - likely read from i18n\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                // page title or null to skip it\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                // contents of <style>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'headLines',\n                            get: function () {\n                                // contents of <head> following <style>, goes to <body> in html body mode\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                // contents of <body> preceding <script>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                // contents of <script>\n                                return Lines.be();\n                            }\n                        }\n                    ]);\n                    return WebCode;\n                }();\n                module.exports = WebCode;\n            },\n            {\n                '17': 17,\n                '18': 18,\n                '4': 4\n            }\n        ],\n        26: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var WrapLines = function (_Lines) {\n                    ___babelHelper___inherits(WrapLines, _Lines);\n                    function WrapLines(data) {\n                        ___babelHelper___classCallCheck(this, WrapLines);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Lines.call(this, data));\n                        for (var _len = arguments.length, wrappers = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                            wrappers[_key - 1] = arguments[_key];\n                        }\n                        _this.wrappers = wrappers;\n                        return _this;\n                    }\n                    WrapLines.prototype.isEmpty = function isEmpty() {\n                        return false;\n                    };\n                    WrapLines.prototype.doGet = function doGet(formatting, html) {\n                        var _this2 = this;\n                        var indent = '\\t';\n                        if (formatting.indent !== undefined) {\n                            indent = formatting.indent;\n                        }\n                        var out = [];\n                        var i = 0;\n                        var pushWrapper = function () {\n                            var item = _this2.wrappers[i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut);\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                            i++;\n                        };\n                        pushWrapper();\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut.map(function (s) {\n                                    return indent + s;\n                                }));\n                                if (this.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(indent + s);\n                                if (this.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            }\n                        }\n                        if (this.wrappers.length == 2) {\n                            pushWrapper();\n                        }\n                        return out;\n                    };\n                    return WrapLines;\n                }(Lines);\n                module.exports = WrapLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        27: [\n            function (require, module, exports) {\n                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\n                module.exports = Math.log10 || function (x) {\n                    return Math.log(x) / Math.LN10;\n                };\n            },\n            {}\n        ],\n        28: [\n            function (require, module, exports) {\n                module.exports = function (haystack) {\n                    return function (needle, start) {\n                        if (haystack != null && haystack.includes !== undefined || typeof haystack !== 'string') {\n                            return haystack.includes(needle, start);\n                        } else {\n                            return haystack.indexOf(needle, start) !== -1;\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        29: [\n            function (require, module, exports) {\n                module.exports = function (s) {\n                    return function (n) {\n                        if (s != null && s.repeat !== undefined || typeof s !== 'string') {\n                            return s.repeat(n);\n                        } else {\n                            return Array(n + 1).join(s);\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        30: [\n            function (require, module, exports) {\n                var JsLines = require(16);\n                var RefLines = require(23);\n                var Feature = require(38);\n                var AudioContext = function (_Feature) {\n                    ___babelHelper___inherits(AudioContext, _Feature);\n                    function AudioContext(options) {\n                        ___babelHelper___classCallCheck(this, AudioContext);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    AudioContext.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        var _this2 = this;\n                        featureContext.getJsConnectAssignLines = function (decl, target, value, connectors, connectArgs) {\n                            var declTarget = target;\n                            if (decl != '') {\n                                declTarget = decl + ' ' + target;\n                            }\n                            var connectArgsConcat = '';\n                            if (connectArgs !== undefined) {\n                                connectArgsConcat = ',' + connectArgs;\n                            }\n                            var a = JsLines.b();\n                            if (_this2.options.connectReturnValue && Array.isArray(connectors) && connectors.length == 1) {\n                                var connector = connectors[0];\n                                a(declTarget + '=' + connector + '.connect(' + value + connectArgsConcat + ');');\n                            } else {\n                                a(declTarget + '=' + value + ';');\n                                if (Array.isArray(connectors)) {\n                                    a.apply(undefined, connectors.map(function (connector) {\n                                        return connector + '.connect(' + target + connectArgsConcat + ');';\n                                    }));\n                                } else {\n                                    var _connector = connectors.slice(0, -1);\n                                    // hack to get singular name form plural\n                                    a(connectors + '.forEach(function(' + _connector + '){', '\\t' + _connector + '.connect(' + target + connectArgsConcat + ');', '});');\n                                }\n                            }\n                            return a.e();\n                        };\n                    };\n                    AudioContext.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.audioContext) {\n                            a(RefLines.parse('// ' + i18n('comment.context')));\n                            if (this.options.noVendorPrefix) {\n                                a('var ctx=new AudioContext;');\n                            } else {\n                                a('var ctx=new (AudioContext || webkitAudioContext);');\n                            }\n                        }\n                        return a.e();\n                    };\n                    return AudioContext;\n                }(Feature);\n                module.exports = AudioContext;\n            },\n            {\n                '16': 16,\n                '23': 23,\n                '38': 38\n            }\n        ],\n        31: [\n            function (require, module, exports) {\n                var writeTip = require(24);\n                var FilterOptionOutput = require(39);\n                var BiquadFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(BiquadFilterOptionOutput, _FilterOptionOutput);\n                    function BiquadFilterOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, BiquadFilterOptionOutput);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var $cloneButton = undefined;\n                        var computeCoefs = function (sampleRate, type, frequency, detune, Q, gain, post20160415) {\n                            // constants defined in the spec\n                            var F_s = sampleRate;\n                            var f_0 = frequency * Math.pow(2, detune / 1200);\n                            var G = gain;\n                            var A = Math.pow(10, G / 40);\n                            var omega_0 = 2 * Math.PI * f_0 / F_s;\n                            var alpha_Q = Math.sin(omega_0) / (2 * Q);\n                            var Q_dB = Math.pow(10, Q / 20);\n                            // fix for incorrect alpha_B\n                            var alpha_B = Math.sin(omega_0) / 2 * Math.sqrt((4 - Math.sqrt(16 - 16 / (Q_dB * Q_dB))) / 2);\n                            // was incorrect in the spec\n                            var alpha_Q_dB = Math.sin(omega_0) / (2 * Q_dB);\n                            // introduced on 2016-04-15\n                            var S = 1;\n                            var alpha_S = Math.sin(omega_0) / 2 * Math.sqrt((A + 1 / A) * (1 / S - 1) + 2);\n                            // shortcuts\n                            var c = Math.cos(omega_0);\n                            var aSA2 = 2 * alpha_S * Math.sqrt(A);\n                            switch (type) {\n                            case 'lowpass':\n                                return {\n                                    feedforward: [\n                                        (1 - c) / 2,\n                                        1 - c,\n                                        (1 - c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'highpass':\n                                return {\n                                    feedforward: [\n                                        (1 + c) / 2,\n                                        -(1 + c),\n                                        (1 + c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'bandpass':\n                                return {\n                                    feedforward: [\n                                        alpha_Q,\n                                        0,\n                                        -alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'notch':\n                                return {\n                                    feedforward: [\n                                        1,\n                                        -2 * c,\n                                        1\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'allpass':\n                                return {\n                                    feedforward: [\n                                        1 - alpha_Q,\n                                        -2 * c,\n                                        1 + alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'peaking':\n                                return {\n                                    feedforward: [\n                                        1 + alpha_Q * A,\n                                        -2 * c,\n                                        1 - alpha_Q * A\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q / A,\n                                        -2 * c,\n                                        1 - alpha_Q / A\n                                    ]\n                                };\n                            case 'lowshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 - (A - 1) * c + aSA2),\n                                        2 * A * (A - 1 - (A + 1) * c),\n                                        A * (A + 1 - (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 + (A - 1) * c + aSA2,\n                                        -2 * (A - 1 + (A + 1) * c),\n                                        A + 1 + (A - 1) * c - aSA2\n                                    ]\n                                };\n                            case 'highshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 + (A - 1) * c + aSA2),\n                                        -2 * A * (A - 1 + (A + 1) * c),\n                                        A * (A + 1 + (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 - (A - 1) * c + aSA2,\n                                        2 * (A - 1 - (A + 1) * c),\n                                        A + 1 - (A - 1) * c - aSA2\n                                    ]\n                                };\n                            }\n                        };\n                        var This = _this;\n                        var $cloneUi = undefined;\n                        var writeCloneButton = function (post20160415) {\n                            return $('<button type=\\'button\\' class=\\'clone\\'>' + i18n('options-output.filter.biquad.clone.' + (post20160415 ? 'post' : 'pre')) + '</button>').click(function () {\n                                var _this2 = this;\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var fixedOption = option.fix();\n                                    var coefs = computeCoefs(audioContext.sampleRate, fixedOption.type.value, fixedOption.frequency.value, fixedOption.detune.value, Math.pow(10, fixedOption.Q.value), fixedOption.gain.value, post20160415);\n                                    if (coefs) {\n                                        $(_this2).data('coefs', coefs);\n                                    } else {\n                                        $(_this2).removeData('coefs');\n                                    }\n                                }, $cloneUi, i18n('options-output.filter.contextError'));\n                            });\n                        };\n                        _this.$output.append($('<div class=\\'option only-buttons\\'>').append('<label>' + i18n('options-output.filter.biquad.clone') + ':</label><span class=\\'space\\'> </span>', $cloneUi = $('<span>').append(writeCloneButton(false), ' ', writeCloneButton(true), ' ', writeTip('info', i18n('options-output.filter.biquad.clone.info')))));\n                        return _this;\n                    }\n                    BiquadFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        var biquadNode = audioContext.createBiquadFilter();\n                        var fixedOption = this.option.fix();\n                        biquadNode.type = fixedOption.type.value;\n                        biquadNode.frequency.value = fixedOption.frequency.value;\n                        biquadNode.detune.value = fixedOption.detune.value;\n                        biquadNode.Q.value = Math.pow(10, fixedOption.Q.value);\n                        biquadNode.gain.value = fixedOption.gain.value;\n                        return [biquadNode];\n                    };\n                    return BiquadFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = BiquadFilterOptionOutput;\n            },\n            {\n                '24': 24,\n                '39': 39\n            }\n        ],\n        32: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ], [\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ]);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var Feature = require(38);\n                var Canvas = function (_Feature) {\n                    ___babelHelper___inherits(Canvas, _Feature);\n                    function Canvas(options) {\n                        ___babelHelper___classCallCheck(this, Canvas);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Canvas.getStyleLines = function getStyleLines(canvasContextProperty, colorOption) {\n                        var a = JsLines.b();\n                        var cs = [\n                            'r',\n                            'g',\n                            'b'\n                        ];\n                        var color = cs.map(function (c) {\n                            return colorOption[c] + '%';\n                        }).join();\n                        var isBlack = cs.every(function (c) {\n                            return colorOption[c] == 0;\n                        });\n                        if (colorOption.a == 100) {\n                            if (!isBlack) {\n                                a('canvasContext.' + canvasContextProperty + '=\\'rgb(' + color + ')\\';');\n                            }\n                        } else {\n                            a('canvasContext.' + canvasContextProperty + '=\\'rgba(' + color + ',' + (colorOption.a / 100).toFixed(2) + ')\\';');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = Lines.b();\n                        if (featureContext.canvas) {\n                            a('<div>', Lines.html(_templateObject, this.options.width, this.options.height), '</div>');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            a('var canvas=document.getElementById(\\'my.canvas\\');', 'var canvasContext=canvas.getContext(\\'2d\\');');\n                        }\n                        if (featureContext.canvasVolumeGradient) {\n                            a('var canvasVolumeGradient=canvasContext.createLinearGradient(0,0,0,canvas.height);', 'canvasVolumeGradient.addColorStop(1.00,\\'#000\\');', 'canvasVolumeGradient.addColorStop(0.75,\\'#F00\\');', 'canvasVolumeGradient.addColorStop(0.25,\\'#FF0\\');', 'canvasVolumeGradient.addColorStop(0.00,\\'#FFF\\');');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            if (this.options.background.type == 'clear') {\n                                a('canvasContext.clearRect(0,0,canvas.width,canvas.height);');\n                            } else {\n                                a(Canvas.getStyleLines('fillStyle', this.options.background.color));\n                                a('canvasContext.fillRect(0,0,canvas.width,canvas.height);');\n                            }\n                        }\n                        return a.e();\n                    };\n                    return Canvas;\n                }(Feature);\n                module.exports = Canvas;\n            },\n            {\n                '16': 16,\n                '17': 17,\n                '38': 38\n            }\n        ],\n        33: [\n            function (require, module, exports) {\n                var writeTip = require(24);\n                var BaseCodeOutput = require(3);\n                var CodeOutput = function (_BaseCodeOutput) {\n                    ___babelHelper___inherits(CodeOutput, _BaseCodeOutput);\n                    function CodeOutput() {\n                        ___babelHelper___classCallCheck(this, CodeOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseCodeOutput.apply(this, arguments));\n                    }\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        _BaseCodeOutput.prototype.initDomProps.call(this);\n                        this.$warnings = $();\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        _BaseCodeOutput.prototype.applyUpdatedCode.call(this, i18n);\n                        this.$warnings.css('display', this.code.isInteresting ? 'none' : '');    // .toggle() won't work right with inline-block\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        var $warning = writeTip('warn', i18n('code-output.warning.jsfiddle-run'));\n                        return _BaseCodeOutput.prototype.writeButtons.call(this, i18n).append(' ', $warning);\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var $section = _BaseCodeOutput.prototype.writeSectionSummary.call(this, sectionName, i18n);\n                        if (sectionName == 'html' || sectionName == 'js') {\n                            var $warning = writeTip('warn', i18n('code-output.warning.interesting'));\n                            $section.append(' ', $warning);\n                            this.$warnings = this.$warnings.add($warning);\n                        }\n                        return $section;\n                    };\n                    ___babelHelper___createClass(CodeOutput, [{\n                            key: 'defaultFormatting',\n                            get: function () {\n                                var formatting = _BaseCodeOutput.prototype.defaultFormatting;\n                                formatting.refs = {\n                                    context: 'https://www.w3.org/TR/webaudio/#AudioContext',\n                                    source: 'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\n                                    gain: 'https://www.w3.org/TR/webaudio/#GainNode',\n                                    panner: 'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\n                                    biquad: 'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\n                                    iir: 'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\n                                    convolver: 'https://www.w3.org/TR/webaudio/#ConvolverNode',\n                                    peaking: 'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\n                                    destination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\n                                    compressor: 'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\n                                    analyser: 'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\n                                    splitter: 'https://www.w3.org/TR/webaudio/#the-channelsplitternode-interface',\n                                    buffer: 'https://www.w3.org/TR/webaudio/#AudioBufferSourceNode'\n                                };\n                                return formatting;\n                            }\n                        }]);\n                    return CodeOutput;\n                }(BaseCodeOutput);\n                module.exports = CodeOutput;\n            },\n            {\n                '24': 24,\n                '3': 3\n            }\n        ],\n        34: [\n            function (require, module, exports) {\n                var AudioContext = require(30);\n                var Loader = require(43);\n                var SourceSet = require(48);\n                var FilterSequence = require(40);\n                var Destination = require(36);\n                var Canvas = require(32);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var InterleaveLines = require(15);\n                var NoseWrapLines = require(18);\n                var BaseWebCode = require(25);\n                var Code = function (_BaseWebCode) {\n                    ___babelHelper___inherits(Code, _BaseWebCode);\n                    function Code(options, i18n) {\n                        ___babelHelper___classCallCheck(this, Code);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _BaseWebCode.call(this));\n                        _this.i18n = i18n;\n                        _this.featureContext = {};\n                        _this.features = [\n                            new AudioContext(options.api),\n                            new Loader(options.loader),\n                            new SourceSet(options.sources),\n                            new FilterSequence(options.filters),\n                            new Destination(options.destination),\n                            new Canvas(options.canvas)\n                        ];\n                        // possible feature context flags:\n                        //\taudioContext = AudioContext has to assign the audio context to var ctx\n                        //\tcanvasVolumeGradient = Canvas has to create canvasVolumeGradient\n                        //\tconnectSampleToCompressor = this is a hack\n                        //\tconnectSampleToJsNames = this is a hack: array of strings to connect samples to\n                        //\tloader = Loader has to provide loadSample() function\n                        //\tloaderOnError = loadSample() caller has to pass the error handler\n                        //\tsetConnectSampleToJsNames = have a node(s) to connect samples to (some filters like equaliser may not save a refernce to it otherwise)\n                        //\tTODO the rest\n                        // helpers:\n                        //\tgetJsConnectAssignLines = set by AudioContext\n                        var _arr = _this.features;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var feature = _arr[_i];\n                            feature.requestFeatureContext(_this.featureContext);\n                        }\n                        _this.isInteresting = !!_this.featureContext.audioContext;\n                        return _this;\n                    }\n                    ___babelHelper___createClass(Code, [\n                        {\n                            key: 'basename',\n                            get: function () {\n                                return 'webaudio';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                return this.i18n.lang;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                return this.i18n('code.title');\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                var a = Lines.b();\n                                if (this.featureContext.alignedInputs) {\n                                    a('label {', '\\tdisplay: inline-block;', '\\twidth: 15em;', '\\ttext-align: right;', '\\tline-height: 0.8em;', '}', '.min {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: right;', '}', '.max {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: left;', '}');\n                                }\n                                if (this.featureContext.canvas) {\n                                    a('canvas {', '\\tborder: 1px solid;', '}');\n                                }\n                                return a.e();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                var _this2 = this;\n                                return Lines.bae.apply(Lines, this.features.map(function (feature) {\n                                    return feature.getHtmlLines(_this2.featureContext, _this2.i18n);\n                                }));\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                var _this3 = this, _NoseWrapLines$b;\n                                var prevNodeJsNames = [];\n                                return InterleaveLines.bae.apply(InterleaveLines, this.features.map(function (feature) {\n                                    var lines = feature.getJsInitLines(_this3.featureContext, _this3.i18n, prevNodeJsNames);\n                                    prevNodeJsNames = feature.getNodeJsNames(_this3.featureContext, prevNodeJsNames);\n                                    return lines;\n                                }).concat([(_NoseWrapLines$b = NoseWrapLines.b(JsLines.bae('function visualize() {'), JsLines.bae('\\trequestAnimationFrame(visualize);', '}', 'requestAnimationFrame(visualize);'))).ae.apply(_NoseWrapLines$b, this.features.map(function (feature) {\n                                        return feature.getJsLoopPreLines(_this3.featureContext, _this3.i18n);\n                                    }).concat(this.features.map(function (feature) {\n                                        return feature.getJsLoopVisLines(_this3.featureContext, _this3.i18n);\n                                    })))]));\n                            }\n                        }\n                    ]);\n                    return Code;\n                }(BaseWebCode);\n                module.exports = Code;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '25': 25,\n                '30': 30,\n                '32': 32,\n                '36': 36,\n                '40': 40,\n                '43': 43,\n                '48': 48\n            }\n        ],\n        35: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var Feature = require(38);\n                var CollectionFeature = function (_Feature) {\n                    ___babelHelper___inherits(CollectionFeature, _Feature);\n                    function CollectionFeature(entryOptions) {\n                        ___babelHelper___classCallCheck(this, CollectionFeature);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        var entryCounts = new Map();\n                        entryOptions.entries.forEach(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            entryCounts.set(entryClass, entryCounts.get(entryClass) + 1 || 1);\n                        });\n                        var entryCounts2 = new Map();\n                        _this.entries = entryOptions.entries.map(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            if (entryCounts.get(entryClass) > 1) {\n                                var n = entryCounts2.get(entryClass) || 0;\n                                entryCounts2.set(entryClass, n + 1);\n                                return new entryClass(entryOption, n);\n                            } else {\n                                return new entryClass(entryOption);\n                            }\n                        });\n                        return _this;\n                    }\n                    CollectionFeature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.bae.apply(Lines, this.entries.map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    // abstract:\n                    // getEntryClass(entryOption) {}\n                    return CollectionFeature;\n                }(Feature);\n                module.exports = CollectionFeature;\n            },\n            {\n                '17': 17,\n                '38': 38\n            }\n        ],\n        36: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                    '<label for=my.compressor>',\n                    '</label>'\n                ], [\n                    '<label for=my.compressor>',\n                    '</label>'\n                ]);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var NoseWrapLines = require(18);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var Feature = require(38);\n                var Canvas = require(32);\n                var Destination = function (_Feature) {\n                    ___babelHelper___inherits(Destination, _Feature);\n                    function Destination(options) {\n                        ___babelHelper___classCallCheck(this, Destination);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Destination.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        if (this.options.compressor.enabled || this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\n                            featureContext.audioContext = true;\n                        }\n                        if (this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\n                            featureContext.canvas = true;\n                        }\n                        if (this.options.volume.enabled) {\n                            featureContext.canvasVolumeGradient = true;\n                        }\n                        if (featureContext.connectSampleToJsNames === undefined) {\n                            if (this.options.compressor.enabled) {\n                                featureContext.connectSampleToCompressor = true;\n                            }\n                            featureContext.connectSampleToJsNames = [];\n                            if (this.useDirectAnalyser) {\n                                featureContext.connectSampleToJsNames.push('analyserNode');\n                            }\n                            if (this.useSplitAnalyser) {\n                                featureContext.connectSampleToJsNames.push('channelSplitterNode');\n                            }\n                            if (featureContext.connectSampleToJsNames.length == 0) {\n                                featureContext.connectSampleToJsNames = ['ctx.destination'];\n                            }\n                        }\n                    };\n                    Destination.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = NoseWrapLines.b('<div>', '</div>');\n                        if (featureContext.audioProcessing && this.options.compressor.enabled) {\n                            a('<input id=my.compressor type=checkbox checked>', Lines.html(_templateObject, i18n('label.destination.compressor')));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        var getAnalyserNodeLines = function (jsName, prevNodeJsNames, connectArgs) {\n                            var a = JsLines.b();\n                            a(featureContext.getJsConnectAssignLines('var', jsName, 'ctx.createAnalyser()', prevNodeJsNames, connectArgs));\n                            if (_this2.options.analyser.logFftSize != 11) {\n                                // default FFT size is 2048\n                                a(jsName + '.fftSize=' + (1 << _this2.options.analyser.logFftSize) + ';');\n                            }\n                            return a.e();\n                        };\n                        var getCompressorLines = function () {\n                            var a = JsLines.b();\n                            var nextNodeJsName = _this2.options.waveform.enabled || _this2.options.frequencies.enabled || _this2.options.volume.enabled ? 'analyserNode' : 'ctx.destination';\n                            a(RefLines.parse('// ' + i18n('comment.destination.compressor')), featureContext.getJsConnectAssignLines('var', 'compressorNode', 'ctx.createDynamicsCompressor()', prevNodeJsNames));\n                            if (prevNodeJsNames.length > 0) {\n                                a.apply(undefined, [\n                                    'document.getElementById(\\'my.compressor\\').onchange=function(){',\n                                    '\\tif (this.checked) {'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(' + nextNodeJsName + ');';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(compressorNode);';\n                                }), ['\\t} else {'], prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(compressorNode);';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(' + nextNodeJsName + ');';\n                                }), [\n                                    '\\t}',\n                                    '};'\n                                ]));\n                            }\n                            return a.e();\n                        };\n                        var getDirectAnalyserLines = function () {\n                            var a = JsLines.b();\n                            var comment = '';\n                            if (_this2.options.waveform.enabled && !_this2.options.frequencies.enabled) {\n                                comment = '.waveform';\n                            } else if (!_this2.options.waveform.enabled && _this2.options.frequencies.enabled) {\n                                comment = '.frequencies';\n                            } else if (_this2.options.waveform.enabled && _this2.options.frequencies.enabled) {\n                                comment = '.waveform+frequencies';\n                            }\n                            a(RefLines.parse('// ' + i18n('comment.destination.analyser' + comment)), getAnalyserNodeLines('analyserNode', prevNodeJsNames), 'var analyserData=new Uint8Array(analyserNode.frequencyBinCount);');\n                            return a.e();\n                        };\n                        var getSplitAnalyserLines = function () {\n                            var a = JsLines.b();\n                            a(RefLines.parse('// ' + i18n('comment.destination.analyser.split')), featureContext.getJsConnectAssignLines('var', 'channelSplitterNode', 'ctx.createChannelSplitter()', prevNodeJsNames), getAnalyserNodeLines('leftAnalyserNode', ['channelSplitterNode'], '0'), getAnalyserNodeLines('rightAnalyserNode', ['channelSplitterNode'], '1'));\n                            if (!_this2.useDirectAnalyser) {\n                                // need to create analyserData once\n                                a('var analyserData=new Uint8Array(leftAnalyserNode.frequencyBinCount);');\n                            }\n                            return a.e();\n                        };\n                        var getDestinationLines = function () {\n                            var a = JsLines.b();\n                            if (prevNodeJsNames.length > 0) {\n                                a.apply(undefined, [RefLines.parse('// ' + i18n('comment.destination'))].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(ctx.destination);';\n                                })));\n                            }\n                            return a.e();\n                        };\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioProcessing && featureContext.audioContext) {\n                            if (this.options.compressor.enabled) {\n                                a(getCompressorLines());\n                                prevNodeJsNames = ['compressorNode'];\n                            }\n                            if (this.useDirectAnalyser || this.useSplitAnalyser) {\n                                if (this.useDirectAnalyser) {\n                                    a(getDirectAnalyserLines());\n                                }\n                                if (this.useSplitAnalyser) {\n                                    a(getSplitAnalyserLines());\n                                }\n                                if (this.useDirectAnalyser) {\n                                    prevNodeJsNames = ['analyserNode'];\n                                }    // split analyser doesn't change prevNodeJsNames b/c its output is not connected to anything\n                            }\n                            a(getDestinationLines());\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        var _this3 = this;\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        var getEnterFunctionLines = function () {\n                            if (_this3.pushContextForEach) {\n                                return JsLines.bae('canvasContext.save();');\n                            } else {\n                                return Lines.be();\n                            }\n                        };\n                        var getExitFunctionLines = function () {\n                            if (_this3.pushContextForEach) {\n                                return JsLines.bae('canvasContext.restore();');\n                            } else {\n                                return Lines.be();\n                            }\n                        };\n                        var getVisualizeVolumeLines = function () {\n                            var getVolumeMeterLines = function (analyserNodeJsName, xOffset) {\n                                return JsLines.bae(analyserNodeJsName + '.getByteFrequencyData(analyserData);', // TODO reuse in frequencies when in non-stereo mode\n                                'var sumAmplitudes=0;', 'for (var i=0;i<analyserData.length;i++) {', '\\tsumAmplitudes+=analyserData[i];', '}', 'var meanAmplitude=sumAmplitudes/analyserData.length;', 'var barHeight=meanAmplitude*canvas.height/256;', 'canvasContext.fillStyle=canvasVolumeGradient;', 'canvasContext.fillRect(' + xOffset + ',canvas.height-barHeight,25,barHeight);');\n                            };\n                            if (!_this3.options.volume.stereo) {\n                                return getVolumeMeterLines('analyserNode', '0');\n                            } else {\n                                return WrapLines.b(JsLines.bae(';[leftAnalyserNode,rightAnalyserNode].forEach(function(channelAnalyserNode,channelNumber){'), JsLines.bae('});')).ae(getVolumeMeterLines('channelAnalyserNode', 'channelNumber*26'));\n                            }\n                        };\n                        var getVisualizeFrequenciesLines = function () {\n                            var a = JsLines.b();\n                            var nBars = 'analyserData.length';\n                            if (_this3.options.frequencies.cutoff != 100) {\n                                a('var nBars=Math.floor(analyserData.length*' + (_this3.options.frequencies.cutoff / 100).toFixed(2) + ');');\n                                nBars = 'nBars';\n                            }\n                            var y = _this3.options.frequencies.base == 'bottom' ? 'canvas.height-barHeight' : '(canvas.height-barHeight)/2';\n                            var colorInput = _this3.options.frequencies.coloringInput == 'amplitude' ? 'analyserData[i]' : 'Math.round(i*255/' + nBars + ')';\n                            var fillStyle = _this3.options.frequencies.coloring == 'component' ? '\\'rgb(\\'+(' + colorInput + '+100)+\\',50,50)\\'' : '\\'hsl(\\'+(255-' + colorInput + ')+\\',100%,50%)\\'';\n                            a('var barWidth=canvas.width/' + nBars + '*0.8;', 'analyserNode.getByteFrequencyData(analyserData);', 'for (var i=0;i<' + nBars + ';i++) {', '\\tvar x=i*canvas.width/' + nBars + ';', '\\tcanvasContext.fillStyle=' + fillStyle + ';', '\\tvar barHeight=analyserData[i]*canvas.height/256;', '\\tvar y=' + y + ';', '\\tcanvasContext.fillRect(x,y,barWidth,barHeight);', '}');\n                            if (_this3.options.frequencies.outline.enabled) {\n                                var writeOutline = function (y) {\n                                    return JsLines.bae('for (var i=0;i<' + nBars + ';i++) {', '\\tvar x=i*canvas.width/' + nBars + ';', '\\tvar barHeight=analyserData[i]*canvas.height/256;', '\\tvar y=' + y + ';', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(0,y);', '\\t}', '\\tcanvasContext.lineTo(x+barWidth/2,y);', '\\tif (i==' + nBars + '-1) {', '\\t\\tcanvasContext.lineTo(canvas.width,y);', '\\t}', '}');\n                                };\n                                if (_this3.options.frequencies.outline.width != 1) {\n                                    a('canvasContext.lineWidth=' + _this3.options.frequencies.outline.width + ';');\n                                }\n                                a(Canvas.getStyleLines('strokeStyle', _this3.options.frequencies.outline.color));\n                                a('canvasContext.beginPath();');\n                                if (_this3.options.frequencies.base == 'bottom') {\n                                    a(writeOutline(y));\n                                } else {\n                                    a(WrapLines.b(JsLines.bae(';[-1,+1].forEach(function(aboveOrBelow){'), JsLines.bae('});')).ae(writeOutline('(canvas.height+aboveOrBelow*barHeight)/2')));\n                                }\n                                a('canvasContext.stroke();');\n                            }\n                            return a.e();\n                        };\n                        var getVisualizeWaveformLines = function () {\n                            var a = JsLines.b();\n                            if (_this3.options.waveform.width != 1) {\n                                a('canvasContext.lineWidth=' + _this3.options.waveform.width + ';');\n                            }\n                            a(Canvas.getStyleLines('strokeStyle', _this3.options.waveform.color), 'analyserNode.getByteTimeDomainData(analyserData);', 'canvasContext.beginPath();', 'for (var i=0;i<analyserData.length;i++) {', '\\tvar x=i*canvas.width/(analyserData.length-1);', '\\tvar y=analyserData[i]*canvas.height/256;', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(x,y);', '\\t} else {', '\\t\\tcanvasContext.lineTo(x,y);', '\\t}', '}', 'canvasContext.stroke();');\n                            return a.e();\n                        };\n                        return JsLines.bae.apply(JsLines, [\n                            [\n                                this.options.volume.enabled,\n                                'visualizeVolume',\n                                getVisualizeVolumeLines\n                            ],\n                            [\n                                this.options.frequencies.enabled,\n                                'visualizeFrequencies',\n                                getVisualizeFrequenciesLines\n                            ],\n                            [\n                                this.options.waveform.enabled,\n                                'visualizeWaveform',\n                                getVisualizeWaveformLines\n                            ]\n                        ].map(function (conditionAndNameAndFn) {\n                            var condition = conditionAndNameAndFn[0];\n                            var name = conditionAndNameAndFn[1];\n                            var fn = conditionAndNameAndFn[2];\n                            if (condition) {\n                                return WrapLines.b(JsLines.bae('function ' + name + '() {'), JsLines.bae('}')).ae(getEnterFunctionLines(), fn(), getExitFunctionLines());\n                            } else {\n                                return Lines.be();\n                            }\n                        }));\n                    };\n                    Destination.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        var a = JsLines.b();\n                        if (this.pushContextForAll) {\n                            a('canvasContext.save();');\n                        }\n                        if (this.options.volume.enabled) {\n                            a('visualizeVolume();');\n                        }\n                        if (this.options.frequencies.enabled) {\n                            a('visualizeFrequencies();');\n                        }\n                        if (this.options.waveform.enabled) {\n                            a('visualizeWaveform();');\n                        }\n                        if (this.pushContextForAll) {\n                            a('canvasContext.restore();');\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        if (featureContext.audioContext) {\n                            return ['ctx.destination'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    ___babelHelper___createClass(Destination, [\n                        {\n                            key: 'useDirectAnalyser',\n                            get: function () {\n                                return this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled && !this.options.volume.stereo;\n                            }\n                        },\n                        {\n                            key: 'useSplitAnalyser',\n                            get: function () {\n                                return this.options.volume.enabled && this.options.volume.stereo;\n                            }\n                        },\n                        {\n                            key: 'pushContextForEach',\n                            get: function () {\n                                // when stroke style is altered in two different places\n                                return this.options.frequencies.enabled && this.options.frequencies.outline.enabled && this.options.waveform.enabled;\n                            }\n                        },\n                        {\n                            key: 'pushContextForAll',\n                            get: function () {\n                                // when fill style is altered and not pushing for each\n                                return !this.pushContextForEach && (this.options.frequencies.enabled || this.options.volume.enabled);\n                            }\n                        }\n                    ]);\n                    return Destination;\n                }(Feature);\n                module.exports = Destination;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '23': 23,\n                '26': 26,\n                '32': 32,\n                '38': 38\n            }\n        ],\n        37: [\n            function (require, module, exports) {\n                var Option = require(45);\n                var FilterOptionOutput = require(39);\n                var EqualizerFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(EqualizerFilterOptionOutput, _FilterOptionOutput);\n                    function EqualizerFilterOptionOutput() {\n                        ___babelHelper___classCallCheck(this, EqualizerFilterOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.apply(this, arguments));\n                    }\n                    EqualizerFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        var fixedOption = this.option.fix();\n                        return Option.EqualizerFilter.frequencies.map(function (freq) {\n                            var biquadNode = audioContext.createBiquadFilter();\n                            biquadNode.type = 'peaking';\n                            biquadNode.frequency.value = freq;\n                            biquadNode.gain.value = fixedOption['gain' + freq].value;\n                            return biquadNode;\n                        });\n                    };\n                    return EqualizerFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = EqualizerFilterOptionOutput;\n            },\n            {\n                '39': 39,\n                '45': 45\n            }\n        ],\n        38: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var Feature = function () {\n                    function Feature() {\n                        ___babelHelper___classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        return prevNodeJsNames;\n                    };\n                    return Feature;\n                }();\n                module.exports = Feature;\n            },\n            { '17': 17 }\n        ],\n        39: [\n            function (require, module, exports) {\n                var debounce = require(8);\n                var formatNumbers = require(10);\n                var GroupOptionOutput = require(11);\n                var width = 300;\n                var height = 300;\n                var pad = 30;\n                var maxNGridLines = 10;\n                var fontSize = 10;\n                var fontOffset = 3;\n                var minFrequencyInLogMode = 10;\n                var audioContext = undefined;\n                var linearFrequencyArray = undefined, logFrequencyArray = undefined;\n                var logFrequencyArrayLinearLimit0 = undefined, logFrequencyArrayLinearLimit1 = undefined;\n                var magnitudeArray = undefined, phaseArray = undefined;\n                var magnitudeArray0 = undefined, phaseArray0 = undefined;\n                var mix = function (a, b, x) {\n                    return a * (1 - x) + b * x;\n                };\n                var FilterOptionOutput = function (_GroupOptionOutput) {\n                    ___babelHelper___inherits(FilterOptionOutput, _GroupOptionOutput);\n                    function FilterOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, FilterOptionOutput);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _GroupOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var $freqResponseUi = $();\n                        var isFreqResponseUiShown = function () {\n                            return $freqResponseUi.length > 0;\n                        };\n                        var magnitudeCanvasContext = undefined, phaseCanvasContext = undefined;\n                        // TODO remove loitering on hide - but have to cancel update\n                        var magnitudeLogScale = true, frequencyLogScale = false;\n                        var updatePlots = function (filterNodes) {\n                            var removeNans = function (array) {\n                                var interpolate = function (i0, i1) {\n                                    var hasStartValue = i0 >= 0;\n                                    var hasEndValue = i1 < array.length;\n                                    var v0 = undefined, v1 = undefined;\n                                    if (!hasStartValue && !hasEndValue) {\n                                        v0 = v1 = 0;\n                                    } else {\n                                        if (hasStartValue) {\n                                            v0 = array[i0];\n                                        } else {\n                                            v0 = array[i1];\n                                        }\n                                        if (hasEndValue) {\n                                            v1 = array[i1];\n                                        } else {\n                                            v1 = array[i0];\n                                        }\n                                    }\n                                    for (var i = i0 + 1; i < i1; i++) {\n                                        var x = (i - i0) / (i1 - i0);\n                                        array[i] = mix(v0, v1, x);\n                                    }\n                                };\n                                var nanStart = -1;\n                                for (var i = 0; i < array.length; i++) {\n                                    if (!isFinite(array[i])) {\n                                        if (nanStart < 0) {\n                                            nanStart = i;\n                                        }\n                                    } else {\n                                        if (nanStart >= 0) {\n                                            interpolate(nanStart - 1, i);\n                                            nanStart = -1;\n                                        }\n                                    }\n                                }\n                                if (nanStart >= 0) {\n                                    interpolate(nanStart - 1, array.length);\n                                }\n                            };\n                            var frequencyArray = frequencyLogScale ? logFrequencyArray : linearFrequencyArray;\n                            for (var i = 0; i < magnitudeArray.length; i++) {\n                                magnitudeArray[i] = 1;\n                            }\n                            for (var _i = 0; _i < phaseArray.length; _i++) {\n                                phaseArray[_i] = 0;\n                            }\n                            for (var _i2 = 0; _i2 < filterNodes.length; _i2++) {\n                                var filterNode = filterNodes[_i2];\n                                filterNode.getFrequencyResponse(frequencyArray, magnitudeArray0, phaseArray0);\n                                removeNans(magnitudeArray0);\n                                removeNans(phaseArray0);\n                                for (var _i8 = 0; _i8 < magnitudeArray.length; _i8++) {\n                                    magnitudeArray[_i8] *= magnitudeArray0[_i8];\n                                }\n                                for (var _i9 = 0; _i9 < phaseArray.length; _i9++) {\n                                    phaseArray[_i9] += phaseArray0[_i9];\n                                }\n                            }\n                            if (magnitudeLogScale) {\n                                for (var _i3 = 0; _i3 < width; _i3++) {\n                                    // convert to decibels\n                                    magnitudeArray[_i3] = 20 * require(27)(magnitudeArray[_i3]);\n                                }\n                            }\n                            function wrap(v, maxAbs) {\n                                v %= maxAbs * 2;\n                                if (Math.abs(v) <= maxAbs)\n                                    return v;\n                                return v - (v > 0 ? 1 : -1) * maxAbs * 2;\n                            }\n                            var k = 0;\n                            var v0 = 0;\n                            for (var _i4 = 0; _i4 < width; _i4++) {\n                                // unwrap phase\n                                var v1 = wrap(phaseArray[_i4] / Math.PI, 1);\n                                k += v1 < v0 && v0 - v1 > v1 + 2 - v0;\n                                k -= v1 > v0 && v1 - v0 > v0 - (v1 - 2);\n                                v0 = v1;\n                                phaseArray[_i4] = v0 + 2 * k;\n                            }\n                            var plotResponse = function (canvasContext, array, units, enforcedCenter, enforcedRange, enforcedFloor, majorGridLineTest) {\n                                var _Math, _Math2;\n                                var min = undefined, max = undefined;\n                                var setPlotRange = function (min0, max0) {\n                                    var ph = pad / height;\n                                    min = ((min0 + max0) * ph - min0) / (2 * ph - 1);\n                                    max = ((min0 + max0) * ph - max0) / (2 * ph - 1);\n                                };\n                                var minArr = (_Math = Math).min.apply(_Math, array);\n                                var maxArr = (_Math2 = Math).max.apply(_Math2, array);\n                                var minArrCentered = Math.max(minArr, enforcedFloor) - enforcedCenter;\n                                var maxArrCentered = Math.max(maxArr, enforcedFloor) - enforcedCenter;\n                                setPlotRange(enforcedCenter + Math.min(0, -enforcedRange + Math.max(0, maxArrCentered - enforcedRange), minArrCentered), enforcedCenter + Math.max(0, enforcedRange - Math.max(0, -enforcedRange - minArrCentered), maxArrCentered));\n                                var calcY = function (v) {\n                                    return height * (1 - (v - min) / (max - min));\n                                };\n                                var getGridNumbers = function (min, max) {\n                                    var numLogs = require(27)(max - min) - require(27)(maxNGridLines);\n                                    var k = undefined;\n                                    var p = Infinity;\n                                    var _arr = [\n                                        1,\n                                        2,\n                                        5\n                                    ];\n                                    for (var _i5 = 0; _i5 < _arr.length; _i5++) {\n                                        var tk = _arr[_i5];\n                                        var tp = Math.ceil(numLogs - require(27)(tk));\n                                        if (tp < p) {\n                                            p = tp;\n                                            k = tk;\n                                        }\n                                    }\n                                    var dv = k * Math.pow(10, p);\n                                    var v0 = Math.ceil(min / dv) * dv;\n                                    var numbers = [];\n                                    for (var v = v0; v < max; v += dv) {\n                                        numbers.push(v);\n                                    }\n                                    return [\n                                        numbers,\n                                        p < 0 ? -p : 0\n                                    ];\n                                };\n                                var drawGrid = function (numbers, visibleNumbers, calcPosition, labelLimit, units, majorGridLineTest) {\n                                    var _Math3;\n                                    canvasContext.save();\n                                    canvasContext.translate(0, 0.5);\n                                    // don't translate along x to keep dashes sharp\n                                    canvasContext.fillStyle = '#444';\n                                    canvasContext.font = fontSize + 'px';\n                                    canvasContext.textAlign = 'right';\n                                    var getLabel = function (n) {\n                                        return '' + i18n.number(n) + units;\n                                    };\n                                    var labelWidth = (_Math3 = Math).max.apply(_Math3, visibleNumbers.map(function (n) {\n                                        return canvasContext.measureText(getLabel(n)).width;\n                                    }));\n                                    var _loop = function (_i6) {\n                                        var y = Math.round(calcPosition(numbers[_i6]));\n                                        var drawLine = function () {\n                                            canvasContext.beginPath();\n                                            canvasContext.moveTo(0, y);\n                                            canvasContext.lineTo(width, y);\n                                            canvasContext.stroke();\n                                        };\n                                        var majorGridLine = majorGridLineTest(Number(visibleNumbers[_i6]));\n                                        if (majorGridLine) {\n                                            canvasContext.strokeStyle = 'rgba(70%,70%,100%,0.3)';\n                                            canvasContext.setLineDash([]);\n                                            canvasContext.lineWidth = 3;\n                                            drawLine();\n                                        }\n                                        canvasContext.strokeStyle = majorGridLine ? '#000' : '#888';\n                                        canvasContext.setLineDash([1]);\n                                        canvasContext.lineWidth = 1;\n                                        drawLine();\n                                        if (y - fontOffset - fontSize > labelLimit) {\n                                            canvasContext.fillText(getLabel(visibleNumbers[_i6]), fontOffset + labelWidth, y - fontOffset);\n                                        }\n                                    };\n                                    for (var _i6 = 0; _i6 < numbers.length; _i6++) {\n                                        _loop(_i6);\n                                    }\n                                    canvasContext.restore();\n                                    return labelWidth;\n                                };\n                                var drawYGrid = function () {\n                                    var yGridNumbersAndPrecision = getGridNumbers(min, max);\n                                    var yVisibleGridNumbers = formatNumbers.apply(undefined, yGridNumbersAndPrecision);\n                                    return drawGrid(yGridNumbersAndPrecision[0], yVisibleGridNumbers, calcY, 0, units, majorGridLineTest);\n                                };\n                                var drawXGrid = function (yLabelWidth) {\n                                    canvasContext.save();\n                                    canvasContext.rotate(-Math.PI / 2);\n                                    canvasContext.translate(-height, 0);\n                                    var calcX = undefined, xGridNumbersAndPrecision = undefined, xVisibleGridNumbers = undefined;\n                                    if (frequencyLogScale) {\n                                        calcX = function (v) {\n                                            return width * (v - logFrequencyArrayLinearLimit0) / (logFrequencyArrayLinearLimit1 - logFrequencyArrayLinearLimit0);\n                                        };\n                                        xGridNumbersAndPrecision = getGridNumbers(logFrequencyArrayLinearLimit0, logFrequencyArrayLinearLimit1);\n                                        xVisibleGridNumbers = formatNumbers(xGridNumbersAndPrecision[0].map(function (n) {\n                                            return Math.pow(10, n);\n                                        }), 0);\n                                    } else {\n                                        calcX = function (v) {\n                                            return width * (v - frequencyArray[0]) / (frequencyArray[width - 1] - frequencyArray[0]);\n                                        };\n                                        xGridNumbersAndPrecision = getGridNumbers(frequencyArray[0], frequencyArray[width - 1]);\n                                        xVisibleGridNumbers = formatNumbers.apply(undefined, xGridNumbersAndPrecision);\n                                    }\n                                    drawGrid(xGridNumbersAndPrecision[0], xVisibleGridNumbers, calcX, fontOffset + yLabelWidth, ' ' + i18n('units.hertz.a'), function (v) {\n                                        return false;\n                                    });\n                                    canvasContext.restore();\n                                };\n                                var drawGraph = function () {\n                                    canvasContext.save();\n                                    canvasContext.translate(0.5, 0.5);\n                                    // aim at centers of pixels\n                                    canvasContext.strokeStyle = '#F00';\n                                    canvasContext.beginPath();\n                                    for (var _i7 = 0; _i7 < width; _i7++) {\n                                        var x = _i7;\n                                        var _y = calcY(array[_i7]);\n                                        if (_i7 == 0) {\n                                            canvasContext.moveTo(x, _y);\n                                        } else {\n                                            canvasContext.lineTo(x, _y);\n                                        }\n                                    }\n                                    canvasContext.stroke();\n                                    canvasContext.restore();\n                                };\n                                canvasContext.clearRect(0, 0, width, height);\n                                var yLabelWidth = drawYGrid();\n                                drawXGrid(yLabelWidth);\n                                drawGraph();\n                            };\n                            if (magnitudeLogScale) {\n                                plotResponse(magnitudeCanvasContext, magnitudeArray, ' ' + i18n('units.decibel.a'), 0, 1, -100, function (v) {\n                                    return v == 0;\n                                });\n                            } else {\n                                plotResponse(magnitudeCanvasContext, magnitudeArray, '', 1, 0.1, 0, function (v) {\n                                    return v == 0 || v == 1;\n                                });\n                            }\n                            plotResponse(phaseCanvasContext, phaseArray, 'π', 0, 0.1, -Infinity, function (v) {\n                                return v % 2 == 0;\n                            });\n                        };\n                        var delayedUpdate = debounce(function () {\n                            try {\n                                updatePlots(_this.getFilterNodes(audioContext));\n                            } catch (e) {\n                            }\n                        }, 50);\n                        var $frOption = undefined;\n                        var This = _this;\n                        _this.$output.append($frOption = $('<div class=\\'option only-buttons\\'>').append('<label>' + i18n('options-output.filter.frequencyResponse') + ':</label><span class=\\'space\\'> </span>', $('<button type=\\'button\\'>' + i18n('options-output.show') + '</button>').click(function () {\n                            var $button = $(this);\n                            if (!isFreqResponseUiShown()) {\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var filterNodes = undefined;\n                                    try {\n                                        filterNodes = This.getFilterNodes(audioContext);\n                                    } catch (e) {\n                                        $button.replaceWith(i18n('options-output.filter.nodeError'));\n                                        return;\n                                    }\n                                    var $magnitudeCanvas = undefined, $phaseCanvas = undefined;\n                                    $freqResponseUi = $freqResponseUi.add($('<span>').append(' ', $('<label class=\\'nowrap\\'>').append($('<input type=\\'checkbox\\'>').prop('checked', magnitudeLogScale).change(function () {\n                                        magnitudeLogScale = $(this).prop('checked');\n                                        delayedUpdate();\n                                    }), ' ' + i18n('options-output.filter.logMagnitude')), ' ', $('<label class=\\'nowrap\\'>').append($('<input type=\\'checkbox\\'>').prop('checked', frequencyLogScale).change(function () {\n                                        frequencyLogScale = $(this).prop('checked');\n                                        delayedUpdate();\n                                    }), ' ' + i18n('options-output.filter.logFrequency')), ' ')).add($('<div>').append($('<figure>').append('<figcaption>' + i18n('options-output.filter.magnitude') + '</figcaption>', $magnitudeCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>')), $('<figure>').append('<figcaption>' + i18n('options-output.filter.phase') + '</figcaption>', $phaseCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>'))));\n                                    $button.after($freqResponseUi).text(i18n('options-output.hide'));\n                                    magnitudeCanvasContext = $magnitudeCanvas[0].getContext('2d');\n                                    phaseCanvasContext = $phaseCanvas[0].getContext('2d');\n                                    updatePlots(filterNodes);\n                                    $frOption.removeClass('only-buttons');\n                                }, $button, i18n('options-output.filter.contextError'));\n                            } else {\n                                // TODO cancel scheduled update\n                                $freqResponseUi.remove();\n                                $freqResponseUi = $();\n                                $button.text(i18n('options-output.show'));\n                                $frOption.addClass('only-buttons');\n                            }\n                        })));\n                        option.addUpdateCallback(function () {\n                            if (isFreqResponseUiShown()) {\n                                delayedUpdate();\n                            }\n                        });\n                        return _this;\n                    }\n                    FilterOptionOutput.prototype.runIfCanCreateAudioContext = function runIfCanCreateAudioContext(fn, $ui, errorMessage) {\n                        var initAudioContext = function () {\n                            audioContext = new (AudioContext || webkitAudioContext)();\n                            linearFrequencyArray = new Float32Array(width);\n                            logFrequencyArray = new Float32Array(width);\n                            magnitudeArray = new Float32Array(width);\n                            phaseArray = new Float32Array(width);\n                            magnitudeArray0 = new Float32Array(width);\n                            phaseArray0 = new Float32Array(width);\n                            var maxFrequency = audioContext.sampleRate / 2;\n                            var log10minFrequency = require(27)(minFrequencyInLogMode);\n                            var log10maxFrequency = require(27)(maxFrequency);\n                            for (var i = 0; i < width; i++) {\n                                var x = (i + 0.5) / width;\n                                linearFrequencyArray[i] = maxFrequency * x;\n                                logFrequencyArray[i] = Math.pow(10, mix(log10minFrequency, log10maxFrequency, x));\n                            }\n                            logFrequencyArrayLinearLimit0 = mix(log10minFrequency, log10maxFrequency, 0.5 / width);\n                            logFrequencyArrayLinearLimit1 = mix(log10minFrequency, log10maxFrequency, 1 - 0.5 / width);\n                        };\n                        if (!audioContext) {\n                            try {\n                                initAudioContext();\n                            } catch (e) {\n                                $ui.replaceWith(errorMessage);\n                                return;\n                            }\n                        }\n                        fn(audioContext);\n                    };\n                    // abstract\n                    // getFilterNodes(audioContext)\n                    return FilterOptionOutput;\n                }(GroupOptionOutput);\n                module.exports = FilterOptionOutput;\n            },\n            {\n                '10': 10,\n                '11': 11,\n                '27': 27,\n                '8': 8\n            }\n        ],\n        40: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<abbr title=',\n                        '>'\n                    ], [\n                        '<abbr title=',\n                        '>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ], [\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ], [\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ]), _templateObject4 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<select id=',\n                        '>'\n                    ], [\n                        '<select id=',\n                        '>'\n                    ]), _templateObject5 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ], [\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ]), _templateObject6 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var camelCase = require(6);\n                var formatNumbers = require(10);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var NoseWrapLines = require(18);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var Option = require(45);\n                var CollectionFeature = require(35);\n                var Filter = function () {\n                    function Filter(options, n) {\n                        ___babelHelper___classCallCheck(this, Filter);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(property) {\n                        return 'options.filters.' + this.type + '.' + property.name;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputJsName = function getPropertyInputJsName(propertyName) {\n                        return camelCase(this.type + this.nSuffix + '.' + propertyName + '.input');\n                    };\n                    Filter.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        var _this = this;\n                        var hasRangeInputs = this.nodeProperties.some(function (property) {\n                            if (property.type == 'range') {\n                                var option = _this.options[property.name];\n                                return option.input;\n                            } else {\n                                return false;\n                            }\n                        });\n                        if (hasRangeInputs) {\n                            featureContext.alignedInputs = true;\n                        }\n                    };\n                    Filter.prototype.getHtmlPropertyLines = function getHtmlPropertyLines(i18n, property) {\n                        var _this2 = this;\n                        if (property.skip) {\n                            return Lines.be();\n                        }\n                        var option = this.options[property.name];\n                        var inputHtmlName = this.getPropertyInputHtmlName(property.name);\n                        var a = Lines.b();\n                        if (property.type == 'range' && option.input) {\n                            var p = option.precision;\n                            var fmtAttrs = formatNumbers.html({\n                                min: option.min,\n                                max: option.max,\n                                value: option.value\n                            }, p);\n                            var fmtLabels = formatNumbers({\n                                min: option.min,\n                                max: option.max\n                            }, p);\n                            var minMax = function (n) {\n                                return i18n.numberWithUnits(n, option.unit, function (a, e) {\n                                    return Lines.html(_templateObject, e) + a + '</abbr>';\n                                });\n                            };\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), '<span class=min>' + minMax(fmtLabels.min) + '</span>', Lines.html(_templateObject3, inputHtmlName, fmtAttrs.value, fmtAttrs.min, fmtAttrs.max, p ? Math.pow(0.1, p).toFixed(p) : false), '<span class=max>' + minMax(fmtLabels.max) + '</span>');\n                        } else if (property.type == 'select' && option.input) {\n                            var _WrapLines$b;\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), (_WrapLines$b = WrapLines.b(Lines.html(_templateObject4, inputHtmlName), '</select>')).ae.apply(_WrapLines$b, option.availableValues.map(function (value) {\n                                var title = i18n(_this2.getPropertyOptionName(property) + '.' + value);\n                                return Lines.html(_templateObject5, option.value == value, value != title && value, title);\n                            })));\n                        } else if (property.type == 'xhr') {\n                            a(Lines.html(_templateObject6, inputHtmlName, i18n(this.getPropertyOptionName(property) + '.loading')));\n                        }\n                        return a.e();\n                    };\n                    // { not called if skipNode is set\n                    Filter.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var _this3 = this;\n                        return Lines.bae.apply(Lines, this.nodeProperties.map(function (property) {\n                            return NoseWrapLines.b('<div>', '</div>').ae(_this3.getHtmlPropertyLines(i18n, property));\n                        }));\n                    };\n                    Filter.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type)), featureContext.getJsConnectAssignLines('var', this.nodeJsName, 'ctx.' + this.ctxCreateMethodName + '()', prevNodeJsNames));\n                    };\n                    ___babelHelper___createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        },\n                        {\n                            key: 'skipNode',\n                            get: function () {\n                                return false;\n                            }\n                        },\n                        {\n                            key: 'nodeJsNames',\n                            get: function () {\n                                return [this.nodeJsName];\n                            }\n                        },\n                        {\n                            key: 'connectToNodeJsNames',\n                            get: function () {\n                                return this.nodeJsNames;\n                            }    // }\n                                 // abstract:\n                                 // get type()\n                                 // get ctxCreateMethodName()\n                                 // get nodeProperties()\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var SinglePathFilter = function (_Filter) {\n                    ___babelHelper___inherits(SinglePathFilter, _Filter);\n                    function SinglePathFilter() {\n                        ___babelHelper___classCallCheck(this, SinglePathFilter);\n                        return ___babelHelper___possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                    }\n                    SinglePathFilter.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this5 = this;\n                        return Lines.bae.apply(Lines, [_Filter.prototype.getJsInitLines.call(this, featureContext, i18n, prevNodeJsNames)].concat(this.nodeProperties.map(function (property) {\n                            if (property.skip) {\n                                return Lines.be();\n                            }\n                            var option = _this5.options[property.name];\n                            var nodePropertyJsName = _this5.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '');\n                            var a = JsLines.b();\n                            if (option.input) {\n                                var inputJsName = _this5.getPropertyInputJsName(property.name);\n                                var inputHtmlName = _this5.getPropertyInputHtmlName(property.name);\n                                var value = inputJsName + '.value';\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                var eventProp = property.type == 'range' ? 'oninput' : 'onchange';\n                                a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', // was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\n                                ';(' + inputJsName + '.' + eventProp + '=function(){', '\\t' + nodePropertyJsName + '=' + value + ';', '})();');\n                            } else if (option.value != option.defaultValue) {\n                                var _value = option.value;\n                                if (property.type == 'select') {\n                                    _value = '\\'' + _value + '\\'';\n                                }\n                                if (property.fn) {\n                                    _value = property.fn(_value);\n                                }\n                                a(nodePropertyJsName + '=' + _value + ';');\n                            }\n                            return a.e();\n                        })));\n                    };\n                    return SinglePathFilter;\n                }(Filter);\n                var PassiveByDefaultSinglePathFilter = function (_SinglePathFilter) {\n                    ___babelHelper___inherits(PassiveByDefaultSinglePathFilter, _SinglePathFilter);\n                    function PassiveByDefaultSinglePathFilter() {\n                        ___babelHelper___classCallCheck(this, PassiveByDefaultSinglePathFilter);\n                        return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(PassiveByDefaultSinglePathFilter, [{\n                            key: 'skipNode',\n                            get: function () {\n                                var _this7 = this;\n                                return this.nodeProperties.every(function (property) {\n                                    var option = _this7.options[property.name];\n                                    return option.value == option.defaultValue && !option.input;\n                                });\n                            }\n                        }]);\n                    return PassiveByDefaultSinglePathFilter;\n                }(SinglePathFilter);\n                var filterClasses = {\n                    gain: function (_PassiveByDefaultSing) {\n                        ___babelHelper___inherits(gain, _PassiveByDefaultSing);\n                        function gain() {\n                            ___babelHelper___classCallCheck(this, gain);\n                            return ___babelHelper___possibleConstructorReturn(this, _PassiveByDefaultSing.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(PassiveByDefaultSinglePathFilter),\n                    panner: function (_PassiveByDefaultSing2) {\n                        ___babelHelper___inherits(panner, _PassiveByDefaultSing2);\n                        function panner() {\n                            ___babelHelper___classCallCheck(this, panner);\n                            return ___babelHelper___possibleConstructorReturn(this, _PassiveByDefaultSing2.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(PassiveByDefaultSinglePathFilter),\n                    biquad: function (_SinglePathFilter2) {\n                        ___babelHelper___inherits(biquad, _SinglePathFilter2);\n                        function biquad() {\n                            ___babelHelper___classCallCheck(this, biquad);\n                            return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter2.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            type: 'select'\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            fn: function (x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            },\n                                            skip: !this.options.type.input && !Option.BiquadFilter.typeUsesQ(this.options.type.value)\n                                        },\n                                        {\n                                            name: 'gain',\n                                            type: 'range',\n                                            skip: !this.options.type.input && !Option.BiquadFilter.typeUsesGain(this.options.type.value)\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    // lowshelf, highshelf and peaking are passive when gain==0\n                                    return !this.options.type.input && [\n                                        'lowshelf',\n                                        'highshelf',\n                                        'peaking'\n                                    ].indexOf(this.options.type.value) >= 0 && !this.options.gain.input && this.options.gain == 0;\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(SinglePathFilter),\n                    iir: function (_SinglePathFilter3) {\n                        ___babelHelper___inherits(iir, _SinglePathFilter3);\n                        function iir() {\n                            ___babelHelper___classCallCheck(this, iir);\n                            return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter3.apply(this, arguments));\n                        }\n                        iir.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type)), featureContext.getJsConnectAssignLines('var', this.nodeJsName, 'ctx.' + this.ctxCreateMethodName + '([' + this.options.feedforward.entries + '],[' + this.options.feedback.entries + '])', prevNodeJsNames));\n                        };\n                        ___babelHelper___createClass(iir, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'iir';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createIIRFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [];\n                                }\n                            }\n                        ]);\n                        return iir;\n                    }(SinglePathFilter),\n                    convolver: function (_Filter2) {\n                        ___babelHelper___inherits(convolver, _Filter2);\n                        function convolver() {\n                            ___babelHelper___classCallCheck(this, convolver);\n                            return ___babelHelper___possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        convolver.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            _Filter2.prototype.requestFeatureContext.call(this, featureContext);\n                            featureContext.loader = true;\n                        };\n                        convolver.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            var messageHtmlName = this.getPropertyInputHtmlName('buffer');\n                            var a = JsLines.b();\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                            } else {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')));\n                            }\n                            a(featureContext.getJsConnectAssignLines('var', this.nodeJsName, 'ctx.' + this.ctxCreateMethodName + '()', prevNodeJsNames));\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a(featureContext.getJsConnectAssignLines('var', this.wetGainNodeJsName, 'ctx.createGain()', [this.nodeJsName]), featureContext.getJsConnectAssignLines('var', this.dryGainNodeJsName, 'ctx.createGain()', prevNodeJsNames));\n                                if (this.options.reverb.input) {\n                                    var inputHtmlName = this.getPropertyInputHtmlName('reverb');\n                                    var inputJsName = this.getPropertyInputJsName('reverb');\n                                    a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', ';(' + inputJsName + '.oninput=function(){', '\\t' + this.wetGainNodeJsName + '.gain.value=' + inputJsName + '.value;', '\\t' + this.dryGainNodeJsName + '.gain.value=1-' + inputJsName + '.value;', '})();');\n                                }\n                            }\n                            a('loadSample(\\'' + this.options.url + '\\',function(buffer){', // TODO html escape\n                            '\\t' + this.nodeJsName + '.buffer=buffer;', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';', '}');\n                            if (featureContext.loaderOnError) {\n                                a.t(',function(){', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.filters.convolver.buffer.error') + '\\';', '}');\n                            }\n                            a.t(');');\n                            return a.e();\n                        };\n                        ___babelHelper___createClass(convolver, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'convolver';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createConvolver';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'reverb',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'buffer',\n                                            type: 'xhr'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'dryGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.dry.gain.node');\n                                }\n                            },\n                            {\n                                key: 'wetGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.wet.gain.node');\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.options.reverb == 0 && !this.options.reverb.input;\n                                }\n                            },\n                            {\n                                key: 'nodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.wetGainNodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.nodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            }\n                        ]);\n                        return convolver;\n                    }(Filter),\n                    equalizer: function (_Filter3) {\n                        ___babelHelper___inherits(equalizer, _Filter3);\n                        function equalizer() {\n                            ___babelHelper___classCallCheck(this, equalizer);\n                            return ___babelHelper___possibleConstructorReturn(this, _Filter3.apply(this, arguments));\n                        }\n                        equalizer.prototype.getFrequencyOption = function getFrequencyOption(i) {\n                            return this.options[this.nodeProperties[i].name];\n                        };\n                        equalizer.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            if (!this.allGainsConstant) {\n                                // TODO this check is likely not needed, this.allGainsConstant is not set\n                                featureContext.alignedInputs = true;\n                            }\n                        };\n                        equalizer.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            var _this14 = this;\n                            var singleFreq = this.affectedFreqsAndOptions.length == 1;\n                            var allGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == false;\n                            });\n                            var noGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == true;\n                            });\n                            var getJsData = function () {\n                                return _this14.affectedFreqsAndOptions.map(function (fo) {\n                                    if (noGainsConstant) {\n                                        return fo.freq;\n                                    } else {\n                                        return '[' + fo.freq + ',' + (fo.option.input ? 'null' : fo.option.value) + ']';\n                                    }\n                                }).join();\n                            };\n                            var getJsDataItem = function () {\n                                if (noGainsConstant) {\n                                    return 'freq';\n                                } else {\n                                    return 'freqData';\n                                }\n                            };\n                            var getJsLoopLines = function () {\n                                var freq = singleFreq ? _this14.affectedFreqsAndOptions[0].freq : 'freq';\n                                var gain = singleFreq ? _this14.affectedFreqsAndOptions[0].option.value : 'gain';\n                                var nodeJsName = allGainsConstant || singleFreq ? _this14.nodeJsName : 'node';\n                                var inputJsName = singleFreq ? _this14.getPropertyInputJsName('gain' + freq) : 'input';\n                                var inputHtmlNameExpr = singleFreq ? '\\'' + _this14.getPropertyInputHtmlName('gain' + freq) + '\\'' : '\\'' + _this14.getPropertyInputHtmlName('gain') + '\\'+freq';\n                                var a = JsLines.b();\n                                if (!(noGainsConstant || singleFreq)) {\n                                    a('var freq=freqData[0], gain=freqData[1];');\n                                }\n                                var connectors = undefined;\n                                if (singleFreq) {\n                                    connectors = prevNodeJsNames;\n                                } else {\n                                    if (prevNodeJsNames.length == 1) {\n                                        connectors = ['prevNode'];\n                                    } else {\n                                        connectors = 'prevNodes';\n                                    }\n                                }\n                                a(featureContext.getJsConnectAssignLines(allGainsConstant && !singleFreq ? '' : 'var', nodeJsName, 'ctx.' + _this14.ctxCreateMethodName + '()', connectors));\n                                if (featureContext.setConnectSampleToJsNames && !singleFreq) {\n                                    a('if (' + _this14.connectToNodeJsName + '===undefined) {', '\\t' + _this14.connectToNodeJsName + '=' + nodeJsName + ';', '}');\n                                }\n                                a(nodeJsName + '.type=\\'peaking\\';', nodeJsName + '.frequency.value=' + freq + ';');\n                                var constLines = JsLines.bae(nodeJsName + '.gain.value=' + gain + ';');\n                                var varLines = JsLines.bae('var ' + inputJsName + '=document.getElementById(' + inputHtmlNameExpr + ');', ';(' + inputJsName + '.oninput=function(){', '\\t' + nodeJsName + '.gain.value=' + inputJsName + '.value;', '})();');\n                                if (!noGainsConstant && allGainsConstant) {\n                                    a(constLines);\n                                } else if (noGainsConstant && !allGainsConstant) {\n                                    a(varLines);\n                                } else if (!noGainsConstant && !allGainsConstant) {\n                                    a(WrapLines.b('if (gain!==null) {', '} else {', '}').ae(constLines, varLines));\n                                }\n                                if (!singleFreq) {\n                                    var outerNodeJsName = allGainsConstant ? nodeJsName : _this14.nodeJsName + '=' + nodeJsName;\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode=' + outerNodeJsName + ';');\n                                    } else {\n                                        a('prevNodes=[' + outerNodeJsName + '];');\n                                    }\n                                }\n                                return a.e();\n                            };\n                            if (singleFreq) {\n                                return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')), getJsLoopLines());\n                            } else {\n                                var a = JsLines.b();\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                                if (prevNodeJsNames.length == 1) {\n                                    a('var prevNode=' + prevNodeJsNames[0] + ';');\n                                } else {\n                                    a('var prevNodes=[' + prevNodeJsNames.join() + '];');\n                                }\n                                if (featureContext.setConnectSampleToJsNames) {\n                                    a('var ' + this.connectToNodeJsName + ';');\n                                }\n                                a('var ' + this.nodeJsName + ';', WrapLines.b(JsLines.bae(';[' + getJsData() + '].forEach(function(' + getJsDataItem() + '){'), JsLines.bae('});')).ae(getJsLoopLines()));\n                                return a.e();\n                            }\n                        };\n                        ___babelHelper___createClass(equalizer, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'equalizer';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'frequencies',\n                                get: function () {\n                                    return Option.EqualizerFilter.frequencies;\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return this.frequencies.map(function (freq) {\n                                        return {\n                                            name: 'gain' + freq,\n                                            type: 'range'\n                                        };\n                                    });\n                                }\n                            },\n                            {\n                                key: 'affectedFreqsAndOptions',\n                                get: function () {\n                                    var _this15 = this;\n                                    return this.frequencies.map(function (freq, i) {\n                                        var option = _this15.getFrequencyOption(i);\n                                        return {\n                                            freq: freq,\n                                            option: option\n                                        };\n                                    }).filter(function (fo) {\n                                        return fo.option.input != false || fo.option.value != 0;\n                                    });\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.affectedFreqsAndOptions.length == 0;\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsName',\n                                get: function () {\n                                    if (this.affectedFreqsAndOptions.length == 1) {\n                                        return this.nodeJsName;\n                                    } else {\n                                        return camelCase('connect.to.' + this.type + this.nSuffix + '.node');\n                                    }\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsNames',\n                                get: function () {\n                                    return [this.connectToNodeJsName];\n                                }\n                            }\n                        ]);\n                        return equalizer;\n                    }(Filter)\n                };\n                var FilterSequence = function (_CollectionFeature) {\n                    ___babelHelper___inherits(FilterSequence, _CollectionFeature);\n                    function FilterSequence() {\n                        ___babelHelper___classCallCheck(this, FilterSequence);\n                        return ___babelHelper___possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    FilterSequence.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return filterClasses[entryOption.filter];\n                    };\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        var _arr = this.entries;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var entry = _arr[_i];\n                            if (!entry.skipNode) {\n                                featureContext.audioContext = true;\n                                entry.requestFeatureContext(featureContext);\n                                if (featureContext.connectSampleToJsNames === undefined) {\n                                    featureContext.connectSampleToJsNames = entry.connectToNodeJsNames;\n                                }\n                            }\n                        }\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return Lines.bae.apply(Lines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    FilterSequence.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return InterleaveLines.bae.apply(InterleaveLines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            var lines = entry.getJsInitLines(featureContext, i18n, prevNodeJsNames);\n                            prevNodeJsNames = entry.nodeJsNames;\n                            return lines;\n                        }));\n                    };\n                    FilterSequence.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        var _arr2 = this.entries;\n                        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n                            var entry = _arr2[_i2];\n                            if (!entry.skipNode) {\n                                prevNodeJsNames = entry.nodeJsNames;\n                            }\n                        }\n                        return prevNodeJsNames;\n                    };\n                    return FilterSequence;\n                }(CollectionFeature);\n                module.exports = FilterSequence;\n            },\n            {\n                '10': 10,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '23': 23,\n                '26': 26,\n                '35': 35,\n                '45': 45,\n                '6': 6\n            }\n        ],\n        41: [\n            function (require, module, exports) {\n                var webaudioSpec = 'https://webaudio.github.io/web-audio-api/';\n                var webaudioIssue = function (n) {\n                    return '<a href=\\'https://github.com/WebAudio/web-audio-api/issues/' + n + '\\'>' + n + '</a>';\n                };\n                var webaudioDetect = 'https://github.com/GoogleChrome/web-audio-samples/wiki/Detection-of-lowpass-BiquadFilter-implementation';\n                var enColors = '{<span style=\\'color:#800\\'>red</span>,<span style=\\'color:#080\\'>green</span>,<span style=\\'color:#008\\'>blue</span>,opacity}';\n                var ruColors = '{<span style=\\'color:#800\\'>Красный</span> ,<span style=\\'color:#080\\'>Зелёный</span> ,<span style=\\'color:#008\\'>Синий</span> ,Альфа-}канал';\n                var langStrings = {\n                    en: {\n                        'options.sources': 'Sources',\n                        'options.sources.{audio,video}': '{Audio,Video} element',\n                        'options.sources.{audio,video}.add': 'Add {} element',\n                        'options.sources.sample': 'Sample',\n                        'options.sources.sample.add': 'Add sample',\n                        'options.sources.sample.buffer.loading': 'Loading and decoding the sample',\n                        'options.sources.sample.buffer.error': 'Error while loading the sample',\n                        'options.sources.sample.repeat': 'Repeat sample',\n                        'options.sources.sample.interval': 'Interval between repeats',\n                        'options.sources.sample.randomShift': 'Random shift of a start time',\n                        'options.sources.sample.pitch': 'Pitch',\n                        'options.sources.sample.randomPitch': 'Random pitch',\n                        'options.sources.sample.gain': 'Gain',\n                        'options.sources.sample.randomGain': 'Random gain',\n                        'options.sources.{audio,video,sample}.url': 'Source URL',\n                        'options.sources.video.{width,height}': 'Player {}',\n                        'options.filters': 'Filters',\n                        'options.filters.gain': 'Gain',\n                        'options.filters.gain.add': 'Add gain',\n                        'options.filters.gain.gain': 'Gain',\n                        'options.filters.panner': 'Stereo panner',\n                        'options.filters.panner.add': 'Add stereo panner',\n                        'options.filters.panner.pan': 'Pan',\n                        'options.filters.biquad': 'Biquad filter',\n                        // [[Digital biquad filter]]\n                        'options.filters.biquad.add': 'Add biquad filter',\n                        'options.filters.biquad.type': 'Filter type',\n                        'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': '{}',\n                        'options.filters.biquad.frequency': 'Frequency',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': 'log(Q)',\n                        'options.filters.biquad.gain': 'Gain',\n                        'options.filters.iir': 'IIR filter',\n                        'options.filters.iir.add': 'Add IIR filter',\n                        'options.filters.iir.feedforward': 'Feedforward coefficients',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': 'Add coefficient',\n                        'options.filters.iir.feedback': 'Feedback coefficients',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': 'Add coefficient',\n                        'options.filters.convolver': 'Convolver',\n                        'options.filters.convolver.add': 'Add convolver',\n                        'options.filters.convolver.url': 'Impulse responce URL',\n                        'options.filters.convolver.reverb': 'Reverb (dry/wet)',\n                        'options.filters.convolver.buffer.loading': 'Loading and decoding the impulse response',\n                        'options.filters.convolver.buffer.error': 'Error while loading the impulse response',\n                        'options.filters.equalizer': 'Equalizer',\n                        'options.filters.equalizer.add': 'Add equalizer',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': '{} Hz gain',\n                        'options.destination': 'Destination',\n                        'options.destination.compressor': 'Dynamics compressor',\n                        'options.destination.compressor.enabled': 'Add dynamics compressor before the destination',\n                        'options.destination.{waveform,frequencies}': '{Waveform,Frequencies} visualization',\n                        'options.destination.{waveform,frequencies}.enabled': 'Enable {} visualization',\n                        'options.destination.waveform.width': 'Waveform line width',\n                        'options.destination.waveform.color': 'Waveform line color',\n                        'options.destination.waveform.color.{r,g,b,a}': 'Waveform line ' + enColors,\n                        'options.destination.frequencies.cutoff': 'Limit plot to a fraction of low frequences',\n                        'options.destination.frequencies.base': 'Frequency bars extend from',\n                        'options.destination.frequencies.base.{bottom,middle}': '{} of canvas',\n                        'options.destination.frequencies.coloring': 'Frequency bars coloring',\n                        'options.destination.frequencies.coloring.component': 'with single color component',\n                        'options.destination.frequencies.coloring.spectral': 'spectral',\n                        'options.destination.frequencies.coloringInput': 'Frequency bars color depends on',\n                        'options.destination.frequencies.coloringInput.{amplitude,frequency}': '{}',\n                        'options.destination.frequencies.outline': 'Frequency bars outline',\n                        'options.destination.frequencies.outline.enabled': 'Enable frequency bars outline',\n                        'options.destination.frequencies.outline.width': 'Frequency bars outline width',\n                        'options.destination.frequencies.outline.color': 'Frequency bars outline color',\n                        'options.destination.frequencies.outline.color.{r,g,b,a}': 'Frequency bars outline ' + enColors,\n                        'options.destination.volume': 'Volume meter',\n                        'options.destination.volume.enabled': 'Enable volume meter',\n                        'options.destination.volume.stereo': 'Meters for left and right stereo channels',\n                        'options.destination.analyser': 'Analyser',\n                        'options.destination.analyser.logFftSize': 'FFT size (power of 2)',\n                        'options.canvas': 'Canvas',\n                        'options.canvas.{width,height}': 'Canvas {}',\n                        'options.canvas.background': 'Background',\n                        'options.canvas.background.type': 'Background type',\n                        'options.canvas.background.type.{clear,filled}': '{}',\n                        'options.canvas.background.color': 'Background fill color',\n                        'options.canvas.background.color.{r,g,b,a}': 'Background fill ' + enColors,\n                        'options.loader': 'Sample loader',\n                        'options.loader.errors': 'Error handling',\n                        'options.loader.errors.none': 'disabled',\n                        'options.loader.errors.network': 'network errors',\n                        'options.loader.errors.http': 'network and HTTP errors',\n                        'options.api': 'Web Audio API support',\n                        'options.api.noVendorPrefix': 'Can create an audio context without a vendor prefix',\n                        'options.api.connectReturnValue': 'Can use a return value of <code>AudioNode.connect()</code>',\n                        'options-info.destination.analyser.logFftSize': '[[Fast Fourier transform]] size for the waveform/frequency visualization. Use a larger size to get a wider time window for the waveform and thinner frequency bars.',\n                        'options-info.canvas.background.color.a': 'Lower opacity values lead to a blur effect.',\n                        'options-output.input': 'Editable',\n                        'options-output.range': 'with range',\n                        'options-output.filter.frequencyResponse': 'Frequency response',\n                        'options-output.filter.magnitude': 'Magnitude',\n                        'options-output.filter.phase': 'Phase',\n                        'options-output.filter.logMagnitude': 'log magnitude scale',\n                        'options-output.filter.logFrequency': 'log frequency scale',\n                        'options-output.filter.contextError': 'Error creating audio context. Your browser likely doesn\\'t support Web Audio API.',\n                        'options-output.filter.nodeError': 'Error creating filter node. Your browser likely doesn\\'t support this filter type.',\n                        'options-output.filter.biquad.clone': 'Clone as IIR filter',\n                        'options-output.filter.biquad.clone.{pre,post}': 'Clone with {}-2016-04-15 coefficients',\n                        'options-output.filter.biquad.clone.info': '<a href=\\'' + webaudioSpec + '\\'>The API specification</a> was self-contradictory and implementations weren\\'t following it. Additionally, it was discovered that filter coefficient formulas need to be changed to accomodate a wider range of lowpass and highpass filters. See Web Audio API issues ' + webaudioIssue(769) + ', ' + webaudioIssue(771) + ' and ' + webaudioIssue(791) + ' for details. A possible method to check if an implementation has switched to the updated formulas is offered <a href=\\'' + webaudioDetect + '\\'>here</a>.',\n                        'options-output.show': 'Show',\n                        'options-output.hide': 'Hide',\n                        'code-output.warning.jsfiddle-run': 'You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working',\n                        'code-output.warning.interesting': 'You need at least one source and some processing enabled to get interesting JavaScript code',\n                        'code.title': 'Web Audio API example \\u2014 generated code',\n                        'label.sources.sample.play': 'Play sample',\n                        'label.destination.compressor': 'Enable dynamics compressor',\n                        'comment.context': 'create [audio context][context]',\n                        'comment.sources.audio': 'create [audio source node][source]',\n                        'comment.sources.video': 'create [video source node][source]',\n                        'comment.sources.sample': 'load [sample][buffer]',\n                        'comment.filters.gain': 'create [gain node][gain]',\n                        'comment.filters.panner': 'create [stereo panner node][panner]',\n                        'comment.filters.biquad': 'create [biquad filter node][biquad]',\n                        'comment.filters.iir': 'create [IIR filter node][iir]',\n                        'comment.filters.convolver': 'create dry and wet routes with [convolver node][convolver]',\n                        'comment.filters.convolver.single': 'create [convolver node][convolver]',\n                        'comment.filters.equalizer': 'create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]',\n                        'comment.filters.equalizer.single': 'create equalizer as a [peaking][peaking] [biquad filter node][biquad]',\n                        'comment.destination': 'connect last node to [destination][destination]',\n                        'comment.destination.compressor': 'create [dynamics compressor node][compressor]',\n                        'comment.destination.analyser': 'create [analyser node][analyser]',\n                        'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': 'create [analyser node][analyser] for {waveform,frequencies,waveform and frequencies} visualization',\n                        'comment.destination.analyser.split': 'create [channel splitter node][splitter] connected to two [analyser nodes][analyser]',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2}': 'pixel{,s}',\n                        'units.hertz.a': 'Hz',\n                        'units.hertz.{1,2}': 'Hertz',\n                        'units.decibel.a': 'dB',\n                        'units.decibel.{1,2}': 'decibel{,s}',\n                        'units.second.a': 's',\n                        'units.second.{1,2}': 'second{,s}'\n                    },\n                    ru: {\n                        'options.sources': 'Источники',\n                        'options.sources.{audio,video}': 'Элемент <code>{}</code>',\n                        'options.sources.{audio,video}.add': 'Добавить элемент <code>{}</code>',\n                        'options.sources.sample': 'Сэмпл',\n                        'options.sources.sample.add': 'Добавить сэмпл',\n                        'options.sources.sample.buffer.loading': 'Идёт загрузка и декодирование сэмпла',\n                        'options.sources.sample.buffer.error': 'Ошибка загрузки сэмпла',\n                        'options.sources.sample.repeat': 'Повторить сэмпл',\n                        'options.sources.sample.interval': 'Интервал между повторами',\n                        'options.sources.sample.randomShift': 'Случайный сдвиг начала проигрывания',\n                        'options.sources.sample.pitch': 'Высота',\n                        'options.sources.sample.randomPitch': 'Случайная высота',\n                        'options.sources.sample.gain': 'Громкость',\n                        'options.sources.sample.randomGain': 'Случайная громкость',\n                        'options.sources.{audio,video,sample}.url': 'URL источника',\n                        'options.sources.video.{width,height}': '{Ширина,Высота} проигрывателя',\n                        'options.filters': 'Фильтры',\n                        'options.filters.gain': 'Усилитель',\n                        'options.filters.gain.add': 'Добавить усилитель',\n                        'options.filters.gain.gain': 'Коэффициент усиления',\n                        'options.filters.panner': 'Панорамирование',\n                        'options.filters.panner.add': 'Добавить панорамирование',\n                        'options.filters.panner.pan': 'Баланс',\n                        'options.filters.biquad': 'Биквадратичный фильтр',\n                        'options.filters.biquad.add': 'Добавить биквадратичный фильтр',\n                        'options.filters.biquad.type': 'Тип фильтра',\n                        'options.filters.biquad.type.lowpass': 'нижних частот',\n                        'options.filters.biquad.type.highpass': 'верхних частот',\n                        'options.filters.biquad.type.bandpass': 'полосовой',\n                        'options.filters.biquad.type.{lowshelf,highshelf,peaking}': '{}',\n                        // TODO\n                        'options.filters.biquad.type.notch': 'полосно-заграждающий',\n                        'options.filters.biquad.type.allpass': 'всепропускающий',\n                        // http://www.dsplib.ru/content/allpass/allpass.html\n                        'options.filters.biquad.frequency': 'Частота',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': 'Логарифм добротности',\n                        'options.filters.biquad.gain': 'Усиление',\n                        'options.filters.iir': 'БИХ-фильтр',\n                        'options.filters.iir.add': 'Добавить БИХ-фильтр',\n                        'options.filters.iir.feedforward': 'Коэффициенты прямой связи',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': 'Добавить коэффициент',\n                        'options.filters.iir.feedback': 'Коэффициенты обратной связи',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': 'Добавить коэффициент',\n                        'options.filters.convolver': 'Свёртка',\n                        'options.filters.convolver.add': 'Добавить свёртку',\n                        'options.filters.convolver.url': 'URL импульсной характеристики',\n                        'options.filters.convolver.reverb': 'Соотношение прямого/обработанного звука',\n                        // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\n                        'options.filters.convolver.buffer.loading': 'Идёт загрузка и декодирование импульсной характеристики',\n                        'options.filters.convolver.buffer.error': 'Ошибка загрузки импульсной характеристики',\n                        'options.filters.equalizer': 'Эквалайзер',\n                        'options.filters.equalizer.add': 'Добавить эквалайзер',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': 'Усиление частоты {} Гц',\n                        'options.destination': 'Выход',\n                        'options.destination.compressor': 'Компрессор',\n                        'options.destination.compressor.enabled': 'Добавить компрессор перед выходом',\n                        'options.destination.{waveform,frequencies}': 'Визуализация {формы волны,частот}',\n                        'options.destination.{waveform,frequencies}.enabled': 'Включить визуализацию {формы волны,частот}',\n                        'options.destination.waveform.width': 'Ширина линии волны',\n                        'options.destination.waveform.color': 'Цвет линии волны',\n                        'options.destination.waveform.color.{r,g,b,a}': ruColors + ' линии волны',\n                        'options.destination.frequencies.cutoff': 'Ограничить рисование долей низких частот',\n                        'options.destination.frequencies.base': 'Полосы частот растут от',\n                        'options.destination.frequencies.base.{bottom,middle}': '{низа,середины} элемента <code>canvas</code>',\n                        'options.destination.frequencies.coloring': 'Раскраска полос частот',\n                        'options.destination.frequencies.coloring.component': 'одним цветовым каналом',\n                        'options.destination.frequencies.coloring.spectral': 'спектральная',\n                        'options.destination.frequencies.coloringInput': 'Цвет полос зависит от',\n                        'options.destination.frequencies.coloringInput.{amplitude,frequency}': '{амплитуды,частоты}',\n                        'options.destination.frequencies.outline': 'Контур полос частот',\n                        'options.destination.frequencies.outline.enabled': 'Включить рисование контура частот',\n                        'options.destination.frequencies.outline.width': 'Ширина контура частот',\n                        'options.destination.frequencies.outline.color': 'Цвет контура частот',\n                        'options.destination.frequencies.outline.color.{r,g,b,a}': ruColors + ' контура частот',\n                        'options.destination.volume': 'Индикатор громкости',\n                        'options.destination.volume.enabled': 'Включить индикатор громкости',\n                        'options.destination.volume.stereo': 'Отдельные индикаторы для левого и правого каналов',\n                        'options.destination.analyser': 'Анализатор',\n                        'options.destination.analyser.logFftSize': 'Размер БПФ (степень 2)',\n                        'options.canvas': 'Элемент <code>canvas</code>',\n                        'options.canvas.{width,height}': '{Ширина,Высота} элемента <code>canvas</code>',\n                        'options.canvas.background': 'Фон',\n                        'options.canvas.background.type': 'Тип фона',\n                        'options.canvas.background.type.{clear,filled}': '{прозрачный,закрашенный}',\n                        'options.canvas.background.color': 'Цвет фона',\n                        'options.canvas.background.color.{r,g,b,a}': ruColors + ' фона',\n                        'options.loader': 'Загрузчик сэмплов',\n                        'options.loader.errors': 'Обработка ошибок загрузки',\n                        'options.loader.errors.none': 'отключена',\n                        'options.loader.errors.network': 'для сетевых ошибок',\n                        'options.loader.errors.http': 'для сетевых ошибок и ошибок HTTP',\n                        'options.api': 'Поддержка Web Audio API',\n                        'options.api.noVendorPrefix': 'Можно создавать аудио-контекст без префиксов производителей',\n                        'options.api.connectReturnValue': 'Можно использовать значение, возвращаемое <code>AudioNode.connect()</code>',\n                        'options-info.destination.analyser.logFftSize': 'Размер [[Быстрое преобразование Фурье|Быстрого преобразования Фурье]] для визуализаций формы волны и частот. Больший размер даёт более широкое окно для формы волны и более тонкие полосы частот.',\n                        'options-info.canvas.background.color.a': 'Низкие значения альфа-канала приводят к эффекту размывания.',\n                        'options-output.input': 'Значение изменяемо',\n                        'options-output.range': 'в диапазоне',\n                        'options-output.filter.frequencyResponse': 'Частотная характеристика',\n                        'options-output.filter.magnitude': 'Амплитуда',\n                        'options-output.filter.phase': 'Фаза',\n                        'options-output.filter.logMagnitude': 'логарифмическая шкала амплитуды',\n                        'options-output.filter.logFrequency': 'логарифмическая шкала частоты',\n                        'options-output.filter.contextError': 'Ошибка создания аудио-контекста. Вероятно, браузер не поддерживает Web Audio API.',\n                        'options-output.filter.nodeError': 'Ошибка создания узла фильтра. Вероятно, браузер не поддерживает данный тип фильтров.',\n                        'options-output.filter.biquad.clone': 'Клонировать в виде БИХ-фильтра',\n                        'options-output.filter.biquad.clone.{pre,post}': 'Клонировать с коэффициентами по версиям {до,после} 2016-04-15',\n                        'options-output.filter.biquad.clone.info': '<a href=\\'' + webaudioSpec + '\\'>Спецификация API</a> была противоречива и реализации ей не следовали. Также было обнаружено, что формулы для коэффициентов фильтров должны быть изменены, чтобы стало возможно задавать некоторые фильтры низких и высоких частот, которые ранее задать было невозможно. Подробности можно узнать из Web Audio API issues ' + webaudioIssue(769) + ', ' + webaudioIssue(771) + ' и ' + webaudioIssue(791) + '. Возможный метод обнаружения, перешла ли реализация на новые формулы, приводится <a href=\\'' + webaudioDetect + '\\'>здесь</a>.',\n                        'options-output.show': 'Показать',\n                        'options-output.hide': 'Скрыть',\n                        'code-output.warning.jsfiddle-run': 'Для корректного вывода звука в JSFiddle может потребоваться нажатие кнопки <kbd>Run</kbd>',\n                        'code-output.warning.interesting': 'Для нетривиального JavaScript-кода нужно включить по крайней мере один источник и последующую обработку звука',\n                        'code.title': 'Пример использования Web Audio API \\u2014 сгенерированный код',\n                        'label.sources.sample.play': 'Играть сэмпл',\n                        'label.destination.compressor': 'Включить компрессор',\n                        'comment.context': 'создаём [аудио-контекст][context]',\n                        'comment.sources.audio': 'создаём [узел источника аудио][source]',\n                        'comment.sources.video': 'создаём [узел источника видео][source]',\n                        'comment.sources.sample': 'загружаем [сэмпл][buffer]',\n                        'comment.filters.gain': 'создаём [узел усилителя][gain]',\n                        'comment.filters.panner': 'создаём [узел панорамирования][panner]',\n                        'comment.filters.biquad': 'создаём [узел биквадратичного фильтра][biquad]',\n                        'comment.filters.iir': 'создаём [узел БИХ-фильтра][iir]',\n                        'comment.filters.convolver': 'создаём прямой путь и путь через [узел свёртки][convolver]',\n                        'comment.filters.convolver.single': 'создаём [узел свёртки][convolver]',\n                        'comment.filters.equalizer': 'создаём эквалайзер в виде последовательности [peaking][peaking] [биквадратичных фильтров][biquad]',\n                        'comment.filters.equalizer.single': 'создаём эквалайзер в виде [peaking][peaking] [биквадратичного фильтра][biquad]',\n                        'comment.destination': 'соединяем последний узел с [выходом][destination]',\n                        'comment.destination.compressor': 'создаём [узел компрессора][compressor]',\n                        'comment.destination.analyser': 'создаём [узел анализатора][analyser]',\n                        'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': 'создаём [узел анализатора][analyser] для визуализации {формы волны,частот,формы волны и частот}',\n                        'comment.destination.analyser.split': 'создаём [узел разделения каналов][splitter], соединённый с двумя [узлами анализатора][analyser]',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2,5}': 'пиксел{ь,я,ей}',\n                        'units.hertz.a': 'Гц',\n                        'units.hertz.{1,2,5}': 'Герц{,а,}',\n                        'units.decibel.a': 'дБ',\n                        'units.decibel.{1,2,5}': 'децибел{,а,ов}',\n                        'units.second.a': 'с',\n                        'units.second.{1,2,5}': 'секунд{а,ы,}'\n                    }\n                };\n                /*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\n                for (var lang in langStrings) {\n                    var strings = langStrings[lang];\n                    strings = require(12)(strings);\n                    strings = require(13)(lang)(strings);\n                    strings = require(20)(lang)(strings);\n                    strings = require(2)(lang)(strings);\n                    langStrings[lang] = strings;\n                }\n                module.exports = require(14)(langStrings);\n            },\n            {\n                '12': 12,\n                '13': 13,\n                '14': 14,\n                '2': 2,\n                '20': 20\n            }\n        ],\n        42: [\n            function (require, module, exports) {\n                var FilterOptionOutput = require(39);\n                var IIRFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(IIRFilterOptionOutput, _FilterOptionOutput);\n                    function IIRFilterOptionOutput() {\n                        ___babelHelper___classCallCheck(this, IIRFilterOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.apply(this, arguments));\n                    }\n                    IIRFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        return [audioContext.createIIRFilter(this.option.entries[0].entries.map(function (entry) {\n                                return entry.value;\n                            }), this.option.entries[1].entries.map(function (entry) {\n                                return entry.value;\n                            }))];\n                    };\n                    return IIRFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = IIRFilterOptionOutput;\n            },\n            { '39': 39 }\n        ],\n        43: [\n            function (require, module, exports) {\n                var WrapLines = require(26);\n                var JsLines = require(16);\n                var Feature = require(38);\n                var Loader = function (_Feature) {\n                    ___babelHelper___inherits(Loader, _Feature);\n                    function Loader(options) {\n                        ___babelHelper___classCallCheck(this, Loader);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Loader.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.options.errors != 'none') {\n                            featureContext.loaderOnError = true;\n                        }\n                    };\n                    Loader.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.loader)\n                            return JsLines.be();\n                        var a = JsLines.b();\n                        a('var xhr=new XMLHttpRequest();', 'xhr.open(\\'GET\\',url);', // TODO html escape\n                        'xhr.responseType=\\'arraybuffer\\';', 'xhr.onload=function(){');\n                        if (this.options.errors == 'http') {\n                            a('\\tif (this.status==200) {', '\\t\\tctx.decodeAudioData(this.response,onDecode);', // TODO decoding error handling\n                            '\\t} else {', '\\t\\tthis.onerror();', '\\t}');\n                        } else {\n                            a('\\tctx.decodeAudioData(this.response,onDecode);');\n                        }\n                        a('};');\n                        if (this.options.errors != 'none') {\n                            a('xhr.onerror=onError;');\n                        }\n                        a('xhr.send();');\n                        return WrapLines.b(JsLines.bae('function loadSample(url,onDecode' + (this.options.errors != 'none' ? ',onError' : '') + ') {'), JsLines.bae('}')).ae(a.e());\n                    };\n                    return Loader;\n                }(Feature);\n                module.exports = Loader;\n            },\n            {\n                '16': 16,\n                '26': 26,\n                '38': 38\n            }\n        ],\n        44: [\n            function (require, module, exports) {\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18ns = require(41);\n                var Options = require(47);\n                var Code = require(34);\n                var OptionsOutput = require(46);\n                var CodeOutput = require(33);\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var lang = $container.closest('[lang]').attr('lang');\n                        var i18n = i18ns(lang);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return new Code(options.fix(), i18n);\n                        }, i18n);\n                        options.addUpdateCallback(codeOutput.update);\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output, codeOutput.$output);\n                    });\n                });\n            },\n            {\n                '33': 33,\n                '34': 34,\n                '41': 41,\n                '46': 46,\n                '47': 47\n            }\n        ],\n        45: [\n            function (require, module, exports) {\n                var Option = Object.create(require(19));\n                // differs from webgl-starter:\n                //\tinput is a boolean\n                // \tfloat subclasses have a fixed precision of 2\n                //\tno speed\n                //\tcan specify defaultMin, defaultMax\n                //\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\n                Option.LiveNumber = function (_Option$Number) {\n                    ___babelHelper___inherits(_class, _Option$Number);\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class);\n                        var dataValue = undefined, dataMin = undefined, dataMax = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataMin = data.min;\n                            dataMax = data.max;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                        if (settings.defaultMin !== undefined) {\n                            _this.defaultMin = settings.defaultMin;\n                        } else {\n                            _this.defaultMin = _this.availableMin;\n                        }\n                        if (settings.defaultMax !== undefined) {\n                            _this.defaultMax = settings.defaultMax;\n                        } else {\n                            _this.defaultMax = _this.availableMax;\n                        }\n                        _this._min = dataMin !== undefined ? dataMin : _this.defaultMin;\n                        _this._max = dataMax !== undefined ? dataMax : _this.defaultMax;\n                        _this._input = !!dataInput;\n                        _this._$range = null;\n                        return _this;\n                    }\n                    _class.prototype.updateInternalVisibility = function updateInternalVisibility() {\n                        if (this._$range)\n                            this._$range.toggle(this._input);\n                    };\n                    _class.prototype.exportHelper = function exportHelper(src) {\n                        var data = {};\n                        if (src.value != src.defaultValue)\n                            data.value = src.value;\n                        if (src.min != src.availableMin)\n                            data.min = src.min;\n                        if (src.max != src.availableMax)\n                            data.max = src.max;\n                        if (src.input)\n                            data.input = src.input;\n                        return data;\n                    };\n                    _class.prototype.export = function _export() {\n                        return this.exportHelper(this);\n                    };\n                    _class.prototype.fix = function fix() {\n                        var fixed = _Option$Number.prototype.fix.call(this);\n                        fixed.min = this.min;\n                        fixed.max = this.max;\n                        fixed.input = this.input;\n                        fixed.defaultValue = this.defaultValue;\n                        return fixed;\n                    };\n                    ___babelHelper___createClass(_class, [\n                        {\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.updateInternalVisibility();\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'min',\n                            get: function () {\n                                return this._min;\n                            },\n                            set: function (min) {\n                                this._min = min;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'max',\n                            get: function () {\n                                return this._max;\n                            },\n                            set: function (max) {\n                                this._max = max;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: '$range',\n                            get: function () {\n                                return this._$range;\n                            },\n                            set: function ($range) {\n                                this._$range = $range;\n                                this.updateInternalVisibility();\n                            }\n                        }\n                    ]);\n                    return _class;\n                }(Option.Number);\n                Option.LiveInt = function (_Option$LiveNumber) {\n                    ___babelHelper___inherits(_class2, _Option$LiveNumber);\n                    function _class2() {\n                        ___babelHelper___classCallCheck(this, _class2);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$LiveNumber.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class2, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class2;\n                }(Option.LiveNumber);\n                Option.LiveFloat = function (_Option$LiveNumber2) {\n                    ___babelHelper___inherits(_class3, _Option$LiveNumber2);\n                    function _class3() {\n                        ___babelHelper___classCallCheck(this, _class3);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$LiveNumber2.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class3, [{\n                            key: 'precision',\n                            get: function () {\n                                return 2;\n                            }\n                        }]);\n                    return _class3;\n                }(Option.LiveNumber);\n                var FixedLiveSelect = function () {\n                    function FixedLiveSelect(src) {\n                        ___babelHelper___classCallCheck(this, FixedLiveSelect);\n                        this.value = src.value;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableValues = src.availableValues;\n                        this.name = src.name;\n                    }\n                    FixedLiveSelect.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveSelect.prototype.toString = function toString() {\n                        return this.value;\n                    };\n                    return FixedLiveSelect;\n                }();\n                Option.LiveSelect = function (_Option$Select) {\n                    ___babelHelper___inherits(_class4, _Option$Select);\n                    function _class4(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class4);\n                        var dataValue = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this4 = ___babelHelper___possibleConstructorReturn(this, _Option$Select.apply(this, arguments));\n                        _this4._input = !!dataInput;\n                        return _this4;\n                    }\n                    _class4.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        if (this.input)\n                            data.input = this.input;\n                        return data;\n                    };\n                    _class4.prototype.fix = function fix() {\n                        return new FixedLiveSelect(this);\n                    };\n                    ___babelHelper___createClass(_class4, [{\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.update();\n                            }\n                        }]);\n                    return _class4;\n                }(Option.Select);\n                Option.AnyFloat = function (_Option$NonBoolean) {\n                    ___babelHelper___inherits(_class5, _Option$NonBoolean);\n                    function _class5() {\n                        ___babelHelper___classCallCheck(this, _class5);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.BiquadFilter = function (_Option$Group) {\n                    ___babelHelper___inherits(_class6, _Option$Group);\n                    _class6.typeUsesQ = function typeUsesQ(type) {\n                        return !!{\n                            'lowpass': true,\n                            'highpass': true,\n                            'bandpass': true,\n                            'peaking': true,\n                            'notch': true,\n                            'allpass': true\n                        }[type];\n                    };\n                    _class6.typeUsesGain = function typeUsesGain(type) {\n                        return !!{\n                            'lowshelf': true,\n                            'highshelf': true,\n                            'peaking': true\n                        }[type];\n                    };\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'LiveSelect',\n                                'type',\n                                [\n                                    'lowpass',\n                                    'highpass',\n                                    'bandpass',\n                                    'lowshelf',\n                                    'highshelf',\n                                    'peaking',\n                                    'notch',\n                                    'allpass'\n                                ]\n                            ],\n                            [\n                                'LiveInt',\n                                'frequency',\n                                [\n                                    0,\n                                    22050\n                                ],\n                                350,\n                                { unit: 'hertz' }\n                            ],\n                            [\n                                'LiveInt',\n                                'detune',\n                                [\n                                    0,\n                                    100\n                                ],\n                                { unit: '\\xA2' }\n                            ],\n                            [\n                                'LiveFloat',\n                                'Q',\n                                [\n                                    -4,\n                                    4\n                                ],\n                                0\n                            ],\n                            // log Q\n                            [\n                                'LiveInt',\n                                'gain',\n                                [\n                                    -30,\n                                    30\n                                ],\n                                0,\n                                { unit: 'decibel' }\n                            ]\n                        ];\n                        return _Option$Group.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class6(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class6);\n                        var _this6 = ___babelHelper___possibleConstructorReturn(this, _Option$Group.apply(this, arguments));\n                        var type = _this6.entries[0];\n                        var Q = _this6.entries[3];\n                        var gain = _this6.entries[4];\n                        Q.isVisible = function () {\n                            return type.input || Option.BiquadFilter.typeUsesQ(type.value);\n                        };\n                        gain.isVisible = function () {\n                            return type.input || Option.BiquadFilter.typeUsesGain(type.value);\n                        };\n                        type.addUpdateCallback(function () {\n                            Q.updateVisibility();\n                            gain.updateVisibility();\n                        });\n                        return _this6;\n                    }\n                    return _class6;\n                }(Option.Group);\n                Option.IIRFilterCoefs = function (_Option$Array) {\n                    ___babelHelper___inherits(_class7, _Option$Array);\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class7);\n                        var _this7 = ___babelHelper___possibleConstructorReturn(this, _Option$Array.apply(this, arguments));\n                        if (_this7._entries.length == 0) {\n                            var type = _this7.availableTypes[0];\n                            _this7._entries.push(_this7.makeEntry(type));\n                        }\n                        return _this7;\n                    }\n                    return _class7;\n                }(Option.Array);\n                Option.IIRFilter = function (_Option$Group2) {\n                    ___babelHelper___inherits(_class8, _Option$Group2);\n                    function _class8() {\n                        ___babelHelper___classCallCheck(this, _class8);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Group2.apply(this, arguments));\n                    }\n                    _class8.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'IIRFilterCoefs',\n                                'feedforward',\n                                [[\n                                        'AnyFloat',\n                                        'b',\n                                        1\n                                    ]]\n                            ],\n                            [\n                                'IIRFilterCoefs',\n                                'feedback',\n                                [[\n                                        'AnyFloat',\n                                        'a',\n                                        1\n                                    ]]\n                            ]\n                        ];\n                        return _Option$Group2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    return _class8;\n                }(Option.Group);\n                Option.EqualizerFilter = function (_Option$Group3) {\n                    ___babelHelper___inherits(_class9, _Option$Group3);\n                    function _class9() {\n                        ___babelHelper___classCallCheck(this, _class9);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Group3.apply(this, arguments));\n                    }\n                    _class9.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = Option.EqualizerFilter.frequencies.map(function (freq) {\n                            return [\n                                'LiveInt',\n                                'gain' + freq,\n                                [\n                                    -30,\n                                    30\n                                ],\n                                0,\n                                { unit: 'decibel' }\n                            ];\n                        });\n                        return _Option$Group3.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    ___babelHelper___createClass(_class9, null, [{\n                            key: 'frequencies',\n                            get: function () {\n                                return [\n                                    60,\n                                    170,\n                                    350,\n                                    1000,\n                                    3500,\n                                    10000\n                                ];\n                            }\n                        }]);\n                    return _class9;\n                }(Option.Group);\n                Option.Filters = function (_Option$Array2) {\n                    ___babelHelper___inherits(_class10, _Option$Array2);\n                    function _class10() {\n                        ___babelHelper___classCallCheck(this, _class10);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Array2.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.Array);\n                module.exports = Option;\n            },\n            { '19': 19 }\n        ],\n        46: [\n            function (require, module, exports) {\n                var Option = require(45);\n                var BaseOptionsOutput = require(21);\n                var ArrayOptionOutput = require(1);\n                var BiquadFilterOptionOutput = require(31);\n                var IIRFilterOptionOutput = require(42);\n                var EqualizerFilterOptionOutput = require(37);\n                var FiltersOptionOutput = function (_ArrayOptionOutput) {\n                    ___babelHelper___inherits(FiltersOptionOutput, _ArrayOptionOutput);\n                    function FiltersOptionOutput() {\n                        ___babelHelper___classCallCheck(this, FiltersOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _ArrayOptionOutput.apply(this, arguments));\n                    }\n                    FiltersOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var $subOutput = _ArrayOptionOutput.prototype.writeDraggableSubOption.call(this, subOption, writeOption, i18n);\n                        var This = this;\n                        if (subOption instanceof Option.BiquadFilter) {\n                            $subOutput.find('button.clone').click(function () {\n                                var $button = $(this);\n                                var coefs = $button.data('coefs');\n                                if (coefs) {\n                                    var entry = This.option.makeEntry('iir', coefs);\n                                    This.$entries.append(This.writeDraggableSubOption(entry, writeOption, i18n));\n                                    This.updateArrayEntries();\n                                }\n                            });\n                        }\n                        return $subOutput;\n                    };\n                    return FiltersOptionOutput;\n                }(ArrayOptionOutput);\n                var IIRFilterCoefsOptionOutput = function (_ArrayOptionOutput2) {\n                    ___babelHelper___inherits(IIRFilterCoefsOptionOutput, _ArrayOptionOutput2);\n                    function IIRFilterCoefsOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, IIRFilterCoefsOptionOutput);\n                        var _this2 = ___babelHelper___possibleConstructorReturn(this, _ArrayOptionOutput2.call(this, option, writeOption, i18n, generateId));\n                        _this2.updateArrayEntryLabels();\n                        return _this2;\n                    }\n                    IIRFilterCoefsOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return this.option.entries.length > 1;\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        _ArrayOptionOutput2.prototype.updateArrayEntries.call(this);\n                        this.updateArrayEntryLabels();\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntryLabels = function updateArrayEntryLabels() {\n                        this.$entries.children().each(function (i) {\n                            var c = $(this).data('option').name;\n                            $(this).find('label').addClass('short').html(c + '<sub>' + i + '</sub>:');\n                        });\n                    };\n                    return IIRFilterCoefsOptionOutput;\n                }(ArrayOptionOutput);\n                var OptionsOutput = function (_BaseOptionsOutput) {\n                    ___babelHelper___inherits(OptionsOutput, _BaseOptionsOutput);\n                    function OptionsOutput() {\n                        ___babelHelper___classCallCheck(this, OptionsOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseOptionsOutput.apply(this, arguments));\n                    }\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        var _this4 = this;\n                        _BaseOptionsOutput.prototype.setOptionClassWriters.call(this, optionClassWriters);\n                        optionClassWriters.set(Option.LiveNumber, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var writeMinMaxInput = function (minOrMax) {\n                                return setInputAttrs($('<input type=\\'number\\' required>')).val(option[minOrMax]).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        option[minOrMax] = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var $inputCheckbox = undefined, $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var $output = optionClassWriters.get(Option.Number)(option, writeOption, i18n, generateId);\n                            $output.find('button').before($('<label class=\\'nowrap\\'>').append($inputCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' ' + i18n('options-output.input')), ' ', option.$range = $('<span class=\\'range\\'>').append(i18n('options-output.range') + ' ', $('<span class=\\'nowrap\\'>').append($rangeMinInput = writeMinMaxInput('min'), ' .. ', $rangeMaxInput = writeMinMaxInput('max'))), ' ').click(function () {\n                                $inputCheckbox.prop('checked', false).change();\n                                $rangeMinInput.val(option.defaultMin).change();\n                                $rangeMaxInput.val(option.defaultMax).change();\n                            });\n                            return $output;\n                        });\n                        optionClassWriters.set(Option.LiveSelect, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var $select = undefined, $inputCheckbox = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append(// not inheriting Option.Select b/c don't know how to handle reset button\n                            _this4.getLeadLabel(id, i18n, option), $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }), ' ', $('<label class=\\'nowrap\\'>').append($inputCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' ' + i18n('options-output.input')), ' ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $select.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.AnyFloat, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append(_this4.getLeadLabel(id, i18n, option), $('<input type=\\'number\\' id=\\'' + id + '\\' step=\\'any\\' required>').val(option.value).on('input change', function () {\n                                if (this.checkValidity()) {\n                                    option.value = parseFloat(this.value);\n                                }\n                            }));\n                        });\n                        optionClassWriters.set(Option.IIRFilterCoefs, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterCoefsOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.BiquadFilter, function () {\n                            return new (Function.prototype.bind.apply(BiquadFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.IIRFilter, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.EqualizerFilter, function () {\n                            return new (Function.prototype.bind.apply(EqualizerFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Filters, function () {\n                            return new (Function.prototype.bind.apply(FiltersOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }(BaseOptionsOutput);\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '21': 21,\n                '31': 31,\n                '37': 37,\n                '42': 42,\n                '45': 45\n            }\n        ],\n        47: [\n            function (require, module, exports) {\n                var BaseOptions = require(22);\n                var Options = function (_BaseOptions) {\n                    ___babelHelper___inherits(Options, _BaseOptions);\n                    function Options() {\n                        ___babelHelper___classCallCheck(this, Options);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(Options, [\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [\n                                    [\n                                        'Array',\n                                        'sources',\n                                        [\n                                            [\n                                                'Group',\n                                                'audio',\n                                                [[\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            // original w3c mooc\n                                                            'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/drums.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg'\n                                                        ]\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'video',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.mp4'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'width',\n                                                        [\n                                                            1,\n                                                            1920\n                                                        ],\n                                                        320,\n                                                        { unit: 'pixel' }\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'height',\n                                                        [\n                                                            1,\n                                                            1080\n                                                        ],\n                                                        240,\n                                                        { unit: 'pixel' }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'sample',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/shoot1.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/shoot2.mp3'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'repeat',\n                                                        [\n                                                            1,\n                                                            20\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'interval',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ],\n                                                        0.1,\n                                                        { unit: 'second' }\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomShift',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ],\n                                                        { unit: 'second' }\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'pitch',\n                                                        [\n                                                            0,\n                                                            2\n                                                        ],\n                                                        1\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomPitch',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            2\n                                                        ],\n                                                        1\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomGain',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        'source'\n                                    ],\n                                    [\n                                        'Filters',\n                                        'filters',\n                                        [\n                                            [\n                                                'Group',\n                                                'gain',\n                                                [[\n                                                        'LiveFloat',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        { defaultMax: 1 }\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'panner',\n                                                [[\n                                                        'LiveFloat',\n                                                        'pan',\n                                                        [\n                                                            -1,\n                                                            1\n                                                        ],\n                                                        0\n                                                    ]]\n                                            ],\n                                            [\n                                                'BiquadFilter',\n                                                'biquad'\n                                            ],\n                                            [\n                                                'IIRFilter',\n                                                'iir'\n                                            ],\n                                            [\n                                                'Group',\n                                                'convolver',\n                                                [\n                                                    [\n                                                        'LiveFloat',\n                                                        'reverb',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            // original w3c mooc\n                                                            'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg'\n                                                        ]\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'EqualizerFilter',\n                                                'equalizer'\n                                            ]\n                                        ],\n                                        'filter'\n                                    ],\n                                    [\n                                        'Group',\n                                        'destination',\n                                        [\n                                            [\n                                                'Group',\n                                                'compressor',\n                                                [[\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ]]\n                                            ],\n                                            // Firefox compresses automatically?\n                                            [\n                                                'Group',\n                                                'waveform',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'width',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        {\n                                                            unit: 'pixel',\n                                                            visibilityData: { 'destination.waveform.enabled': [true] }\n                                                        }\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'destination.waveform.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'frequencies',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'cutoff',\n                                                        [\n                                                            10,\n                                                            100\n                                                        ],\n                                                        100,\n                                                        {\n                                                            unit: '%',\n                                                            visibilityData: { 'destination.frequencies.enabled': [true] }\n                                                        }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'base',\n                                                        [\n                                                            'bottom',\n                                                            'middle'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'coloring',\n                                                        [\n                                                            'component',\n                                                            'spectral'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'coloringInput',\n                                                        [\n                                                            'amplitude',\n                                                            'frequency'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'outline',\n                                                        [\n                                                            [\n                                                                'Checkbox',\n                                                                'enabled'\n                                                            ],\n                                                            [\n                                                                'Float',\n                                                                'width',\n                                                                [\n                                                                    0,\n                                                                    10\n                                                                ],\n                                                                1,\n                                                                {\n                                                                    unit: 'pixel',\n                                                                    visibilityData: { 'destination.frequencies.outline.enabled': [true] }\n                                                                }\n                                                            ],\n                                                            [\n                                                                'Group',\n                                                                'color',\n                                                                [\n                                                                    [\n                                                                        'Int',\n                                                                        'r',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'g',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'b',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'a',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        100,\n                                                                        { unit: '%' }\n                                                                    ]\n                                                                ],\n                                                                { visibilityData: { 'destination.frequencies.outline.enabled': [true] } }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'volume',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Checkbox',\n                                                        'stereo',\n                                                        { visibilityData: { 'destination.volume.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'analyser',\n                                                [[\n                                                        'Int',\n                                                        'logFftSize',\n                                                        [\n                                                            5,\n                                                            12\n                                                        ],\n                                                        8\n                                                    ]],\n                                                {\n                                                    visibilityData: {\n                                                        'destination.waveform.enabled': [true],\n                                                        'destination.frequencies.enabled': [true],\n                                                        'destination.volume.enabled': [true]\n                                                    },\n                                                    visibilityDataLogic: 'or'\n                                                }\n                                            ]\n                                        ]\n                                    ],\n                                    [\n                                        'Group',\n                                        'canvas',\n                                        [\n                                            [\n                                                'Int',\n                                                'width',\n                                                [\n                                                    1,\n                                                    1920\n                                                ],\n                                                300,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Int',\n                                                'height',\n                                                [\n                                                    1,\n                                                    1080\n                                                ],\n                                                100,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Group',\n                                                'background',\n                                                [\n                                                    [\n                                                        'Select',\n                                                        'type',\n                                                        [\n                                                            'clear',\n                                                            'filled'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'canvas.background.type': ['filled'] } }\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        {\n                                            visibilityData: {\n                                                'destination.waveform.enabled': [true],\n                                                'destination.frequencies.enabled': [true],\n                                                'destination.volume.enabled': [true]\n                                            },\n                                            visibilityDataLogic: 'or'\n                                        }\n                                    ],\n                                    [\n                                        'Group',\n                                        'loader',\n                                        [[\n                                                'Select',\n                                                'errors',\n                                                [\n                                                    'none',\n                                                    'network',\n                                                    'http'\n                                                ]\n                                            ]]\n                                    ],\n                                    // TODO visibility depending on sources and filters\n                                    [\n                                        'Group',\n                                        'api',\n                                        [\n                                            [\n                                                'Checkbox',\n                                                'noVendorPrefix'\n                                            ],\n                                            [\n                                                'Checkbox',\n                                                'connectReturnValue'\n                                            ]\n                                        ]\n                                    ]\n                                ];\n                            }\n                        },\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(45);\n                            }\n                        }\n                    ]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            {\n                '22': 22,\n                '45': 45\n            }\n        ],\n        48: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ], [\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ], [\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<button id=',\n                        ' disabled>',\n                        '</button> <span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<button id=',\n                        ' disabled>',\n                        '</button> <span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var camelCase = require(6);\n                var formatNumbers = require(10);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var CollectionFeature = require(35);\n                var Source = function () {\n                    function Source(options, n) {\n                        ___babelHelper___classCallCheck(this, Source);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Source.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return WrapLines.b('<div>', '</div>').ae(this.getElementHtmlLines(featureContext, i18n));\n                    };\n                    Source.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n) {\n                        return JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'var ' + this.nodeJsName + '=ctx.createMediaElementSource(document.getElementById(\\'' + this.elementHtmlName + '\\'));');\n                    };\n                    // abstract:\n                    // get type()\n                    // getElementHtmlLines(featureContext,i18n)\n                    ___babelHelper___createClass(Source, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'elementHtmlName',\n                            get: function () {\n                                return 'my.' + this.type + this.nSuffix;\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Source;\n                }();\n                var sourceClasses = {\n                    audio: function (_Source) {\n                        ___babelHelper___inherits(audio, _Source);\n                        function audio() {\n                            ___babelHelper___classCallCheck(this, audio);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source.apply(this, arguments));\n                        }\n                        audio.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject, this.options.url, this.elementHtmlName, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        ___babelHelper___createClass(audio, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'audio';\n                                }\n                            }]);\n                        return audio;\n                    }(Source),\n                    video: function (_Source2) {\n                        ___babelHelper___inherits(video, _Source2);\n                        function video() {\n                            ___babelHelper___classCallCheck(this, video);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source2.apply(this, arguments));\n                        }\n                        video.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject2, this.options.url, this.elementHtmlName, this.options.width, this.options.height, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        ___babelHelper___createClass(video, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'video';\n                                }\n                            }]);\n                        return video;\n                    }(Source),\n                    sample: function (_Source3) {\n                        ___babelHelper___inherits(sample, _Source3);\n                        function sample() {\n                            ___babelHelper___classCallCheck(this, sample);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source3.apply(this, arguments));\n                        }\n                        sample.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            var messageHtmlName = this.elementHtmlName + '.buffer';\n                            return Lines.bae(Lines.html(_templateObject3, this.elementHtmlName, i18n('label.sources.sample.play'), messageHtmlName, i18n('options.sources.sample.buffer.loading')));\n                        };\n                        sample.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n) {\n                            var _this4 = this;\n                            var messageHtmlName = this.elementHtmlName + '.buffer';\n                            var fmtMul = function (fmtNum) {\n                                if (fmtNum == 1) {\n                                    return '';\n                                } else {\n                                    return '*' + fmtNum;\n                                }\n                            };\n                            var getSampleLines = function (startOptions) {\n                                var randomValue = function (baseOption, randomOption) {\n                                    var numbers = {};\n                                    numbers.base = baseOption;\n                                    if (randomOption > 0) {\n                                        numbers.random = randomOption;\n                                    }\n                                    var fmt = formatNumbers.js(numbers);\n                                    var value = fmt.base;\n                                    if (randomOption > 0) {\n                                        value += '+Math.random()' + fmtMul(fmt.random);\n                                    }\n                                    return value;\n                                };\n                                var a = JsLines.b();\n                                var lastNodeName = 'bufferSourceNode';\n                                a('var bufferSourceNode=ctx.createBufferSource();', 'bufferSourceNode.buffer=buffer;');\n                                if (_this4.options.pitch != 1 || _this4.options.randomPitch > 0) {\n                                    a('bufferSourceNode.playbackRate.value=' + randomValue(_this4.options.pitch, _this4.options.randomPitch) + ';');\n                                }\n                                if (_this4.options.gain != 1 || _this4.options.randomGain > 0) {\n                                    lastNodeName = 'bufferSourceGainNode';\n                                    a(featureContext.getJsConnectAssignLines('var', 'bufferSourceGainNode', 'ctx.createGain()', ['bufferSourceNode']), 'bufferSourceGainNode.gain.value=' + randomValue(_this4.options.gain, _this4.options.randomGain) + ';');\n                                }\n                                if (featureContext.connectSampleToCompressor) {\n                                    a.apply(undefined, [\n                                        'if (document.getElementById(\\'my.compressor\\').checked) {',\n                                        '\\t' + lastNodeName + '.connect(compressorNode);',\n                                        '} else {'\n                                    ].concat(featureContext.connectSampleToJsNames.map(function (nodeJsName) {\n                                        return '\\t' + lastNodeName + '.connect(' + nodeJsName + ');';\n                                    }), ['}']));\n                                } else {\n                                    a.apply(undefined, featureContext.connectSampleToJsNames.map(function (nodeJsName) {\n                                        return lastNodeName + '.connect(' + nodeJsName + ');';\n                                    }));\n                                }\n                                a('bufferSourceNode.start(' + startOptions + ');');\n                                return a.e();\n                            };\n                            var getOnClickLines = function () {\n                                var startOptions = '';\n                                var numbers = {};\n                                if (_this4.options.repeat != 1) {\n                                    numbers.interval = _this4.options.interval;\n                                }\n                                if (_this4.options.randomShift > 0) {\n                                    numbers.randomShift = _this4.options.randomShift;\n                                }\n                                var fmt = formatNumbers.js(numbers);\n                                if (_this4.options.repeat != 1) {\n                                    startOptions += '+i' + fmtMul(fmt.interval);\n                                }\n                                if (_this4.options.randomShift > 0) {\n                                    startOptions += '+Math.random()' + fmtMul(fmt.randomShift);\n                                }\n                                if (startOptions.length > 0) {\n                                    startOptions = 'ctx.currentTime' + startOptions;\n                                }\n                                if (_this4.options.repeat == 1) {\n                                    return getSampleLines(startOptions);\n                                } else {\n                                    return WrapLines.b(JsLines.bae('for (var i=0;i<' + _this4.options.repeat + ';i++) {'), JsLines.bae('}')).ae(getSampleLines(startOptions));\n                                }\n                            };\n                            var getOnDecodeLines = function () {\n                                var a = JsLines.b();\n                                a('var button=document.getElementById(\\'' + _this4.elementHtmlName + '\\');');\n                                a(WrapLines.b(JsLines.bae('button.onclick=function(){'), JsLines.bae('};')).ae(getOnClickLines()));\n                                a('button.disabled=false;', 'document.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';');\n                                return a.e();\n                            };\n                            var getOnErrorLines = function () {\n                                return JsLines.bae('document.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.sources.sample.buffer.error') + '\\';');\n                            };\n                            var leadLines = JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'loadSample(\\'' + this.options.url + '\\',function(buffer){');\n                            var midLines = JsLines.bae('},function(){');\n                            var endLines = JsLines.bae('});');\n                            if (!featureContext.loaderOnError) {\n                                return WrapLines.b(leadLines, endLines).ae(getOnDecodeLines());\n                            } else {\n                                return WrapLines.b(leadLines, midLines, endLines).ae(getOnDecodeLines(), getOnErrorLines());\n                            }\n                        };\n                        ___babelHelper___createClass(sample, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'sample';\n                                }\n                            }]);\n                        return sample;\n                    }(Source)\n                };\n                var SourceSet = function (_CollectionFeature) {\n                    ___babelHelper___inherits(SourceSet, _CollectionFeature);\n                    function SourceSet() {\n                        ___babelHelper___classCallCheck(this, SourceSet);\n                        return ___babelHelper___possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    SourceSet.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return sourceClasses[entryOption.source];\n                    };\n                    SourceSet.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.entries.length > 0) {\n                            featureContext.audioProcessing = true;\n                        }\n                        if (this.entries.some(function (entry) {\n                                return entry.type == 'sample';\n                            })) {\n                            featureContext.audioContext = true;\n                            featureContext.loader = true;\n                            featureContext.setConnectSampleToJsNames = true;\n                        }\n                    };\n                    SourceSet.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioContext) {\n                            a.apply(undefined, this.entries.map(function (entry) {\n                                return entry.getJsInitLines(featureContext, i18n);\n                            }));\n                        }\n                        return a.e();\n                    };\n                    SourceSet.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        var nodeJsNames = [];\n                        if (featureContext.audioContext) {\n                            nodeJsNames = this.entries.filter(function (entry) {\n                                return entry.type != 'sample';\n                            }).map(function (entry) {\n                                return entry.nodeJsName;\n                            });\n                        }\n                        if (nodeJsNames.length > 0) {\n                            return nodeJsNames;\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return SourceSet;\n                }(CollectionFeature);\n                module.exports = SourceSet;\n            },\n            {\n                '10': 10,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '23': 23,\n                '26': 26,\n                '35': 35,\n                '6': 6\n            }\n        ]\n    }, {}, [44]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nclass ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$dragged=null\r\n\t\tthis.$entries=$(\"<div>\").append(\r\n\t\t\toption.entries.map(subOption=>this.writeDraggableSubOption(subOption,writeOption,i18n))\r\n\t\t)\r\n\t\tconst $buttons=$(\"<div class='buttons'>\")\r\n\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\tif (i) $buttons.append(\" \")\r\n\t\t\t$buttons.append(\r\n\t\t\t\t$(\"<button type='button'>\").html(\r\n\t\t\t\t\ti18n('options.'+option.fullName+'.'+type+'.add')\r\n\t\t\t\t).click(()=>{\r\n\t\t\t\t\t//option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\r\n\t\t\t\t\tthis.$entries.append(\r\n\t\t\t\t\t\tthis.writeDraggableSubOption(option.makeEntry(type),writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\r\n\t\t\t\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\",\r\n\t\t\tthis.$entries,\r\n\t\t\t$buttons\r\n\t\t)\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn true\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tthis.option.entries=this.$entries.children().map(function(){\r\n\t\t\treturn $(this).data('option')\r\n\t\t}).get()\r\n\t}\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\tconst moveUp=$moved=>{\r\n\t\t\t$moved.prev().before($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst moveDown=$moved=>{\r\n\t\t\t$moved.next().after($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst attemptDelete=$entry=>{\r\n\t\t\tif (this.canDeleteEntry($entry)) {\r\n\t\t\t\t$entry.remove()\r\n\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\treturn $(\"<div class='draggable-with-handle'>\").data('option',subOption).append(\r\n\t\t\twriteOption(subOption),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<span draggable='true' tabindex='0' title='\"+i18n('options-output.drag.tip')+\"'>\").append(\r\n\t\t\t\t\"<span>\"+i18n('options-output.drag')+\"</span>\"\r\n\t\t\t).on('dragstart',function(ev){\r\n\t\t\t\tThis.$dragged=$(this).parent()\r\n\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move'\r\n\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name)\r\n\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage(This.$dragged[0],0,0)\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tThis.$dragged.addClass('ghost')\r\n\t\t\t\t},0)\r\n\t\t\t}).on('touchstart',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\t$sorted.addClass('ghost')\r\n\t\t\t\treturn false // disable touch panning on Firefox\r\n\t\t\t}).on('touchmove',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\tconst h=$sorted.height()\r\n\t\t\t\tconst t=$sorted.offset().top\r\n\t\t\t\tconst y=ev.originalEvent.touches[0].pageY // TODO test if length of touches is 1\r\n\t\t\t\tconst $prev=$sorted.prev()\r\n\t\t\t\tif ($prev.length && y<t && y-$prev.offset().top<h) {\r\n\t\t\t\t\tmoveUp($sorted)\r\n\t\t\t\t}\r\n\t\t\t\tconst $next=$sorted.next()\r\n\t\t\t\tif ($next.length && y>t+h && y-$next.offset().top>$next.height()-h) {\r\n\t\t\t\t\tmoveDown($sorted)\r\n\t\t\t\t}\r\n\t\t\t\treturn false // disable touch panning\r\n\t\t\t}).on('touchend touchcancel',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\t$sorted.removeClass('ghost')\r\n\t\t\t}).keydown(function(ev){\r\n\t\t\t\tconst $handle=$(this)\r\n\t\t\t\tconst $sorted=$handle.parent()\r\n\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\tmoveUp($sorted)\r\n\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\tmoveDown($sorted)\r\n\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button class='delete' title='\"+i18n('options-output.delete.tip')+\"'>\").append(\r\n\t\t\t\t\"<span>\"+i18n('options-output.delete')+\"</span>\"\r\n\t\t\t).click(function(){\r\n\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t}).keydown(function(ev){\r\n\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t).on('dragover',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tev.originalEvent.dataTransfer.dropEffect='move'\r\n\t\t\tconst $target=$(this)\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tif ($target.next().is(This.$dragged)) {\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y<dh) {\r\n\t\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.nextAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t} else if ($target.prev().is(This.$dragged)) {\r\n\t\t\t\t\tconst th=$target.height()\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y>th-dh) {\r\n\t\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.prevAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).on('drop',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t}).on('dragend',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tThis.$dragged.removeClass('ghost')\r\n\t\t\t\tThis.$dragged=null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=ArrayOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='code-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'save': \"Save source code\",\r\n\t\t\t'run': \"Run in new window\",\r\n\t\t\t'open.codepen': \"Open in CodePen\",\r\n\t\t\t'open.jsfiddle': \"Open in JSFiddle\",\r\n\t\t\t'open.plunker': \"Open in Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"embedded in HTML source code\",\r\n\t\t\t'mode.full': \"complete HTML\",\r\n\t\t\t'mode.body': \"only HTML body\",\r\n\t\t\t'mode.embed': \"embed in HTML\",\r\n\t\t\t'mode.paste': \"extract to paste into HTML later\",\r\n\t\t\t'mode.file': \"extract to load as external resource\",\r\n\t\t\t'formatting': \"Formatting\",\r\n\t\t\t'formatting.indent': \"indent with tabs\",\r\n\t\t\t'formatting.indentNumber': \"spaces per indent\",\r\n\t\t\t'formatting.jsSemicolons': \"JavaScript semicolons\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'save': \"Сохранить исходный код\",\r\n\t\t\t'run': \"Запустить в новом окне\",\r\n\t\t\t'open.codepen': \"Открыть в CodePen\",\r\n\t\t\t'open.jsfiddle': \"Открыть в JSFiddle\",\r\n\t\t\t'open.plunker': \"Открыть в Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"встроен в код HTML\",\r\n\t\t\t'mode.full': \"полностью\",\r\n\t\t\t'mode.body': \"только <code>body</code>\",\r\n\t\t\t'mode.embed': \"встроить в HTML\",\r\n\t\t\t'mode.paste': \"извлечь для последующей вставки в HTML\",\r\n\t\t\t'mode.file': \"извлечь для загрузки в качестве внешнего ресурса\",\r\n\t\t\t'formatting': \"Форматирование\",\r\n\t\t\t'formatting.indent': \"отступы с помощью tab\",\r\n\t\t\t'formatting.indentNumber': \"пробелов в отступе\",\r\n\t\t\t'formatting.jsSemicolons': \"<code>;</code> в JavaScript\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена.\",\r\n\t\t},\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst debounce=require('./fake-lodash/debounce')\r\nconst detailsPolyfill=require('./details-polyfill')\r\n\r\nconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html)\r\n\r\nconst makeObjectWithSetters=(values,setCallback)=>{\r\n\tconst obj={}\r\n\tfor (let prop in values) {\r\n\t\tObject.defineProperty(obj,prop,{\r\n\t\t\tget: ()=>values[prop],\r\n\t\t\tset: v=>{\r\n\t\t\t\tvalues[prop]=v\r\n\t\t\t\tsetCallback()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn obj\r\n}\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCode,i18n) {\r\n\t\tthis.formatting=makeObjectWithSetters(\r\n\t\t\tthis.defaultFormatting,\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.sectionModes=makeObjectWithSetters(\r\n\t\t\t{html:'full',css:'embed',js:'embed'},\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis._code=generateCode()\r\n\t\tthis.update=debounce(()=>{\r\n\t\t\tthis._code=generateCode()\r\n\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t},200)\r\n\r\n\t\tthis.initDomProps()\r\n\t\tconst writeFormattingControls=()=>{\r\n\t\t\tconst This=this\r\n\t\t\tlet $indentCheckbox,$indentNumber\r\n\t\t\tconst updateIndent=()=>{\r\n\t\t\t\tlet indent='\\t'\r\n\t\t\t\tif (!$indentCheckbox.prop('checked')) {\r\n\t\t\t\t\tlet n=4\r\n\t\t\t\t\tif ($indentNumber[0].checkValidity()) {\r\n\t\t\t\t\t\tn=Number($indentNumber.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindent=' '.repeat(n)\r\n\t\t\t\t}\r\n\t\t\t\tthis.formatting.indent=indent\r\n\t\t\t}\r\n\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\"<summary>\"+i18n('code-output.formatting')+\"</summary>\",\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.indent=='\\t')\r\n\t\t\t\t\t\t\t.change(updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indent')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentNumber=$(\"<input type='number' min='0' max='32' required>\")\r\n\t\t\t\t\t\t\t.val(this.formatting.indent=='\\t'?4:this.formatting.indent.length)\r\n\t\t\t\t\t\t\t.on('input change',updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indentNumber')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.jsSemicolons)\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\tThis.formatting.jsSemicolons=this.checked\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.jsSemicolons')\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst writeSection=(sectionName)=>{\r\n\t\t\treturn $(\"<details open>\").append(\r\n\t\t\t\tthis.writeSectionSummary(sectionName,i18n),\r\n\t\t\t\tthis.$sectionCode[sectionName]=$(\"<div class='code'>\")\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(this.writeButtons(i18n)).append(\r\n\t\t\twriteFormattingControls(),\r\n\t\t\twriteSection('html'),\r\n\t\t\twriteSection('css'),\r\n\t\t\twriteSection('js')\r\n\t\t)\r\n\t\tif (!window.hljs) {\r\n\t\t\t$output.append(\"<p>\"+i18n('code-output.warning.no-hljs')+\"</p>\")\r\n\t\t}\r\n\t\t$output.append(this.writeButtons(i18n))\r\n\t\tthis.applyUpdatedCode(i18n)\r\n\r\n\t\t// public interface:\r\n\t\t// this.update\r\n\t\tthis.$output=$output\r\n\t}\r\n\r\n\t// private interface:\r\n\tget code() {\r\n\t\tthis.update.flush()\r\n\t\treturn this._code\r\n\t}\r\n\r\n\t// extend/override fns:\r\n\tget defaultFormatting() {\r\n\t\treturn {\r\n\t\t\tindent: '\\t',\r\n\t\t\tjsSemicolons: false,\r\n\t\t}\r\n\t}\r\n\tinitDomProps() {\r\n\t\tthis.$sectionCode={}\r\n\t\tthis.$saveButtons={}\r\n\t}\r\n\tapplyUpdatedCode(i18n) { // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\r\n\t\tconst sections=this.code.extractSections(this.sectionModes)\r\n\t\tfor (let sectionName in sections) {\r\n\t\t\tif (this.sectionModes[sectionName]=='embed') {\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\"<p>\"+i18n('code-output.embedded')+\"</p>\"\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tlet $code\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t$(\"<pre>\").append(\r\n\t\t\t\t\t\t$code=$(\"<code class='\"+sectionName+\"'>\")\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t$code.html(\r\n\t\t\t\t\tsections[sectionName].getHtml(this.formatting).join(\"\\n\")\r\n\t\t\t\t)\r\n\t\t\t\tif (window.hljs) {\r\n\t\t\t\t\thljs.highlightBlock($code[0])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sectionName!='html') { // extractable section\r\n\t\t\t\tthis.$saveButtons[sectionName].prop('disabled',this.sectionModes[sectionName]=='embed')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst This=this\r\n\t\tconst postData=(url,target,data)=>{\r\n\t\t\tconst $form=$(`<form method='post' action='${url}' target='${target}'>`)\r\n\t\t\tfor (let name in data) {\r\n\t\t\t\t$form.append(\r\n\t\t\t\t\t$(\"<input type='hidden'>\").attr('name',name).val(data[name])\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$form.appendTo('body').submit().remove()\r\n\t\t}\r\n\t\treturn $(\"<div>\").append(\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.run')+\"</button>\").click(function(){\r\n\t\t\t\tconst html=This.code.get(This.formatting).join(\"\\n\")\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * Firefox and Chrome have trouble showing the source\r\n\t\t\t\t\t// * weird bug in Firefox:\r\n\t\t\t\t\t//   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\r\n\t\t\t\t\t// * Firefox shows url of a generator page\r\n\t\t\t\t\tconst w=window.open(\"\",\"generatedCode\")\r\n\t\t\t\t\tw.document.open()\r\n\t\t\t\t\tw.document.write(html)\r\n\t\t\t\t\tw.document.close()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * doesn't work in IE b/c they decided it's security risk\r\n\t\t\t\t\t// * long url\r\n\t\t\t\t\twindow.open(getHtmlDataUri(html),\"generatedCode\")\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.codepen')+\"</button>\").click(function(){\r\n\t\t\t\t// http://blog.codepen.io/documentation/api/prefill/\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://codepen.io/pen/define/','codepenGeneratedCode',{\r\n\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\t\ttitle: This.code.title, // doesn't work?\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.jsfiddle')+\"</button>\").click(function(){\r\n\t\t\t\t// http://doc.jsfiddle.net/api/post.html\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://jsfiddle.net/api/post/library/pure/','jsfiddleGeneratedCode',{\r\n\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\ttitle: This.code.title,\r\n\t\t\t\t\twrap: 'b',\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.plunker')+\"</button>\").click(function(){\r\n\t\t\t\t// https://github.com/angular/angular.js/blob/489835dd0b36a108bedd5ded439a186aca4fa739/docs/app/src/examples.js#L139-L157\r\n\t\t\t\tconst sections=This.code.extractSections({html:'full',css:'file',js:'file'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://plnkr.co/edit/?p=preview','plunkerGeneratedCode',{\r\n\t\t\t\t\t//['files['+sections['html'].filename+']']: getSection('html'), // wants index.html\r\n\t\t\t\t\t['files[index.html]']: getSection('html'),\r\n\t\t\t\t\t['files['+sections['css'].filename+']']: getSection('css'),\r\n\t\t\t\t\t['files['+sections['js'].filename+']']: getSection('js'),\r\n\t\t\t\t\t'private': true,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst This=this\r\n\t\tconst $summary=$(\"<summary>\"+i18n('code-output.section.'+sectionName)+\"</summary>\")\r\n\t\t$summary.append(\r\n\t\t\t\" \",\r\n\t\t\t$(\"<select>\").append(\r\n\t\t\t\t(sectionName=='html'\r\n\t\t\t\t\t? ['full','body']\r\n\t\t\t\t\t: ['embed','paste','file']\r\n\t\t\t\t).map(mode=>\r\n\t\t\t\t\t$(\"<option>\").val(mode).html(i18n('code-output.mode.'+mode))\r\n\t\t\t\t)\r\n\t\t\t).val(this.sectionModes[sectionName]).change(function(){\r\n\t\t\t\tThis.sectionModes[sectionName]=this.value\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t// doesn't work in IE\r\n\t\t\t//$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n\t\t\t//\t// yes I want a button, but download attr is only available for links\r\n\t\t\t//\t$(this).attr('href',getHtmlDataUri(\r\n\t\t\t//\t\tsection.get(this.formatting).join(\"\\n\")\r\n\t\t\t//\t))\r\n\t\t\t//})\r\n\t\t\tthis.$saveButtons[sectionName]=$(\"<button type='button'>\"+i18n('code-output.save')+\"</button>\").click(function(){\r\n\t\t\t\tconst section=This.code.extractSections(This.sectionModes)[sectionName]\r\n\t\t\t\t// http://stackoverflow.com/a/24354303\r\n\t\t\t\tconst blob=new Blob(\r\n\t\t\t\t\t[section.get(This.formatting).join(\"\\n\")],\r\n\t\t\t\t\t{type:section.mimeType}\r\n\t\t\t\t)\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob,section.filename)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst $a=$(\"<a>\")\r\n\t\t\t\t\t\t.attr('download',section.filename)\r\n\t\t\t\t\t\t.attr('href',URL.createObjectURL(blob))\r\n\t\t\t\t\t\t.appendTo('body')\r\n\t\t\t\t\t$a.get(0).click()\r\n\t\t\t\t\t$a.remove()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\treturn $summary\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nclass CodeSection {\r\n\tconstructor(filename,mimeType,lines) {\r\n\t\tthis.filename=filename\r\n\t\tthis.mimeType=mimeType\r\n\t\tthis.lines=lines\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.lines.get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.lines.getHtml(formatting)\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeSection\r\n","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tif (detailsSupported) return\r\n\tconst $details=$(this)\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n","// assumes string is dot-separated, like this: \"some.html.id\"\r\nvar capitalize=require('./capitalize')\r\nmodule.exports=function(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n","// assumes string is lowercase\r\nmodule.exports=function(s){\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\n","// no options\r\nmodule.exports=function(func,wait){\r\n\tvar timeoutId=null\r\n\tvar debounced=function(){\r\n\t\tclearTimeout(timeoutId)\r\n\t\ttimeoutId=setTimeout(function(){\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t},wait)\r\n\t}\r\n\tdebounced.flush=function(){\r\n\t\tif (timeoutId) {\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t}\r\n\t}\r\n\treturn debounced\r\n}\r\n","module.exports=function(s){\r\n\tvar entityMap={\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#39;',\r\n\t\t// lodash also escapes `\r\n\t}\r\n\treturn String(s).replace(/[&<>\"']/g,m=>entityMap[m])\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbersInternal=(numbers,precision,keepDot,noPlus)=>{\r\n\tlet maxPrecision=0\r\n\tif (keepDot) {\r\n\t\tmaxPrecision=1\r\n\t}\r\n\tlet hasNegative=false\r\n\tfor (let i in numbers) {\r\n\t\tlet p\r\n\t\tif (precision!==undefined) {\r\n\t\t\tp=precision\r\n\t\t} else if (numbers[i].precision!==undefined) {\r\n\t\t\tp=numbers[i].precision\r\n\t\t} else {\r\n\t\t\tthrow new Error('formatNumbers received no precision')\r\n\t\t}\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(p)\r\n\t\tif (Number(s)<0) { // protects against negative zero\r\n\t\t\thasNegative=true\r\n\t\t}\r\n\t\tif (p>0) {\r\n\t\t\tp-=s.match(/0*$/)[0].length\r\n\t\t}\r\n\t\tif (p>maxPrecision) {\r\n\t\t\tmaxPrecision=p\r\n\t\t}\r\n\t}\r\n\tconst ss=Array.isArray(numbers)?[]:{}\r\n\tfor (let i in numbers) {\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(maxPrecision)\r\n\t\tif (Number(s)>=0 && s.charAt(0)=='-') {  // protects against negative zero\r\n\t\t\ts=s.slice(1)\r\n\t\t}\r\n\t\tif (!noPlus && hasNegative && number>0) {\r\n\t\t\ts='+'+s\r\n\t\t}\r\n\t\tss[i]=s\r\n\t}\r\n\treturn ss\r\n}\r\n\r\nconst formatNumbers=(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.html =(number,precision)=>formatNumbersInternal(number,precision,false,true)\r\nformatNumbers.js   =(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.glsl =(number,precision)=>formatNumbersInternal(number,precision,true)\r\n\r\nmodule.exports=formatNumbers\r\n","'use strict'\r\n\r\nclass GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\").append(\r\n\t\t\toption.entries.map(writeOption)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GroupOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=function(inStrings){\r\n\tconst strings={}\r\n\tconst expandRegexp=/^([^{]*)\\{([^}]*)\\}(.*)$/\r\n\tfunction expandIdAndString(id,string) {\r\n\t\tconst idMatch=expandRegexp.exec(id)\r\n\t\tif (idMatch) {\r\n\t\t\tconst [,idStart,idMidsStr,idEnd]=idMatch\r\n\t\t\tconst idMids=idMidsStr.split(',')\r\n\t\t\tconst stringMatch=expandRegexp.exec(string)\r\n\t\t\tif (stringMatch) {\r\n\t\t\t\tconst [,stringStart,stringMidsStr,stringEnd]=stringMatch\r\n\t\t\t\tconst stringMids=stringMidsStr.split(',')\r\n\t\t\t\tidMids.forEach((idMid,i)=>{\r\n\t\t\t\t\tif (stringMidsStr!='') {\r\n\t\t\t\t\t\tconst stringMid=stringMids[i]\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+stringMid+stringEnd)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+idMid+stringEnd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tidMids.forEach(idMid=>{\r\n\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,string)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrings[id]=string\r\n\t\t}\r\n\t}\r\n\tfor (let id in inStrings) {\r\n\t\texpandIdAndString(id,inStrings[id])\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tfor (let id in strings) {\r\n\t\tstrings[id]=strings[id].replace(/\\[\\[(.*?)\\]\\]/g,(match,p1)=>{\r\n\t\t\tlet link,text;\r\n\t\t\tconst i=p1.indexOf('|');\r\n\t\t\tif (i<0) {\r\n\t\t\t\tlink=p1;\r\n\t\t\t\ttext=p1;\r\n\t\t\t} else {\r\n\t\t\t\tlink=p1.slice(0,i);\r\n\t\t\t\ttext=p1.slice(i+1);\r\n\t\t\t}\r\n\t\t\treturn \"<a href='https://\"+lang+\".wikipedia.org/wiki/\"+link.replace(/ /g,'_')+\"'>\"+text+\"</a>\";\r\n\t\t});\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nmodule.exports=langStrings=>lang=>{\r\n\tconst defaultLang='en'\r\n\tlang=lang||defaultLang\r\n\tlang=lang.split('-')[0]  // get primary language subtag\r\n\tlet strings=langStrings[lang]\r\n\tif (strings===undefined) {\r\n\t\tlang=defaultLang\r\n\t\tstrings=langStrings[lang]\r\n\t}\r\n\tconst i18n=function(id){\r\n\t\tif (strings[id]!==undefined) {\r\n\t\t\treturn strings[id]\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"undefined string \"+id)\r\n\t\t}\r\n\t}\r\n\ti18n.lang=lang\r\n\ti18n.has=id=>strings[id]!==undefined\r\n\tif (lang=='en') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','−')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst nn=Number(n)\r\n\t\t\t\tif (Math.abs(nn)==1) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (lang=='ru') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','−').replace('.',',')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst teen=ns.slice(-2,-1)==='1'\r\n\t\t\t\tif (ns.slice(-1)==='1' && !teen) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else if ('234'.includes(ns.slice(-1)) && !teen) {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '5'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ti18n.plural=function(n,id){\r\n\t\treturn this(id+'.'+this.pluralSuffix(n))\r\n\t}\r\n\ti18n.numberWithUnits=function(n,unit,abbrFn){\r\n\t\tif (abbrFn===undefined) { // codegen needs its own fn\r\n\t\t\tabbrFn=(abbr,expansion)=>\"<abbr title='\"+escape(expansion)+\"'>\"+abbr+\"</abbr>\" // expansion is html for stuff like s^(-1)\r\n\t\t}\r\n\t\tlet s=this.number(n)\r\n\t\tif (unit!==undefined) {\r\n\t\t\tif (unit.length==1 && /^\\W/.test(unit)) {\r\n\t\t\t\ts+=unit\r\n\t\t\t} else {\r\n\t\t\t\ts+=' ' // nbsp\r\n\t\t\t\tlet abbr\r\n\t\t\t\tif (unit=='1/second') {\r\n\t\t\t\t\tabbr=i18n('units.second.a')+\"<sup>−1</sup>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tabbr=i18n('units.'+unit+'.a')\r\n\t\t\t\t}\r\n\t\t\t\tconst expansion=this.plural(n,'units.'+unit)\r\n\t\t\t\ts+=abbrFn(abbr,expansion)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn s\r\n\t}\r\n\treturn i18n\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass InterleaveLines extends Lines {\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet first=true\r\n\t\tconst fp=()=>{\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false\r\n\t\t\t} else {\r\n\t\t\t\tout.push('')\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (subOut.length>0) {\r\n\t\t\t\t\tfp()\r\n\t\t\t\t\tout.push(...subOut)\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tfp()\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=InterleaveLines\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\n\r\nclass JsLines extends Lines {\r\n\tprocessStringInGet(s,formatting) {\r\n\t\tif (formatting.jsSemicolons) {\r\n\t\t\treturn s.replace(/^;/,'')\r\n\t\t} else {\r\n\t\t\treturn s.replace(/;$/,'')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=JsLines\r\n","'use strict'\r\n\r\n/*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nconst TO={} // TODO Symbol\r\n\r\nclass Lines {\r\n\t// lines private interface:\r\n\tconstructor(data) {\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\tthrow new TypeError(\"attempted to construct Lines with non-array data argument\")\r\n\t\t}\r\n\t\tthis.data=data\r\n\t}\r\n\tisDataEmpty() {\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tif (!item.isEmpty()) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tprocessStringInGet(s,formatting) {\r\n\t\treturn s\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet addTo=false\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item===TO) {\r\n\t\t\t\taddTo=true\r\n\t\t\t} else if (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (addTo && subOut.length>0) {\r\n\t\t\t\t\tout.push(out.pop()+subOut.shift())\r\n\t\t\t\t}\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t\taddTo=false\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tlet s=this.processStringInGet(item,formatting)\r\n\t\t\t\tif (formatting.indent!==undefined && formatting.indent!='\\t') {\r\n\t\t\t\t\ts=s.replace(/^(\\t)+/,match=>formatting.indent/*:string*/.repeat(match.length))\r\n\t\t\t\t}\r\n\t\t\t\ts=(html ? escape(s) : s)\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+s)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout.push(s)\r\n\t\t\t\t}\r\n\t\t\t\taddTo=false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n\r\n\t// lines public interface:\r\n\tstatic b() {\r\n\t\tconst data=[]\r\n\t\tconst makeLines=()=>new this(data,...arguments)\r\n\t\tconst a=function(){\r\n\t\t\treturn a.a(...arguments)\r\n\t\t}\r\n\t\ta.a=function(){\r\n\t\t\tdata.push(...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.t=function(){\r\n\t\t\tdata.push(TO,...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.e=makeLines\r\n\t\ta.ae=function(){\r\n\t\t\treturn this.a(...arguments).e()\r\n\t\t}\r\n\t\treturn a\r\n\t}\r\n\tstatic ba() {\r\n\t\treturn this.b().a(...arguments)\r\n\t}\r\n\tstatic be() {\r\n\t\treturn this.b().e()\r\n\t}\r\n\tstatic bae() {\r\n\t\treturn this.b().a(...arguments).e()\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tget(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,false)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,true)\r\n\t}\r\n\tcount() {\r\n\t\treturn this.doGet({},false).length // can be faster b/c don't need to output stuff\r\n\t}\r\n\r\n\t// TODO make HtmlLines\r\n\tstatic html(strings/*,...values*/) {\r\n\t\t// html template tag\r\n\t\t// usage example for attributes: Lines.html`<input type=text value=${value}>`\r\n\t\t// usage example for elements: Lines.html`<option>${option}</option>`\r\n\t\treturn strings.reduce((r,s,i)=>{\r\n\t\t\tlet v=arguments[i]\r\n\t\t\tswitch (r.slice(-1)) {\r\n\t\t\tcase '=':\r\n\t\t\t\tif (v===false) {\r\n\t\t\t\t\treturn r.replace(/\\s+[a-zA-Z0-9-]+=$/,'')+s // TODO more permitting attr name regexp\r\n\t\t\t\t} else if (v===true) {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t}\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;')\r\n\t\t\t\tif (v=='') {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t} else if (!/[\\s\"'=<>`]/.test(v)) {\r\n\t\t\t\t\treturn r+v+s\r\n\t\t\t\t} else if (!/'/.test(v)) {\r\n\t\t\t\t\treturn r+\"'\"+v+\"'\"+s\r\n\t\t\t\t} else {\r\n\t\t\t\t\tv=v.replace(/\"/g,'&quot;')\r\n\t\t\t\t\treturn r+'\"'+v+'\"'+s\r\n\t\t\t\t}\r\n\t\t\tcase '>':\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;')\r\n\t\t\t\treturn r+v+s\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"invalid character before substitution\")\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=Lines\r\n","'use strict'\r\n\r\nconst WrapLines=require('./wrap-lines')\r\n\r\nclass NoseWrapLines extends WrapLines {\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn []\r\n\t\t} else {\r\n\t\t\treturn super.doGet(formatting,html)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=NoseWrapLines\r\n","'use strict'\r\n\r\n/*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={}\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tstatic make(name,...rest) {\r\n\t\tlet nScalars=0, nArrays=0, nObjects=0\r\n\t\tlet scalarArg, arrayArg=[], objectArg={}\r\n\t\tfor (const arg of rest) {\r\n\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\tif (nScalars++==0) scalarArg=arg\r\n\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\tif (nArrays++==0) arrayArg=arg\r\n\t\t\t} else if (arg instanceof Object) {\r\n\t\t\t\tif (nObjects++==0) objectArg=arg\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst optionClass=this\r\n\t\tconst settings=this.collectArgs(scalarArg,arrayArg,objectArg)\r\n\t\treturn function(data,parent,visibilityManager,makeEntry){\r\n\t\t\treturn new optionClass(name,settings,data,parent,visibilityManager,makeEntry)\r\n\t\t}\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn settings\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tthis.parent=parent\r\n\t\tthis.name=name\r\n\t\tthis.fullName=name\r\n\t\tif (parent && parent.fullName!==null) {\r\n\t\t\tthis.fullName=parent.fullName+'.'+name\r\n\t\t}\r\n\t\tthis.updateCallbacks=[]\r\n\t\tthis._$=null\r\n\t\t// visibility and callbacks\r\n\t\tthis.isVisible=()=>true\r\n\t\tif (visibilityManager) {\r\n\t\t\tvisibilityManager.register(this)\r\n\t\t\tif (settings.visibilityData!==undefined) {\r\n\t\t\t\tif (settings.visibilityDataLogic!='or') {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)>=0) {\r\n\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\tvisibilityManager.declareAffectedBy(this,testName)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$\r\n\t\tthis.updateVisibility()\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible())\r\n\t}\r\n\tupdate() {\r\n\t\tthis.updateCallbacks.forEach(updateCallback=>{\r\n\t\t\tupdateCallback()\r\n\t\t})\r\n\t\tif (this.parent) {\r\n\t\t\tthis.parent.update()\r\n\t\t}\r\n\t}\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.updateCallbacks.push(updateCallback)\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value\r\n\t\t} else {\r\n\t\t\treturn data\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Input = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.defaultValue===undefined) settings.defaultValue=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.defaultValue=settings.defaultValue\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\treturn data\r\n\t}\r\n}\r\n\r\nOption.Boolean = class extends Option.Input {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn super.collectArgs(!!scalarArg,arrayArg,settings)\r\n\t}\r\n\tfix() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.NonBoolean = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value },\r\n\t\t\ttoString() { return String(value) },\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Factor = class extends Option.NonBoolean {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableValues===undefined) settings.availableValues=arrayArg\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableValues[0]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableValues=settings.availableValues\r\n\t}\r\n}\r\n\r\nOption.Number = class extends Option.NonBoolean { // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableMin===undefined) settings.availableMin=arrayArg[0]\r\n\t\tif (settings.availableMax===undefined) settings.availableMax=arrayArg[1]\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableMin\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableMin=settings.availableMin\r\n\t\tthis.availableMax=settings.availableMax\r\n\t\tthis.unit=settings.unit\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.precision=this.precision\r\n\t\tfixed.unit=this.unit\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.entries=settings.descriptions.map(x=>{\r\n\t\t\tconst subName=x[1]\r\n\t\t\tlet subData\r\n\t\t\tif (typeof data == 'object') subData=data[subName]\r\n\t\t\treturn makeEntry(x,subData,this,visibilityManager) // nested option\r\n\t\t})\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name)\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[]\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix())\r\n\t\t}\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.Boolean {}\r\n\r\nOption.Select = class extends Option.Factor {}\r\n\r\nOption.Text = class extends Option.Factor {}\r\n\r\nOption.Int = class extends Option.Number {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.Float = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.precision!==undefined) {\r\n\t\t\tthis.precision=settings.precision\r\n\t\t} else {\r\n\t\t\tif (this.availableMax>=100) {\r\n\t\t\t\tthis.precision=1\r\n\t\t\t} else if (this.availableMax>=10) {\r\n\t\t\t\tthis.precision=2\r\n\t\t\t} else {\r\n\t\t\t\tthis.precision=3\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Root = class extends Option.Collection {}\r\n\r\nOption.Group = class extends Option.Collection {}\r\n\r\nOption.Array = class extends Option.Base { // TODO consider extending Collection\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\tif (settings.typePropertyName===undefined) settings.typePropertyName=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableConstructors=new Map\r\n\t\tif (visibilityManager) visibilityManager.enterArray()\r\n\t\tfor (const x of settings.descriptions) { // TODO test array inside array\r\n\t\t\tconst type=x[1]\r\n\t\t\tconst ctor=subData=>makeEntry(x,subData,this,visibilityManager)\r\n\t\t\tthis.availableConstructors.set(type,ctor)\r\n\t\t}\r\n\t\tif (visibilityManager) visibilityManager.exitArray()\r\n\t\tif (settings.typePropertyName!==undefined) {\r\n\t\t\tthis.typePropertyName=settings.typePropertyName\r\n\t\t} else {\r\n\t\t\tthis.typePropertyName='type'\r\n\t\t}\r\n\t\t// populate array entries from data:\r\n\t\tthis._entries=[]\r\n\t\tlet subDatas=[]\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value\r\n\t\t}\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\tfor (const subData of subDatas) {\r\n\t\t\tlet subType=defaultType\r\n\t\t\tif (typeof subData == 'object' && subData[this.typePropertyName]!==undefined) {\r\n\t\t\t\tsubType=subData[this.typePropertyName]\r\n\t\t\t}\r\n\t\t\tlet subCtor=this.availableConstructors.get(subType)\r\n\t\t\tif (subCtor) {\r\n\t\t\t\tthis._entries.push(subCtor(subData))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget availableTypes() {\r\n\t\tconst types=[]\r\n\t\tthis.availableConstructors.forEach((_,type)=>{\r\n\t\t\ttypes.push(type)\r\n\t\t})\r\n\t\treturn types\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries\r\n\t\tthis.update()\r\n\t}\r\n\tmakeEntry(type,data) {\r\n\t\treturn this.availableConstructors.get(type)(data)\r\n\t}\r\n\texport() {\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export()\r\n\t\t\t\tconst subType=entry.name\r\n\t\t\t\tif (subType!=defaultType) subData[this.typePropertyName]=subType\r\n\t\t\t\treturn entry.shortenExport(subData)\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix()\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed[this.typePropertyName]=entry.name\r\n\t\t\t\treturn subFixed\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='options-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'reset': \"Reset\",\r\n\t\t\t'drag': \"Drag\",\r\n\t\t\t'drag.tip': \"Drag or press ↑/↓ while in focus to reorder items\",\r\n\t\t\t'delete': \"Delete\",\r\n\t\t\t'delete.tip': \"Delete item\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'reset': \"Сбросить\",\r\n\t\t\t'drag': \"Перетащить\",\r\n\t\t\t'drag.tip': \"Перетаскивайте или нажимайте ↑/↓, пока элемент в фокусе, чтобы изменить порядок элементов\",\r\n\t\t\t'delete': \"Удалить\",\r\n\t\t\t'delete.tip': \"Удалить элемент\",\r\n\t\t}\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbers=require('./format-numbers')\r\nconst writeTip=require('./tip')\r\nconst Option=require('./option-classes')\r\nconst ArrayOptionOutput=require('./array-option-output')\r\nconst GroupOptionOutput=require('./group-option-output')\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map\r\n\t\tthis.setOptionClassWriters(optionClassWriters)\r\n\t\tfunction writeOption(option) {\r\n\t\t\tlet optionProto=option\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor)\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,writeOption,i18n,generateId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=writeOption(options.root)\r\n\t}\r\n\tgetLeadLabel(id,i18n,option) {\r\n\t\treturn \"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label><span class='space'> </span>\"\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Group,function(){\r\n\t\t\treturn new GroupOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\").append(\r\n\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.value=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\"\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst valueId=value=>'options.'+option.fullName+'.'+value\r\n\t\t\tconst valueInfoId=value=>'options-info.'+option.fullName+'.'+value\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n(valueId(availableValue)))\r\n\t\t\t\t\t)\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tif (option.availableValues.some(availableValue=>i18n.has(valueInfoId(availableValue)))) {\r\n\t\t\t\tconst $tip=writeTip('info',\"\")\r\n\t\t\t\toption.$.append(\" \",$tip)\r\n\t\t\t\tconst handler=function(){\r\n\t\t\t\t\tif (i18n.has(valueInfoId(this.value))) {\r\n\t\t\t\t\t\t$tip.find('.tip-content').html(i18n(valueInfoId(this.value)))\r\n\t\t\t\t\t\t$tip.css('display','') // $tip.show() won't work right with inline-block\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$tip.css('display','none')\r\n\t\t\t\t\t\t$tip.find('.tip-content').empty()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thandler.call($select[0])\r\n\t\t\t\t$select.change(handler)\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst listId=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"' />\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<datalist id='\"+listId+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Number,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst setInputAttrsAndListeners=($input,getOtherInput)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst $that=getOtherInput()\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $sliderInput,$numberInput\r\n\t\t\tlet $rangeMinInput,$rangeMaxInput\r\n\t\t\tconst fmt=formatNumbers({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax\r\n\t\t\t},option.precision)\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<span class='nowrap'>\").append(\r\n\t\t\t\t\t\"<span class='min'>\"+i18n.numberWithUnits(fmt.min,option.unit)+\"</span> \",\r\n\t\t\t\t\t$sliderInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t\t$(\"<input type='range' id='\"+id+\"'>\"),\r\n\t\t\t\t\t\t()=>$numberInput\r\n\t\t\t\t\t),\r\n\t\t\t\t\t\" <span class='max'>\"+i18n.numberWithUnits(fmt.max,option.unit)+\"</span>\"\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$numberInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='number' required>\"),\r\n\t\t\t\t\t()=>$sliderInput\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tconst infoId='options-info.'+option.fullName\r\n\t\t\tif (i18n.has(infoId)) {\r\n\t\t\t\toption.$.append(\" \",writeTip('info',i18n(infoId)))\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Array,function(){\r\n\t\t\treturn new ArrayOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nclass OptionVisibilityManager {\r\n\tconstructor() {\r\n\t\tthis.options={}\r\n\t\tthis.affects={}\r\n\t\tthis.inArray=0\r\n\t}\r\n\tregister(option) {\r\n\t\tif (!this.inArray) {\r\n\t\t\tthis.options[option.fullName]=option\r\n\t\t\toption.addUpdateCallback(()=>{\r\n\t\t\t\tthis.updateVisibilityAffectedBy(option.fullName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tdeclareAffectedBy(option,byFullName) {\r\n\t\tif (this.affects[byFullName]===undefined) {\r\n\t\t\tthis.affects[byFullName]=[]\r\n\t\t}\r\n\t\tthis.affects[byFullName].push(option)\r\n\t}\r\n\tupdateVisibilityAffectedBy(byFullName) {\r\n\t\tif (this.affects[byFullName]!==undefined) {\r\n\t\t\tthis.affects[byFullName].forEach(option=>{\r\n\t\t\t\toption.updateVisibility()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tenterArray() {\r\n\t\tthis.inArray+=1\r\n\t}\r\n\texitArray() {\r\n\t\tthis.inArray-=1\r\n\t}\r\n}\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tconst Option=this.optionClasses\r\n\t\tconst makeEntry=(description,data,parent,visibilityManager)=>{\r\n\t\t\tconst className=description[0]\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`)\r\n\t\t\t}\r\n\t\t\tconst makeArgs=description.slice(1)\r\n\t\t\treturn Option[className].make(...makeArgs)(\r\n\t\t\t\tdata,parent,visibilityManager,makeEntry\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.root=Option.Root.make(null,this.entriesDescription)(\r\n\t\t\tdata,null,new OptionVisibilityManager,makeEntry\r\n\t\t)\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn []\r\n\t}\r\n\t// public methods\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.root.addUpdateCallback(updateCallback)\r\n\t}\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export())\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix()\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass RefLines extends Lines {\r\n\tconstructor(data,ref) {\r\n\t\tsuper(data)\r\n\t\tthis.ref=ref\r\n\t}\r\n\tstatic parse(s) {\r\n\t\tconst a=Lines.ba(\"\")\r\n\t\tconst re=/^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/\r\n\t\tfor (;s.length>0;) {\r\n\t\t\tconst match=re.exec(s)\r\n\t\t\tif (match) {\r\n\t\t\t\ta.t(match[1])\r\n\t\t\t\ta.t(this.b(match[3]).ae(match[2]))\r\n\t\t\t\ts=s.substr(match[0].length)\r\n\t\t\t} else {\r\n\t\t\t\ta.t(s)\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst plainOut=super.doGet(formatting,html)\r\n\t\tlet href\r\n\t\tif (html && typeof formatting.refs == 'object') {\r\n\t\t\thref=formatting.refs[this.ref]\r\n\t\t}\r\n\t\tif (href!==undefined) {\r\n\t\t\treturn plainOut.map(s=>\"<a href='\"+escape(href)+\"'>\"+s+\"</a>\")\r\n\t\t} else {\r\n\t\t\treturn plainOut\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=RefLines\r\n","'use strict'\r\n\r\nmodule.exports=(tipClass,tipContent)=>{\r\n\tconst $tip=$(`<span class='tip-${tipClass}' tabindex='0'><span class='tip-content'>${tipContent}</span></span>`)\r\n\tlet popupTimeoutId=null\r\n\tlet popupLevel=0\r\n\tconst handlePopup=(dLevel,delay)=>{\r\n\t\tif (delay===undefined) {\r\n\t\t\tdelay=200\r\n\t\t}\r\n\t\tif (dLevel==+1 && popupLevel==0) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{ // sort of hoverintent, simple delay will do b/c tip icon is small\r\n\t\t\t\t$tip.addClass('open')\r\n\t\t\t},delay)\r\n\t\t} else if (dLevel==-1 && popupLevel==1) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{\r\n\t\t\t\t$tip.removeClass('open')\r\n\t\t\t},delay)\r\n\t\t}\r\n\t\tpopupLevel+=dLevel\r\n\t}\r\n\t$tip.mouseenter(function(){\r\n\t\thandlePopup(+1)\r\n\t}).focusin(function(){\r\n\t\thandlePopup(+1,0) // need immediate popup on focusin\r\n\t}).on('mouseleave focusout',function(){\r\n\t\thandlePopup(-1)\r\n\t})\r\n\treturn $tip\r\n}\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\nconst NoseWrapLines=require('./nose-wrap-lines')\r\nconst CodeSection=require('./code-section')\r\n\r\nclass WebCode {\r\n\t// public:\r\n\tget filename() {\r\n\t\treturn this.basename+'.html'\r\n\t}\r\n\tget mimeType() {\r\n\t\treturn 'text/html'\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.getLines().get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.getLines().getHtml(formatting)\r\n\t}\r\n\textractSections(sectionModes) {\r\n\t\tif (sectionModes===undefined) {\r\n\t\t\tsectionModes={}\r\n\t\t}\r\n\t\tlet stylePlaceLines=NoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines)\r\n\t\tlet styleExtractLines=Lines.be()\r\n\t\tif (sectionModes.css=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tstylePlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tstylePlaceLines=Lines.bae(\"<!-- <style> \"+this.getSectionPasteComment('css')+\" </style> -->\")\r\n\t\t\t}\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t} else if (sectionModes.css=='file') {\r\n\t\t\tstylePlaceLines=Lines.bae(Lines.html`<link rel=stylesheet href=${this.basename+'.css'}>`)\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t}\r\n\t\tlet scriptPlaceLines=NoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\tlet scriptExtractLines=Lines.be()\r\n\t\tif (sectionModes.js=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tscriptPlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tscriptPlaceLines=Lines.bae(\"<!-- <script> \"+this.getSectionPasteComment('js')+\" </script> -->\")\r\n\t\t\t}\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t} else if (sectionModes.js=='file') {\r\n\t\t\tscriptPlaceLines=Lines.bae(Lines.html`<script src=${this.basename+'.js'}></script>`)\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t}\r\n\t\tlet htmlExtractLines\r\n\t\tif (sectionModes.html=='body') {\r\n\t\t\thtmlExtractLines=this.getBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t} else {\r\n\t\t\thtmlExtractLines=this.getFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t}\r\n\t\tconst type=sectionName=>'text/'+(sectionName=='js'?'javascript':sectionName)\r\n\t\treturn {\r\n\t\t\thtml: new CodeSection(this.filename,type('html'),htmlExtractLines),\r\n\t\t\tcss:  new CodeSection(this.basename+'.css',type('css'),styleExtractLines),\r\n\t\t\tjs:   new CodeSection(this.basename+'.js',type('js'),scriptExtractLines),\r\n\t\t}\r\n\t}\r\n\t// get title()\r\n\r\n\t// private:\r\n\tgetLines() {\r\n\t\treturn this.getFullHtmlSectionLines(\r\n\t\t\tNoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines),\r\n\t\t\tNoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\t)\r\n\t}\r\n\tgetFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\tconst a=Lines.b()\r\n\t\ta(\"<!DOCTYPE html>\")\r\n\t\tif (this.lang!==null) {\r\n\t\t\ta(Lines.html`<html lang=${this.lang}>`)\r\n\t\t} else {\r\n\t\t\ta(\"<html>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"<head>\",\r\n\t\t\t\"<meta charset=utf-8>\"\r\n\t\t)\r\n\t\tif (this.title!==null) {\r\n\t\t\ta(\"<title>\"+this.title+\"</title>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\t\"</head>\",\r\n\t\t\t\"<body>\",\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines,\r\n\t\t\t\"</body>\",\r\n\t\t\t\"</html>\"\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n\tgetBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\treturn Lines.bae(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines\r\n\t\t)\r\n\t}\r\n\tget cachedStyleLines()  { if (!this._styleLines)  this._styleLines =this.styleLines;  return this._styleLines  }\r\n\tget cachedHeadLines()   { if (!this._headLines)   this._headLines  =this.headLines;   return this._headLines   }\r\n\tget cachedBodyLines()   { if (!this._bodyLines)   this._bodyLines  =this.bodyLines;   return this._bodyLines   }\r\n\tget cachedScriptLines() { if (!this._scriptLines) this._scriptLines=this.scriptLines; return this._scriptLines }\r\n\r\n\t// to be redefined in subclasses:\r\n\tget basename() { // filename base\r\n\t\treturn 'source'\r\n\t}\r\n\tget lang() { // language tag for <html lang=xx> or null to skip it - likely read from i18n\r\n\t\treturn null\r\n\t}\r\n\tget title() { // page title or null to skip it\r\n\t\treturn null\r\n\t}\r\n\tget styleLines() { // contents of <style>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget headLines() { // contents of <head> following <style>, goes to <body> in html body mode\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget bodyLines() { // contents of <body> preceding <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget scriptLines() { // contents of <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetSectionPasteComment(sectionName) { // section placeholder comment in paste mode - likely to be overridden with i18n\r\n\t\treturn sectionName+\" goes here\"\r\n\t}\r\n}\r\n\r\nmodule.exports=WebCode\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass WrapLines extends Lines {\r\n\tconstructor(data,...wrappers) {\r\n\t\tsuper(data)\r\n\t\tthis.wrappers=wrappers\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn false\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tlet indent='\\t'\r\n\t\tif (formatting.indent!==undefined) {\r\n\t\t\tindent=formatting.indent\r\n\t\t}\r\n\t\tconst out=[]\r\n\t\tlet i=0\r\n\t\tconst pushWrapper=()=>{\r\n\t\t\tconst item=this.wrappers[i]\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\tpushWrapper()\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut.map(s=>indent+s))\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(indent+s)\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.wrappers.length==2) {\r\n\t\t\tpushWrapper()\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=WrapLines\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\r\nmodule.exports = Math.log10 || function(x){\r\n\treturn Math.log(x) / Math.LN10\r\n}\r\n","module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t(typeof haystack !== 'string')\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","module.exports = function(s){\r\n\treturn function(n){\r\n\t\tif (\r\n\t\t\t(s!=null && s.repeat!==undefined) ||\r\n\t\t\t(typeof s !== 'string')\r\n\t\t) {\r\n\t\t\treturn s.repeat(n)\r\n\t\t} else {\r\n\t\t\treturn Array(n+1).join(s)\r\n\t\t}\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass AudioContext extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.getJsConnectAssignLines=(decl,target,value,connectors,connectArgs)=>{\r\n\t\t\tlet declTarget=target\r\n\t\t\tif (decl!='') {\r\n\t\t\t\tdeclTarget=decl+\" \"+target\r\n\t\t\t}\r\n\t\t\tlet connectArgsConcat=\"\"\r\n\t\t\tif (connectArgs!==undefined) {\r\n\t\t\t\tconnectArgsConcat=\",\"+connectArgs\r\n\t\t\t}\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.connectReturnValue && Array.isArray(connectors) && connectors.length==1) {\r\n\t\t\t\tconst connector=connectors[0]\r\n\t\t\t\ta(declTarget+\"=\"+connector+\".connect(\"+value+connectArgsConcat+\");\")\r\n\t\t\t} else {\r\n\t\t\t\ta(declTarget+\"=\"+value+\";\")\r\n\t\t\t\tif (Array.isArray(connectors)) {\r\n\t\t\t\t\ta(...connectors.map(connector=>connector+\".connect(\"+target+connectArgsConcat+\");\"))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst connector=connectors.slice(0,-1) // hack to get singular name form plural\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tconnectors+\".forEach(function(\"+connector+\"){\",\r\n\t\t\t\t\t\t\"\t\"+connector+\".connect(\"+target+connectArgsConcat+\");\",\r\n\t\t\t\t\t\t\"});\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(RefLines.parse(\"// \"+i18n('comment.context')))\r\n\t\t\tif (this.options.noVendorPrefix) {\r\n\t\t\t\ta(\"var ctx=new AudioContext;\")\r\n\t\t\t} else {\r\n\t\t\t\ta(\"var ctx=new (AudioContext || webkitAudioContext);\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioContext\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass BiquadFilterOptionOutput extends FilterOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet $cloneButton\r\n\t\tconst computeCoefs=(sampleRate,type,frequency,detune,Q,gain,post20160415)=>{\r\n\t\t\t// constants defined in the spec\r\n\t\t\tconst F_s=sampleRate\r\n\t\t\tconst f_0=frequency*Math.pow(2,detune/1200)\r\n\t\t\tconst G=gain\r\n\t\t\tconst A=Math.pow(10,G/40)\r\n\t\t\tconst omega_0=2*Math.PI*f_0/F_s\r\n\t\t\tconst alpha_Q=Math.sin(omega_0)/(2*Q)\r\n\t\t\tconst Q_dB=Math.pow(10,Q/20) // fix for incorrect alpha_B\r\n\t\t\tconst alpha_B=Math.sin(omega_0)/2*Math.sqrt((4-Math.sqrt(16-16/(Q_dB*Q_dB)))/2) // was incorrect in the spec\r\n\t\t\tconst alpha_Q_dB=Math.sin(omega_0)/(2*Q_dB) // introduced on 2016-04-15\r\n\t\t\tconst S=1\r\n\t\t\tconst alpha_S=Math.sin(omega_0)/2*Math.sqrt((A+1/A)*(1/S-1)+2)\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst c=Math.cos(omega_0)\r\n\t\t\tconst aSA2=2*alpha_S*Math.sqrt(A)\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\tcase 'lowpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1-c)/2,   1-c, (1-c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'highpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1+c)/2, -(1+c), (1+c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'bandpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [alpha_Q, 0, -alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'notch':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1, -2*c, 1],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'allpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1-alpha_Q, -2*c, 1+alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'peaking':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1+alpha_Q*A, -2*c, 1-alpha_Q*A],\r\n\t\t\t\t\tfeedback: [1+alpha_Q/A, -2*c, 1-alpha_Q/A],\r\n\t\t\t\t}\r\n\t\t\tcase 'lowshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t 2*A*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c + aSA2,\r\n\t\t\t\t\t\t  -2*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\tcase 'highshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t-2*A*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c + aSA2,\r\n\t\t\t\t\t\t   2*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\tlet $cloneUi\r\n\t\tconst writeCloneButton=(post20160415)=>{\r\n\t\t\treturn $(\"<button type='button' class='clone'>\"+i18n(\r\n\t\t\t\t'options-output.filter.biquad.clone.'+(post20160415?'post':'pre')\r\n\t\t\t)+\"</button>\").click(function(){\r\n\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\tconst fixedOption=option.fix()\r\n\t\t\t\t\tconst coefs=computeCoefs(\r\n\t\t\t\t\t\taudioContext.sampleRate,\r\n\t\t\t\t\t\tfixedOption.type.value,\r\n\t\t\t\t\t\tfixedOption.frequency.value,\r\n\t\t\t\t\t\tfixedOption.detune.value,\r\n\t\t\t\t\t\tMath.pow(10,fixedOption.Q.value),\r\n\t\t\t\t\t\tfixedOption.gain.value,\r\n\t\t\t\t\t\tpost20160415\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (coefs) {\r\n\t\t\t\t\t\t$(this).data('coefs',coefs)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).removeData('coefs')\r\n\t\t\t\t\t}\r\n\t\t\t\t},$cloneUi,i18n('options-output.filter.contextError'))\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.$output.append(\r\n\t\t\t$(\"<div class='option only-buttons'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.biquad.clone')+\":</label><span class='space'> </span>\",\r\n\t\t\t\t$cloneUi=$(\"<span>\").append(\r\n\t\t\t\t\twriteCloneButton(false),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\twriteCloneButton(true),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\twriteTip('info',i18n('options-output.filter.biquad.clone.info'))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\tbiquadNode.type=fixedOption.type.value\r\n\t\tbiquadNode.frequency.value=fixedOption.frequency.value\r\n\t\tbiquadNode.detune.value=fixedOption.detune.value\r\n\t\tbiquadNode.Q.value=Math.pow(10,fixedOption.Q.value)\r\n\t\tbiquadNode.gain.value=fixedOption.gain.value\r\n\t\treturn [biquadNode]\r\n\t}\r\n}\r\n\r\nmodule.exports=BiquadFilterOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Canvas extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tstatic getStyleLines(canvasContextProperty,colorOption) {\r\n\t\tconst a=JsLines.b()\r\n\t\tconst cs=['r','g','b']\r\n\t\tconst color=cs.map(c=>colorOption[c]+\"%\").join()\r\n\t\tconst isBlack=cs.every(c=>colorOption[c]==0)\r\n\t\tif (colorOption.a==100) {\r\n\t\t\tif (!isBlack) {\r\n\t\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgb(\"+color+\")';\")\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgba(\"+color+\",\"+(colorOption.a/100).toFixed(2)+\")';\")\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=Lines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"<div>\",\r\n\t\t\t\tLines.html`\t<canvas id=my.canvas width=${this.options.width} height=${this.options.height}></canvas>`,\r\n\t\t\t\t\"</div>\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvas=document.getElementById('my.canvas');\",\r\n\t\t\t\t\"var canvasContext=canvas.getContext('2d');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (featureContext.canvasVolumeGradient) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvasVolumeGradient=canvasContext.createLinearGradient(0,0,0,canvas.height);\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(1.00,'#000');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.75,'#F00');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.25,'#FF0');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.00,'#FFF');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\tif (this.options.background.type=='clear') {\r\n\t\t\t\ta(\"canvasContext.clearRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t} else {\r\n\t\t\t\ta(Canvas.getStyleLines('fillStyle',this.options.background.color))\r\n\t\t\t\ta(\"canvasContext.fillRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst BaseCodeOutput=require('crnx-base/code-output')\r\n\r\nclass CodeOutput extends BaseCodeOutput {\r\n\tget defaultFormatting() {\r\n\t\tconst formatting=super.defaultFormatting\r\n\t\tformatting.refs={\r\n\t\t\tcontext:     'https://www.w3.org/TR/webaudio/#AudioContext',\r\n\t\t\tsource:      'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\r\n\t\t\tgain:        'https://www.w3.org/TR/webaudio/#GainNode',\r\n\t\t\tpanner:      'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\r\n\t\t\tbiquad:      'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\r\n\t\t\tiir:         'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\r\n\t\t\tconvolver:   'https://www.w3.org/TR/webaudio/#ConvolverNode',\r\n\t\t\tpeaking:     'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\r\n\t\t\tdestination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\r\n\t\t\tcompressor:  'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\r\n\t\t\tanalyser:    'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\r\n\t\t\tsplitter:    'https://www.w3.org/TR/webaudio/#the-channelsplitternode-interface',\r\n\t\t\tbuffer:      'https://www.w3.org/TR/webaudio/#AudioBufferSourceNode',\r\n\t\t}\r\n\t\treturn formatting\r\n\t}\r\n\tinitDomProps() {\r\n\t\tsuper.initDomProps()\r\n\t\tthis.$warnings=$()\r\n\t}\r\n\tapplyUpdatedCode(i18n) {\r\n\t\tsuper.applyUpdatedCode(i18n)\r\n\t\tthis.$warnings.css('display',this.code.isInteresting?'none':'') // .toggle() won't work right with inline-block\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst $warning=writeTip('warn',i18n('code-output.warning.jsfiddle-run'))\r\n\t\treturn super.writeButtons(i18n).append(\" \",$warning)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst $section=super.writeSectionSummary(sectionName,i18n)\r\n\t\tif (sectionName=='html' || sectionName=='js') {\r\n\t\t\tconst $warning=writeTip('warn',i18n('code-output.warning.interesting'))\r\n\t\t\t$section.append(\" \",$warning)\r\n\t\t\tthis.$warnings=this.$warnings.add($warning)\r\n\t\t}\r\n\t\treturn $section\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nconst AudioContext=require('./audio-context')\r\nconst Loader=require('./loader')\r\nconst SourceSet=require('./source-set')\r\nconst FilterSequence=require('./filter-sequence')\r\nconst Destination=require('./destination')\r\nconst Canvas=require('./canvas')\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst BaseWebCode=require('crnx-base/web-code')\r\n\r\nclass Code extends BaseWebCode {\r\n\tconstructor(options,i18n) {\r\n\t\tsuper()\r\n\t\tthis.i18n=i18n\r\n\t\tthis.featureContext={}\r\n\t\tthis.features=[\r\n\t\t\tnew AudioContext(options.api),\r\n\t\t\tnew Loader(options.loader),\r\n\t\t\tnew SourceSet(options.sources),\r\n\t\t\tnew FilterSequence(options.filters),\r\n\t\t\tnew Destination(options.destination),\r\n\t\t\tnew Canvas(options.canvas),\r\n\t\t]\r\n\t\t// possible feature context flags:\r\n\t\t//\taudioContext = AudioContext has to assign the audio context to var ctx\r\n\t\t//\tcanvasVolumeGradient = Canvas has to create canvasVolumeGradient\r\n\t\t//\tconnectSampleToCompressor = this is a hack\r\n\t\t//\tconnectSampleToJsNames = this is a hack: array of strings to connect samples to\r\n\t\t//\tloader = Loader has to provide loadSample() function\r\n\t\t//\tloaderOnError = loadSample() caller has to pass the error handler\r\n\t\t//\tsetConnectSampleToJsNames = have a node(s) to connect samples to (some filters like equaliser may not save a refernce to it otherwise)\r\n\t\t//\tTODO the rest\r\n\t\t// helpers:\r\n\t\t//\tgetJsConnectAssignLines = set by AudioContext\r\n\t\tfor (const feature of this.features) {\r\n\t\t\tfeature.requestFeatureContext(this.featureContext)\r\n\t\t}\r\n\t\tthis.isInteresting=!!this.featureContext.audioContext\r\n\t}\r\n\tget basename() {\r\n\t\treturn 'webaudio'\r\n\t}\r\n\tget lang() {\r\n\t\treturn this.i18n.lang\r\n\t}\r\n\tget title() {\r\n\t\treturn this.i18n('code.title')\r\n\t}\r\n\tget styleLines() {\r\n\t\tconst a=Lines.b()\r\n\t\tif (this.featureContext.alignedInputs) {\r\n\t\t\ta(\r\n\t\t\t\t\"label {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 15em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"\tline-height: 0.8em;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".min {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".max {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: left;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"canvas {\",\r\n\t\t\t\t\"\tborder: 1px solid;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget bodyLines() {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getHtmlLines(this.featureContext,this.i18n))\r\n\t\t)\r\n\t}\r\n\tget scriptLines() {\r\n\t\tlet prevNodeJsNames=[]\r\n\t\treturn InterleaveLines.bae(\r\n\t\t\t...this.features.map(feature=>{\r\n\t\t\t\tconst lines=feature.getJsInitLines(this.featureContext,this.i18n,prevNodeJsNames)\r\n\t\t\t\tprevNodeJsNames=feature.getNodeJsNames(this.featureContext,prevNodeJsNames)\r\n\t\t\t\treturn lines\r\n\t\t\t}),\r\n\t\t\tNoseWrapLines.b(\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"function visualize() {\"\r\n\t\t\t\t),\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"\trequestAnimationFrame(visualize);\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"requestAnimationFrame(visualize);\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopPreLines(this.featureContext,this.i18n)),\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopVisLines(this.featureContext,this.i18n))\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=Code\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst Feature=require('./feature')\r\n\r\nclass CollectionFeature extends Feature {\r\n\tconstructor(entryOptions) {\r\n\t\tsuper()\r\n\t\tconst entryCounts=new Map\r\n\t\tentryOptions.entries.forEach(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tentryCounts.set(entryClass,entryCounts.get(entryClass)+1||1)\r\n\t\t})\r\n\t\tconst entryCounts2=new Map\r\n\t\tthis.entries=entryOptions.entries.map(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tif (entryCounts.get(entryClass)>1) {\r\n\t\t\t\tconst n=entryCounts2.get(entryClass)||0\r\n\t\t\t\tentryCounts2.set(entryClass,n+1)\r\n\t\t\t\treturn new entryClass(entryOption,n)\r\n\t\t\t} else {\r\n\t\t\t\treturn new entryClass(entryOption)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(...this.entries.map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\t// abstract:\r\n\t// getEntryClass(entryOption) {}\r\n}\r\n\r\nmodule.exports=CollectionFeature\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\nconst Canvas=require('./canvas')\r\n\r\nclass Destination extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tget useDirectAnalyser() {\r\n\t\treturn this.options.waveform.enabled || this.options.frequencies.enabled || (this.options.volume.enabled && !this.options.volume.stereo)\r\n\t}\r\n\tget useSplitAnalyser() {\r\n\t\treturn this.options.volume.enabled && this.options.volume.stereo\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tif (this.options.compressor.enabled || this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t}\r\n\t\tif (this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\r\n\t\t\tfeatureContext.canvas=true\r\n\t\t}\r\n\t\tif (this.options.volume.enabled) {\r\n\t\t\tfeatureContext.canvasVolumeGradient=true\r\n\t\t}\r\n\t\tif (featureContext.connectSampleToJsNames===undefined) {\r\n\t\t\tif (this.options.compressor.enabled) {\r\n\t\t\t\tfeatureContext.connectSampleToCompressor=true\r\n\t\t\t}\r\n\t\t\tfeatureContext.connectSampleToJsNames=[]\r\n\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames.push(\"analyserNode\")\r\n\t\t\t}\r\n\t\t\tif (this.useSplitAnalyser) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames.push(\"channelSplitterNode\")\r\n\t\t\t}\r\n\t\t\tif (featureContext.connectSampleToJsNames.length==0) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames=[\"ctx.destination\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=NoseWrapLines.b(\"<div>\",\"</div>\")\r\n\t\tif (featureContext.audioProcessing && this.options.compressor.enabled) {\r\n\t\t\ta(\r\n\t\t\t\t\"<input id=my.compressor type=checkbox checked>\",\r\n\t\t\t\tLines.html`<label for=my.compressor>${i18n('label.destination.compressor')}</label>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst getAnalyserNodeLines=(jsName,prevNodeJsNames,connectArgs)=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(featureContext.getJsConnectAssignLines(\"var\",jsName,\"ctx.createAnalyser()\",prevNodeJsNames,connectArgs))\r\n\t\t\tif (this.options.analyser.logFftSize!=11) { // default FFT size is 2048\r\n\t\t\t\ta(jsName+\".fftSize=\"+(1<<this.options.analyser.logFftSize)+\";\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getCompressorLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet nextNodeJsName=((this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) ? 'analyserNode' : 'ctx.destination')\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.compressor')),\r\n\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",\"compressorNode\",\"ctx.createDynamicsCompressor()\",prevNodeJsNames)\r\n\t\t\t)\r\n\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"document.getElementById('my.compressor').onchange=function(){\",\r\n\t\t\t\t\t\"\tif (this.checked) {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(compressorNode);\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"};\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getDirectAnalyserLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet comment=''\r\n\t\t\tif (this.options.waveform.enabled && !this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.waveform'\r\n\t\t\t} else if (!this.options.waveform.enabled && this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.frequencies'\r\n\t\t\t} else if (this.options.waveform.enabled && this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.waveform+frequencies'\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.analyser'+comment)),\r\n\t\t\t\tgetAnalyserNodeLines(\"analyserNode\",prevNodeJsNames),\r\n\t\t\t\t\"var analyserData=new Uint8Array(analyserNode.frequencyBinCount);\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getSplitAnalyserLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.analyser.split')),\r\n\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",\"channelSplitterNode\",\"ctx.createChannelSplitter()\",prevNodeJsNames),\r\n\t\t\t\tgetAnalyserNodeLines(\"leftAnalyserNode\",[\"channelSplitterNode\"],\"0\"),\r\n\t\t\t\tgetAnalyserNodeLines(\"rightAnalyserNode\",[\"channelSplitterNode\"],\"1\")\r\n\t\t\t)\r\n\t\t\tif (!this.useDirectAnalyser) { // need to create analyserData once\r\n\t\t\t\ta(\"var analyserData=new Uint8Array(leftAnalyserNode.frequencyBinCount);\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getDestinationLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination')),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(ctx.destination);\")\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioProcessing && featureContext.audioContext) {\r\n\t\t\tif (this.options.compressor.enabled) {\r\n\t\t\t\ta(getCompressorLines())\r\n\t\t\t\tprevNodeJsNames=['compressorNode']\r\n\t\t\t}\r\n\t\t\tif (this.useDirectAnalyser || this.useSplitAnalyser) {\r\n\t\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\t\ta(getDirectAnalyserLines())\r\n\t\t\t\t}\r\n\t\t\t\tif (this.useSplitAnalyser) {\r\n\t\t\t\t\ta(getSplitAnalyserLines())\r\n\t\t\t\t}\r\n\t\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\t\tprevNodeJsNames=['analyserNode']\r\n\t\t\t\t}\r\n\t\t\t\t// split analyser doesn't change prevNodeJsNames b/c its output is not connected to anything\r\n\t\t\t}\r\n\t\t\ta(getDestinationLines())\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget pushContextForEach() { // when stroke style is altered in two different places\r\n\t\treturn this.options.frequencies.enabled && this.options.frequencies.outline.enabled && this.options.waveform.enabled\r\n\t}\r\n\tget pushContextForAll() { // when fill style is altered and not pushing for each\r\n\t\treturn !this.pushContextForEach && (this.options.frequencies.enabled || this.options.volume.enabled)\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\tconst getEnterFunctionLines=()=>{\r\n\t\t\tif (this.pushContextForEach) {\r\n\t\t\t\treturn JsLines.bae(\"canvasContext.save();\")\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getExitFunctionLines=()=>{\r\n\t\t\tif (this.pushContextForEach) {\r\n\t\t\t\treturn JsLines.bae(\"canvasContext.restore();\")\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getVisualizeVolumeLines=()=>{\r\n\t\t\tconst getVolumeMeterLines=(analyserNodeJsName,xOffset)=>{\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tanalyserNodeJsName+\".getByteFrequencyData(analyserData);\", // TODO reuse in frequencies when in non-stereo mode\r\n\t\t\t\t\t\"var sumAmplitudes=0;\",\r\n\t\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\t\"\tsumAmplitudes+=analyserData[i];\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"var meanAmplitude=sumAmplitudes/analyserData.length;\",\r\n\t\t\t\t\t\"var barHeight=meanAmplitude*canvas.height/256;\",\r\n\t\t\t\t\t\"canvasContext.fillStyle=canvasVolumeGradient;\",\r\n\t\t\t\t\t\"canvasContext.fillRect(\"+xOffset+\",canvas.height-barHeight,25,barHeight);\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (!this.options.volume.stereo) {\r\n\t\t\t\treturn getVolumeMeterLines(\"analyserNode\",\"0\")\r\n\t\t\t} else {\r\n\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\";[leftAnalyserNode,rightAnalyserNode].forEach(function(channelAnalyserNode,channelNumber){\"),\r\n\t\t\t\t\tJsLines.bae(\"});\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetVolumeMeterLines(\"channelAnalyserNode\",\"channelNumber*26\")\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getVisualizeFrequenciesLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet nBars=\"analyserData.length\"\r\n\t\t\tif (this.options.frequencies.cutoff!=100) {\r\n\t\t\t\ta(\"var nBars=Math.floor(analyserData.length*\"+(this.options.frequencies.cutoff/100).toFixed(2)+\");\")\r\n\t\t\t\tnBars=\"nBars\"\r\n\t\t\t}\r\n\t\t\tconst y=(this.options.frequencies.base=='bottom'\r\n\t\t\t\t? \"canvas.height-barHeight\"\r\n\t\t\t\t: \"(canvas.height-barHeight)/2\"\r\n\t\t\t)\r\n\t\t\tconst colorInput=(this.options.frequencies.coloringInput=='amplitude'\r\n\t\t\t\t? \"analyserData[i]\"\r\n\t\t\t\t: \"Math.round(i*255/\"+nBars+\")\"\r\n\t\t\t)\r\n\t\t\tconst fillStyle=(this.options.frequencies.coloring=='component'\r\n\t\t\t\t? \"'rgb('+(\"+colorInput+\"+100)+',50,50)'\"\r\n\t\t\t\t: \"'hsl('+(255-\"+colorInput+\")+',100%,50%)'\"\r\n\t\t\t)\r\n\t\t\ta(\r\n\t\t\t\t\"var barWidth=canvas.width/\"+nBars+\"*0.8;\",\r\n\t\t\t\t\"analyserNode.getByteFrequencyData(analyserData);\",\r\n\t\t\t\t\"for (var i=0;i<\"+nBars+\";i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/\"+nBars+\";\",\r\n\t\t\t\t\"\tcanvasContext.fillStyle=\"+fillStyle+\";\",\r\n\t\t\t\t\"\tvar barHeight=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\"\tvar y=\"+y+\";\",\r\n\t\t\t\t\"\tcanvasContext.fillRect(x,y,barWidth,barHeight);\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t\tif (this.options.frequencies.outline.enabled) {\r\n\t\t\t\tconst writeOutline=y=>JsLines.bae(\r\n\t\t\t\t\t\"for (var i=0;i<\"+nBars+\";i++) {\",\r\n\t\t\t\t\t\"\tvar x=i*canvas.width/\"+nBars+\";\",\r\n\t\t\t\t\t\"\tvar barHeight=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\t\"\tvar y=\"+y+\";\",\r\n\t\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\t\"\t\tcanvasContext.moveTo(0,y);\",\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"\tcanvasContext.lineTo(x+barWidth/2,y);\",\r\n\t\t\t\t\t\"\tif (i==\"+nBars+\"-1) {\",\r\n\t\t\t\t\t\"\t\tcanvasContext.lineTo(canvas.width,y);\",\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.frequencies.outline.width!=1.0) {\r\n\t\t\t\t\ta(\"canvasContext.lineWidth=\"+this.options.frequencies.outline.width+\";\")\r\n\t\t\t\t}\r\n\t\t\t\ta(Canvas.getStyleLines('strokeStyle',this.options.frequencies.outline.color))\r\n\t\t\t\ta(\"canvasContext.beginPath();\")\r\n\t\t\t\tif (this.options.frequencies.base=='bottom') {\r\n\t\t\t\t\ta(writeOutline(y))\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(WrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[-1,+1].forEach(function(aboveOrBelow){\"),\r\n\t\t\t\t\t\tJsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\twriteOutline(\"(canvas.height+aboveOrBelow*barHeight)/2\")\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\ta(\"canvasContext.stroke();\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getVisualizeWaveformLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.waveform.width!=1.0) {\r\n\t\t\t\ta(\"canvasContext.lineWidth=\"+this.options.waveform.width+\";\")\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tCanvas.getStyleLines('strokeStyle',this.options.waveform.color),\r\n\t\t\t\t\"analyserNode.getByteTimeDomainData(analyserData);\",\r\n\t\t\t\t\"canvasContext.beginPath();\",\r\n\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/(analyserData.length-1);\",\r\n\t\t\t\t\"\tvar y=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\"\t\tcanvasContext.moveTo(x,y);\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tcanvasContext.lineTo(x,y);\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"canvasContext.stroke();\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\treturn JsLines.bae(...[\r\n\t\t\t[this.options.volume.enabled,'visualizeVolume',getVisualizeVolumeLines],\r\n\t\t\t[this.options.frequencies.enabled,'visualizeFrequencies',getVisualizeFrequenciesLines],\r\n\t\t\t[this.options.waveform.enabled,'visualizeWaveform',getVisualizeWaveformLines],\r\n\t\t].map(conditionAndNameAndFn=>{\r\n\t\t\tconst condition=conditionAndNameAndFn[0]\r\n\t\t\tconst name=conditionAndNameAndFn[1]\r\n\t\t\tconst fn=conditionAndNameAndFn[2]\r\n\t\t\tif (condition) {\r\n\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"function \"+name+\"() {\"),\r\n\t\t\t\t\tJsLines.bae(\"}\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetEnterFunctionLines(),\r\n\t\t\t\t\tfn(),\r\n\t\t\t\t\tgetExitFunctionLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\tconst a=JsLines.b()\r\n\t\tif (this.pushContextForAll) {\r\n\t\t\ta(\"canvasContext.save();\")\r\n\t\t}\r\n\t\tif (this.options.volume.enabled) {\r\n\t\t\ta(\"visualizeVolume();\")\r\n\t\t}\r\n\t\tif (this.options.frequencies.enabled) {\r\n\t\t\ta(\"visualizeFrequencies();\")\r\n\t\t}\r\n\t\tif (this.options.waveform.enabled) {\r\n\t\t\ta(\"visualizeWaveform();\")\r\n\t\t}\r\n\t\tif (this.pushContextForAll) {\r\n\t\t\ta(\"canvasContext.restore();\")\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"ctx.destination\"]\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Destination\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass EqualizerFilterOptionOutput extends FilterOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\treturn Option.EqualizerFilter.frequencies.map(freq=>{\r\n\t\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\t\tbiquadNode.type='peaking'\r\n\t\t\tbiquadNode.frequency.value=freq\r\n\t\t\tbiquadNode.gain.value=fixedOption['gain'+freq].value\r\n\t\t\treturn biquadNode\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=EqualizerFilterOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature\r\n","'use strict'\r\n\r\nconst debounce=require('crnx-base/fake-lodash/debounce')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst GroupOptionOutput=require('crnx-base/group-option-output')\r\n\r\nconst width=300\r\nconst height=300\r\nconst pad=30\r\nconst maxNGridLines=10\r\nconst fontSize=10\r\nconst fontOffset=3\r\nconst minFrequencyInLogMode=10\r\nlet audioContext\r\nlet linearFrequencyArray,logFrequencyArray\r\nlet logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1\r\nlet magnitudeArray,phaseArray\r\nlet magnitudeArray0,phaseArray0\r\n\r\nconst mix=(a,b,x)=>a*(1-x)+b*x\r\n\r\nclass FilterOptionOutput extends GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet $freqResponseUi=$()\r\n\t\tconst isFreqResponseUiShown=()=>$freqResponseUi.length>0\r\n\t\tlet magnitudeCanvasContext, phaseCanvasContext // TODO remove loitering on hide - but have to cancel update\r\n\t\tlet magnitudeLogScale=true, frequencyLogScale=false\r\n\t\tconst updatePlots=(filterNodes)=>{\r\n\t\t\tconst removeNans=array=>{\r\n\t\t\t\tconst interpolate=(i0,i1)=>{\r\n\t\t\t\t\tconst hasStartValue=i0>=0\r\n\t\t\t\t\tconst hasEndValue=i1<array.length\r\n\t\t\t\t\tlet v0,v1\r\n\t\t\t\t\tif (!hasStartValue && !hasEndValue) {\r\n\t\t\t\t\t\tv0=v1=0\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (hasStartValue) {\r\n\t\t\t\t\t\t\tv0=array[i0]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv0=array[i1]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (hasEndValue) {\r\n\t\t\t\t\t\t\tv1=array[i1]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv1=array[i0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i=i0+1;i<i1;i++) {\r\n\t\t\t\t\t\tconst x=(i-i0)/(i1-i0)\r\n\t\t\t\t\t\tarray[i]=mix(v0,v1,x)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet nanStart=-1\r\n\t\t\t\tfor (let i=0;i<array.length;i++) {\r\n\t\t\t\t\tif (!isFinite(array[i])) {\r\n\t\t\t\t\t\tif (nanStart<0) {\r\n\t\t\t\t\t\t\tnanStart=i\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\t\t\tinterpolate(nanStart-1,i)\r\n\t\t\t\t\t\t\tnanStart=-1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\tinterpolate(nanStart-1,array.length)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst frequencyArray=(frequencyLogScale\r\n\t\t\t\t? logFrequencyArray\r\n\t\t\t\t: linearFrequencyArray\r\n\t\t\t)\r\n\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\tmagnitudeArray[i]=1\r\n\t\t\t}\r\n\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\tphaseArray[i]=0\r\n\t\t\t}\r\n\t\t\tfor (const filterNode of filterNodes) {\r\n\t\t\t\tfilterNode.getFrequencyResponse(frequencyArray,magnitudeArray0,phaseArray0)\r\n\t\t\t\tremoveNans(magnitudeArray0)\r\n\t\t\t\tremoveNans(phaseArray0)\r\n\t\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\t\tmagnitudeArray[i]*=magnitudeArray0[i]\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\t\tphaseArray[i]+=phaseArray0[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tfor (let i=0;i<width;i++) { // convert to decibels\r\n\t\t\t\t\tmagnitudeArray[i]=20*Math.log10(magnitudeArray[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction wrap(v,maxAbs) {\r\n\t\t\t\tv%=maxAbs*2\r\n\t\t\t\tif (Math.abs(v)<=maxAbs) return v\r\n\t\t\t\treturn v-(v>0?1:-1)*maxAbs*2\r\n\t\t\t}\r\n\t\t\tlet k=0\r\n\t\t\tlet v0=0\r\n\t\t\tfor (let i=0;i<width;i++) { // unwrap phase\r\n\t\t\t\tlet v1=wrap(phaseArray[i]/Math.PI,1)\r\n\t\t\t\tk+=(v1<v0 && (v0-v1)>((v1+2)-v0))\r\n\t\t\t\tk-=(v1>v0 && (v1-v0)>(v0-(v1-2)))\r\n\t\t\t\tv0=v1\r\n\t\t\t\tphaseArray[i]=v0+2*k\r\n\t\t\t}\r\n\t\t\tconst plotResponse=(canvasContext,array,units,enforcedCenter,enforcedRange,enforcedFloor,majorGridLineTest)=>{\r\n\t\t\t\tlet min,max\r\n\t\t\t\tconst setPlotRange=(min0,max0)=>{\r\n\t\t\t\t\tconst ph=pad/height\r\n\t\t\t\t\tmin=((min0+max0)*ph-min0)/(2*ph-1)\r\n\t\t\t\t\tmax=((min0+max0)*ph-max0)/(2*ph-1)\r\n\t\t\t\t}\r\n\t\t\t\tconst minArr=Math.min(...array)\r\n\t\t\t\tconst maxArr=Math.max(...array)\r\n\t\t\t\tconst minArrCentered=Math.max(minArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tconst maxArrCentered=Math.max(maxArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tsetPlotRange(\r\n\t\t\t\t\tenforcedCenter+Math.min(0,-enforcedRange+Math.max(0,maxArrCentered-enforcedRange),minArrCentered),\r\n\t\t\t\t\tenforcedCenter+Math.max(0,enforcedRange-Math.max(0,-enforcedRange-minArrCentered),maxArrCentered)\r\n\t\t\t\t)\r\n\t\t\t\tconst calcY=v=>height*(1-(v-min)/(max-min))\r\n\t\t\t\tconst getGridNumbers=(min,max)=>{\r\n\t\t\t\t\tconst numLogs=Math.log10(max-min)-Math.log10(maxNGridLines)\r\n\t\t\t\t\tlet k\r\n\t\t\t\t\tlet p=Infinity\r\n\t\t\t\t\tfor (const tk of [1,2,5]) {\r\n\t\t\t\t\t\tconst tp=Math.ceil(numLogs-Math.log10(tk))\r\n\t\t\t\t\t\tif (tp<p) {\r\n\t\t\t\t\t\t\tp=tp\r\n\t\t\t\t\t\t\tk=tk\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst dv=k*Math.pow(10,p)\r\n\t\t\t\t\tconst v0=Math.ceil(min/dv)*dv\r\n\t\t\t\t\tconst numbers=[]\r\n\t\t\t\t\tfor (let v=v0;v<max;v+=dv) {\r\n\t\t\t\t\t\tnumbers.push(v)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [numbers,p<0?-p:0]\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGrid=(numbers,visibleNumbers,calcPosition,labelLimit,units,majorGridLineTest)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0,0.5) // don't translate along x to keep dashes sharp\r\n\t\t\t\t\tcanvasContext.fillStyle='#444'\r\n\t\t\t\t\tcanvasContext.font=`${fontSize}px`\r\n\t\t\t\t\tcanvasContext.textAlign='right'\r\n\t\t\t\t\tconst getLabel=n=>`${i18n.number(n)}${units}`\r\n\t\t\t\t\tconst labelWidth=Math.max(...visibleNumbers.map(n=>canvasContext.measureText(getLabel(n)).width))\r\n\t\t\t\t\tfor (let i=0;i<numbers.length;i++) {\r\n\t\t\t\t\t\tconst y=Math.round(calcPosition(numbers[i]))\r\n\t\t\t\t\t\tconst drawLine=()=>{\r\n\t\t\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(0,y)\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(width,y)\r\n\t\t\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst majorGridLine=majorGridLineTest(Number(visibleNumbers[i]))\r\n\t\t\t\t\t\tif (majorGridLine) {\r\n\t\t\t\t\t\t\tcanvasContext.strokeStyle='rgba(70%,70%,100%,0.3)'\r\n\t\t\t\t\t\t\tcanvasContext.setLineDash([])\r\n\t\t\t\t\t\t\tcanvasContext.lineWidth=3\r\n\t\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcanvasContext.strokeStyle=(majorGridLine ? '#000' : '#888')\r\n\t\t\t\t\t\tcanvasContext.setLineDash([1])\r\n\t\t\t\t\t\tcanvasContext.lineWidth=1\r\n\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\tif (y-fontOffset-fontSize>labelLimit) {\r\n\t\t\t\t\t\t\tcanvasContext.fillText(getLabel(visibleNumbers[i]),fontOffset+labelWidth,y-fontOffset)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t\treturn labelWidth\r\n\t\t\t\t}\r\n\t\t\t\tconst drawYGrid=()=>{\r\n\t\t\t\t\tconst yGridNumbersAndPrecision=getGridNumbers(min,max)\r\n\t\t\t\t\tconst yVisibleGridNumbers=formatNumbers(...yGridNumbersAndPrecision)\r\n\t\t\t\t\treturn drawGrid(yGridNumbersAndPrecision[0],yVisibleGridNumbers,calcY,0,units,majorGridLineTest)\r\n\t\t\t\t}\r\n\t\t\t\tconst drawXGrid=(yLabelWidth)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.rotate(-Math.PI/2)\r\n\t\t\t\t\tcanvasContext.translate(-height,0)\r\n\t\t\t\t\tlet calcX,xGridNumbersAndPrecision,xVisibleGridNumbers\r\n\t\t\t\t\tif (frequencyLogScale) {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-logFrequencyArrayLinearLimit0)/(logFrequencyArrayLinearLimit1-logFrequencyArrayLinearLimit0)\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1)\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(xGridNumbersAndPrecision[0].map(n=>Math.pow(10,n)),0)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-frequencyArray[0])/(frequencyArray[width-1]-frequencyArray[0])\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(frequencyArray[0],frequencyArray[width-1])\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(...xGridNumbersAndPrecision)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdrawGrid(xGridNumbersAndPrecision[0],xVisibleGridNumbers,calcX,fontOffset+yLabelWidth,' '+i18n('units.hertz.a'),v=>false)\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGraph=()=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0.5,0.5) // aim at centers of pixels\r\n\t\t\t\t\tcanvasContext.strokeStyle='#F00'\r\n\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\t\t\tconst x=i\r\n\t\t\t\t\t\tconst y=calcY(array[i])\r\n\t\t\t\t\t\tif (i==0) {\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(x,y)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(x,y)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tcanvasContext.clearRect(0,0,width,height)\r\n\t\t\t\tconst yLabelWidth=drawYGrid()\r\n\t\t\t\tdrawXGrid(yLabelWidth)\r\n\t\t\t\tdrawGraph()\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,' '+i18n('units.decibel.a'),0,1,-100,v=>v==0)\r\n\t\t\t} else {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,'',1,0.1,0,v=>(v==0 || v==1))\r\n\t\t\t}\r\n\t\t\tplotResponse(phaseCanvasContext,phaseArray,'π',0,0.1,-Infinity,v=>v%2==0)\r\n\t\t}\r\n\t\tconst delayedUpdate=debounce(()=>{\r\n\t\t\ttry {\r\n\t\t\t\tupdatePlots(this.getFilterNodes(audioContext))\r\n\t\t\t} catch (e) {}\r\n\t\t},50)\r\n\t\tlet $frOption\r\n\t\tconst This=this\r\n\t\tthis.$output.append(\r\n\t\t\t$frOption=$(\"<div class='option only-buttons'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.frequencyResponse')+\":</label><span class='space'> </span>\",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.show')+\"</button>\").click(function(){\r\n\t\t\t\t\tconst $button=$(this)\r\n\t\t\t\t\tif (!isFreqResponseUiShown()) {\r\n\t\t\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\t\t\tlet filterNodes\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tfilterNodes=This.getFilterNodes(audioContext)\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t$button.replaceWith(i18n('options-output.filter.nodeError'))\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet $magnitudeCanvas, $phaseCanvas\r\n\t\t\t\t\t\t\t$freqResponseUi=$freqResponseUi.add(\r\n\t\t\t\t\t\t\t\t$(\"<span>\").append(\r\n\t\t\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<input type='checkbox'>\").prop('checked',magnitudeLogScale).change(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tmagnitudeLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\" \"+i18n('options-output.filter.logMagnitude')\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<input type='checkbox'>\").prop('checked',frequencyLogScale).change(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tfrequencyLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\" \"+i18n('options-output.filter.logFrequency')\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\" \"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t).add(\r\n\t\t\t\t\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.magnitude')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t\t$magnitudeCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.phase')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t\t$phaseCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t$button.after($freqResponseUi).text(i18n('options-output.hide'))\r\n\t\t\t\t\t\t\tmagnitudeCanvasContext=$magnitudeCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tphaseCanvasContext=$phaseCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tupdatePlots(filterNodes)\r\n\t\t\t\t\t\t\t$frOption.removeClass('only-buttons')\r\n\t\t\t\t\t\t},$button,i18n('options-output.filter.contextError'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO cancel scheduled update\r\n\t\t\t\t\t\t$freqResponseUi.remove()\r\n\t\t\t\t\t\t$freqResponseUi=$()\r\n\t\t\t\t\t\t$button.text(i18n('options-output.show'))\r\n\t\t\t\t\t\t$frOption.addClass('only-buttons')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t\toption.addUpdateCallback(()=>{\r\n\t\t\tif (isFreqResponseUiShown()) {\r\n\t\t\t\tdelayedUpdate()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\trunIfCanCreateAudioContext(fn,$ui,errorMessage) {\r\n\t\tconst initAudioContext=()=>{\r\n\t\t\taudioContext=new (AudioContext || webkitAudioContext)\r\n\t\t\tlinearFrequencyArray=new Float32Array(width)\r\n\t\t\tlogFrequencyArray=new Float32Array(width)\r\n\t\t\tmagnitudeArray=new Float32Array(width)\r\n\t\t\tphaseArray=new Float32Array(width)\r\n\t\t\tmagnitudeArray0=new Float32Array(width)\r\n\t\t\tphaseArray0=new Float32Array(width)\r\n\t\t\tconst maxFrequency=audioContext.sampleRate/2\r\n\t\t\tconst log10minFrequency=Math.log10(minFrequencyInLogMode)\r\n\t\t\tconst log10maxFrequency=Math.log10(maxFrequency)\r\n\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\tconst x=(i+0.5)/width\r\n\t\t\t\tlinearFrequencyArray[i]=maxFrequency*x\r\n\t\t\t\tlogFrequencyArray[i]=Math.pow(10,mix(log10minFrequency,log10maxFrequency,x))\r\n\t\t\t}\r\n\t\t\tlogFrequencyArrayLinearLimit0=mix(log10minFrequency,log10maxFrequency,0.5/width)\r\n\t\t\tlogFrequencyArrayLinearLimit1=mix(log10minFrequency,log10maxFrequency,1-0.5/width)\r\n\t\t}\r\n\t\tif (!audioContext) {\r\n\t\t\ttry {\r\n\t\t\t\tinitAudioContext()\r\n\t\t\t} catch (e) {\r\n\t\t\t\t$ui.replaceWith(errorMessage)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tfn(audioContext)\r\n\t}\r\n\t// abstract\r\n\t// getFilterNodes(audioContext)\r\n}\r\n\r\nmodule.exports=FilterOptionOutput\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Option=require('./option-classes')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Filter {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tgetPropertyOptionName(property) {\r\n\t\treturn 'options.filters.'+this.type+'.'+property.name\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.'+propertyName+'.input')\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tconst hasRangeInputs=this.nodeProperties.some(property=>{\r\n\t\t\tif (property.type=='range') {\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\treturn option.input\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (hasRangeInputs) {\r\n\t\t\tfeatureContext.alignedInputs=true\r\n\t\t}\r\n\t}\r\n\tgetHtmlPropertyLines(i18n,property) {\r\n\t\tif (property.skip) {\r\n\t\t\treturn Lines.be()\r\n\t\t}\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tconst a=Lines.b()\r\n\t\tif (property.type=='range' && option.input) {\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst fmtAttrs=formatNumbers.html({ min:option.min, max:option.max, value:option.value },p)\r\n\t\t\tconst fmtLabels=formatNumbers({ min:option.min, max:option.max },p)\r\n\t\t\tconst minMax=n=>i18n.numberWithUnits(n,option.unit,(a,e)=>Lines.html`<abbr title=${e}>`+a+`</abbr>`)\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\t\"<span class=min>\"+minMax(fmtLabels.min)+\"</span>\",\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=range value=${fmtAttrs.value} min=${fmtAttrs.min} max=${fmtAttrs.max} step=${p?Math.pow(0.1,p).toFixed(p):false}>`,\r\n\t\t\t\t\"<span class=max>\"+minMax(fmtLabels.max)+\"</span>\"\r\n\t\t\t)\r\n\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tLines.html`<select id=${inputHtmlName}>`,`</select>`\r\n\t\t\t\t).ae(\r\n\t\t\t\t\t...option.availableValues.map(value=>{\r\n\t\t\t\t\t\tconst title=i18n(this.getPropertyOptionName(property)+'.'+value)\r\n\t\t\t\t\t\treturn Lines.html`<option selected=${option.value==value} value=${value!=title && value}>${title}</option>`\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<span id=${inputHtmlName}>${i18n(this.getPropertyOptionName(property)+'.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget skipNode() {\r\n\t\treturn false\r\n\t}\r\n\t// { not called if skipNode is set\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.nodeProperties.map(\r\n\t\t\t\tproperty=>NoseWrapLines.b(\r\n\t\t\t\t\t\"<div>\",\"</div>\"\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tthis.getHtmlPropertyLines(i18n,property)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",this.nodeJsName,\"ctx.\"+this.ctxCreateMethodName+\"()\",prevNodeJsNames)\r\n\t\t)\r\n\t}\r\n\tget nodeJsNames() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tget connectToNodeJsNames() {\r\n\t\treturn this.nodeJsNames\r\n\t}\r\n\t// }\r\n\t// abstract:\r\n\t// get type()\r\n\t// get ctxCreateMethodName()\r\n\t// get nodeProperties()\r\n}\r\n\r\nclass SinglePathFilter extends Filter {\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.bae(\r\n\t\t\tsuper.getJsInitLines(featureContext,i18n,prevNodeJsNames),\r\n\t\t\t...this.nodeProperties.map(property=>{\r\n\t\t\t\tif (property.skip) {\r\n\t\t\t\t\treturn Lines.be()\r\n\t\t\t\t}\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\tconst nodePropertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (option.input) {\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName(property.name)\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\t\t\t\tlet value=inputJsName+\".value\"\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t// was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".\"+eventProp+\"=function(){\",\r\n\t\t\t\t\t\t\"\t\"+nodePropertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (option.value!=option.defaultValue) {\r\n\t\t\t\t\tlet value=option.value\r\n\t\t\t\t\tif (property.type=='select') {\r\n\t\t\t\t\t\tvalue=\"'\"+value+\"'\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tnodePropertyJsName+\"=\"+value+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass PassiveByDefaultSinglePathFilter extends SinglePathFilter {\r\n\tget skipNode() {\r\n\t\treturn this.nodeProperties.every(property=>{\r\n\t\t\tconst option=this.options[property.name]\r\n\t\t\treturn option.value==option.defaultValue && !option.input\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'gain' }\r\n\t\tget ctxCreateMethodName() { return 'createGain' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tpanner: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'panner' }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends SinglePathFilter {\r\n\t\tget type()                { return 'biquad' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesQ(this.options.type.value)),\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesGain(this.options.type.value)),\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\t// lowshelf, highshelf and peaking are passive when gain==0\r\n\t\t\treturn (\r\n\t\t\t\t!this.options.type.input && ['lowshelf','highshelf','peaking'].indexOf(this.options.type.value)>=0 &&\r\n\t\t\t\t!this.options.gain.input && this.options.gain==0\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tiir: class extends SinglePathFilter {\r\n\t\tget type()                { return 'iir' }\r\n\t\tget ctxCreateMethodName() { return 'createIIRFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn []\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\tfeatureContext.getJsConnectAssignLines(\r\n\t\t\t\t\t\"var\",this.nodeJsName,\r\n\t\t\t\t\t\"ctx.\"+this.ctxCreateMethodName+\"([\"+this.options.feedforward.entries+\"],[\"+this.options.feedback.entries+\"])\",\r\n\t\t\t\t\tprevNodeJsNames\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tconvolver: class extends Filter {\r\n\t\tget type()                { return 'convolver' }\r\n\t\tget ctxCreateMethodName() { return 'createConvolver' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'reverb',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'buffer',\r\n\t\t\t\t\ttype:'xhr',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tsuper.requestFeatureContext(featureContext)\r\n\t\t\tfeatureContext.loader=true\r\n\t\t}\r\n\t\tget dryGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.dry.gain.node')\r\n\t\t}\r\n\t\tget wetGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.wet.gain.node')\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.options.reverb==0 && !this.options.reverb.input\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\tconst messageHtmlName=this.getPropertyInputHtmlName('buffer')\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type)))\r\n\t\t\t} else {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')))\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",this.nodeJsName,\"ctx.\"+this.ctxCreateMethodName+\"()\",prevNodeJsNames)\r\n\t\t\t)\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(\r\n\t\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",this.wetGainNodeJsName,\"ctx.createGain()\",[this.nodeJsName]),\r\n\t\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",this.dryGainNodeJsName,\"ctx.createGain()\",prevNodeJsNames)\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.reverb.input) {\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('reverb')\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName('reverb')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"loadSample('\"+this.options.url+\"',function(buffer){\", // TODO html escape\r\n\t\t\t\t\"\t\"+this.nodeJsName+\".buffer=buffer;\",\r\n\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='';\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t\tif (featureContext.loaderOnError) {\r\n\t\t\t\ta.t(\r\n\t\t\t\t\t\",function(){\",\r\n\t\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.filters.convolver.buffer.error')+\"';\",\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\ta.t(\r\n\t\t\t\t\");\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tget nodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.wetGainNodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t\tget connectToNodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.nodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tequalizer: class extends Filter {\r\n\t\tget type()                { return 'equalizer' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget frequencies()         { return Option.EqualizerFilter.frequencies }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn this.frequencies.map(freq=>({\r\n\t\t\t\tname:'gain'+freq,\r\n\t\t\t\ttype:'range',\r\n\t\t\t}))\r\n\t\t}\r\n\t\tgetFrequencyOption(i) {\r\n\t\t\treturn this.options[this.nodeProperties[i].name]\r\n\t\t}\r\n\t\tget affectedFreqsAndOptions() {\r\n\t\t\treturn this.frequencies.map((freq,i)=>{\r\n\t\t\t\tconst option=this.getFrequencyOption(i)\r\n\t\t\t\treturn {freq,option}\r\n\t\t\t}).filter(fo=>(fo.option.input!=false || fo.option.value!=0))\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tif (!this.allGainsConstant) { // TODO this check is likely not needed, this.allGainsConstant is not set\r\n\t\t\t\tfeatureContext.alignedInputs=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.affectedFreqsAndOptions.length==0\r\n\t\t}\r\n\t\tget connectToNodeJsName() {\r\n\t\t\tif (this.affectedFreqsAndOptions.length==1) {\r\n\t\t\t\treturn this.nodeJsName\r\n\t\t\t} else {\r\n\t\t\t\treturn camelCase('connect.to.'+this.type+this.nSuffix+'.node')\r\n\t\t\t}\r\n\t\t}\r\n\t\tget connectToNodeJsNames() {\r\n\t\t\treturn [this.connectToNodeJsName]\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\tconst singleFreq=this.affectedFreqsAndOptions.length==1\r\n\t\t\tconst allGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==false)\r\n\t\t\tconst noGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==true)\r\n\t\t\tconst getJsData=()=>{\r\n\t\t\t\treturn this.affectedFreqsAndOptions.map(fo=>{\r\n\t\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\t\treturn fo.freq\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"[\"+fo.freq+\",\"+(fo.option.input ? 'null' : fo.option.value)+\"]\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).join()\r\n\t\t\t}\r\n\t\t\tconst getJsDataItem=()=>{\r\n\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\treturn \"freq\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"freqData\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getJsLoopLines=()=>{\r\n\t\t\t\tconst freq=(singleFreq ? this.affectedFreqsAndOptions[0].freq : 'freq')\r\n\t\t\t\tconst gain=(singleFreq ? this.affectedFreqsAndOptions[0].option.value : 'gain')\r\n\t\t\t\tconst nodeJsName=((allGainsConstant || singleFreq) ? this.nodeJsName : 'node')\r\n\t\t\t\tconst inputJsName=(singleFreq\r\n\t\t\t\t\t? this.getPropertyInputJsName('gain'+freq)\r\n\t\t\t\t\t: 'input'\r\n\t\t\t\t)\r\n\t\t\t\tconst inputHtmlNameExpr=(singleFreq\r\n\t\t\t\t\t? \"'\"+this.getPropertyInputHtmlName('gain'+freq)+\"'\"\r\n\t\t\t\t\t: \"'\"+this.getPropertyInputHtmlName('gain')+\"'+freq\"\r\n\t\t\t\t)\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (!(noGainsConstant || singleFreq)) {\r\n\t\t\t\t\ta(\"var freq=freqData[0], gain=freqData[1];\")\r\n\t\t\t\t}\r\n\t\t\t\tlet connectors\r\n\t\t\t\tif (singleFreq) {\r\n\t\t\t\t\tconnectors=prevNodeJsNames\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\tconnectors=[\"prevNode\"]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconnectors=\"prevNodes\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta(featureContext.getJsConnectAssignLines(\r\n\t\t\t\t\t((allGainsConstant && !singleFreq) ? \"\" : \"var\"),nodeJsName,\r\n\t\t\t\t\t\"ctx.\"+this.ctxCreateMethodName+\"()\",\r\n\t\t\t\t\tconnectors\r\n\t\t\t\t))\r\n\t\t\t\tif (featureContext.setConnectSampleToJsNames && !singleFreq) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"if (\"+this.connectToNodeJsName+\"===undefined) {\",\r\n\t\t\t\t\t\t\"\t\"+this.connectToNodeJsName+\"=\"+nodeJsName+\";\",\r\n\t\t\t\t\t\t\"}\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\tnodeJsName+\".type='peaking';\",\r\n\t\t\t\t\tnodeJsName+\".frequency.value=\"+freq+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst constLines=JsLines.bae(\r\n\t\t\t\t\tnodeJsName+\".gain.value=\"+gain+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst varLines=JsLines.bae(\r\n\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById(\"+inputHtmlNameExpr+\");\",\r\n\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\"\t\"+nodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\"})();\"\r\n\t\t\t\t)\r\n\t\t\t\tif (!noGainsConstant && allGainsConstant) {\r\n\t\t\t\t\ta(constLines)\r\n\t\t\t\t} else if (noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(varLines)\r\n\t\t\t\t} else if (!noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(WrapLines.b(\"if (gain!==null) {\",\"} else {\",\"}\").ae(constLines,varLines))\r\n\t\t\t\t}\r\n\t\t\t\tif (!singleFreq) {\r\n\t\t\t\t\tconst outerNodeJsName=(allGainsConstant ? nodeJsName : this.nodeJsName+\"=\"+nodeJsName)\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode=\"+outerNodeJsName+\";\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\"prevNodes=[\"+outerNodeJsName+\"];\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')),\r\n\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type))\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\ta(\"var prevNode=\"+prevNodeJsNames[0]+\";\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var prevNodes=[\"+prevNodeJsNames.join()+\"];\")\r\n\t\t\t\t}\r\n\t\t\t\tif (featureContext.setConnectSampleToJsNames) {\r\n\t\t\t\t\ta(\"var \"+this.connectToNodeJsName+\";\")\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.nodeJsName+\";\",\r\n\t\t\t\t\tWrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[\"+getJsData()+\"].forEach(function(\"+getJsDataItem()+\"){\"),JsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass FilterSequence extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn filterClasses[entryOption.filter]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tfeatureContext.audioContext=true\r\n\t\t\t\tentry.requestFeatureContext(featureContext)\r\n\t\t\t\tif (featureContext.connectSampleToJsNames===undefined) {\r\n\t\t\t\t\tfeatureContext.connectSampleToJsNames=entry.connectToNodeJsNames\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn Lines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn InterleaveLines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>{\r\n\t\t\tconst lines=entry.getJsInitLines(featureContext,i18n,prevNodeJsNames)\r\n\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\treturn lines\r\n\t\t}))\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=FilterSequence\r\n","'use strict'\r\n\r\nconst webaudioSpec='https://webaudio.github.io/web-audio-api/'\r\nconst webaudioIssue=n=>`<a href='https://github.com/WebAudio/web-audio-api/issues/${n}'>${n}</a>`\r\nconst webaudioDetect='https://github.com/GoogleChrome/web-audio-samples/wiki/Detection-of-lowpass-BiquadFilter-implementation'\r\n\r\nconst enColors=\"{<span style='color:#800'>red</span>,<span style='color:#080'>green</span>,<span style='color:#008'>blue</span>,opacity}\"\r\nconst ruColors=\"{<span style='color:#800'>Красный</span> ,<span style='color:#080'>Зелёный</span> ,<span style='color:#008'>Синий</span> ,Альфа-}канал\"\r\n\r\nconst langStrings={\r\n\ten:{\r\n\t\t'options.sources': \"Sources\",\r\n\t\t'options.sources.{audio,video}': \"{Audio,Video} element\",\r\n\t\t'options.sources.{audio,video}.add': \"Add {} element\",\r\n\t\t'options.sources.sample': \"Sample\",\r\n\t\t'options.sources.sample.add': \"Add sample\",\r\n\t\t'options.sources.sample.buffer.loading': \"Loading and decoding the sample\",\r\n\t\t'options.sources.sample.buffer.error': \"Error while loading the sample\",\r\n\t\t'options.sources.sample.repeat': \"Repeat sample\",\r\n\t\t'options.sources.sample.interval': \"Interval between repeats\",\r\n\t\t'options.sources.sample.randomShift': \"Random shift of a start time\",\r\n\t\t'options.sources.sample.pitch': \"Pitch\",\r\n\t\t'options.sources.sample.randomPitch': \"Random pitch\",\r\n\t\t'options.sources.sample.gain': \"Gain\",\r\n\t\t'options.sources.sample.randomGain': \"Random gain\",\r\n\t\t'options.sources.{audio,video,sample}.url': \"Source URL\",\r\n\t\t'options.sources.video.{width,height}': \"Player {}\",\r\n\r\n\t\t'options.filters': \"Filters\",\r\n\t\t'options.filters.gain': \"Gain\",\r\n\t\t'options.filters.gain.add': \"Add gain\",\r\n\t\t'options.filters.gain.gain': \"Gain\",\r\n\t\t'options.filters.panner': \"Stereo panner\",\r\n\t\t'options.filters.panner.add': \"Add stereo panner\",\r\n\t\t'options.filters.panner.pan': \"Pan\",\r\n\t\t'options.filters.biquad': \"Biquad filter\", // [[Digital biquad filter]]\r\n\t\t'options.filters.biquad.add': \"Add biquad filter\",\r\n\t\t'options.filters.biquad.type': \"Filter type\",\r\n\t\t'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': \"{}\",\r\n\t\t'options.filters.biquad.frequency': \"Frequency\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \"log(Q)\",\r\n\t\t'options.filters.biquad.gain': \"Gain\",\r\n\t\t'options.filters.iir': \"IIR filter\",\r\n\t\t'options.filters.iir.add': \"Add IIR filter\",\r\n\t\t'options.filters.iir.feedforward': \"Feedforward coefficients\", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \"Add coefficient\",\r\n\t\t'options.filters.iir.feedback': \"Feedback coefficients\", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \"Add coefficient\",\r\n\t\t'options.filters.convolver': \"Convolver\",\r\n\t\t'options.filters.convolver.add': \"Add convolver\",\r\n\t\t'options.filters.convolver.url': \"Impulse responce URL\",\r\n\t\t'options.filters.convolver.reverb': \"Reverb (dry/wet)\",\r\n\t\t'options.filters.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t\t'options.filters.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\t\t'options.filters.equalizer': \"Equalizer\",\r\n\t\t'options.filters.equalizer.add': \"Add equalizer\",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"{} Hz gain\",\r\n\r\n\t\t'options.destination': \"Destination\",\r\n\t\t'options.destination.compressor': \"Dynamics compressor\",\r\n\t\t'options.destination.compressor.enabled': \"Add dynamics compressor before the destination\",\r\n\t\t'options.destination.{waveform,frequencies}': \"{Waveform,Frequencies} visualization\",\r\n\t\t'options.destination.{waveform,frequencies}.enabled': \"Enable {} visualization\",\r\n\t\t'options.destination.waveform.width': \"Waveform line width\",\r\n\t\t'options.destination.waveform.color': \"Waveform line color\",\r\n\t\t'options.destination.waveform.color.{r,g,b,a}': `Waveform line ${enColors}`,\r\n\t\t'options.destination.frequencies.cutoff': \"Limit plot to a fraction of low frequences\",\r\n\t\t'options.destination.frequencies.base': \"Frequency bars extend from\",\r\n\t\t'options.destination.frequencies.base.{bottom,middle}': \"{} of canvas\",\r\n\t\t'options.destination.frequencies.coloring': \"Frequency bars coloring\",\r\n\t\t'options.destination.frequencies.coloring.component': \"with single color component\",\r\n\t\t'options.destination.frequencies.coloring.spectral': \"spectral\",\r\n\t\t'options.destination.frequencies.coloringInput': \"Frequency bars color depends on\",\r\n\t\t'options.destination.frequencies.coloringInput.{amplitude,frequency}': \"{}\",\r\n\t\t'options.destination.frequencies.outline': \"Frequency bars outline\",\r\n\t\t'options.destination.frequencies.outline.enabled': \"Enable frequency bars outline\",\r\n\t\t'options.destination.frequencies.outline.width': \"Frequency bars outline width\",\r\n\t\t'options.destination.frequencies.outline.color': \"Frequency bars outline color\",\r\n\t\t'options.destination.frequencies.outline.color.{r,g,b,a}': `Frequency bars outline ${enColors}`,\r\n\t\t'options.destination.volume': \"Volume meter\",\r\n\t\t'options.destination.volume.enabled': \"Enable volume meter\",\r\n\t\t'options.destination.volume.stereo': \"Meters for left and right stereo channels\",\r\n\t\t'options.destination.analyser': \"Analyser\",\r\n\t\t'options.destination.analyser.logFftSize': \"FFT size (power of 2)\",\r\n\r\n\t\t'options.canvas': \"Canvas\",\r\n\t\t'options.canvas.{width,height}': \"Canvas {}\",\r\n\t\t'options.canvas.background': \"Background\",\r\n\t\t'options.canvas.background.type': \"Background type\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{}\",\r\n\t\t'options.canvas.background.color': \"Background fill color\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `Background fill ${enColors}`,\r\n\r\n\t\t'options.loader': \"Sample loader\",\r\n\t\t'options.loader.errors': \"Error handling\",\r\n\t\t'options.loader.errors.none': \"disabled\",\r\n\t\t'options.loader.errors.network': \"network errors\",\r\n\t\t'options.loader.errors.http': \"network and HTTP errors\",\r\n\r\n\t\t'options.api': \"Web Audio API support\",\r\n\t\t'options.api.noVendorPrefix': \"Can create an audio context without a vendor prefix\",\r\n\t\t'options.api.connectReturnValue': \"Can use a return value of <code>AudioNode.connect()</code>\",\r\n\r\n\t\t'options-info.destination.analyser.logFftSize': \"[[Fast Fourier transform]] size for the waveform/frequency visualization. Use a larger size to get a wider time window for the waveform and thinner frequency bars.\",\r\n\t\t'options-info.canvas.background.color.a': \"Lower opacity values lead to a blur effect.\",\r\n\r\n\t\t'options-output.input': \"Editable\",\r\n\t\t'options-output.range': \"with range\",\r\n\t\t'options-output.filter.frequencyResponse': \"Frequency response\",\r\n\t\t'options-output.filter.magnitude': \"Magnitude\",\r\n\t\t'options-output.filter.phase': \"Phase\",\r\n\t\t'options-output.filter.logMagnitude': \"log magnitude scale\",\r\n\t\t'options-output.filter.logFrequency': \"log frequency scale\",\r\n\t\t'options-output.filter.contextError': \"Error creating audio context. Your browser likely doesn't support Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Error creating filter node. Your browser likely doesn't support this filter type.\",\r\n\t\t'options-output.filter.biquad.clone': \"Clone as IIR filter\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"Clone with {}-2016-04-15 coefficients\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'>The API specification</a> was self-contradictory and implementations weren't following it. Additionally, it was discovered that filter coefficient formulas need to be changed to accomodate a wider range of lowpass and highpass filters. See Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)} and ${webaudioIssue(791)} for details. A possible method to check if an implementation has switched to the updated formulas is offered <a href='${webaudioDetect}'>here</a>.`,\r\n\t\t'options-output.show': \"Show\",\r\n\t\t'options-output.hide': \"Hide\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working\",\r\n\t\t'code-output.warning.interesting': \"You need at least one source and some processing enabled to get interesting JavaScript code\",\r\n\r\n\t\t'code.title': \"Web Audio API example — generated code\",\r\n\r\n\t\t'label.sources.sample.play': \"Play sample\",\r\n\t\t'label.destination.compressor': \"Enable dynamics compressor\",\r\n\r\n\t\t'comment.context': \"create [audio context][context]\",\r\n\t\t'comment.sources.audio': \"create [audio source node][source]\",\r\n\t\t'comment.sources.video': \"create [video source node][source]\",\r\n\t\t'comment.sources.sample': \"load [sample][buffer]\",\r\n\t\t'comment.filters.gain': \"create [gain node][gain]\",\r\n\t\t'comment.filters.panner': \"create [stereo panner node][panner]\",\r\n\t\t'comment.filters.biquad': \"create [biquad filter node][biquad]\",\r\n\t\t'comment.filters.iir': \"create [IIR filter node][iir]\",\r\n\t\t'comment.filters.convolver': \"create dry and wet routes with [convolver node][convolver]\",\r\n\t\t'comment.filters.convolver.single': \"create [convolver node][convolver]\",\r\n\t\t'comment.filters.equalizer': \"create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"create equalizer as a [peaking][peaking] [biquad filter node][biquad]\",\r\n\t\t'comment.destination': \"connect last node to [destination][destination]\",\r\n\t\t'comment.destination.compressor': \"create [dynamics compressor node][compressor]\",\r\n\t\t'comment.destination.analyser': \"create [analyser node][analyser]\",\r\n\t\t'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': \"create [analyser node][analyser] for {waveform,frequencies,waveform and frequencies} visualization\",\r\n\t\t'comment.destination.analyser.split': \"create [channel splitter node][splitter] connected to two [analyser nodes][analyser]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2}': \"pixel{,s}\",\r\n\t\t'units.hertz.a': \"Hz\",\r\n\t\t'units.hertz.{1,2}': \"Hertz\",\r\n\t\t'units.decibel.a': \"dB\",\r\n\t\t'units.decibel.{1,2}': \"decibel{,s}\",\r\n\t\t'units.second.a': \"s\",\r\n\t\t'units.second.{1,2}': \"second{,s}\",\r\n\t},\r\n\tru:{\r\n\t\t'options.sources': \"Источники\",\r\n\t\t'options.sources.{audio,video}': \"Элемент <code>{}</code>\",\r\n\t\t'options.sources.{audio,video}.add': \"Добавить элемент <code>{}</code>\",\r\n\t\t'options.sources.sample': \"Сэмпл\",\r\n\t\t'options.sources.sample.add': \"Добавить сэмпл\",\r\n\t\t'options.sources.sample.buffer.loading': \"Идёт загрузка и декодирование сэмпла\",\r\n\t\t'options.sources.sample.buffer.error': \"Ошибка загрузки сэмпла\",\r\n\t\t'options.sources.sample.repeat': \"Повторить сэмпл\",\r\n\t\t'options.sources.sample.interval': \"Интервал между повторами\",\r\n\t\t'options.sources.sample.randomShift': \"Случайный сдвиг начала проигрывания\",\r\n\t\t'options.sources.sample.pitch': \"Высота\",\r\n\t\t'options.sources.sample.randomPitch': \"Случайная высота\",\r\n\t\t'options.sources.sample.gain': \"Громкость\",\r\n\t\t'options.sources.sample.randomGain': \"Случайная громкость\",\r\n\t\t'options.sources.{audio,video,sample}.url': \"URL источника\",\r\n\t\t'options.sources.video.{width,height}': \"{Ширина,Высота} проигрывателя\",\r\n\r\n\t\t'options.filters': \"Фильтры\",\r\n\t\t'options.filters.gain': \"Усилитель\",\r\n\t\t'options.filters.gain.add': \"Добавить усилитель\",\r\n\t\t'options.filters.gain.gain': \"Коэффициент усиления\",\r\n\t\t'options.filters.panner': \"Панорамирование\",\r\n\t\t'options.filters.panner.add': \"Добавить панорамирование\",\r\n\t\t'options.filters.panner.pan': \"Баланс\",\r\n\t\t'options.filters.biquad': \"Биквадратичный фильтр\",\r\n\t\t'options.filters.biquad.add': \"Добавить биквадратичный фильтр\",\r\n\t\t'options.filters.biquad.type': \"Тип фильтра\",\r\n\t\t'options.filters.biquad.type.lowpass': \"нижних частот\",\r\n\t\t'options.filters.biquad.type.highpass': \"верхних частот\",\r\n\t\t'options.filters.biquad.type.bandpass': \"полосовой\",\r\n\t\t'options.filters.biquad.type.{lowshelf,highshelf,peaking}': \"{}\", // TODO\r\n\t\t'options.filters.biquad.type.notch': \"полосно-заграждающий\",\r\n\t\t'options.filters.biquad.type.allpass': \"всепропускающий\", // http://www.dsplib.ru/content/allpass/allpass.html\r\n\t\t'options.filters.biquad.frequency': \"Частота\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \"Логарифм добротности\",\r\n\t\t'options.filters.biquad.gain': \"Усиление\",\r\n\t\t'options.filters.iir': \"БИХ-фильтр\",\r\n\t\t'options.filters.iir.add': \"Добавить БИХ-фильтр\",\r\n\t\t'options.filters.iir.feedforward': \"Коэффициенты прямой связи\", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \"Добавить коэффициент\",\r\n\t\t'options.filters.iir.feedback': \"Коэффициенты обратной связи\", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \"Добавить коэффициент\",\r\n\t\t'options.filters.convolver': \"Свёртка\",\r\n\t\t'options.filters.convolver.add': \"Добавить свёртку\",\r\n\t\t'options.filters.convolver.url': \"URL импульсной характеристики\",\r\n\t\t'options.filters.convolver.reverb': \"Соотношение прямого/обработанного звука\", // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\r\n\t\t'options.filters.convolver.buffer.loading': \"Идёт загрузка и декодирование импульсной характеристики\",\r\n\t\t'options.filters.convolver.buffer.error': \"Ошибка загрузки импульсной характеристики\",\r\n\t\t'options.filters.equalizer': \"Эквалайзер\",\r\n\t\t'options.filters.equalizer.add': \"Добавить эквалайзер\",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"Усиление частоты {} Гц\",\r\n\r\n\t\t'options.destination': \"Выход\",\r\n\t\t'options.destination.compressor': \"Компрессор\",\r\n\t\t'options.destination.compressor.enabled': \"Добавить компрессор перед выходом\",\r\n\t\t'options.destination.{waveform,frequencies}': \"Визуализация {формы волны,частот}\",\r\n\t\t'options.destination.{waveform,frequencies}.enabled': \"Включить визуализацию {формы волны,частот}\",\r\n\t\t'options.destination.waveform.width': \"Ширина линии волны\",\r\n\t\t'options.destination.waveform.color': \"Цвет линии волны\",\r\n\t\t'options.destination.waveform.color.{r,g,b,a}': `${ruColors} линии волны`,\r\n\t\t'options.destination.frequencies.cutoff': \"Ограничить рисование долей низких частот\",\r\n\t\t'options.destination.frequencies.base': \"Полосы частот растут от\",\r\n\t\t'options.destination.frequencies.base.{bottom,middle}': \"{низа,середины} элемента <code>canvas</code>\",\r\n\t\t'options.destination.frequencies.coloring': \"Раскраска полос частот\",\r\n\t\t'options.destination.frequencies.coloring.component': \"одним цветовым каналом\",\r\n\t\t'options.destination.frequencies.coloring.spectral': \"спектральная\",\r\n\t\t'options.destination.frequencies.coloringInput': \"Цвет полос зависит от\",\r\n\t\t'options.destination.frequencies.coloringInput.{amplitude,frequency}': \"{амплитуды,частоты}\",\r\n\t\t'options.destination.frequencies.outline': \"Контур полос частот\",\r\n\t\t'options.destination.frequencies.outline.enabled': \"Включить рисование контура частот\",\r\n\t\t'options.destination.frequencies.outline.width': \"Ширина контура частот\",\r\n\t\t'options.destination.frequencies.outline.color': \"Цвет контура частот\",\r\n\t\t'options.destination.frequencies.outline.color.{r,g,b,a}': `${ruColors} контура частот`,\r\n\t\t'options.destination.volume': \"Индикатор громкости\",\r\n\t\t'options.destination.volume.enabled': \"Включить индикатор громкости\",\r\n\t\t'options.destination.volume.stereo': \"Отдельные индикаторы для левого и правого каналов\",\r\n\t\t'options.destination.analyser': \"Анализатор\",\r\n\t\t'options.destination.analyser.logFftSize': \"Размер БПФ (степень 2)\",\r\n\r\n\t\t'options.canvas': \"Элемент <code>canvas</code>\",\r\n\t\t'options.canvas.{width,height}': \"{Ширина,Высота} элемента <code>canvas</code>\",\r\n\t\t'options.canvas.background': \"Фон\",\r\n\t\t'options.canvas.background.type': \"Тип фона\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{прозрачный,закрашенный}\",\r\n\t\t'options.canvas.background.color': \"Цвет фона\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `${ruColors} фона`,\r\n\r\n\t\t'options.loader': \"Загрузчик сэмплов\",\r\n\t\t'options.loader.errors': \"Обработка ошибок загрузки\",\r\n\t\t'options.loader.errors.none': \"отключена\",\r\n\t\t'options.loader.errors.network': \"для сетевых ошибок\",\r\n\t\t'options.loader.errors.http': \"для сетевых ошибок и ошибок HTTP\",\r\n\r\n\t\t'options.api': \"Поддержка Web Audio API\",\r\n\t\t'options.api.noVendorPrefix': \"Можно создавать аудио-контекст без префиксов производителей\",\r\n\t\t'options.api.connectReturnValue': \"Можно использовать значение, возвращаемое <code>AudioNode.connect()</code>\",\r\n\r\n\t\t'options-info.destination.analyser.logFftSize': \"Размер [[Быстрое преобразование Фурье|Быстрого преобразования Фурье]] для визуализаций формы волны и частот. Больший размер даёт более широкое окно для формы волны и более тонкие полосы частот.\",\r\n\t\t'options-info.canvas.background.color.a': \"Низкие значения альфа-канала приводят к эффекту размывания.\",\r\n\r\n\t\t'options-output.input': \"Значение изменяемо\",\r\n\t\t'options-output.range': \"в диапазоне\",\r\n\t\t'options-output.filter.frequencyResponse': \"Частотная характеристика\",\r\n\t\t'options-output.filter.magnitude': \"Амплитуда\",\r\n\t\t'options-output.filter.phase': \"Фаза\",\r\n\t\t'options-output.filter.logMagnitude': \"логарифмическая шкала амплитуды\",\r\n\t\t'options-output.filter.logFrequency': \"логарифмическая шкала частоты\",\r\n\t\t'options-output.filter.contextError': \"Ошибка создания аудио-контекста. Вероятно, браузер не поддерживает Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Ошибка создания узла фильтра. Вероятно, браузер не поддерживает данный тип фильтров.\",\r\n\t\t'options-output.filter.biquad.clone': \"Клонировать в виде БИХ-фильтра\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"Клонировать с коэффициентами по версиям {до,после} 2016-04-15\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'>Спецификация API</a> была противоречива и реализации ей не следовали. Также было обнаружено, что формулы для коэффициентов фильтров должны быть изменены, чтобы стало возможно задавать некоторые фильтры низких и высоких частот, которые ранее задать было невозможно. Подробности можно узнать из Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)} и ${webaudioIssue(791)}. Возможный метод обнаружения, перешла ли реализация на новые формулы, приводится <a href='${webaudioDetect}'>здесь</a>.`,\r\n\t\t'options-output.show': \"Показать\",\r\n\t\t'options-output.hide': \"Скрыть\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"Для корректного вывода звука в JSFiddle может потребоваться нажатие кнопки <kbd>Run</kbd>\",\r\n\t\t'code-output.warning.interesting': \"Для нетривиального JavaScript-кода нужно включить по крайней мере один источник и последующую обработку звука\",\r\n\r\n\t\t'code.title': \"Пример использования Web Audio API — сгенерированный код\",\r\n\r\n\t\t'label.sources.sample.play': \"Играть сэмпл\",\r\n\t\t'label.destination.compressor': \"Включить компрессор\",\r\n\r\n\t\t'comment.context': \"создаём [аудио-контекст][context]\",\r\n\t\t'comment.sources.audio': \"создаём [узел источника аудио][source]\",\r\n\t\t'comment.sources.video': \"создаём [узел источника видео][source]\",\r\n\t\t'comment.sources.sample': \"загружаем [сэмпл][buffer]\",\r\n\t\t'comment.filters.gain': \"создаём [узел усилителя][gain]\",\r\n\t\t'comment.filters.panner': \"создаём [узел панорамирования][panner]\",\r\n\t\t'comment.filters.biquad': \"создаём [узел биквадратичного фильтра][biquad]\",\r\n\t\t'comment.filters.iir': \"создаём [узел БИХ-фильтра][iir]\",\r\n\t\t'comment.filters.convolver': \"создаём прямой путь и путь через [узел свёртки][convolver]\",\r\n\t\t'comment.filters.convolver.single': \"создаём [узел свёртки][convolver]\",\r\n\t\t'comment.filters.equalizer': \"создаём эквалайзер в виде последовательности [peaking][peaking] [биквадратичных фильтров][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"создаём эквалайзер в виде [peaking][peaking] [биквадратичного фильтра][biquad]\",\r\n\t\t'comment.destination': \"соединяем последний узел с [выходом][destination]\",\r\n\t\t'comment.destination.compressor': \"создаём [узел компрессора][compressor]\",\r\n\t\t'comment.destination.analyser': \"создаём [узел анализатора][analyser]\",\r\n\t\t'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': \"создаём [узел анализатора][analyser] для визуализации {формы волны,частот,формы волны и частот}\",\r\n\t\t'comment.destination.analyser.split': \"создаём [узел разделения каналов][splitter], соединённый с двумя [узлами анализатора][analyser]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2,5}': \"пиксел{ь,я,ей}\",\r\n\t\t'units.hertz.a': \"Гц\",\r\n\t\t'units.hertz.{1,2,5}': \"Герц{,а,}\",\r\n\t\t'units.decibel.a': \"дБ\",\r\n\t\t'units.decibel.{1,2,5}': \"децибел{,а,ов}\",\r\n\t\t'units.second.a': \"с\",\r\n\t\t'units.second.{1,2,5}': \"секунд{а,ы,}\",\r\n\t},\r\n}\r\n\r\n/*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\r\n\r\nfor (let lang in langStrings) {\r\n\tlet strings=langStrings[lang]\r\n\tstrings=require('crnx-base/i18n-expand-curly')(strings)\r\n\tstrings=require('crnx-base/i18n-link-wikipedia')(lang)(strings)\r\n\tstrings=require('crnx-base/options-output-i18n')(lang)(strings)\r\n\tstrings=require('crnx-base/code-output-i18n')(lang)(strings)\r\n\tlangStrings[lang]=strings\r\n}\r\n\r\nmodule.exports=require('crnx-base/i18n')(langStrings)\r\n","'use strict'\r\n\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass IIRFilterOptionOutput extends FilterOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\treturn [audioContext.createIIRFilter(\r\n\t\t\tthis.option.entries[0].entries.map(entry=>entry.value),\r\n\t\t\tthis.option.entries[1].entries.map(entry=>entry.value)\r\n\t\t)]\r\n\t}\r\n}\r\n\r\nmodule.exports=IIRFilterOptionOutput\r\n","'use strict'\r\n\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Loader extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\tfeatureContext.loaderOnError=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.loader) return JsLines.be()\r\n\t\tconst a=JsLines.b()\r\n\t\ta(\r\n\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\"xhr.open('GET',url);\", // TODO html escape\r\n\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\"xhr.onload=function(){\"\r\n\t\t)\r\n\t\tif (this.options.errors=='http') {\r\n\t\t\ta(\r\n\t\t\t\t\"\tif (this.status==200) {\",\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,onDecode);\", // TODO decoding error handling\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\"\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\ta(\r\n\t\t\t\t\"\tctx.decodeAudioData(this.response,onDecode);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"};\"\r\n\t\t)\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\ta(\r\n\t\t\t\t\"xhr.onerror=onError;\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"xhr.send();\"\r\n\t\t)\r\n\t\treturn WrapLines.b(\r\n\t\t\tJsLines.bae(\"function loadSample(url,onDecode\"+(this.options.errors!='none' ? \",onError\" : \"\")+\") {\"),\r\n\t\t\tJsLines.bae(\"}\")\r\n\t\t).ae(a.e())\r\n\t}\r\n}\r\n\r\nmodule.exports=Loader\r\n","'use strict'\r\n\r\nlet idCounter=0\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++)\r\n}\r\n\r\nconst i18ns=require('./i18n')\r\nconst Options=require('./options')\r\nconst Code=require('./code')\r\nconst OptionsOutput=require('./options-output')\r\nconst CodeOutput=require('./code-output')\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst lang=$container.closest('[lang]').attr('lang')\r\n\t\tconst i18n=i18ns(lang)\r\n\t\tconst options=new Options()\r\n\t\tconst codeOutput=new CodeOutput(()=>new Code(options.fix(),i18n),i18n)\r\n\t\toptions.addUpdateCallback(codeOutput.update)\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n)\r\n\t\t$container.empty().append(\r\n\t\t\toptionsOutput.$output,\r\n\t\t\tcodeOutput.$output\r\n\t\t)\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst Option=Object.create(require('crnx-base/option-classes'))\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed precision of 2\r\n//\tno speed\r\n//\tcan specify defaultMin, defaultMax\r\n//\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\nOption.LiveNumber = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataMin  =data.min\r\n\t\t\tdataMax  =data.max\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.defaultMin!==undefined) {\r\n\t\t\tthis.defaultMin=settings.defaultMin\r\n\t\t} else {\r\n\t\t\tthis.defaultMin=this.availableMin\r\n\t\t}\r\n\t\tif (settings.defaultMax!==undefined) {\r\n\t\t\tthis.defaultMax=settings.defaultMax\r\n\t\t} else {\r\n\t\t\tthis.defaultMax=this.availableMax\r\n\t\t}\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:this.defaultMin\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:this.defaultMax\r\n\t\tthis._input=!!dataInput\r\n\t\tthis._$range=null\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input)\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateInternalVisibility()\r\n\t\tthis.update()\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min\r\n\t\tthis.update()\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max\r\n\t\tthis.update()\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range\r\n\t\tthis.updateInternalVisibility()\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={}\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value\r\n\t\tif (src.min!=src.availableMin) data.min=src.min\r\n\t\tif (src.max!=src.availableMax) data.max=src.max\r\n\t\tif (src.input) data.input=src.input\r\n\t\treturn data\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this)\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.min=this.min\r\n\t\tfixed.max=this.max\r\n\t\tfixed.input=this.input\r\n\t\tfixed.defaultValue=this.defaultValue\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 2\r\n\t}\r\n}\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableValues=src.availableValues\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tthis._input=!!dataInput\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\tif (this.input) data.input=this.input\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this)\r\n\t}\r\n}\r\n\r\nOption.AnyFloat = class extends Option.NonBoolean {\r\n}\r\n\r\nOption.BiquadFilter = class extends Option.Group {\r\n\tstatic typeUsesQ(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowpass': true,\r\n\t\t\t'highpass': true,\r\n\t\t\t'bandpass': true,\r\n\t\t\t'peaking': true,\r\n\t\t\t'notch': true,\r\n\t\t\t'allpass': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic typeUsesGain(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowshelf': true,\r\n\t\t\t'highshelf': true,\r\n\t\t\t'peaking': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['LiveSelect','type',[\r\n\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t]],\r\n\t\t\t['LiveInt','frequency',[0,22050],350,{ unit: 'hertz' }],\r\n\t\t\t['LiveInt','detune',[0,100],{ unit: '¢' }],\r\n\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t['LiveInt','gain',[-30,30],0,{ unit: 'decibel' }],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tconst type=this.entries[0]\r\n\t\tconst Q=this.entries[3]\r\n\t\tconst gain=this.entries[4]\r\n\t\tQ.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesQ(type.value))\r\n\t\tgain.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesGain(type.value))\r\n\t\ttype.addUpdateCallback(()=>{\r\n\t\t\tQ.updateVisibility()\r\n\t\t\tgain.updateVisibility()\r\n\t\t})\r\n\t}\r\n}\r\n\r\nOption.IIRFilterCoefs = class extends Option.Array {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (this._entries.length==0) {\r\n\t\t\tconst type=this.availableTypes[0]\r\n\t\t\tthis._entries.push(this.makeEntry(type))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.IIRFilter = class extends Option.Group {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['IIRFilterCoefs','feedforward',[\r\n\t\t\t\t['AnyFloat','b',1],\r\n\t\t\t]],\r\n\t\t\t['IIRFilterCoefs','feedback',[\r\n\t\t\t\t['AnyFloat','a',1],\r\n\t\t\t]],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.EqualizerFilter = class extends Option.Group {\r\n\tstatic get frequencies() {\r\n\t\treturn [60,170,350,1000,3500,10000]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=Option.EqualizerFilter.frequencies.map(\r\n\t\t\tfreq=>['LiveInt','gain'+freq,[-30,30],0,{ unit: 'decibel' }]\r\n\t\t)\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.Filters = class extends Option.Array {\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\nconst ArrayOptionOutput=require('crnx-base/array-option-output')\r\nconst BiquadFilterOptionOutput=require('./biquad-filter-option-output')\r\nconst IIRFilterOptionOutput=require('./iir-filter-option-output')\r\nconst EqualizerFilterOptionOutput=require('./equalizer-filter-option-output')\r\n\r\nclass FiltersOptionOutput extends ArrayOptionOutput {\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\tconst $subOutput=super.writeDraggableSubOption(subOption,writeOption,i18n)\r\n\t\tconst This=this\r\n\t\tif (subOption instanceof Option.BiquadFilter) {\r\n\t\t\t$subOutput.find('button.clone').click(function(){\r\n\t\t\t\tconst $button=$(this)\r\n\t\t\t\tconst coefs=$button.data('coefs')\r\n\t\t\t\tif (coefs) {\r\n\t\t\t\t\tconst entry=This.option.makeEntry('iir',coefs)\r\n\t\t\t\t\tThis.$entries.append(\r\n\t\t\t\t\t\tThis.writeDraggableSubOption(entry,writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tThis.updateArrayEntries()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn $subOutput\r\n\t}\r\n}\r\n\r\nclass IIRFilterCoefsOptionOutput extends ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn this.option.entries.length>1\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tsuper.updateArrayEntries()\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tupdateArrayEntryLabels() {\r\n\t\tthis.$entries.children().each(function(i){\r\n\t\t\tconst c=$(this).data('option').name\r\n\t\t\t$(this).find('label').addClass('short').html(`${c}<sub>${i}</sub>:`)\r\n\t\t})\r\n\t}\r\n}\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters)\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst writeMinMaxInput=minOrMax=>setInputAttrs($(\"<input type='number' required>\"))\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tlet $inputCheckbox,$rangeMinInput,$rangeMaxInput\r\n\t\t\tconst $output=optionClassWriters.get(Option.Number)(option,writeOption,i18n,generateId)\r\n\t\t\t$output.find('button').before(\r\n\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\" \"+i18n('options-output.input')\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\toption.$range=$(\"<span class='range'>\").append(\r\n\t\t\t\t\ti18n('options-output.range')+\" \",\r\n\t\t\t\t\t$(\"<span class='nowrap'>\").append(\r\n\t\t\t\t\t\t$rangeMinInput=writeMinMaxInput('min'),\r\n\t\t\t\t\t\t\" .. \",\r\n\t\t\t\t\t\t$rangeMaxInput=writeMinMaxInput('max')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t\" \"\r\n\t\t\t).click(function(){\r\n\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t$rangeMinInput.val(option.defaultMin).change()\r\n\t\t\t\t$rangeMaxInput.val(option.defaultMax).change()\r\n\t\t\t})\r\n\t\t\treturn $output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select,$inputCheckbox\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append( // not inheriting Option.Select b/c don't know how to handle reset button\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(function(availableValue){\r\n\t\t\t\t\t\treturn $(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t})\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\" \"+i18n('options-output.input')\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$select.val(option.defaultValue).change()\r\n\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.AnyFloat,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='number' id='\"+id+\"' step='any' required>\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilterCoefs,function(){\r\n\t\t\treturn new IIRFilterCoefsOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.BiquadFilter,function(){\r\n\t\t\treturn new BiquadFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilter,function(){\r\n\t\t\treturn new IIRFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.EqualizerFilter,function(){\r\n\t\t\treturn new EqualizerFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Filters,function(){\r\n\t\t\treturn new FiltersOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nconst BaseOptions=require('crnx-base/options')\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Array','sources',[\r\n\t\t\t\t['Group','audio',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','video',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.mp4',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','width',[1,1920],320,{ unit: 'pixel' }],\r\n\t\t\t\t\t['Int','height',[1,1080],240,{ unit: 'pixel' }],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','sample',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot2.mp3',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','repeat',[1,20]],\r\n\t\t\t\t\t['Float','interval',[0,1],0.1,{ unit: 'second' }],\r\n\t\t\t\t\t['Float','randomShift',[0,1],{ unit: 'second' }],\r\n\t\t\t\t\t['Float','pitch',[0,2],1],\r\n\t\t\t\t\t['Float','randomPitch',[0,1]],\r\n\t\t\t\t\t['Float','gain',[0,2],1],\r\n\t\t\t\t\t['Float','randomGain',[0,1]],\r\n\t\t\t\t]],\r\n\t\t\t],'source'],\r\n\t\t\t['Filters','filters',[\r\n\t\t\t\t['Group','gain',[\r\n\t\t\t\t\t['LiveFloat','gain',[0,10],1,{\r\n\t\t\t\t\t\tdefaultMax: 1,\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','panner',[\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['BiquadFilter','biquad'],\r\n\t\t\t\t['IIRFilter','iir'],\r\n\t\t\t\t['Group','convolver',[\r\n\t\t\t\t\t['LiveFloat','reverb',[0,1]],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['EqualizerFilter','equalizer'],\r\n\t\t\t],'filter'],\r\n\t\t\t['Group','destination',[\r\n\t\t\t\t['Group','compressor',[\r\n\t\t\t\t\t['Checkbox','enabled'], // Firefox compresses automatically?\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','waveform',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Float','width',[0,10],1,{\r\n\t\t\t\t\t\tunit: 'pixel',\r\n\t\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','frequencies',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Int','cutoff',[10,100],100,{\r\n\t\t\t\t\t\tunit: '%',\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','base',['bottom','middle'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','coloring',['component','spectral'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','coloringInput',['amplitude','frequency'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Group','outline',[\r\n\t\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t\t['Float','width',[0,10],1,{\r\n\t\t\t\t\t\t\tunit: 'pixel',\r\n\t\t\t\t\t\t\tvisibilityData: {'destination.frequencies.outline.enabled':[true]},\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t\t['Int','r',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','g',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','b',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t],{\r\n\t\t\t\t\t\t\tvisibilityData: {'destination.frequencies.outline.enabled':[true]},\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}]\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','volume',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Checkbox','stereo',{\r\n\t\t\t\t\t\tvisibilityData: {'destination.volume.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','analyser',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t],{\r\n\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true],'destination.frequencies.enabled':[true],'destination.volume.enabled':[true]},\r\n\t\t\t\t\tvisibilityDataLogic: 'or',\r\n\t\t\t\t}],\r\n\t\t\t]],\r\n\t\t\t['Group','canvas',[\r\n\t\t\t\t['Int','width',[1,1920],300,{ unit: 'pixel' }],\r\n\t\t\t\t['Int','height',[1,1080],100,{ unit: 'pixel' }],\r\n\t\t\t\t['Group','background',[\r\n\t\t\t\t\t['Select','type',['clear','filled']],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'canvas.background.type':['filled']}\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t],{\r\n\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true],'destination.frequencies.enabled':[true],'destination.volume.enabled':[true]},\r\n\t\t\t\tvisibilityDataLogic: 'or',\r\n\t\t\t}],\r\n\t\t\t['Group','loader',[\r\n\t\t\t\t['Select','errors',['none','network','http']],\r\n\t\t\t]], // TODO visibility depending on sources and filters\r\n\t\t\t['Group','api',[\r\n\t\t\t\t['Checkbox','noVendorPrefix'],\r\n\t\t\t\t['Checkbox','connectReturnValue'],\r\n\t\t\t]],\r\n\t\t]\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Source {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tget elementHtmlName() {\r\n\t\treturn 'my.'+this.type+this.nSuffix\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn WrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tthis.getElementHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.createMediaElementSource(document.getElementById('\"+this.elementHtmlName+\"'));\"\r\n\t\t)\r\n\t}\r\n\t// abstract:\r\n\t// get type()\r\n\t// getElementHtmlLines(featureContext,i18n)\r\n}\r\n\r\nconst sourceClasses={\r\n\taudio: class extends Source {\r\n\t\tget type() { return 'audio' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<audio src=${this.options.url} id=${this.elementHtmlName} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></audio>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tvideo: class extends Source {\r\n\t\tget type() { return 'video' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<video src=${this.options.url} id=${this.elementHtmlName} width=${this.options.width} height=${this.options.height} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></video>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tsample: class extends Source {\r\n\t\tget type() { return 'sample' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\tconst messageHtmlName=this.elementHtmlName+'.buffer'\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<button id=${this.elementHtmlName} disabled>${i18n('label.sources.sample.play')}</button> <span id=${messageHtmlName}>${i18n('options.sources.sample.buffer.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n) {\r\n\t\t\tconst messageHtmlName=this.elementHtmlName+'.buffer'\r\n\t\t\tconst fmtMul=(fmtNum)=>{\r\n\t\t\t\tif (fmtNum==1) {\r\n\t\t\t\t\treturn \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"*\"+fmtNum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getSampleLines=(startOptions)=>{\r\n\t\t\t\tconst randomValue=(baseOption,randomOption)=>{\r\n\t\t\t\t\tconst numbers={}\r\n\t\t\t\t\tnumbers.base=baseOption\r\n\t\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\t\tnumbers.random=randomOption\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\t\t\tlet value=fmt.base\r\n\t\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\t\tvalue+=\"+Math.random()\"+fmtMul(fmt.random)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value\r\n\t\t\t\t}\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tlet lastNodeName=\"bufferSourceNode\"\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var bufferSourceNode=ctx.createBufferSource();\",\r\n\t\t\t\t\t\"bufferSourceNode.buffer=buffer;\"\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.pitch!=1 || this.options.randomPitch>0) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"bufferSourceNode.playbackRate.value=\"+randomValue(this.options.pitch,this.options.randomPitch)+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.gain!=1 || this.options.randomGain>0) {\r\n\t\t\t\t\tlastNodeName=\"bufferSourceGainNode\"\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tfeatureContext.getJsConnectAssignLines(\"var\",\"bufferSourceGainNode\",\"ctx.createGain()\",[\"bufferSourceNode\"]),\r\n\t\t\t\t\t\t\"bufferSourceGainNode.gain.value=\"+randomValue(this.options.gain,this.options.randomGain)+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (featureContext.connectSampleToCompressor) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"if (document.getElementById('my.compressor').checked) {\",\r\n\t\t\t\t\t\t\"\t\"+lastNodeName+\".connect(compressorNode);\",\r\n\t\t\t\t\t\t\"} else {\",\r\n\t\t\t\t\t\t...featureContext.connectSampleToJsNames.map(\r\n\t\t\t\t\t\t\tnodeJsName=>\"\t\"+lastNodeName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\"}\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t...featureContext.connectSampleToJsNames.map(\r\n\t\t\t\t\t\t\tnodeJsName=>lastNodeName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"bufferSourceNode.start(\"+startOptions+\");\"\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tconst getOnClickLines=()=>{\r\n\t\t\t\tlet startOptions=\"\"\r\n\t\t\t\tconst numbers={}\r\n\t\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\t\tnumbers.interval=this.options.interval\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\t\tnumbers.randomShift=this.options.randomShift\r\n\t\t\t\t}\r\n\t\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\t\tstartOptions+=\"+i\"+fmtMul(fmt.interval)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\t\tstartOptions+=\"+Math.random()\"+fmtMul(fmt.randomShift)\r\n\t\t\t\t}\r\n\t\t\t\tif (startOptions.length>0) {\r\n\t\t\t\t\tstartOptions=\"ctx.currentTime\"+startOptions\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.repeat==1) {\r\n\t\t\t\t\treturn getSampleLines(startOptions)\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\"for (var i=0;i<\"+this.options.repeat+\";i++) {\"),\r\n\t\t\t\t\t\tJsLines.bae(\"}\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetSampleLines(startOptions)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getOnDecodeLines=()=>{\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var button=document.getElementById('\"+this.elementHtmlName+\"');\"\r\n\t\t\t\t)\r\n\t\t\t\ta(WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"button.onclick=function(){\"),\r\n\t\t\t\t\tJsLines.bae(\"};\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetOnClickLines()\r\n\t\t\t\t))\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"button.disabled=false;\",\r\n\t\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='';\"\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tconst getOnErrorLines=()=>{\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.sources.sample.buffer.error')+\"';\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst leadLines=JsLines.bae(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\t\"loadSample('\"+this.options.url+\"',function(buffer){\"\r\n\t\t\t)\r\n\t\t\tconst midLines=JsLines.bae(\r\n\t\t\t\t\"},function(){\"\r\n\t\t\t)\r\n\t\t\tconst endLines=JsLines.bae(\r\n\t\t\t\t\"});\"\r\n\t\t\t)\r\n\t\t\tif (!featureContext.loaderOnError) {\r\n\t\t\t\treturn WrapLines.b(leadLines,endLines).ae(\r\n\t\t\t\t\tgetOnDecodeLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\treturn WrapLines.b(leadLines,midLines,endLines).ae(\r\n\t\t\t\t\tgetOnDecodeLines(),\r\n\t\t\t\t\tgetOnErrorLines()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass SourceSet extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn sourceClasses[entryOption.source]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.entries.length>0) {\r\n\t\t\tfeatureContext.audioProcessing=true\r\n\t\t}\r\n\t\tif (this.entries.some(entry=>entry.type=='sample')) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t\tfeatureContext.loader=true\r\n\t\t\tfeatureContext.setConnectSampleToJsNames=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(...this.entries.map(entry=>entry.getJsInitLines(featureContext,i18n)))\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tlet nodeJsNames=[]\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\tnodeJsNames=this.entries.filter(entry=>entry.type!='sample').map(entry=>entry.nodeJsName)\r\n\t\t}\r\n\t\tif (nodeJsNames.length>0) {\r\n\t\t\treturn nodeJsNames\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=SourceSet\r\n"],"sourceRoot":"."}