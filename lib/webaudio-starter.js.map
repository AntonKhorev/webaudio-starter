{"version":3,"sources":["webaudio-starter.js","node_modules/browserify/node_modules/browser-pack/_prelude.js","base/lines.js","base/option-classes.js","base/options-output.js","base/options.js","src/audio-destination.js","src/audio.js","src/code-output.js","src/code.js","src/feature.js","src/filter-sequence.js","src/i18n.js","src/main.js","src/option-classes.js","src/options-output.js","src/options.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","Lines","this","data","addFlattenedArgs","flattenArgs","arguments","push","Array","isArray","apply","lastLine","pop","indent","level","map","line","join","isEmpty","interleave","first","wrap","begin","end","unshift","wrapIfNotEmpty","replace","match",2,"Option","Base","_class","name","_1","_2","_3","fullName","isVisible","updateCallback","_$","updateVisibility","$","toggle","shortenExport","dataKeys","shortenExportAssign","parentData","get","set","Input","_Option$Base","_class2","availableValues","defaultValue","_this","_value","BooleanInput","_Option$Input","_class3","fix","NonBooleanInput","_Option$Input2","_class4","valueOf","toString","String","FactorInput","_Option$NonBooleanInp","_class5","_this4","RangeInput","_Option$NonBooleanInp2","_class6","availableRange","_this5","availableMin","availableMax","Collection","_Option$Base2","_class7","entries","_this6","forEach","entry","fixedEntries","fixed","Void","_Option$Base3","_class8","Checkbox","_Option$BooleanInput","_class9","_","Select","_Option$FactorInput","_class10","Text","_Option$FactorInput2","_class11","Root","_Option$Collection","_class12","Group","_Option$Collection2","_class13","_Option$Base4","_class14","availableTypes","availableConstructors","_this13","_entries","subDatas","subData","subType","type","addEntry","_this14","subFixed",3,"OptionsOutput","options","generateId","i18n","write","option","optionProto","getPrototypeOf","optionClassWriter","optionClassWriters","Map","setOptionClassWriters","$output","root","writeOption","append","html","id","prop","change","listId","val","on","availableValue","text","$dragged","$entries","updateArrayEntries","children","writeDraggableOption","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","setDragImage","setTimeout","addClass","keydown","$handle","$sorted","keyCode","prev","before","focus","next","after","click","remove","preventDefault","dropEffect","$target","nextAll","is","prevAll","removeClass","$buttons","../base/option-classes.js",4,"Options","simpleUpdateCallback","optionClasses","optionByFullName","optionsWithVisibilityAffectedByFullName","makeEntry","description","fullNamePath","isInsideArray","className","ctorArgsDescription","slice","contents","defaultValueOrConstructors","visibilityData","nScalars","nArrays","nObjects","arg","x","subName","testName","indexOf","entriesDescription","./option-classes.js",5,"Feature","AudioDestination","_Feature","compressor","requestFeatureContext","featureContext","audioContext","getHtmlLines","lines","getJsLines","prevNodeJsNames","_Feature$prototype$ge","concat","prevNodeJsName","getNodeJsNames","../base/lines.js","./feature.js",6,"Audio","url",7,"CodeOutput","generateCodeFn","$code","getHtmlDataUri","encodeURIComponent","writeControls","attr","window","open","hljs","highlightBlock","delay","timeoutId","update","clearTimeout",8,"FilterSequence","features","source","filters","destination","feature","./audio-destination.js","./audio.js","./filter-sequence.js",9,10,"capitalize","charAt","toUpperCase","toCamelCase","split","w","Filter","getPropertyOption","property","optionName","getPropertyOptionName","getPropertyInputHtmlName","propertyName","nSuffix","nodeProperties","inputHtmlName","input","min","max","step","Function","bind","_this2","nodeJsName","ctxCreateMethodName","SinglePathFilter","_Filter","nodePropertyJsName","fn","eventProp","filterClasses","gain","_SinglePathFilter","panner","_SinglePathFilter2","biquad","_SinglePathFilter3","convolver","_Filter2","_this9","messageHtmlName","wetGainNodeJsName","dryGainNodeJsName","reverb","filterOptions","_this10","filterCounts","filterCounts2","filterClass","filter","nodeJsNames",11,"strings","options.source","options.source.comment","options.source.url","options.filters","options.filters.gain","options.filters.gain.comment","options.filters.gain.add","options.filters.gain.gain","options.filters.panner","options.filters.panner.comment","options.filters.panner.add","options.filters.panner.pan","options.filters.biquad","options.filters.biquad.comment","options.filters.biquad.add","options.filters.biquad.filtertype","options.filters.biquad.filtertype.lowpass","options.filters.biquad.filtertype.highpass","options.filters.biquad.filtertype.bandpass","options.filters.biquad.filtertype.lowshelf","options.filters.biquad.filtertype.highshelf","options.filters.biquad.filtertype.peaking","options.filters.biquad.filtertype.notch","options.filters.biquad.filtertype.allpass","options.filters.biquad.frequency","options.filters.biquad.detune","options.filters.biquad.Q","options.filters.convolver","options.filters.convolver.comment","options.filters.convolver.add","options.filters.convolver.url","options.filters.convolver.reverb","options.filters.convolver.buffer.loading","options.filters.convolver.buffer.error","options.destination","options.destination.comment","options.destination.compressor","options.destination.compressor.comment","options.destination.compressor.enable","options-output.drag","options-output.delete","options-output.input","options-output.range","options-output.reset","lang",12,"idCounter","generateCode","each","$container","codeOutput","optionsOutput","empty","./code-output","./code.js","./i18n.js","./options-output","./options.js",13,"FixedLiveNumber","src","LiveNumber","_Option$RangeInput","dataValue","dataMin","dataMax","dataInput","_min","_max","_input","_$range","updateInternalVisibility","exportHelper","$range","LiveInt","_Option$LiveNumber","LiveFloat","_Option$LiveNumber2","FixedLiveSelect","LiveSelect","_Option$Select",14,"BaseOptionsOutput","_BaseOptionsOutput","setInputAttrs","$input","setInputAttrsAndListeners","getOtherInput","checkValidity","$that","parseFloat","writeMinMaxInput","minOrMax","inputCheckboxId","$sliderInput","$numberInput","$inputCheckbox","$rangeMinInput","$rangeMaxInput","$select","../base/options-output.js",15,"BaseOptions","_BaseOptions","../base/options.js"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                /*\r\n.a = add AFTER last line\r\n.t = add TO last line\r\n*/\n                var Lines = function Lines() {\n                    this.data = [];\n                    this.addFlattenedArgs(this.flattenArgs(arguments));\n                };\n                // private\n                Lines.prototype.flattenArgs = function (s) {\n                    var r = [];\n                    for (var i = 0; i < s.length; i++) {\n                        if (typeof s[i] == 'string') {\n                            r.push(s[i]);\n                        } else if (Array.isArray(s[i])) {\n                            Array.prototype.push.apply(r, s[i]);\n                        } else if (s[i] instanceof Lines) {\n                            Array.prototype.push.apply(r, s[i].data);\n                        }\n                    }\n                    return r;\n                };\n                Lines.prototype.addFlattenedArgs = function (s) {\n                    Array.prototype.push.apply(this.data, s);\n                };\n                // public\n                Lines.prototype.a = function () {\n                    this.addFlattenedArgs(this.flattenArgs(arguments));\n                    return this;\n                };\n                Lines.prototype.t = function () {\n                    var lastLine = this.data.pop();\n                    var s = this.flattenArgs(arguments);\n                    s[0] = lastLine + s[0];\n                    this.addFlattenedArgs(s);\n                    return this;\n                };\n                Lines.prototype.indent = function (level) {\n                    if (level === undefined) {\n                        level = 1;\n                    }\n                    this.data = this.data.map(function (line) {\n                        return Array(level + 1).join('\\t') + line;\n                    });\n                    return this;\n                };\n                Lines.prototype.isEmpty = function () {\n                    return this.data.length <= 0;\n                };\n                Lines.prototype.interleave = function () {\n                    var first = true;\n                    for (var i = 0; i < arguments.length; i++) {\n                        var r = this.flattenArgs([arguments[i]]);\n                        if (r.length > 0) {\n                            if (first) {\n                                first = false;\n                            } else {\n                                this.data.push('');\n                            }\n                            this.addFlattenedArgs(r);\n                        }\n                    }\n                    return this;\n                };\n                Lines.prototype.wrap = function (begin, end) {\n                    this.indent();\n                    this.data.unshift(begin);\n                    this.data.push(end);\n                    return this;\n                };\n                Lines.prototype.wrapIfNotEmpty = function (begin, end) {\n                    if (!this.isEmpty()) {\n                        this.wrap(begin, end);\n                    }\n                    return this;\n                };\n                /*\r\nLines.prototype.wrapEachLine=function(begin,end){\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn begin+line+end;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.map=function(fn){\r\n\tthis.data=this.data.map(fn);\r\n\treturn this;\r\n};\r\n*/\n                Lines.prototype.join = function (indent) {\n                    return this.data.map(function (line) {\n                        return line.replace(/^(\\t)+/, function (match) {\n                            return Array(match.length + 1).join(indent);\n                        });\n                    }).join('\\n');\n                };\n                module.exports = Lines;\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                // constructors typically called from Options class\n                // to call them manually, use the following args:\n                //\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\n                // the rest of arguments' order is not settled, don't use them\n                // \t+ TODO not sure about data\n                /*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\t'type' if option is an array member\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    function _class(name, _1, _2, _3, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class);\n                        this.name = name;\n                        this.isVisible = isVisible;\n                        this.updateCallback = updateCallback;\n                        this.fullName = fullName;\n                        this._$ = null;\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    babelHelpers.createClass(_class, [{\n                            key: '$',\n                            get: function get() {\n                                return this._$;\n                            },\n                            set: function set($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    babelHelpers.inherits(_class2, _Option$Base);\n                    function _class2(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class2);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        if (defaultValue !== undefined) {\n                            _this.defaultValue = defaultValue;\n                        } else {\n                            _this.defaultValue = availableValues[0];\n                        }\n                        if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    babelHelpers.createClass(_class2, [{\n                            key: 'value',\n                            get: function get() {\n                                return this._value;\n                            },\n                            set: function set(value) {\n                                this._value = value;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.BooleanInput = function (_Option$Input) {\n                    babelHelpers.inherits(_class3, _Option$Input);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBooleanInput = function (_Option$Input2) {\n                    babelHelpers.inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        babelHelpers.classCallCheck(this, _class4);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function valueOf() {\n                                return value;\n                            },\n                            toString: function toString() {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.FactorInput = function (_Option$NonBooleanInp) {\n                    babelHelpers.inherits(_class5, _Option$NonBooleanInp);\n                    function _class5(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class5);\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp.apply(this, arguments));\n                        _this4.availableValues = availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBooleanInput);\n                Option.RangeInput = function (_Option$NonBooleanInp2) {\n                    babelHelpers.inherits(_class6, _Option$NonBooleanInp2);\n                    function _class6(name, availableRange, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class6);\n                        var _this5 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp2.apply(this, arguments));\n                        _this5.availableMin = availableRange[0];\n                        _this5.availableMax = availableRange[1];\n                        return _this5;\n                    }\n                    return _class6;\n                }(Option.NonBooleanInput);\n                Option.Collection = function (_Option$Base2) {\n                    babelHelpers.inherits(_class7, _Option$Base2);\n                    function _class7(name, entries, _1, _2, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class7);\n                        var _this6 = babelHelpers.possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = entries;\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        this.entries.forEach(function (entry) {\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        });\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        this.entries.forEach(function (entry) {\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        });\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    babelHelpers.inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        babelHelpers.classCallCheck(this, _class8);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$BooleanInput) {\n                    babelHelpers.inherits(_class9, _Option$BooleanInput);\n                    function _class9(name, _, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class9);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$BooleanInput.call(this, name, undefined, !!defaultValue, data, fullName, isVisible, updateCallback));\n                    }\n                    return _class9;\n                }(Option.BooleanInput);\n                Option.Select = function (_Option$FactorInput) {\n                    babelHelpers.inherits(_class10, _Option$FactorInput);\n                    function _class10() {\n                        babelHelpers.classCallCheck(this, _class10);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.FactorInput);\n                Option.Text = function (_Option$FactorInput2) {\n                    babelHelpers.inherits(_class11, _Option$FactorInput2);\n                    function _class11() {\n                        babelHelpers.classCallCheck(this, _class11);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.FactorInput);\n                Option.Root = function (_Option$Collection) {\n                    babelHelpers.inherits(_class12, _Option$Collection);\n                    function _class12() {\n                        babelHelpers.classCallCheck(this, _class12);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class12;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    babelHelpers.inherits(_class13, _Option$Collection2);\n                    function _class13() {\n                        babelHelpers.classCallCheck(this, _class13);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class13;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    babelHelpers.inherits(_class14, _Option$Base4);\n                    function _class14(name, availableTypes, availableConstructors, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class14);\n                        var _this13 = babelHelpers.possibleConstructorReturn(this, _Option$Base4.call(this, name, undefined, undefined, undefined, fullName, isVisible, updateCallback));\n                        _this13.availableTypes = availableTypes;\n                        _this13.availableConstructors = availableConstructors;\n                        _this13._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            subDatas = data.value;\n                        }\n                        for (var i = 0; i < subDatas.length; i++) {\n                            var subData = subDatas[i];\n                            var subType = availableTypes[0];\n                            if ((typeof subData === 'undefined' ? 'undefined' : babelHelpers.typeof(subData)) == 'object' && subData.type !== undefined) {\n                                subType = subData.type;\n                            }\n                            if (availableConstructors[subType]) {\n                                _this13._entries.push(availableConstructors[subType](subData));\n                            }\n                        }\n                        return _this13;\n                    }\n                    _class14.prototype.addEntry = function addEntry(type) {\n                        var entry = this.availableConstructors[type]();\n                        this._entries.push(entry);\n                        this.updateCallback();\n                        return entry;\n                    };\n                    _class14.prototype.export = function _export() {\n                        var _this14 = this;\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != _this14.availableTypes[0])\n                                    subData.type = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class14.prototype.fix = function fix() {\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if ((typeof subFixed === 'undefined' ? 'undefined' : babelHelpers.typeof(subFixed)) == 'object')\n                                    subFixed.type = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    babelHelpers.createClass(_class14, [{\n                            key: 'entries',\n                            get: function get() {\n                                return this._entries;\n                            },\n                            set: function set(entries) {\n                                this._entries = entries;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class14;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require('../base/option-classes.js');\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = new Map();\n                        this.setOptionClassWriters(optionClassWriters);\n                        function write(option) {\n                            var optionProto = option;\n                            while (optionProto = Object.getPrototypeOf(optionProto)) {\n                                var optionClassWriter = optionClassWriters.get(optionProto.constructor);\n                                if (optionClassWriter) {\n                                    return optionClassWriter(option, write, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = write(options.root);\n                    }\n                    // override this fn for custom writers\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        optionClassWriters.set(Option.Root, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Group, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Void, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'option void\\'>').html(i18n('options.' + option.fullName));\n                        });\n                        optionClassWriters.set(Option.Checkbox, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').prop('checked', option.value).change(function () {\n                                option.value = $(this).prop('checked');\n                            })).append(' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                        });\n                        optionClassWriters.set(Option.Text, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var listId = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($('<input type=\\'text\\' id=\\'' + id + '\\'list=\\'' + listId + '\\' />').val(option.value).on('input change', function () {\n                                option.value = this.value;\n                            })).append(' ').append($('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').text(availableValue);\n                            })));\n                        });\n                        optionClassWriters.set(Option.Array, function (option, writeOption, i18n, generateId) {\n                            var $dragged = null;\n                            var $entries = undefined;\n                            var updateArrayEntries = function updateArrayEntries() {\n                                option.entries = $entries.children().map(function () {\n                                    return $(this).data('option');\n                                }).get();\n                            };\n                            var writeDraggableOption = function writeDraggableOption(option) {\n                                // have to make drag handler 'draggable', not the whole item\n                                // because inputs and labels don't like to be inside 'draggable'\n                                // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                                return $('<div class=\\'draggable-with-handle\\'>').data('option', option).append($('<div draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag') + '\\'>').on('dragstart', function (ev) {\n                                    $dragged = $(this).parent();\n                                    ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                                    ev.originalEvent.dataTransfer.setData('Text', name);\n                                    if (ev.originalEvent.dataTransfer.setDragImage) {\n                                        // doesn't work in IE\n                                        ev.originalEvent.dataTransfer.setDragImage($dragged[0], 0, 0);\n                                    }\n                                    setTimeout(function () {\n                                        $dragged.addClass('ghost');\n                                    }, 0);\n                                }).keydown(function (ev) {\n                                    var $handle = $(this);\n                                    var $sorted = $handle.parent();\n                                    if (ev.keyCode == 38) {\n                                        $sorted.prev().before($sorted);\n                                        $handle.focus();\n                                        updateArrayEntries();\n                                        return false;\n                                    } else if (ev.keyCode == 40) {\n                                        $sorted.next().after($sorted);\n                                        $handle.focus();\n                                        updateArrayEntries();\n                                        return false;\n                                    }\n                                })).append(writeOption(option)).append(//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'></div>\")\n                                $('<div tabindex=\\'0\\' class=\\'delete\\' title=\\'' + i18n('options-output.delete') + '\\'>').click(function () {\n                                    $(this).parent().remove();\n                                    updateArrayEntries();\n                                }).keydown(function (ev) {\n                                    if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                        $(this).parent().remove();\n                                        updateArrayEntries();\n                                        return false;\n                                    }\n                                })).on('dragover', function (ev) {\n                                    ev.preventDefault();\n                                    ev.originalEvent.dataTransfer.dropEffect = 'move';\n                                    var $target = $(this);\n                                    if ($dragged) {\n                                        if ($target.nextAll().is($dragged)) {\n                                            $target.before($dragged);\n                                            updateArrayEntries();\n                                        } else if ($target.prevAll().is($dragged)) {\n                                            $target.after($dragged);\n                                            updateArrayEntries();\n                                        }\n                                    }\n                                }).on('drop', function (ev) {\n                                    ev.preventDefault();\n                                }).on('dragend', function (ev) {\n                                    ev.preventDefault();\n                                    if ($dragged) {\n                                        $dragged.removeClass('ghost');\n                                        $dragged = null;\n                                    }\n                                });\n                            };\n                            option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append($entries = $('<div>').append(option.entries.map(writeDraggableOption)));\n                            var $buttons = $('<div>');\n                            option.availableTypes.forEach(function (type, i) {\n                                if (i)\n                                    $buttons.append(' ');\n                                $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                    var entry = option.addEntry(type);\n                                    $entries.append(writeDraggableOption(entry));\n                                }));\n                            });\n                            option.$.append($buttons);\n                            return option.$;\n                        });\n                    };\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            { '../base/option-classes.js': 2 }\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                var Options = function () {\n                    function Options(data) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        this.updateCallback = undefined;\n                        // general update callback for stuff like regenerating the code\n                        var simpleUpdateCallback = function simpleUpdateCallback() {\n                            if (_this.updateCallback)\n                                _this.updateCallback();\n                        };\n                        var Option = this.optionClasses;\n                        var optionByFullName = {};\n                        var optionsWithVisibilityAffectedByFullName = {};\n                        var makeEntry = function makeEntry(description, fullNamePath, data, isInsideArray) {\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var name = description[1];\n                            var fullName = fullNamePath + name;\n                            var ctorArgsDescription = description.slice(2);\n                            var contents = [];\n                            var defaultValueOrConstructors = undefined;\n                            var visibilityData = {};\n                            var nScalars = 0;\n                            var nArrays = 0;\n                            var nObjects = 0;\n                            for (var i = 0; i < ctorArgsDescription.length; i++) {\n                                var arg = ctorArgsDescription[i];\n                                if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                    if (nScalars == 0) {\n                                        defaultValueOrConstructors = arg;\n                                    } else {\n                                        throw new Error('too many scalar arguments');\n                                    }\n                                    nScalars++;\n                                } else if (Array.isArray(arg)) {\n                                    if (nArrays == 0) {\n                                        if (!isInsideArray && className == 'Array') {\n                                            // TODO test array inside array\n                                            defaultValueOrConstructors = {};\n                                            arg.forEach(function (x) {\n                                                var type = x[1];\n                                                contents.push(type);\n                                                defaultValueOrConstructors[type] = function (subData) {\n                                                    return makeEntry(x, fullName + '.', subData, true);\n                                                };\n                                            });\n                                        } else {\n                                            contents = arg.map(function (x) {\n                                                if (Array.isArray(x)) {\n                                                    var subName = x[1];\n                                                    var subData = undefined;\n                                                    if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object')\n                                                        subData = data[subName];\n                                                    return makeEntry(x, fullName + '.', subData, isInsideArray);    // nested option\n                                                } else {\n                                                    return x;    // available value / value range boundary\n                                                }\n                                            });\n                                        }\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nArrays++;\n                                } else if (!isInsideArray && arg instanceof Object) {\n                                    if (nObjects == 0) {\n                                        visibilityData = arg;\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nObjects++;\n                                } else {\n                                    throw new Error('unknown argument type');\n                                }\n                            }\n                            var isVisible = undefined, updateCallback = undefined;\n                            if (isInsideArray) {\n                                updateCallback = simpleUpdateCallback;\n                                isVisible = function isVisible() {\n                                    return true;\n                                };\n                            } else {\n                                isVisible = function isVisible() {\n                                    for (var testName in visibilityData) {\n                                        var value = optionByFullName[testName].value;\n                                        if (visibilityData[testName].indexOf(value) < 0) {\n                                            return false;\n                                        }\n                                    }\n                                    return true;\n                                };\n                                updateCallback = function updateCallback() {\n                                    if (optionsWithVisibilityAffectedByFullName[fullName] !== undefined) {\n                                        optionsWithVisibilityAffectedByFullName[fullName].forEach(function (option) {\n                                            option.updateVisibility();\n                                        });\n                                    }\n                                    if (_this.updateCallback)\n                                        _this.updateCallback();\n                                };\n                            }\n                            var option = new Option[className](name, contents, defaultValueOrConstructors, data, fullName, isVisible, updateCallback);\n                            if (!isInsideArray) {\n                                optionByFullName[fullName] = option;\n                                for (var testName in visibilityData) {\n                                    if (optionsWithVisibilityAffectedByFullName[testName] === undefined) {\n                                        optionsWithVisibilityAffectedByFullName[testName] = [];\n                                    }\n                                    optionsWithVisibilityAffectedByFullName[testName].push(option);\n                                }\n                            }\n                            return option;\n                        };\n                        this.root = new Option.Root(null, this.entriesDescription.map(function (description) {\n                            var subName = description[1];\n                            var subData = undefined;\n                            if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object')\n                                subData = data[subName];\n                            return makeEntry(description, '', subData, false);\n                        }), undefined, data, null, function () {\n                            return true;\n                        }, simpleUpdateCallback);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function get() {\n                                return require('./option-classes.js');\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function get() {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { './option-classes.js': 2 }\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                var Feature = require('./feature.js');\n                var AudioDestination = function (_Feature) {\n                    babelHelpers.inherits(AudioDestination, _Feature);\n                    function AudioDestination(options) {\n                        babelHelpers.classCallCheck(this, AudioDestination);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.compressor = options.compressor;\n                        return _this;\n                    }\n                    AudioDestination.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.compressor) {\n                            featureContext.audioContext = true;\n                        }\n                    };\n                    AudioDestination.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var lines = new Lines();\n                        if (this.compressor) {\n                            lines.a('<input id=\\'my.compressor\\' type=\\'checkbox\\' checked />', '<label for=\\'my.compressor\\'>' + i18n('options.destination.compressor.enable') + '</label>');\n                        }\n                        return lines.wrapIfNotEmpty('<div>', '</div>');\n                    };\n                    AudioDestination.prototype.getJsLines = function getJsLines(featureContext, i18n, prevNodeJsNames) {\n                        var _Feature$prototype$ge;\n                        var lines = (_Feature$prototype$ge = _Feature.prototype.getJsLines).call.apply(_Feature$prototype$ge, [this].concat(Array.prototype.slice.call(arguments)));\n                        if (featureContext.audioContext) {\n                            if (this.compressor) {\n                                lines.a.apply(lines, [\n                                    '// ' + i18n('options.destination.compressor.comment'),\n                                    'var compressorNode=ctx.createDynamicsCompressor();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(compressorNode);';\n                                }), [\n                                    'compressorNode.connect(ctx.destination);',\n                                    'document.getElementById(\\'my.compressor\\').onchange=function(){',\n                                    '\\tif (this.checked) {'\n                                ], prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(ctx.destination);';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(compressorNode);';\n                                }), ['\\t} else {'], prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(compressorNode);';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(ctx.destination);';\n                                }), [\n                                    '\\t}',\n                                    '};'\n                                ]));\n                            } else {\n                                lines.a.apply(lines, ['// ' + i18n('options.destination.comment')].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(ctx.destination);';\n                                })));\n                            }\n                        }\n                        return lines;\n                    };\n                    AudioDestination.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (featureContext.audioContext) {\n                            return ['ctx.destination'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return AudioDestination;\n                }(Feature);\n                module.exports = AudioDestination;\n            },\n            {\n                '../base/lines.js': 1,\n                './feature.js': 9\n            }\n        ],\n        6: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                var Feature = require('./feature.js');\n                var Audio = function (_Feature) {\n                    babelHelpers.inherits(Audio, _Feature);\n                    function Audio(options) {\n                        babelHelpers.classCallCheck(this, Audio);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.url = options.url;\n                        return _this;\n                    }\n                    Audio.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new Lines('<audio src=\\'' + this.url + '\\' id=\\'my.source\\' controls loop' + (featureContext.audioContext ? ' crossorigin=\\'anonymous\\'' : '') + '></audio>'    // TODO html escape\n).wrap('<div>', '</div>');\n                    };\n                    Audio.prototype.getJsLines = function getJsLines(featureContext, i18n, prevNodeJsNames) {\n                        var _Feature$prototype$ge;\n                        var lines = (_Feature$prototype$ge = _Feature.prototype.getJsLines).call.apply(_Feature$prototype$ge, [this].concat(Array.prototype.slice.call(arguments)));\n                        if (featureContext.audioContext) {\n                            lines.a('// ' + i18n('options.source.comment'), 'var ctx=new (AudioContext || webkitAudioContext);', 'var sourceElement=document.getElementById(\\'my.source\\');', 'var sourceNode=ctx.createMediaElementSource(sourceElement);');\n                        }\n                        return lines;\n                    };\n                    Audio.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (featureContext.audioContext) {\n                            return ['sourceNode'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return Audio;\n                }(Feature);\n                module.exports = Audio;\n            },\n            {\n                '../base/lines.js': 1,\n                './feature.js': 9\n            }\n        ],\n        7: [\n            function (require, module, exports) {\n                'use strict';\n                var CodeOutput = function CodeOutput(generateCodeFn) {\n                    babelHelpers.classCallCheck(this, CodeOutput);\n                    var $code = undefined;\n                    var getHtmlDataUri = function getHtmlDataUri(html) {\n                        return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                    };\n                    var writeControls = function writeControls() {\n                        return $('<div>').append($('<a download=\\'source.html\\'><button type=\\'button\\'>Save source code</button></a>').click(function () {\n                            // yes I want a button, but download attr is only available for links\n                            $(this).attr('href', getHtmlDataUri($code.text()));\n                        })).append(' ').append($('<button type=\\'button\\'>Run in new window</button>').click(function () {\n                            window.open(getHtmlDataUri($code.text()), 'generatedCode');\n                        })).append(' these buttons don\\'t work in Internet Explorer, copy-paste the code manually');\n                    };\n                    var $output = $('<div class=\\'code-output\\'>').append(writeControls()).append($('<pre>').append($code = $('<code>').text(generateCodeFn())));\n                    if (window.hljs) {\n                        hljs.highlightBlock($code[0]);\n                    } else {\n                    }\n                    $output.append(writeControls());\n                    var delay = 200;\n                    var timeoutId = null;\n                    var update = function update() {\n                        clearTimeout(timeoutId);\n                        timeoutId = setTimeout(function () {\n                            $code.text(generateCodeFn());\n                            if (window.hljs)\n                                hljs.highlightBlock($code[0]);\n                        }, delay);\n                    };\n                    // public props:\n                    this.$output = $output;\n                    this.update = update;\n                };\n                module.exports = CodeOutput;\n            },\n            {}\n        ],\n        8: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                var Audio = require('./audio.js');\n                var FilterSequence = require('./filter-sequence.js');\n                var AudioDestination = require('./audio-destination.js');\n                module.exports = function (options, i18n) {\n                    var featureContext = {};\n                    var features = [];\n                    features.push(new Audio(options.source));\n                    features.push(new FilterSequence(options.filters));\n                    features.push(new AudioDestination(options.destination));\n                    features.forEach(function (feature) {\n                        feature.requestFeatureContext(featureContext);\n                    });\n                    var lines = new Lines('<!DOCTYPE html>', '<html lang=\\'en\\'>', '<head>', '<meta charset=\\'utf-8\\' />', '<title>WebAudio example - Generated code</title>', '</head>', '<body>', function () {\n                        var lines = new Lines();\n                        lines.a.apply(lines, features.map(function (feature) {\n                            return feature.getHtmlLines(featureContext, i18n);\n                        }));\n                        return lines;\n                    }(), function () {\n                        var lines = new Lines();\n                        var prevNodeJsNames = undefined;\n                        lines.interleave.apply(lines, features.map(function (feature) {\n                            var lines = feature.getJsLines(featureContext, i18n, prevNodeJsNames);\n                            prevNodeJsNames = feature.getNodeJsNames(featureContext, prevNodeJsNames);\n                            return lines;\n                        }));\n                        return lines.wrapIfNotEmpty('<script>', '</script>');\n                    }(), '</body>', '</html>');\n                    return lines.join('\\t');\n                };\n            },\n            {\n                '../base/lines.js': 1,\n                './audio-destination.js': 5,\n                './audio.js': 6,\n                './filter-sequence.js': 10\n            }\n        ],\n        9: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                var Feature = function () {\n                    function Feature() {\n                        babelHelpers.classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new Lines();\n                    };\n                    Feature.prototype.getJsLines = function getJsLines(featureContext, i18n, prevNodeJsNames) {\n                        return new Lines();\n                    };\n                    Feature.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        return prevNodeJsNames;\n                    };\n                    return Feature;\n                }();\n                module.exports = Feature;\n            },\n            { '../base/lines.js': 1 }\n        ],\n        10: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                var Feature = require('./feature.js');\n                function capitalize(s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                }\n                function toCamelCase(s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                }\n                var Filter = function () {\n                    function Filter(n, options) {\n                        babelHelpers.classCallCheck(this, Filter);\n                        this.n = n;\n                        this.options = options;\n                    }\n                    Filter.prototype.getPropertyOption = function getPropertyOption(property) {\n                        var name = property.optionName !== undefined ? property.optionName : property.name;\n                        return this.options[name];\n                    };\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(property) {\n                        var name = property.optionName !== undefined ? property.optionName : property.name;\n                        return 'options.filters.' + this.type + '.' + name;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    //getPropertyInputJsName(propertyName) {\n                    //\treturn toCamelCase(this.type+this.nSuffix+'.'+propertyName+'.input');\n                    //}\n                    Filter.prototype.getHtmlLines = function getHtmlLines(i18n) {\n                        var _this = this;\n                        var lines = new Lines();\n                        this.nodeProperties.forEach(function (property) {\n                            var option = _this.getPropertyOption(property);\n                            var inputHtmlName = _this.getPropertyInputHtmlName(property.name);\n                            if (property.type == 'range' && option.input) {\n                                lines.a('<label for=\\'' + inputHtmlName + '\\'>' + i18n(_this.getPropertyOptionName(property)) + '</label>', '<input id=\\'' + inputHtmlName + '\\' type=\\'range\\' value=\\'' + option + '\\' min=\\'' + option.min + '\\' max=\\'' + option.max + '\\'' + (option.step != 1 ? ' step=\\'' + option.step + '\\'' : '') + ' />');\n                            } else if (property.type == 'select' && option.input) {\n                                lines.a('<label for=\\'' + inputHtmlName + '\\'>' + i18n(_this.getPropertyOptionName(property)) + '</label>', new (Function.prototype.bind.apply(Lines, [null].concat(option.availableValues.map(function (value) {\n                                    return '<option>' + value + '</option>';\n                                }))))().wrap('<select id=\\'' + inputHtmlName + '\\'>', '</select>'));\n                            } else if (property.type == 'xhr') {\n                                lines.a('<span id=\\'' + inputHtmlName + '\\'>' + i18n(_this.getPropertyOptionName(property) + '.loading') + '</span>');\n                            }\n                        });\n                        return lines.wrap('<div>', '</div>');\n                    };\n                    Filter.prototype.getJsLines = function getJsLines(i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        var lines = new Lines();\n                        lines.a.apply(lines, [\n                            '// ' + i18n('options.filters.' + this.type + '.comment'),\n                            'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'\n                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                            return prevNodeJsName + '.connect(' + _this2.nodeJsName + ');';\n                        })));\n                        return lines;\n                    };\n                    // abstract:\n                    // get type()\n                    // get ctxCreateMethodName()\n                    // get nodeJsNames()\n                    // get nodeProperties()\n                    babelHelpers.createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function get() {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function get() {\n                                return toCamelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var SinglePathFilter = function (_Filter) {\n                    babelHelpers.inherits(SinglePathFilter, _Filter);\n                    function SinglePathFilter() {\n                        babelHelpers.classCallCheck(this, SinglePathFilter);\n                        return babelHelpers.possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                    }\n                    SinglePathFilter.prototype.getJsLines = function getJsLines(i18n, prevNodeJsNames) {\n                        var _this4 = this;\n                        var lines = _Filter.prototype.getJsLines.call(this, i18n, prevNodeJsNames);\n                        this.nodeProperties.forEach(function (property) {\n                            var option = _this4.getPropertyOption(property);\n                            var nodePropertyJsName = _this4.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '');\n                            //if (property.type=='range' || property.type=='select') {\n                            var value = option.value;\n                            if (property.type == 'select') {\n                                value = '\\'' + value + '\\'';\n                            }\n                            if (property.fn) {\n                                value = property.fn(value);\n                            }\n                            if (option.value != option.defaultValue) {\n                                lines.a(nodePropertyJsName + '=' + value + ';');\n                            }\n                            //}\n                            if (option.input) {\n                                //const inputJsName=this.getPropertyInputJsName(property.name);\n                                var inputHtmlName = _this4.getPropertyInputHtmlName(property.name);\n                                var _value = 'this.value';\n                                if (property.fn) {\n                                    _value = property.fn(_value);\n                                }\n                                var eventProp = property.type == 'range' ? 'oninput' : 'onchange';\n                                //\n                                lines.a(//\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\n                                //(property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\n                                'document.getElementById(\\'' + inputHtmlName + '\\').' + eventProp + '=function(){', //\n                                '\\t' + nodePropertyJsName + '=' + _value + ';', '};');\n                            }\n                        });\n                        return lines;\n                    };\n                    babelHelpers.createClass(SinglePathFilter, [{\n                            key: 'nodeJsNames',\n                            get: function get() {\n                                return [this.nodeJsName];\n                            }\n                        }]);\n                    return SinglePathFilter;\n                }(Filter);\n                var filterClasses = {\n                    gain: function (_SinglePathFilter) {\n                        babelHelpers.inherits(gain, _SinglePathFilter);\n                        function gain() {\n                            babelHelpers.classCallCheck(this, gain);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(SinglePathFilter),\n                    panner: function (_SinglePathFilter2) {\n                        babelHelpers.inherits(panner, _SinglePathFilter2);\n                        function panner() {\n                            babelHelpers.classCallCheck(this, panner);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(SinglePathFilter),\n                    biquad: function (_SinglePathFilter3) {\n                        babelHelpers.inherits(biquad, _SinglePathFilter3);\n                        function biquad() {\n                            babelHelpers.classCallCheck(this, biquad);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter3.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            optionName: 'filtertype',\n                                            type: 'select'\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            fn: function fn(x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            }\n                                        }\n                                    ];\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(SinglePathFilter),\n                    convolver: function (_Filter2) {\n                        babelHelpers.inherits(convolver, _Filter2);\n                        function convolver() {\n                            babelHelpers.classCallCheck(this, convolver);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        convolver.prototype.getJsLines = function getJsLines(i18n, prevNodeJsNames) {\n                            var _this9 = this;\n                            var lines = _Filter2.prototype.getJsLines.call(this, i18n, prevNodeJsNames);\n                            var inputHtmlName = this.getPropertyInputHtmlName('reverb');\n                            var messageHtmlName = this.getPropertyInputHtmlName('buffer');\n                            lines.a.apply(lines, [\n                                'var ' + this.wetGainNodeJsName + '=ctx.createGain();',\n                                this.nodeJsName + '.connect(' + this.wetGainNodeJsName + ');',\n                                'var ' + this.dryGainNodeJsName + '=ctx.createGain();'\n                            ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this9.dryGainNodeJsName + ');';\n                            })));\n                            if (this.options.reverb != 1) {\n                                lines.a(this.wetGainNodeJsName + '.gain.value=' + this.options.reverb + ';');\n                            }\n                            if (this.options.reverb != 0) {\n                                lines.a(this.dryGainNodeJsName + '.gain.value=' + (1 - this.options.reverb) + ';');\n                            }\n                            if (this.options.reverb.input) {\n                                lines.a('document.getElementById(\\'' + inputHtmlName + '\\').oninput=function(){', '\\t' + this.wetGainNodeJsName + '.gain.value=this.value;', '\\t' + this.dryGainNodeJsName + '.gain.value=1-this.value;', '};');\n                            }\n                            lines.a('var xhr=new XMLHttpRequest();', 'xhr.open(\\'GET\\',\\'' + this.options.url + '\\');', // TODO html escape\n                            'xhr.responseType=\\'arraybuffer\\';', 'xhr.onload=function(){', '\\tif (this.status==200) {', // TODO we are checking status here, but what if <audio>'s status is an error?\n                            '\\t\\tctx.decodeAudioData(this.response,function(buffer){', '\\t\\t\\t' + this.nodeJsName + '.buffer=buffer;', '\\t\\t\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';', '\\t\\t});', '\\t} else {', '\\t\\tthis.onerror();', '\\t}', '};', 'xhr.onerror=function(){', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.filters.convolver.buffer.error') + '\\';', '};', 'xhr.send();');\n                            return lines;\n                        };\n                        babelHelpers.createClass(convolver, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'convolver';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createConvolver';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [\n                                        {\n                                            name: 'reverb',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'buffer',\n                                            type: 'xhr'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'nodeJsNames',\n                                get: function get() {\n                                    return [\n                                        this.wetGainNodeJsName,\n                                        this.dryGainNodeJsName\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'dryGainNodeJsName',\n                                get: function get() {\n                                    return toCamelCase(this.type + this.nSuffix + '.dry.gain.node');\n                                }\n                            },\n                            {\n                                key: 'wetGainNodeJsName',\n                                get: function get() {\n                                    return toCamelCase(this.type + this.nSuffix + '.wet.gain.node');\n                                }\n                            }\n                        ]);\n                        return convolver;\n                    }(Filter)\n                };\n                var FilterSequence = function (_Feature) {\n                    babelHelpers.inherits(FilterSequence, _Feature);\n                    function FilterSequence(filterOptions) {\n                        babelHelpers.classCallCheck(this, FilterSequence);\n                        var _this10 = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        var filterCounts = {};\n                        filterOptions.entries.forEach(function (entry) {\n                            if (!filterCounts[entry.type]) {\n                                filterCounts[entry.type] = 0;\n                            }\n                            filterCounts[entry.type]++;\n                        });\n                        var filterCounts2 = {};\n                        _this10.filters = filterOptions.entries.map(function (entry) {\n                            var filterClass = filterClasses[entry.type];\n                            if (filterCounts[entry.type] > 1) {\n                                if (!filterCounts2[entry.type]) {\n                                    filterCounts2[entry.type] = 0;\n                                }\n                                return new filterClass(filterCounts2[entry.type]++, entry);\n                            } else {\n                                return new filterClass(undefined, entry);\n                            }\n                        });\n                        return _this10;\n                    }\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.filters.length > 0) {\n                            featureContext.audioContext = true;\n                        }\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new (Function.prototype.bind.apply(Lines, [null].concat(this.filters.map(function (filter) {\n                            return filter.getHtmlLines(i18n);\n                        }))))();\n                    };\n                    FilterSequence.prototype.getJsLines = function getJsLines(featureContext, i18n, prevNodeJsNames) {\n                        var _Feature$prototype$ge;\n                        var lines = (_Feature$prototype$ge = _Feature.prototype.getJsLines).call.apply(_Feature$prototype$ge, [this].concat(Array.prototype.slice.call(arguments)));\n                        if (this.filters.length == 0) {\n                            return lines;\n                        }\n                        lines.interleave.apply(lines, this.filters.map(function (filter) {\n                            var lines = filter.getJsLines(i18n, prevNodeJsNames);\n                            prevNodeJsNames = filter.nodeJsNames;\n                            return lines;\n                        }));\n                        return lines;\n                    };\n                    FilterSequence.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (this.filters.length > 0) {\n                            return this.filters[this.filters.length - 1].nodeJsNames;\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return FilterSequence;\n                }(Feature);\n                module.exports = FilterSequence;\n            },\n            {\n                '../base/lines.js': 1,\n                './feature.js': 9\n            }\n        ],\n        11: [\n            function (require, module, exports) {\n                'use strict';\n                var strings = {\n                    'options.source': 'Source',\n                    'options.source.comment': 'create audio context and source node',\n                    'options.source.url': 'Source URL',\n                    'options.filters': 'Filters',\n                    'options.filters.gain': 'Gain',\n                    'options.filters.gain.comment': 'create gain node',\n                    'options.filters.gain.add': 'Add Gain',\n                    'options.filters.gain.gain': 'Gain',\n                    'options.filters.panner': 'Stereo Panner',\n                    'options.filters.panner.comment': 'create stereo panner node',\n                    'options.filters.panner.add': 'Add Stereo Panner',\n                    'options.filters.panner.pan': 'Pan',\n                    'options.filters.biquad': 'Biquad Filter',\n                    'options.filters.biquad.comment': 'create biquad filter node',\n                    'options.filters.biquad.add': 'Add Biquad Filter',\n                    'options.filters.biquad.filtertype': 'Filter type',\n                    'options.filters.biquad.filtertype.lowpass': 'lowpass',\n                    'options.filters.biquad.filtertype.highpass': 'highpass',\n                    'options.filters.biquad.filtertype.bandpass': 'bandpass',\n                    'options.filters.biquad.filtertype.lowshelf': 'lowshelf',\n                    'options.filters.biquad.filtertype.highshelf': 'highshelf',\n                    'options.filters.biquad.filtertype.peaking': 'peaking',\n                    'options.filters.biquad.filtertype.notch': 'notch',\n                    'options.filters.biquad.filtertype.allpass': 'allpass',\n                    'options.filters.biquad.frequency': 'Frequency',\n                    'options.filters.biquad.detune': 'Detune',\n                    'options.filters.biquad.Q': 'Log(Q)',\n                    'options.filters.convolver': 'Convolver',\n                    'options.filters.convolver.comment': 'create dry and wet route with convolver node',\n                    'options.filters.convolver.add': 'Add Convolver',\n                    'options.filters.convolver.url': 'Impulse responce URL',\n                    'options.filters.convolver.reverb': 'Reverb (Dry/Wet)',\n                    'options.filters.convolver.buffer.loading': 'Loading and decoding the impulse response',\n                    'options.filters.convolver.buffer.error': 'Error while loading the impulse response',\n                    'options.destination': 'Destination',\n                    'options.destination.comment': 'connect last filter node to destination',\n                    'options.destination.compressor': 'Add Dynamics Compressor before the destination',\n                    'options.destination.compressor.comment': 'create dynamics compressor node and connect it to destination',\n                    'options.destination.compressor.enable': 'Enable Dynamics Compressor',\n                    'options-output.drag': 'Drag or press up/down while in focus to reorder',\n                    'options-output.delete': 'Delete',\n                    'options-output.input': 'Editable',\n                    'options-output.range': 'with range',\n                    'options-output.reset': 'Reset'\n                };\n                module.exports = function (lang) {\n                    // TODO use lang to pick strings\n                    var i18n = function i18n(id) {\n                        return strings[id];\n                    };\n                    i18n.lang = lang;\n                    return i18n;\n                };\n            },\n            {}\n        ],\n        12: [\n            function (require, module, exports) {\n                'use strict';\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18n = require('./i18n.js')('en');\n                var Options = require('./options.js');\n                var generateCode = require('./code.js');\n                var CodeOutput = require('./code-output');\n                var OptionsOutput = require('./options-output');\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return generateCode(options.fix(), i18n);\n                        });\n                        options.updateCallback = codeOutput.update;\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output).append(codeOutput.$output);\n                    });\n                });\n            },\n            {\n                './code-output': 7,\n                './code.js': 8,\n                './i18n.js': 11,\n                './options-output': 14,\n                './options.js': 15\n            }\n        ],\n        13: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = Object.create(require('../base/option-classes.js'));\n                // differs from webgl-starter:\n                //\thas defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\n                //\tno setToDefault, which is needed only if speed is present\n                //\tname is set, b/c it wasn't needed only for speed\n                var FixedLiveNumber = function () {\n                    function FixedLiveNumber(src) {\n                        babelHelpers.classCallCheck(this, FixedLiveNumber);\n                        this.value = src.value;\n                        this.min = src.min;\n                        this.max = src.max;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableMin = src.availableMin;\n                        this.availableMax = src.availableMax;\n                        this.step = src.step;\n                        this.name = src.name;\n                    }\n                    FixedLiveNumber.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveNumber.prototype.toString = function toString() {\n                        return String(this.value);\n                    };\n                    return FixedLiveNumber;\n                }();\n                // differs from webgl-starter:\n                //\tinput is a boolean\n                // \tfloat subclasses have a fixed step of 0.01\n                //\tno speed\n                //\thas range specified as [availableMin,availableMax,defaultMin,defaultMax]\n                Option.LiveNumber = function (_Option$RangeInput) {\n                    babelHelpers.inherits(_class, _Option$RangeInput);\n                    function _class(name, availableRange, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class);\n                        var dataValue = undefined, dataMin = undefined, dataMax = undefined, dataInput = undefined;\n                        if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            dataValue = data.value;\n                            dataMin = data.min;\n                            dataMax = data.max;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$RangeInput.call(this, name, availableRange, defaultValue, dataValue, fullName, isVisible, updateCallback));\n                        _this._min = dataMin !== undefined ? dataMin : availableRange[2] !== undefined ? availableRange[2] : _this.availableMin;\n                        _this._max = dataMax !== undefined ? dataMax : availableRange[3] !== undefined ? availableRange[3] : _this.availableMax;\n                        _this._input = !!dataInput;\n                        _this._$range = null;\n                        return _this;\n                    }\n                    _class.prototype.updateInternalVisibility = function updateInternalVisibility() {\n                        if (this._$range)\n                            this._$range.toggle(this._input);\n                    };\n                    _class.prototype.exportHelper = function exportHelper(src) {\n                        var data = {};\n                        if (src.value != src.defaultValue)\n                            data.value = src.value;\n                        if (src.min != src.availableMin)\n                            data.min = src.min;\n                        if (src.max != src.availableMax)\n                            data.max = src.max;\n                        if (src.input)\n                            data.input = src.input;\n                        return data;\n                    };\n                    _class.prototype.export = function _export() {\n                        return this.exportHelper(this);\n                    };\n                    _class.prototype.fix = function fix() {\n                        return new FixedLiveNumber(this);\n                    };\n                    babelHelpers.createClass(_class, [\n                        {\n                            key: 'input',\n                            get: function get() {\n                                return this._input;\n                            },\n                            set: function set(input) {\n                                this._input = input;\n                                this.updateInternalVisibility();\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: 'min',\n                            get: function get() {\n                                return this._min;\n                            },\n                            set: function set(min) {\n                                this._min = min;\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: 'max',\n                            get: function get() {\n                                return this._max;\n                            },\n                            set: function set(max) {\n                                this._max = max;\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: '$range',\n                            get: function get() {\n                                return this._$range;\n                            },\n                            set: function set($range) {\n                                this._$range = $range;\n                                this.updateInternalVisibility();\n                            }\n                        }\n                    ]);\n                    return _class;\n                }(Option.RangeInput);\n                Option.LiveInt = function (_Option$LiveNumber) {\n                    babelHelpers.inherits(_class2, _Option$LiveNumber);\n                    function _class2() {\n                        babelHelpers.classCallCheck(this, _class2);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class2, [{\n                            key: 'step',\n                            get: function get() {\n                                return 1;\n                            }\n                        }]);\n                    return _class2;\n                }(Option.LiveNumber);\n                Option.LiveFloat = function (_Option$LiveNumber2) {\n                    babelHelpers.inherits(_class3, _Option$LiveNumber2);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber2.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class3, [{\n                            key: 'step',\n                            get: function get() {\n                                return 0.01;\n                            }\n                        }]);\n                    return _class3;\n                }(Option.LiveNumber);\n                var FixedLiveSelect = function () {\n                    function FixedLiveSelect(src) {\n                        babelHelpers.classCallCheck(this, FixedLiveSelect);\n                        this.value = src.value;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableValues = src.availableValues;\n                        this.name = src.name;\n                    }\n                    FixedLiveSelect.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveSelect.prototype.toString = function toString() {\n                        return this.value;\n                    };\n                    return FixedLiveSelect;\n                }();\n                Option.LiveSelect = function (_Option$Select) {\n                    babelHelpers.inherits(_class4, _Option$Select);\n                    function _class4(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class4);\n                        var dataValue = undefined, dataInput = undefined;\n                        if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            dataValue = data.value;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$Select.call(this, name, availableValues, defaultValue, dataValue, fullName, isVisible, updateCallback));\n                        _this4._input = !!dataInput;\n                        return _this4;\n                    }\n                    _class4.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        if (this.input)\n                            data.input = this.input;\n                        return data;\n                    };\n                    _class4.prototype.fix = function fix() {\n                        return new FixedLiveSelect(this);\n                    };\n                    babelHelpers.createClass(_class4, [{\n                            key: 'input',\n                            get: function get() {\n                                return this._input;\n                            },\n                            set: function set(input) {\n                                this._input = input;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class4;\n                }(Option.Select);\n                module.exports = Option;\n            },\n            { '../base/option-classes.js': 2 }\n        ],\n        14: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require('./option-classes.js');\n                var BaseOptionsOutput = require('../base/options-output.js');\n                var OptionsOutput = function (_BaseOptionsOutput) {\n                    babelHelpers.inherits(OptionsOutput, _BaseOptionsOutput);\n                    function OptionsOutput() {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptionsOutput.apply(this, arguments));\n                    }\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        _BaseOptionsOutput.prototype.setOptionClassWriters.call(this, optionClassWriters);\n                        optionClassWriters.set(Option.LiveNumber, function (option, writeOption, i18n, generateId) {\n                            var setInputAttrs = function setInputAttrs($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', option.step);\n                            };\n                            var setInputAttrsAndListeners = function setInputAttrsAndListeners($input, getOtherInput) {\n                                return setInputAttrs($input).val(option.value).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        var $that = getOtherInput();\n                                        $that.val(this.value);\n                                        option.value = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var writeMinMaxInput = function writeMinMaxInput(minOrMax) {\n                                return setInputAttrs($('<input type=\\'number\\' required>')).val(option[minOrMax]).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        option[minOrMax] = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var id = generateId();\n                            var inputCheckboxId = generateId();\n                            var $sliderInput = undefined, $numberInput = undefined, $inputCheckbox = undefined;\n                            var $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' <span class=\\'min\\'>' + option.availableMin + '</span> ').append($sliderInput = setInputAttrsAndListeners($('<input type=\\'range\\' id=\\'' + id + '\\'>'), function () {\n                                return $numberInput;\n                            })).append(' <span class=\\'max\\'>' + option.availableMax + '</span> ').append($numberInput = setInputAttrsAndListeners($('<input type=\\'number\\' required>'), function () {\n                                return $sliderInput;\n                            })).append(' ').append($inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            })).append(' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ').append(option.$range = $('<span class=\\'range\\'>').append(i18n('options-output.range') + ' ').append($rangeMinInput = writeMinMaxInput('min')).append(' .. ').append($rangeMaxInput = writeMinMaxInput('max'))).append(' ').append($('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $sliderInput.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                                $rangeMinInput.val(option.availableMin).change();\n                                $rangeMaxInput.val(option.availableMax).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.LiveSelect, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var inputCheckboxId = generateId();\n                            var $select = undefined, $inputCheckbox = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            })).append(' ').append($inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            })).append(' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ').append($('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $select.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                            }));\n                        });\n                    };\n                    return OptionsOutput;\n                }(BaseOptionsOutput);\n                module.exports = OptionsOutput;\n            },\n            {\n                '../base/options-output.js': 3,\n                './option-classes.js': 13\n            }\n        ],\n        15: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseOptions = require('../base/options.js');\n                var Options = function (_BaseOptions) {\n                    babelHelpers.inherits(Options, _BaseOptions);\n                    function Options() {\n                        babelHelpers.classCallCheck(this, Options);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'entriesDescription',\n                            get: function get() {\n                                return [\n                                    [\n                                        'Group',\n                                        'source',\n                                        [[\n                                                'Text',\n                                                'url',\n                                                [\n                                                    // w3c mooc:\n                                                    'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\n                                                    'http://mainline.i3s.unice.fr/mooc/drums.mp3'\n                                                ]\n                                            ]]\n                                    ],\n                                    [\n                                        'Array',\n                                        'filters',\n                                        [\n                                            [\n                                                'Group',\n                                                'gain',\n                                                [[\n                                                        'LiveFloat',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            10,\n                                                            0,\n                                                            1\n                                                        ],\n                                                        1\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'panner',\n                                                [[\n                                                        'LiveFloat',\n                                                        'pan',\n                                                        [\n                                                            -1,\n                                                            1\n                                                        ],\n                                                        0\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'biquad',\n                                                [\n                                                    [\n                                                        'LiveSelect',\n                                                        'filtertype',\n                                                        [\n                                                            // can't have array entry with suboption 'type'\n                                                            'lowpass',\n                                                            'highpass',\n                                                            'bandpass',\n                                                            'lowshelf',\n                                                            'highshelf',\n                                                            'peaking',\n                                                            'notch',\n                                                            'allpass'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'LiveInt',\n                                                        'frequency',\n                                                        [\n                                                            0,\n                                                            22050\n                                                        ],\n                                                        350\n                                                    ],\n                                                    [\n                                                        'LiveInt',\n                                                        'detune',\n                                                        [\n                                                            0,\n                                                            100\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'LiveFloat',\n                                                        'Q',\n                                                        [\n                                                            -4,\n                                                            4\n                                                        ],\n                                                        0\n                                                    ]\n                                                ]\n                                            ],\n                                            // log Q\n                                            [\n                                                'Group',\n                                                'convolver',\n                                                [\n                                                    [\n                                                        'LiveFloat',\n                                                        'reverb',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        ['http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav']\n                                                    ]\n                                                ]\n                                            ]\n                                        ]\n                                    ],\n                                    [\n                                        'Group',\n                                        'destination',\n                                        [[\n                                                'Checkbox',\n                                                'compressor'\n                                            ]]\n                                    ]\n                                ];\n                            }\n                        },\n                        {\n                            key: 'optionClasses',\n                            get: function get() {\n                                return require('./option-classes.js');\n                            }\n                        }\n                    ]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            {\n                '../base/options.js': 4,\n                './option-classes.js': 13\n            }\n        ]\n    }, {}, [12]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\r\n.a = add AFTER last line\r\n.t = add TO last line\r\n*/\r\n\r\nvar Lines=function(){\r\n\tthis.data=[];\r\n\tthis.addFlattenedArgs(\r\n\t\tthis.flattenArgs(arguments)\r\n\t);\r\n};\r\n\r\n// private\r\nLines.prototype.flattenArgs=function(s){\r\n\tvar r=[];\r\n\tfor (var i=0;i<s.length;i++) {\r\n\t\tif (typeof s[i] == 'string') {\r\n\t\t\tr.push(s[i]);\r\n\t\t} else if (Array.isArray(s[i])) {\r\n\t\t\tArray.prototype.push.apply(r,s[i]);\r\n\t\t} else if (s[i] instanceof Lines) {\r\n\t\t\tArray.prototype.push.apply(r,s[i].data);\r\n\t\t}\r\n\t}\r\n\treturn r;\r\n};\r\nLines.prototype.addFlattenedArgs=function(s){\r\n\tArray.prototype.push.apply(this.data,s);\r\n};\r\n\r\n// public\r\nLines.prototype.a=function(){\r\n\tthis.addFlattenedArgs(\r\n\t\tthis.flattenArgs(arguments)\r\n\t);\r\n\treturn this;\r\n};\r\nLines.prototype.t=function(){\r\n\tvar lastLine=this.data.pop();\r\n\tvar s=this.flattenArgs(arguments);\r\n\ts[0]=lastLine+s[0];\r\n\tthis.addFlattenedArgs(s);\r\n\treturn this;\r\n};\r\nLines.prototype.indent=function(level){\r\n\tif (level===undefined) {\r\n\t\tlevel=1;\r\n\t}\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn Array(level+1).join('\\t')+line;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.isEmpty=function(){\r\n\treturn this.data.length<=0;\r\n};\r\nLines.prototype.interleave=function(){\r\n\tvar first=true;\r\n\tfor (var i=0;i<arguments.length;i++) {\r\n\t\tvar r=this.flattenArgs([arguments[i]]);\r\n\t\tif (r.length>0) {\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.data.push('');\r\n\t\t\t}\r\n\t\t\tthis.addFlattenedArgs(r);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\nLines.prototype.wrap=function(begin,end){\r\n\tthis.indent();\r\n\tthis.data.unshift(begin);\r\n\tthis.data.push(end);\r\n\treturn this;\r\n};\r\nLines.prototype.wrapIfNotEmpty=function(begin,end){\r\n\tif (!this.isEmpty()) {\r\n\t\tthis.wrap(begin,end);\r\n\t}\r\n\treturn this;\r\n};\r\n/*\r\nLines.prototype.wrapEachLine=function(begin,end){\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn begin+line+end;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.map=function(fn){\r\n\tthis.data=this.data.map(fn);\r\n\treturn this;\r\n};\r\n*/\r\nLines.prototype.join=function(indent){\r\n\treturn this.data.map(function(line){\r\n\t\treturn line.replace(/^(\\t)+/,function(match){\r\n\t\t\treturn Array(match.length+1).join(indent);\r\n\t\t});\r\n\t}).join('\\n');\r\n};\r\n\r\nmodule.exports=Lines;\r\n","'use strict';\r\n\r\n// constructors typically called from Options class\r\n// to call them manually, use the following args:\r\n//\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\r\n// the rest of arguments' order is not settled, don't use them\r\n// \t+ TODO not sure about data\r\n\r\n/*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\t'type' if option is an array member\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={};\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tconstructor(name,_1,_2,_3,fullName,isVisible,updateCallback) {\r\n\t\tthis.name=name;\r\n\t\tthis.isVisible=isVisible;\r\n\t\tthis.updateCallback=updateCallback;\r\n\t\tthis.fullName=fullName;\r\n\t\tthis._$=null;\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$;\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$;\r\n\t\tthis.updateVisibility();\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible());\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value;\r\n\t\t} else {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value;\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nOption.Input = class extends Option.Base {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tif (defaultValue!==undefined) {\r\n\t\t\tthis.defaultValue=defaultValue;\r\n\t\t} else {\r\n\t\t\tthis.defaultValue=availableValues[0];\r\n\t\t}\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value;\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data;\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue;\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value;\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value;\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\nOption.BooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\treturn this.value;\r\n\t}\r\n};\r\n\r\nOption.NonBooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value;\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value; },\r\n\t\t\ttoString() { return String(value); },\r\n\t\t};\r\n\t}\r\n};\r\n\r\nOption.FactorInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableValues=availableValues;\r\n\t}\r\n};\r\n\r\nOption.RangeInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableRange,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableMin=availableRange[0];\r\n\t\tthis.availableMax=availableRange[1];\r\n\t}\r\n};\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tconstructor(name,entries,_1,_2,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.entries=entries;\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name);\r\n\t\t});\r\n\t\treturn data;\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[];\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix());\r\n\t\t});\r\n\t\treturn fixed;\r\n\t}\r\n};\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.BooleanInput {\r\n\tconstructor(name,_,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,!!defaultValue,data,fullName,isVisible,updateCallback);\r\n\t}\r\n};\r\n\r\nOption.Select = class extends Option.FactorInput {};\r\n\r\nOption.Text = class extends Option.FactorInput {};\r\n\r\nOption.Root = class extends Option.Collection {};\r\n\r\nOption.Group = class extends Option.Collection {};\r\n\r\nOption.Array = class extends Option.Base {\r\n\tconstructor(name,availableTypes,availableConstructors,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,undefined,undefined,fullName,isVisible,updateCallback);\r\n\t\tthis.availableTypes=availableTypes;\r\n\t\tthis.availableConstructors=availableConstructors;\r\n\t\tthis._entries=[];\r\n\t\tlet subDatas=[];\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data;\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value;\r\n\t\t}\r\n\t\tfor (let i=0;i<subDatas.length;i++) {\r\n\t\t\tconst subData=subDatas[i];\r\n\t\t\tlet subType=availableTypes[0];\r\n\t\t\tif (typeof subData == 'object' && subData.type!==undefined) {\r\n\t\t\t\tsubType=subData.type;\r\n\t\t\t}\r\n\t\t\tif (availableConstructors[subType]) {\r\n\t\t\t\tthis._entries.push(availableConstructors[subType](subData));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries;\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\taddEntry(type) {\r\n\t\tconst entry=this.availableConstructors[type]();\r\n\t\tthis._entries.push(entry);\r\n\t\tthis.updateCallback();\r\n\t\treturn entry;\r\n\t}\r\n\texport() {\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export();\r\n\t\t\t\tconst subType=entry.name;\r\n\t\t\t\tif (subType!=this.availableTypes[0]) subData.type=subType;\r\n\t\t\t\treturn entry.shortenExport(subData);\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix();\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed.type=entry.name;\r\n\t\t\t\treturn subFixed;\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n};\r\n\r\nmodule.exports=Option;\r\n","'use strict';\r\n\r\nconst Option=require('../base/option-classes.js');\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map;\r\n\t\tthis.setOptionClassWriters(optionClassWriters);\r\n\t\tfunction write(option) {\r\n\t\t\tlet optionProto=option;\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor);\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,write,i18n,generateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=write(options.root);\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Group,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option void'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.value=$(this).prop('checked');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\");\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\tconst listId=generateId();\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<input type='text' id='\"+id+\"'list='\"+listId+\"' />\")\r\n\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<datalist id='\"+listId+\"'>\")\r\n\t\t\t\t\t\t.append(\r\n\t\t\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Array,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tlet $dragged=null;\r\n\t\t\tlet $entries;\r\n\t\t\tconst updateArrayEntries=()=>{\r\n\t\t\t\toption.entries=$entries.children().map(function(){\r\n\t\t\t\t\treturn $(this).data('option');\r\n\t\t\t\t}).get();\r\n\t\t\t};\r\n\t\t\tconst writeDraggableOption=option=>{\r\n\t\t\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\t\t\treturn $(\"<div class='draggable-with-handle'>\")\r\n\t\t\t\t\t.data('option',option)\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<div draggable='true' tabindex='0' title='\"+i18n('options-output.drag')+\"'>\")\r\n\t\t\t\t\t\t\t.on('dragstart',function(ev){\r\n\t\t\t\t\t\t\t\t$dragged=$(this).parent();\r\n\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move';\r\n\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name);\r\n\t\t\t\t\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage($dragged[0],0,0);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t$dragged.addClass('ghost');\r\n\t\t\t\t\t\t\t\t},0);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\tconst $handle=$(this);\r\n\t\t\t\t\t\t\t\tconst $sorted=$handle.parent();\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\t\t\t\t\t$sorted.prev().before($sorted);\r\n\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\t\t\t\t\t$sorted.next().after($sorted);\r\n\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.append(writeOption(option))\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'></div>\")\r\n\t\t\t\t\t\t$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>\")\r\n\t\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.on('dragover',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\tev.originalEvent.dataTransfer.dropEffect='move';\r\n\t\t\t\t\t\tconst $target=$(this);\r\n\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\tif ($target.nextAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t$target.before($dragged);\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t} else if ($target.prevAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t$target.after($dragged);\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('drop',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('dragend',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\t$dragged.removeClass('ghost');\r\n\t\t\t\t\t\t\t$dragged=null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\toption.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$entries=$(\"<div>\")\r\n\t\t\t\t\t\t.append(option.entries.map(writeDraggableOption))\r\n\t\t\t\t);\r\n\t\t\tconst $buttons=$(\"<div>\");\r\n\t\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\t\tif (i) $buttons.append(\" \");\r\n\t\t\t\t$buttons.append(\r\n\t\t\t\t\t$(\"<button type='button'>\")\r\n\t\t\t\t\t\t.html(i18n('options.'+option.fullName+'.'+type+'.add'))\r\n\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\tconst entry=option.addEntry(type);\r\n\t\t\t\t\t\t\t$entries.append(writeDraggableOption(entry));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\toption.$.append($buttons);\r\n\t\t\treturn option.$;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput;\r\n","'use strict';\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tthis.updateCallback=undefined; // general update callback for stuff like regenerating the code\r\n\t\tconst simpleUpdateCallback=()=>{\r\n\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t};\r\n\t\tconst Option=this.optionClasses;\r\n\t\tconst optionByFullName={};\r\n\t\tconst optionsWithVisibilityAffectedByFullName={};\r\n\t\tconst makeEntry=(description,fullNamePath,data,isInsideArray)=>{\r\n\t\t\tconst className=description[0];\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`);\r\n\t\t\t}\r\n\t\t\tconst name=description[1];\r\n\t\t\tconst fullName=fullNamePath+name;\r\n\t\t\tconst ctorArgsDescription=description.slice(2);\r\n\t\t\tlet contents=[];\r\n\t\t\tlet defaultValueOrConstructors;\r\n\t\t\tlet visibilityData={};\r\n\t\t\tlet nScalars=0;\r\n\t\t\tlet nArrays=0;\r\n\t\t\tlet nObjects=0;\r\n\t\t\tfor (let i=0;i<ctorArgsDescription.length;i++) {\r\n\t\t\t\tlet arg=ctorArgsDescription[i];\r\n\t\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\t\tif (nScalars==0) {\r\n\t\t\t\t\t\tdefaultValueOrConstructors=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many scalar arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnScalars++;\r\n\t\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\t\tif (nArrays==0) {\r\n\t\t\t\t\t\tif (!isInsideArray && className=='Array') { // TODO test array inside array\r\n\t\t\t\t\t\t\tdefaultValueOrConstructors={};\r\n\t\t\t\t\t\t\targ.forEach(x=>{\r\n\t\t\t\t\t\t\t\tconst type=x[1];\r\n\t\t\t\t\t\t\t\tcontents.push(type);\r\n\t\t\t\t\t\t\t\tdefaultValueOrConstructors[type]=subData=>makeEntry(x,fullName+'.',subData,true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontents=arg.map(x=>{\r\n\t\t\t\t\t\t\t\tif (Array.isArray(x)) {\r\n\t\t\t\t\t\t\t\t\tconst subName=x[1];\r\n\t\t\t\t\t\t\t\t\tlet subData;\r\n\t\t\t\t\t\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\t\t\t\t\t\treturn makeEntry(x,fullName+'.',subData,isInsideArray); // nested option\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn x; // available value / value range boundary\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnArrays++;\r\n\t\t\t\t} else if (!isInsideArray && (arg instanceof Object)) {\r\n\t\t\t\t\tif (nObjects==0) {\r\n\t\t\t\t\t\tvisibilityData=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnObjects++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"unknown argument type\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet isVisible,updateCallback;\r\n\t\t\tif (isInsideArray) {\r\n\t\t\t\tupdateCallback=simpleUpdateCallback;\r\n\t\t\t\tisVisible=()=>true;\r\n\t\t\t} else {\r\n\t\t\t\tisVisible=()=>{\r\n\t\t\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\t\t\tconst value=optionByFullName[testName].value;\r\n\t\t\t\t\t\tif (visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\t\t\t\tupdateCallback=()=>{\r\n\t\t\t\t\tif (optionsWithVisibilityAffectedByFullName[fullName]!==undefined) {\r\n\t\t\t\t\t\toptionsWithVisibilityAffectedByFullName[fullName].forEach(option=>{\r\n\t\t\t\t\t\t\toption.updateVisibility();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst option=new Option[className](name,contents,defaultValueOrConstructors,data,fullName,isVisible,updateCallback);\r\n\t\t\tif (!isInsideArray) {\r\n\t\t\t\toptionByFullName[fullName]=option;\r\n\t\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\t\tif (optionsWithVisibilityAffectedByFullName[testName]===undefined) {\r\n\t\t\t\t\t\toptionsWithVisibilityAffectedByFullName[testName]=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptionsWithVisibilityAffectedByFullName[testName].push(option);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option;\r\n\t\t};\r\n\t\tthis.root=new Option.Root(\r\n\t\t\tnull,this.entriesDescription.map(description=>{\r\n\t\t\t\tconst subName=description[1];\r\n\t\t\t\tlet subData;\r\n\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\treturn makeEntry(description,'',subData,false);\r\n\t\t\t}),undefined,data,null,()=>true,simpleUpdateCallback\r\n\t\t);\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes.js');\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn [];\r\n\t}\r\n\t// public methods\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export());\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix();\r\n\t}\r\n}\r\n\r\nmodule.exports=Options;\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\nconst Feature=require('./feature.js');\r\n\r\nclass AudioDestination extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper();\r\n\t\tthis.compressor=options.compressor;\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.compressor) {\r\n\t\t\tfeatureContext.audioContext=true;\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst lines=new Lines;\r\n\t\tif (this.compressor) {\r\n\t\t\tlines.a(\r\n\t\t\t\t\"<input id='my.compressor' type='checkbox' checked />\",\r\n\t\t\t\t\"<label for='my.compressor'>\"+i18n('options.destination.compressor.enable')+\"</label>\"\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn lines.wrapIfNotEmpty(\"<div>\",\"</div>\");\r\n\t}\r\n\tgetJsLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst lines=super.getJsLines(...arguments);\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\tif (this.compressor) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"// \"+i18n('options.destination.compressor.comment'),\r\n\t\t\t\t\t\"var compressorNode=ctx.createDynamicsCompressor();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\"compressorNode.connect(ctx.destination);\",\r\n\t\t\t\t\t\"document.getElementById('my.compressor').onchange=function(){\",\r\n\t\t\t\t\t\"\tif (this.checked) {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(ctx.destination);\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(compressorNode);\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(ctx.destination);\"),\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"};\"\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"// \"+i18n('options.destination.comment'),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(ctx.destination);\")\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn lines;\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"ctx.destination\"];\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioDestination;\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\nconst Feature=require('./feature.js');\r\n\r\nclass Audio extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper();\r\n\t\tthis.url=options.url;\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn (new Lines(\r\n\t\t\t\"<audio src='\"+this.url+\"' id='my.source' controls loop\"+(featureContext.audioContext?\" crossorigin='anonymous'\":\"\")+\"></audio>\" // TODO html escape\r\n\t\t)).wrap(\"<div>\",\"</div>\");\r\n\t}\r\n\tgetJsLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst lines=super.getJsLines(...arguments);\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\tlines.a(\r\n\t\t\t\t\"// \"+i18n('options.source.comment'),\r\n\t\t\t\t\"var ctx=new (AudioContext || webkitAudioContext);\",\r\n\t\t\t\t\"var sourceElement=document.getElementById('my.source');\",\r\n\t\t\t\t\"var sourceNode=ctx.createMediaElementSource(sourceElement);\"\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn lines;\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"sourceNode\"];\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Audio;\r\n","'use strict';\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCodeFn) {\r\n\t\tlet $code;\r\n\t\tconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html);\r\n\t\tconst writeControls=()=>{\r\n\t\t\treturn $(\"<div>\").append(\r\n\t\t\t\t$(\"<a download='source.html'><button type='button'>Save source code</button></a>\").click(function(){\r\n\t\t\t\t\t// yes I want a button, but download attr is only available for links\r\n\t\t\t\t\t$(this).attr('href',getHtmlDataUri($code.text()));\r\n\t\t\t\t})\r\n\t\t\t).append(\r\n\t\t\t\t\" \"\r\n\t\t\t).append(\r\n\t\t\t\t$(\"<button type='button'>Run in new window</button>\").click(function(){\r\n\t\t\t\t\twindow.open(getHtmlDataUri($code.text()),\"generatedCode\");\r\n\t\t\t\t})\r\n\t\t\t).append(\r\n\t\t\t\t\" these buttons don't work in Internet Explorer, copy-paste the code manually\"\r\n\t\t\t)\r\n\t\t};\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(writeControls()).append(\r\n\t\t\t$(\"<pre>\").append($code=$(\"<code>\").text(generateCodeFn()))\r\n\t\t);\r\n\t\tif (window.hljs) {\r\n\t\t\thljs.highlightBlock($code[0]);\r\n\t\t} else {\r\n\t\t\t//$output.append(\"<p>\"+i18n('message.hljs')+\"</p>\"); // TODO i18n\r\n\t\t}\r\n\t\t$output.append(writeControls());\r\n\r\n\t\tconst delay=200;\r\n\t\tlet timeoutId=null;\r\n\t\tconst update=()=>{\r\n\t\t\tclearTimeout(timeoutId);\r\n\t\t\ttimeoutId=setTimeout(()=>{\r\n\t\t\t\t$code.text(generateCodeFn());\r\n\t\t\t\tif (window.hljs) hljs.highlightBlock($code[0]);\r\n\t\t\t},delay);\r\n\t\t};\r\n\r\n\t\t// public props:\r\n\t\tthis.$output=$output;\r\n\t\tthis.update=update;\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput;\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\nconst Audio=require('./audio.js');\r\nconst FilterSequence=require('./filter-sequence.js');\r\nconst AudioDestination=require('./audio-destination.js');\r\n\r\nmodule.exports=function(options,i18n){\r\n\tconst featureContext={};\r\n\tconst features=[];\r\n\tfeatures.push(new Audio(options.source));\r\n\tfeatures.push(new FilterSequence(options.filters));\r\n\tfeatures.push(new AudioDestination(options.destination));\r\n\tfeatures.forEach(feature=>{\r\n\t\tfeature.requestFeatureContext(featureContext);\r\n\t});\r\n\tconst lines=new Lines(\r\n\t\t\"<!DOCTYPE html>\",\r\n\t\t\"<html lang='en'>\",\r\n\t\t\"<head>\",\r\n\t\t\"<meta charset='utf-8' />\",\r\n\t\t\"<title>WebAudio example - Generated code</title>\",\r\n\t\t\"</head>\",\r\n\t\t\"<body>\",\r\n\t\t(()=>{\r\n\t\t\tconst lines=new Lines;\r\n\t\t\tlines.a(...features.map(feature=>feature.getHtmlLines(featureContext,i18n)));\r\n\t\t\treturn lines;\r\n\t\t})(),\r\n\t\t(()=>{\r\n\t\t\tconst lines=new Lines;\r\n\t\t\tlet prevNodeJsNames;\r\n\t\t\tlines.interleave(...features.map(feature=>{\r\n\t\t\t\tconst lines=feature.getJsLines(featureContext,i18n,prevNodeJsNames);\r\n\t\t\t\tprevNodeJsNames=feature.getNodeJsNames(featureContext,prevNodeJsNames);\r\n\t\t\t\treturn lines;\r\n\t\t\t}));\r\n\t\t\treturn lines.wrapIfNotEmpty(\"<script>\",\"</script>\");\r\n\t\t})(),\r\n\t\t\"</body>\",\r\n\t\t\"</html>\"\r\n\t);\r\n\treturn lines.join('\\t');\r\n};\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn new Lines;\r\n\t}\r\n\tgetJsLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn new Lines;\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\treturn prevNodeJsNames;\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature;\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\nconst Feature=require('./feature.js');\r\n\r\nfunction capitalize(s) {\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1);\r\n}\r\nfunction toCamelCase(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('');\r\n}\r\n\r\nclass Filter {\r\n\tconstructor(n,options) {\r\n\t\tthis.n=n;\r\n\t\tthis.options=options;\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n;\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\tgetPropertyOption(property) {\r\n\t\tconst name=(property.optionName!==undefined ? property.optionName : property.name);\r\n\t\treturn this.options[name];\r\n\t}\r\n\tgetPropertyOptionName(property) {\r\n\t\tconst name=(property.optionName!==undefined ? property.optionName : property.name);\r\n\t\treturn 'options.filters.'+this.type+'.'+name;\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.node');\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName;\r\n\t}\r\n\t//getPropertyInputJsName(propertyName) {\r\n\t//\treturn toCamelCase(this.type+this.nSuffix+'.'+propertyName+'.input');\r\n\t//}\r\n\tgetHtmlLines(i18n) {\r\n\t\tconst lines=new Lines;\r\n\t\tthis.nodeProperties.forEach(property=>{\r\n\t\t\tconst option=this.getPropertyOption(property);\r\n\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name);\r\n\t\t\tif (property.type=='range' && option.input) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"<label for='\"+inputHtmlName+\"'>\"+i18n(this.getPropertyOptionName(property))+\"</label>\",\r\n\t\t\t\t\t\"<input id='\"+inputHtmlName+\"' type='range' value='\"+option+\"' min='\"+option.min+\"' max='\"+option.max+\"'\"+(option.step!=1?\" step='\"+option.step+\"'\":\"\")+\" />\"\r\n\t\t\t\t);\r\n\t\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"<label for='\"+inputHtmlName+\"'>\"+i18n(this.getPropertyOptionName(property))+\"</label>\",\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tnew Lines(...option.availableValues.map(value=>\"<option>\"+value+\"</option>\"))\r\n\t\t\t\t\t).wrap(\r\n\t\t\t\t\t\t\"<select id='\"+inputHtmlName+\"'>\",\"</select>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else if (property.type=='xhr') {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"<span id='\"+inputHtmlName+\"'>\"+i18n(this.getPropertyOptionName(property)+'.loading')+\"</span>\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn lines.wrap(\"<div>\",\"</div>\");\r\n\t}\r\n\tgetJsLines(i18n,prevNodeJsNames) {\r\n\t\tconst lines=new Lines;\r\n\t\tlines.a(\r\n\t\t\t\"// \"+i18n('options.filters.'+this.type+'.comment'),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t)\r\n\t\t);\r\n\t\treturn lines;\r\n\t}\r\n\t// abstract:\r\n\t// get type()\r\n\t// get ctxCreateMethodName()\r\n\t// get nodeJsNames()\r\n\t// get nodeProperties()\r\n}\r\n\r\nclass SinglePathFilter extends Filter {\r\n\tget nodeJsNames() {\r\n\t\treturn [this.nodeJsName];\r\n\t}\r\n\tgetJsLines(i18n,prevNodeJsNames) {\r\n\t\tconst lines=super.getJsLines(i18n,prevNodeJsNames);\r\n\t\tthis.nodeProperties.forEach(property=>{\r\n\t\t\tconst option=this.getPropertyOption(property);\r\n\t\t\tconst nodePropertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\");\r\n\t\t\t//if (property.type=='range' || property.type=='select') {\r\n\t\t\t\tlet value=option.value;\r\n\t\t\t\tif (property.type=='select') {\r\n\t\t\t\t\tvalue=\"'\"+value+\"'\";\r\n\t\t\t\t}\r\n\t\t\t\tif (property.fn) {\r\n\t\t\t\t\tvalue=property.fn(value);\r\n\t\t\t\t}\r\n\t\t\t\tif (option.value!=option.defaultValue) {\r\n\t\t\t\t\tlines.a(\r\n\t\t\t\t\t\tnodePropertyJsName+\"=\"+value+\";\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t//}\r\n\t\t\tif (option.input) {\r\n\t\t\t\t//const inputJsName=this.getPropertyInputJsName(property.name);\r\n\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name);\r\n\t\t\t\tlet value=\"this.value\";\r\n\t\t\t\tif (property.fn) {\r\n\t\t\t\t\tvalue=property.fn(value);\r\n\t\t\t\t}\r\n\t\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange'); //\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t//\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t//(property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\t\"document.getElementById('\"+inputHtmlName+\"').\"+eventProp+\"=function(){\",\r\n\t\t\t\t\t//\r\n\t\t\t\t\t\"\t\"+nodePropertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\t\"};\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn lines;\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends SinglePathFilter {\r\n\t\tget type()                { return 'gain'; }\r\n\t\tget ctxCreateMethodName() { return 'createGain'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tpanner: class extends SinglePathFilter {\r\n\t\tget type()                { return 'panner'; }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends SinglePathFilter {\r\n\t\tget type()                { return 'biquad'; }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\toptionName:'filtertype',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tconvolver: class extends Filter {\r\n\t\tget type()                { return 'convolver'; }\r\n\t\tget ctxCreateMethodName() { return 'createConvolver'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'reverb',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'buffer',\r\n\t\t\t\t\ttype:'xhr',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t\tget nodeJsNames() {\r\n\t\t\treturn [this.wetGainNodeJsName,this.dryGainNodeJsName];\r\n\t\t}\r\n\t\tget dryGainNodeJsName() {\r\n\t\t\treturn toCamelCase(this.type+this.nSuffix+'.dry.gain.node');\r\n\t\t}\r\n\t\tget wetGainNodeJsName() {\r\n\t\t\treturn toCamelCase(this.type+this.nSuffix+'.wet.gain.node');\r\n\t\t}\r\n\t\tgetJsLines(i18n,prevNodeJsNames) {\r\n\t\t\tconst lines=super.getJsLines(i18n,prevNodeJsNames);\r\n\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('reverb');\r\n\t\t\tconst messageHtmlName=this.getPropertyInputHtmlName('buffer');\r\n\t\t\tlines.a(\r\n\t\t\t\t\"var \"+this.wetGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\tthis.nodeJsName+\".connect(\"+this.wetGainNodeJsName+\");\",\r\n\t\t\t\t\"var \"+this.dryGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.dryGainNodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tif (this.options.reverb!=1) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\tthis.wetGainNodeJsName+\".gain.value=\"+this.options.reverb+\";\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.options.reverb!=0) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\tthis.dryGainNodeJsName+\".gain.value=\"+(1-this.options.reverb)+\";\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.options.reverb.input) {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"document.getElementById('\"+inputHtmlName+\"').oninput=function(){\",\r\n\t\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=this.value;\",\r\n\t\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-this.value;\",\r\n\t\t\t\t\t\"};\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tlines.a(\r\n\t\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\t\"xhr.open('GET','\"+this.options.url+\"');\", // TODO html escape\r\n\t\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\t\"xhr.onload=function(){\",\r\n\t\t\t\t\"\tif (this.status==200) {\", // TODO we are checking status here, but what if <audio>'s status is an error?\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,function(buffer){\",\r\n\t\t\t\t\"\t\t\t\"+this.nodeJsName+\".buffer=buffer;\",\r\n\t\t\t\t\"\t\t\tdocument.getElementById('\"+messageHtmlName+\"').textContent='';\",\r\n\t\t\t\t\"\t\t});\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.onerror=function(){\",\r\n\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.filters.convolver.buffer.error')+\"';\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.send();\"\r\n\t\t\t);\r\n\t\t\treturn lines;\r\n\t\t}\r\n\t},\r\n};\r\n\r\nclass FilterSequence extends Feature {\r\n\tconstructor(filterOptions) {\r\n\t\tsuper();\r\n\t\tconst filterCounts={};\r\n\t\tfilterOptions.entries.forEach(entry=>{\r\n\t\t\tif (!filterCounts[entry.type]) {\r\n\t\t\t\tfilterCounts[entry.type]=0;\r\n\t\t\t}\r\n\t\t\tfilterCounts[entry.type]++;\r\n\t\t});\r\n\t\tconst filterCounts2={};\r\n\t\tthis.filters=filterOptions.entries.map(entry=>{\r\n\t\t\tconst filterClass=filterClasses[entry.type];\r\n\t\t\tif (filterCounts[entry.type]>1) {\r\n\t\t\t\tif (!filterCounts2[entry.type]) {\r\n\t\t\t\t\tfilterCounts2[entry.type]=0;\r\n\t\t\t\t}\r\n\t\t\t\treturn new filterClass(filterCounts2[entry.type]++,entry);\r\n\t\t\t} else {\r\n\t\t\t\treturn new filterClass(undefined,entry);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.filters.length>0) {\r\n\t\t\tfeatureContext.audioContext=true;\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn new Lines(...this.filters.map(filter=>filter.getHtmlLines(i18n)));\r\n\t}\r\n\tgetJsLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst lines=super.getJsLines(...arguments);\r\n\t\tif (this.filters.length==0) {\r\n\t\t\treturn lines;\r\n\t\t}\r\n\t\tlines.interleave(...this.filters.map(filter=>{\r\n\t\t\tconst lines=filter.getJsLines(i18n,prevNodeJsNames);\r\n\t\t\tprevNodeJsNames=filter.nodeJsNames;\r\n\t\t\treturn lines;\r\n\t\t}));\r\n\t\treturn lines;\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (this.filters.length>0) {\r\n\t\t\treturn this.filters[this.filters.length-1].nodeJsNames;\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=FilterSequence;\r\n","'use strict';\r\n\r\nconst strings={\r\n\t'options.source': \"Source\",\r\n\t'options.source.comment': \"create audio context and source node\",\r\n\t'options.source.url': \"Source URL\",\r\n\r\n\t'options.filters': \"Filters\",\r\n\t'options.filters.gain': \"Gain\",\r\n\t'options.filters.gain.comment': \"create gain node\",\r\n\t'options.filters.gain.add': \"Add Gain\",\r\n\t'options.filters.gain.gain': \"Gain\",\r\n\t'options.filters.panner': \"Stereo Panner\",\r\n\t'options.filters.panner.comment': \"create stereo panner node\",\r\n\t'options.filters.panner.add': \"Add Stereo Panner\",\r\n\t'options.filters.panner.pan': \"Pan\",\r\n\t'options.filters.biquad': \"Biquad Filter\",\r\n\t'options.filters.biquad.comment': \"create biquad filter node\",\r\n\t'options.filters.biquad.add': \"Add Biquad Filter\",\r\n\t'options.filters.biquad.filtertype': \"Filter type\",\r\n\t'options.filters.biquad.filtertype.lowpass': \"lowpass\",\r\n\t'options.filters.biquad.filtertype.highpass': \"highpass\",\r\n\t'options.filters.biquad.filtertype.bandpass': \"bandpass\",\r\n\t'options.filters.biquad.filtertype.lowshelf': \"lowshelf\",\r\n\t'options.filters.biquad.filtertype.highshelf': \"highshelf\",\r\n\t'options.filters.biquad.filtertype.peaking': \"peaking\",\r\n\t'options.filters.biquad.filtertype.notch': \"notch\",\r\n\t'options.filters.biquad.filtertype.allpass': \"allpass\",\r\n\t'options.filters.biquad.frequency': \"Frequency\",\r\n\t'options.filters.biquad.detune': \"Detune\",\r\n\t'options.filters.biquad.Q': \"Log(Q)\",\r\n\t'options.filters.convolver': \"Convolver\",\r\n\t'options.filters.convolver.comment': \"create dry and wet route with convolver node\",\r\n\t'options.filters.convolver.add': \"Add Convolver\",\r\n\t'options.filters.convolver.url': \"Impulse responce URL\",\r\n\t'options.filters.convolver.reverb': \"Reverb (Dry/Wet)\",\r\n\t'options.filters.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t'options.filters.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\r\n\t'options.destination': \"Destination\",\r\n\t'options.destination.comment': \"connect last filter node to destination\",\r\n\t'options.destination.compressor': \"Add Dynamics Compressor before the destination\",\r\n\t'options.destination.compressor.comment': \"create dynamics compressor node and connect it to destination\",\r\n\t'options.destination.compressor.enable': \"Enable Dynamics Compressor\",\r\n\r\n\t'options-output.drag': \"Drag or press up/down while in focus to reorder\",\r\n\t'options-output.delete': \"Delete\",\r\n\t'options-output.input': \"Editable\",\r\n\t'options-output.range': \"with range\",\r\n\t'options-output.reset': \"Reset\",\r\n};\r\n\r\nmodule.exports=function(lang){\r\n\t// TODO use lang to pick strings\r\n\tconst i18n=function(id){\r\n\t\treturn strings[id];\r\n\t};\r\n\ti18n.lang=lang;\r\n\treturn i18n;\r\n};\r\n","'use strict';\r\n\r\nlet idCounter=0;\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++);\r\n}\r\n\r\nconst i18n=require('./i18n.js')('en');\r\nconst Options=require('./options.js');\r\nconst generateCode=require('./code.js');\r\nconst CodeOutput=require('./code-output');\r\nconst OptionsOutput=require('./options-output');\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this);\r\n\t\tconst options=new Options();\r\n\t\tconst codeOutput=new CodeOutput(()=>generateCode(options.fix(),i18n));\r\n\t\toptions.updateCallback=codeOutput.update;\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n);\r\n\t\t$container.empty()\r\n\t\t\t.append(optionsOutput.$output)\r\n\t\t\t.append(codeOutput.$output);\r\n\t})\r\n});\r\n","'use strict';\r\n\r\nconst Option=Object.create(require('../base/option-classes.js'));\r\n\r\n// differs from webgl-starter:\r\n//\thas defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\n//\tno setToDefault, which is needed only if speed is present\r\n//\tname is set, b/c it wasn't needed only for speed\r\nclass FixedLiveNumber {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value;\r\n\t\tthis.min=src.min;\r\n\t\tthis.max=src.max;\r\n\t\tthis.input=src.input;\r\n\t\tthis.defaultValue=src.defaultValue;\r\n\t\tthis.availableMin=src.availableMin;\r\n\t\tthis.availableMax=src.availableMax;\r\n\t\tthis.step=src.step;\r\n\t\tthis.name=src.name;\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value;\r\n\t}\r\n\ttoString() {\r\n\t\treturn String(this.value);\r\n\t}\r\n}\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed step of 0.01\r\n//\tno speed\r\n//\thas range specified as [availableMin,availableMax,defaultMin,defaultMax]\r\nOption.LiveNumber = class extends Option.RangeInput {\r\n\tconstructor(name,availableRange,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput;\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value;\r\n\t\t\tdataMin  =data.min;\r\n\t\t\tdataMax  =data.max;\r\n\t\t\tdataInput=data.input;\r\n\t\t} else {\r\n\t\t\tdataValue=data;\r\n\t\t}\r\n\t\tsuper(name,availableRange,defaultValue,dataValue,fullName,isVisible,updateCallback);\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:(availableRange[2]!==undefined?availableRange[2]:this.availableMin);\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:(availableRange[3]!==undefined?availableRange[3]:this.availableMax);\r\n\t\tthis._input=!!dataInput;\r\n\t\tthis._$range=null;\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input);\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input;\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input;\r\n\t\tthis.updateInternalVisibility();\r\n\t\tthis.updateCallback();\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min;\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max;\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range;\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range;\r\n\t\tthis.updateInternalVisibility();\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={};\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value;\r\n\t\tif (src.min!=src.availableMin) data.min=src.min;\r\n\t\tif (src.max!=src.availableMax) data.max=src.max;\r\n\t\tif (src.input) data.input=src.input;\r\n\t\treturn data;\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this);\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveNumber(this);\r\n\t}\r\n};\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget step() {\r\n\t\treturn 1;\r\n\t}\r\n};\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget step() {\r\n\t\treturn 0.01;\r\n\t}\r\n};\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value;\r\n\t\tthis.input=src.input;\r\n\t\tthis.defaultValue=src.defaultValue;\r\n\t\tthis.availableValues=src.availableValues;\r\n\t\tthis.name=src.name;\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value;\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value;\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tlet dataValue,dataInput;\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value;\r\n\t\t\tdataInput=data.input;\r\n\t\t} else {\r\n\t\t\tdataValue=data;\r\n\t\t}\r\n\t\tsuper(name,availableValues,defaultValue,dataValue,fullName,isVisible,updateCallback);\r\n\t\tthis._input=!!dataInput;\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input;\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value;\r\n\t\tif (this.input) data.input=this.input;\r\n\t\treturn data;\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this);\r\n\t}\r\n};\r\n\r\nmodule.exports=Option;\r\n","'use strict';\r\n\r\nconst Option=require('./option-classes.js');\r\nconst BaseOptionsOutput=require('../base/options-output.js');\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters);\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',option.step);\r\n\t\t\tconst setInputAttrsAndListeners=($input,getOtherInput)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst $that=getOtherInput();\r\n\t\t\t\t\t\t$that.val(this.value);\r\n\t\t\t\t\t\toption.value=parseFloat(this.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tconst writeMinMaxInput=minOrMax=>setInputAttrs($(\"<input type='number' required>\"))\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tconst id=generateId();\r\n\t\t\tconst inputCheckboxId=generateId();\r\n\t\t\tlet $sliderInput,$numberInput,$inputCheckbox;\r\n\t\t\tlet $rangeMinInput,$rangeMaxInput;\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" <span class='min'>\"+option.availableMin+\"</span> \")\r\n\t\t\t\t.append($sliderInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='range' id='\"+id+\"'>\"),\r\n\t\t\t\t\t()=>$numberInput\r\n\t\t\t\t))\r\n\t\t\t\t.append(\" <span class='max'>\"+option.availableMax+\"</span> \")\r\n\t\t\t\t.append($numberInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='number' required>\"),\r\n\t\t\t\t\t()=>$sliderInput\r\n\t\t\t\t))\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\toption.$range=$(\"<span class='range'>\")\r\n\t\t\t\t\t\t.append(i18n('options-output.range')+\" \")\r\n\t\t\t\t\t\t.append($rangeMinInput=writeMinMaxInput('min'))\r\n\t\t\t\t\t\t.append(\" .. \")\r\n\t\t\t\t\t\t.append($rangeMaxInput=writeMinMaxInput('max'))\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t\t$sliderInput.val(option.defaultValue).change();\r\n\t\t\t\t\t\t$inputCheckbox.prop('checked',false).change();\r\n\t\t\t\t\t\t$rangeMinInput.val(option.availableMin).change();\r\n\t\t\t\t\t\t$rangeMaxInput.val(option.availableMax).change();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\tconst inputCheckboxId=generateId();\r\n\t\t\tlet $select,$inputCheckbox;\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\t\toption.availableValues.map(function(availableValue){\r\n\t\t\t\t\t\t\treturn $(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t\t$select.val(option.defaultValue).change();\r\n\t\t\t\t\t\t$inputCheckbox.prop('checked',false).change();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput;\r\n","'use strict';\r\n\r\nconst BaseOptions=require('../base/options.js');\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Group','source',[\r\n\t\t\t\t['Text','url',[\r\n\t\t\t\t\t// w3c mooc:\r\n\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t]],\r\n\t\t\t]],\r\n\t\t\t['Array','filters',[\r\n\t\t\t\t['Group','gain',[\r\n\t\t\t\t\t['LiveFloat','gain',[0,10,0,1],1],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','panner',[\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','biquad',[\r\n\t\t\t\t\t['LiveSelect','filtertype',[ // can't have array entry with suboption 'type'\r\n\t\t\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['LiveInt','frequency',[0,22050],350],\r\n\t\t\t\t\t['LiveInt','detune',[0,100]],\r\n\t\t\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','convolver',[\r\n\t\t\t\t\t['LiveFloat','reverb',[0,1]],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t]],\r\n\t\t\t['Group','destination',[\r\n\t\t\t\t['Checkbox','compressor'],\r\n\t\t\t]],\r\n\t\t];\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes.js');\r\n\t}\r\n}\r\n\r\nmodule.exports=Options;\r\n"],"sourceRoot":"."}