{"version":3,"sources":["webaudio-starter.js","node_modules/browser-pack/_prelude.js","src/audio-context.js","src/canvas.js","src/code-output.js","src/code.js","src/collection-feature.js","src/destination.js","src/feature.js","src/filter-sequence.js","src/i18n.js","src/main.js","src/option-classes.js","src/options-output.js","src/options.js","src/source-set.js","../crnx-base/code-output.js","../crnx-base/code-section.js","../crnx-base/interleave-lines.js","../crnx-base/js-lines.js","../crnx-base/lines.js","../crnx-base/nose-wrap-lines.js","../crnx-base/option-classes.js","../crnx-base/options-output.js","../crnx-base/options.js","../crnx-base/ref-lines.js","../crnx-base/web-code.js","../crnx-base/wrap-lines.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","JsLines","RefLines","Feature","AudioContext","_Feature","this","apply","arguments","getJsInitLines","featureContext","i18n","prevNodeJsNames","b","audioContext","parse","18","24","7",2,"Lines","Canvas","getHtmlLines","canvas","19",3,"BaseCodeOutput","CodeOutput","_BaseCodeOutput","get","context","source","gain","panner","biquad","convolver","peaking","destination","compressor","analyser","15",4,"SourceSet","FilterSequence","Destination","InterleaveLines","NoseWrapLines","BaseWebCode","Code","_BaseWebCode","options","_this","features","sources","filters","forEach","feature","requestFeatureContext","alignedInputs","_this2","bae","map","_NoseWrapLines$b","_this3","lines","getNodeJsNames","concat","ae","getJsLoopLines","14","17","20","25","6","8",5,"CollectionFeature","entryOptions","entryCounts","Map","entries","entryOption","entryClass","getEntryClass","set","entryCounts2","entry","_templateObject","audioProcessing","waveform","html","nextNodeJsName","prevNodeJsName","be","capitalize","charAt","toUpperCase","slice","toCamelCase","split","w","join","_templateObject2","_templateObject3","_templateObject4","_templateObject5","WrapLines","Filter","getPropertyOptionName","property","type","name","getPropertyInputHtmlName","propertyName","nSuffix","getPropertyInputJsName","getHtmlPropertyLines","option","inputHtmlName","input","min","max","step","_WrapLines$b","availableValues","nodeProperties","nodeJsName","ctxCreateMethodName","SinglePathFilter","_Filter","_this4","nodePropertyJsName","inputJsName","fn","eventProp","defaultValue","PassiveByDefaultSinglePathFilter","_SinglePathFilter","_this6","every","filterClasses","_PassiveByDefaultSing","_PassiveByDefaultSing2","_SinglePathFilter2","x","indexOf","_Filter2","_this11","messageHtmlName","reverb","wetGainNodeJsName","dryGainNodeJsName","url","equalizer","_Filter3","getFrequencyOption","allGainsConstant","_this13","singleFreq","affectedFreqsAndOptions","fo","noGainsConstant","getJsData","freq","getJsDataItem","inputHtmlNameExpr","constLines","varLines","outerNodeJsName","frequencies","_this14","filter","_CollectionFeature","skipNode","nodeJsNames","26",9,"options.sources","options.sources.audio","options.sources.audio.add","options.sources.audio.url","options.sources.video","options.sources.video.add","options.sources.video.url","options.sources.video.width","options.sources.video.height","options.filters","options.filters.gain","options.filters.gain.add","options.filters.gain.gain","options.filters.panner","options.filters.panner.add","options.filters.panner.pan","options.filters.biquad","options.filters.biquad.add","options.filters.biquad.type","options.filters.biquad.type.lowpass","options.filters.biquad.type.highpass","options.filters.biquad.type.bandpass","options.filters.biquad.type.lowshelf","options.filters.biquad.type.highshelf","options.filters.biquad.type.peaking","options.filters.biquad.type.notch","options.filters.biquad.type.allpass","options.filters.biquad.frequency","options.filters.biquad.Q","options.filters.biquad.detune","options.filters.biquad.gain","options.filters.convolver","options.filters.convolver.add","options.filters.convolver.url","options.filters.convolver.reverb","options.filters.convolver.buffer.loading","options.filters.convolver.buffer.error","options.filters.equalizer","options.filters.equalizer.add","options.filters.equalizer.gain60","options.filters.equalizer.gain170","options.filters.equalizer.gain350","options.filters.equalizer.gain1000","options.filters.equalizer.gain3500","options.filters.equalizer.gain10000","options.destination","options.destination.compressor","options.destination.compressor.enable","options.destination.waveform","options-output.drag","options-output.delete","options-output.input","options-output.range","options-output.reset","code-output.save","code-output.run","code-output.warning.no-hljs","code-output.warning.jsfiddle-run","code-output.section.html","code-output.section.css","code-output.section.js","code-output.embedded","code-output.mode.full","code-output.mode.body","code-output.mode.embed","code-output.mode.paste","code-output.mode.file","comment.context","comment.sources.audio","comment.sources.video","comment.filters.gain","comment.filters.panner","comment.filters.biquad","comment.filters.convolver","comment.filters.convolver.single","comment.filters.equalizer","comment.filters.equalizer.single","comment.destination","comment.destination.compressor","comment.destination.waveform","lang","id",10,"generateId","idCounter","Options","OptionsOutput","$","each","$container","codeOutput","fix","updateCallback","update","optionsOutput","empty","append","$output","12","13",11,"Option","FixedLiveNumber","src","availableMin","availableMax","valueOf","toString","String","LiveNumber","_Option$RangeInput","_class","availableRange","data","fullName","isVisible","dataValue","dataMin","dataMax","dataInput","defaultMin","defaultMax","_min","_max","_input","_$range","updateInternalVisibility","toggle","exportHelper","$range","RangeInput","LiveInt","_Option$LiveNumber","_class2","LiveFloat","_Option$LiveNumber2","_class3","FixedLiveSelect","LiveSelect","_Option$Select","_class4","Select","21","BaseOptionsOutput","_BaseOptionsOutput","setOptionClassWriters","optionClassWriters","writeOption","setInputAttrs","$input","attr","setInputAttrsAndListeners","getOtherInput","val","on","checkValidity","$that","parseFloat","writeMinMaxInput","minOrMax","inputCheckboxId","$sliderInput","$numberInput","$inputCheckbox","$rangeMinInput","$rangeMaxInput","prop","change","click","$select","availableValue","22","BaseOptions","_BaseOptions","23","Source","getElementHtmlLines","elementHtmlName","sourceClasses","audio","_Source","video","_Source2","width","height","generateCode","$sectionCode","$sectionModeInput","$jsSemicolonsCheckbox","getFormatting","refs","jsSemicolons","writeControls","window","open","document","write","close","sections","extractSections","css","js","getSection","sectionName","JSON","stringify","title","appendTo","submit","writeSection","getSectionModes","extractCode","sectionModes","$code","getHtml","hljs","highlightBlock","writeFormattingControls","extractable","$summary","$saveButton","mode","section","blob","Blob","mimeType","navigator","msSaveOrOpenBlob","filename","$a","URL","createObjectURL","remove","delay","timeoutId","clearTimeout","setTimeout",16,"CodeSection","formatting","_Lines","doGet","out","first","fp","push","item","subOut","strHtmlEscape","processStringInGet","replace","TO","Array","isArray","isDataEmpty","isEmpty","addTo","pop","shift","_arguments","makeLines","Function","bind","ba","_b","_b2","strRepeat","entityMap","&","<",">","\"","'","m","_arguments2","reduce","v","test","_WrapLines","Base","_1","_2","_3","_$","updateVisibility","shortenExport","dataKeys","shortenExportAssign","parentData","Input","_Option$Base","_value","BooleanInput","_Option$Input","NonBooleanInput","_Option$Input2","FactorInput","_Option$NonBooleanInp","_class5","_Option$NonBooleanInp2","_class6","_this5","Collection","_Option$Base2","_class7","fixedEntries","fixed","Void","_Option$Base3","_class8","Checkbox","_Option$BooleanInput","_class9","_","_Option$FactorInput","_class10","Text","_Option$FactorInput2","_class11","Int","_class12","Root","_Option$Collection","_class13","Group","_Option$Collection2","_class14","_Option$Base4","_class15","availableConstructors","typePropertyName","_entries","subDatas","defaultType","availableTypes","subData","subType","subCtor","addEntry","_this15","_this16","subFixed","types","optionProto","getPrototypeOf","optionClassWriter","root","listId","text","$dragged","$entries","updateArrayEntries","children","writeDraggableOption","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","setDragImage","addClass","keydown","$handle","$sorted","keyCode","prev","before","focus","next","after","preventDefault","dropEffect","$target","nextAll","is","prevAll","removeClass","$buttons","simpleUpdateCallback","optionClasses","optionByFullName","optionsWithVisibilityAffectedByFullName","makeEntry","description","fullNamePath","isInsideArray","className","ctorArgsDescription","contents","visibilityData","nScalars","nArrays","nObjects","arg","subName","ctor","testName","entriesDescription","ref","re","match","exec","substr","plainOut","href","WebCode","getLines","stylePlaceLines","cachedStyleLines","styleExtractLines","getSectionPasteComment","basename","scriptPlaceLines","cachedScriptLines","scriptExtractLines","htmlExtractLines","getBodyHtmlSectionLines","getFullHtmlSectionLines","cachedHeadLines","cachedBodyLines","_styleLines","styleLines","_headLines","headLines","_bodyLines","bodyLines","_scriptLines","scriptLines","wrappers","pushWrapper"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        },\n        taggedTemplateLiteralLoose: function (strings, raw) {\n            strings.raw = raw;\n            return strings;\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                var JsLines = require(18);\n                var RefLines = require(24);\n                var Feature = require(7);\n                var AudioContext = function (_Feature) {\n                    babelHelpers.inherits(AudioContext, _Feature);\n                    function AudioContext() {\n                        babelHelpers.classCallCheck(this, AudioContext);\n                        return babelHelpers.possibleConstructorReturn(this, _Feature.apply(this, arguments));\n                    }\n                    AudioContext.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.audioContext) {\n                            a(RefLines.parse('// ' + i18n('comment.context')), 'var ctx=new (AudioContext || webkitAudioContext);');\n                        }\n                        return a.e();\n                    };\n                    return AudioContext;\n                }(Feature);\n                module.exports = AudioContext;\n            },\n            {\n                '18': 18,\n                '24': 24,\n                '7': 7\n            }\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var JsLines = require(18);\n                var Feature = require(7);\n                var Canvas = function (_Feature) {\n                    babelHelpers.inherits(Canvas, _Feature);\n                    function Canvas() {\n                        babelHelpers.classCallCheck(this, Canvas);\n                        return babelHelpers.possibleConstructorReturn(this, _Feature.apply(this, arguments));\n                    }\n                    Canvas.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = Lines.b();\n                        if (featureContext.canvas) {\n                            a('<div>', '\\t<canvas id=my.canvas width=300 height=100></canvas>', '</div>');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            a('var canvas=document.getElementById(\\'my.canvas\\');', 'var canvasContext=canvas.getContext(\\'2d\\');');\n                        }\n                        return a.e();\n                    };\n                    return Canvas;\n                }(Feature);\n                module.exports = Canvas;\n            },\n            {\n                '18': 18,\n                '19': 19,\n                '7': 7\n            }\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseCodeOutput = require(15);\n                var CodeOutput = function (_BaseCodeOutput) {\n                    babelHelpers.inherits(CodeOutput, _BaseCodeOutput);\n                    function CodeOutput() {\n                        babelHelpers.classCallCheck(this, CodeOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseCodeOutput.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(CodeOutput, [{\n                            key: 'refs',\n                            get: function () {\n                                return {\n                                    context: 'https://www.w3.org/TR/webaudio/#AudioContext',\n                                    source: 'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\n                                    gain: 'https://www.w3.org/TR/webaudio/#GainNode',\n                                    panner: 'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\n                                    biquad: 'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\n                                    convolver: 'https://www.w3.org/TR/webaudio/#ConvolverNode',\n                                    peaking: 'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\n                                    destination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\n                                    compressor: 'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\n                                    analyser: 'https://www.w3.org/TR/webaudio/#the-analysernode-interface'\n                                };\n                            }\n                        }]);\n                    return CodeOutput;\n                }(BaseCodeOutput);\n                module.exports = CodeOutput;\n            },\n            { '15': 15 }\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                var AudioContext = require(1);\n                var SourceSet = require(14);\n                var FilterSequence = require(8);\n                var Destination = require(6);\n                var Canvas = require(2);\n                var Lines = require(19);\n                var JsLines = require(18);\n                var InterleaveLines = require(17);\n                var NoseWrapLines = require(20);\n                var BaseWebCode = require(25);\n                var Code = function (_BaseWebCode) {\n                    babelHelpers.inherits(Code, _BaseWebCode);\n                    function Code(options, i18n) {\n                        babelHelpers.classCallCheck(this, Code);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _BaseWebCode.call(this));\n                        _this.i18n = i18n;\n                        _this.featureContext = {};\n                        _this.features = [\n                            new AudioContext(),\n                            new SourceSet(options.sources),\n                            new FilterSequence(options.filters),\n                            new Destination(options.destination),\n                            new Canvas()\n                        ];\n                        _this.features.forEach(function (feature) {\n                            feature.requestFeatureContext(_this.featureContext);\n                        });\n                        return _this;\n                    }\n                    babelHelpers.createClass(Code, [\n                        {\n                            key: 'basename',\n                            get: function () {\n                                return 'webaudio';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                return 'en';\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                return 'WebAudio example - Generated code';\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                var a = Lines.b();\n                                if (this.featureContext.alignedInputs) {\n                                    a('.aligned label {', '\\tdisplay: inline-block;', '\\twidth: 10em;', '\\ttext-align: right;', '}');\n                                }\n                                if (this.featureContext.canvas) {\n                                    a('canvas {', '\\tborder: 1px solid;', '}');\n                                }\n                                return a.e();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                var _this2 = this;\n                                return Lines.bae.apply(Lines, this.features.map(function (feature) {\n                                    return feature.getHtmlLines(_this2.featureContext, _this2.i18n);\n                                }));\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                var _this3 = this, _NoseWrapLines$b;\n                                var prevNodeJsNames = undefined;\n                                return InterleaveLines.bae.apply(InterleaveLines, this.features.map(function (feature) {\n                                    var lines = feature.getJsInitLines(_this3.featureContext, _this3.i18n, prevNodeJsNames);\n                                    prevNodeJsNames = feature.getNodeJsNames(_this3.featureContext, prevNodeJsNames);\n                                    return lines;\n                                }).concat([(_NoseWrapLines$b = NoseWrapLines.b(JsLines.bae('function visualize() {'), JsLines.bae('\\trequestAnimationFrame(visualize);', '}', 'requestAnimationFrame(visualize);'))).ae.apply(_NoseWrapLines$b, this.features.map(function (feature) {\n                                        return feature.getJsLoopLines(_this3.featureContext, _this3.i18n);\n                                    }))]));\n                            }\n                        }\n                    ]);\n                    return Code;\n                }(BaseWebCode);\n                module.exports = Code;\n            },\n            {\n                '1': 1,\n                '14': 14,\n                '17': 17,\n                '18': 18,\n                '19': 19,\n                '2': 2,\n                '20': 20,\n                '25': 25,\n                '6': 6,\n                '8': 8\n            }\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var Feature = require(7);\n                var CollectionFeature = function (_Feature) {\n                    babelHelpers.inherits(CollectionFeature, _Feature);\n                    function CollectionFeature(entryOptions) {\n                        babelHelpers.classCallCheck(this, CollectionFeature);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        var entryCounts = new Map();\n                        entryOptions.entries.forEach(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            entryCounts.set(entryClass, entryCounts.get(entryClass) + 1 || 1);\n                        });\n                        var entryCounts2 = new Map();\n                        _this.entries = entryOptions.entries.map(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            if (entryCounts.get(entryClass) > 1) {\n                                var n = entryCounts2.get(entryClass) || 0;\n                                entryCounts2.set(entryClass, n + 1);\n                                return new entryClass(entryOption, n);\n                            } else {\n                                return new entryClass(entryOption);\n                            }\n                        });\n                        return _this;\n                    }\n                    CollectionFeature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.bae.apply(Lines, this.entries.map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    // abstract:\n                    // getEntryClass(entryOption) {}\n                    return CollectionFeature;\n                }(Feature);\n                module.exports = CollectionFeature;\n            },\n            {\n                '19': 19,\n                '7': 7\n            }\n        ],\n        6: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                    '<label for=my.compressor>',\n                    '</label>'\n                ], [\n                    '<label for=my.compressor>',\n                    '</label>'\n                ]);\n                var Lines = require(19);\n                var JsLines = require(18);\n                var NoseWrapLines = require(20);\n                var RefLines = require(24);\n                var Feature = require(7);\n                var Destination = function (_Feature) {\n                    babelHelpers.inherits(Destination, _Feature);\n                    function Destination(options) {\n                        babelHelpers.classCallCheck(this, Destination);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Destination.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        if (this.options.compressor || this.options.waveform) {\n                            featureContext.audioContext = true;\n                        }\n                        if (this.options.waveform) {\n                            featureContext.canvas = true;\n                        }\n                    };\n                    Destination.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = NoseWrapLines.b('<div>', '</div>');\n                        if (featureContext.audioProcessing && this.options.compressor) {\n                            a('<input id=my.compressor type=checkbox checked>', Lines.html(_templateObject, i18n('options.destination.compressor.enable')));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        var a = JsLines.b();\n                        if (featureContext.audioProcessing && featureContext.audioContext) {\n                            if (this.options.compressor) {\n                                (function () {\n                                    var nextNodeJsName = _this2.options.waveform ? 'analyserNode' : 'ctx.destination';\n                                    a.apply(undefined, [\n                                        RefLines.parse('// ' + i18n('comment.destination.compressor')),\n                                        'var compressorNode=ctx.createDynamicsCompressor();'\n                                    ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                        return prevNodeJsName + '.connect(compressorNode);';\n                                    })));\n                                    if (prevNodeJsNames.length > 0) {\n                                        a.apply(undefined, [\n                                            'document.getElementById(\\'my.compressor\\').onchange=function(){',\n                                            '\\tif (this.checked) {'\n                                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.disconnect(' + nextNodeJsName + ');';\n                                        }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.connect(compressorNode);';\n                                        }), ['\\t} else {'], prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.disconnect(compressorNode);';\n                                        }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.connect(' + nextNodeJsName + ');';\n                                        }), [\n                                            '\\t}',\n                                            '};',\n                                            ''\n                                        ]));\n                                    }\n                                    prevNodeJsNames = ['compressorNode'];\n                                }());\n                            }\n                            if (this.options.waveform) {\n                                a.apply(undefined, [\n                                    RefLines.parse('// ' + i18n('comment.destination.waveform')),\n                                    'var analyserNode=ctx.createAnalyser();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(analyserNode);';\n                                }), [\n                                    'analyserNode.fftSize=1024;',\n                                    'var analyserData=new Uint8Array(analyserNode.frequencyBinCount);',\n                                    ''\n                                ]));\n                                prevNodeJsNames = ['analyserNode'];\n                            }\n                            a.apply(undefined, [RefLines.parse('// ' + i18n('comment.destination'))].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(ctx.destination);';\n                            })));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsLoopLines = function getJsLoopLines(featureContext, i18n) {\n                        var a = JsLines.b();\n                        if (featureContext.audioProcessing && this.options.waveform) {\n                            a('analyserNode.getByteTimeDomainData(analyserData);', 'canvasContext.clearRect(0,0,canvas.width,canvas.height);', 'canvasContext.beginPath();', 'for (var i=0;i<analyserData.length;i++) {', '\\tvar x=i*canvas.width/analyserData.length;', '\\tvar y=analyserData[i]*canvas.height/255;', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(x,y);', '\\t} else {', '\\t\\tcanvasContext.lineTo(x,y);', '\\t}', '}', 'canvasContext.stroke();');\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        if (featureContext.audioContext) {\n                            return ['ctx.destination'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return Destination;\n                }(Feature);\n                module.exports = Destination;\n            },\n            {\n                '18': 18,\n                '19': 19,\n                '20': 20,\n                '24': 24,\n                '7': 7\n            }\n        ],\n        7: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var Feature = function () {\n                    function Feature() {\n                        babelHelpers.classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopLines = function getJsLoopLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        return prevNodeJsNames;\n                    };\n                    return Feature;\n                }();\n                module.exports = Feature;\n            },\n            { '19': 19 }\n        ],\n        8: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<label for=',\n                        '>',\n                        '</label>'\n                    ], [\n                        '<label for=',\n                        '>',\n                        '</label>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ], [\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ]), _templateObject3 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<select id=',\n                        '>'\n                    ], [\n                        '<select id=',\n                        '>'\n                    ]), _templateObject4 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<option selected=',\n                        '>',\n                        '</option>'\n                    ], [\n                        '<option selected=',\n                        '>',\n                        '</option>'\n                    ]), _templateObject5 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var Lines = require(19);\n                var JsLines = require(18);\n                var WrapLines = require(26);\n                var NoseWrapLines = require(20);\n                var InterleaveLines = require(17);\n                var RefLines = require(24);\n                var CollectionFeature = require(5);\n                function capitalize(s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                }\n                function toCamelCase(s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                }\n                var Filter = function () {\n                    function Filter(options, n) {\n                        babelHelpers.classCallCheck(this, Filter);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(property) {\n                        return 'options.filters.' + this.type + '.' + property.name;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputJsName = function getPropertyInputJsName(propertyName) {\n                        return toCamelCase(this.type + this.nSuffix + '.' + propertyName + '.input');\n                    };\n                    Filter.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Filter.prototype.getHtmlPropertyLines = function getHtmlPropertyLines(i18n, property) {\n                        var option = this.options[property.name];\n                        var inputHtmlName = this.getPropertyInputHtmlName(property.name);\n                        var a = Lines.b();\n                        if (property.type == 'range' && option.input) {\n                            a(Lines.html(_templateObject, inputHtmlName, i18n(this.getPropertyOptionName(property))), Lines.html(_templateObject2, inputHtmlName, option, option.min, option.max, option.step != 1 ? option.step : false));\n                        } else if (property.type == 'select' && option.input) {\n                            var _WrapLines$b;\n                            a(Lines.html(_templateObject, inputHtmlName, i18n(this.getPropertyOptionName(property))), (_WrapLines$b = WrapLines.b(Lines.html(_templateObject3, inputHtmlName), '</select>')).ae.apply(_WrapLines$b, option.availableValues.map(function (value) {\n                                return Lines.html(_templateObject4, option.value == value, value);\n                            })));\n                        } else if (property.type == 'xhr') {\n                            a(Lines.html(_templateObject5, inputHtmlName, i18n(this.getPropertyOptionName(property) + '.loading')));\n                        }\n                        return a.e();\n                    };\n                    // { not called if skipNode is set\n                    Filter.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var _NoseWrapLines$b, _this = this;\n                        return (_NoseWrapLines$b = NoseWrapLines.b('<div>', '</div>')).ae.apply(_NoseWrapLines$b, this.nodeProperties.map(function (property) {\n                            return _this.getHtmlPropertyLines(i18n, property);\n                        }));\n                    };\n                    Filter.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        return JsLines.bae.apply(JsLines, [\n                            RefLines.parse('// ' + i18n('comment.filters.' + this.type)),\n                            'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'\n                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                            return prevNodeJsName + '.connect(' + _this2.nodeJsName + ');';\n                        })));\n                    };\n                    babelHelpers.createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return toCamelCase(this.type + this.nSuffix + '.node');\n                            }\n                        },\n                        {\n                            key: 'skipNode',\n                            get: function () {\n                                return false;\n                            }\n                        },\n                        {\n                            key: 'nodeJsNames',\n                            get: function () {\n                                return [this.nodeJsName];\n                            }    // }\n                                 // abstract:\n                                 // get type()\n                                 // get ctxCreateMethodName()\n                                 // get nodeProperties()\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var SinglePathFilter = function (_Filter) {\n                    babelHelpers.inherits(SinglePathFilter, _Filter);\n                    function SinglePathFilter() {\n                        babelHelpers.classCallCheck(this, SinglePathFilter);\n                        return babelHelpers.possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                    }\n                    SinglePathFilter.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                        var _this4 = this;\n                        return Lines.bae.apply(Lines, [_Filter.prototype.getJsInitLines.call(this, i18n, prevNodeJsNames)].concat(this.nodeProperties.map(function (property) {\n                            var option = _this4.options[property.name];\n                            var nodePropertyJsName = _this4.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '');\n                            var a = JsLines.b();\n                            if (option.input) {\n                                var inputJsName = _this4.getPropertyInputJsName(property.name);\n                                var inputHtmlName = _this4.getPropertyInputHtmlName(property.name);\n                                var value = inputJsName + '.value';\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                var eventProp = property.type == 'range' ? 'oninput' : 'onchange';\n                                a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', // was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\n                                ';(' + inputJsName + '.' + eventProp + '=function(){', '\\t' + nodePropertyJsName + '=' + value + ';', '})();');\n                            } else if (option.value != option.defaultValue) {\n                                var value = option.value;\n                                if (property.type == 'select') {\n                                    value = '\\'' + value + '\\'';\n                                }\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                a(nodePropertyJsName + '=' + value + ';');\n                            }\n                            return a.e();\n                        })));\n                    };\n                    return SinglePathFilter;\n                }(Filter);\n                var PassiveByDefaultSinglePathFilter = function (_SinglePathFilter) {\n                    babelHelpers.inherits(PassiveByDefaultSinglePathFilter, _SinglePathFilter);\n                    function PassiveByDefaultSinglePathFilter() {\n                        babelHelpers.classCallCheck(this, PassiveByDefaultSinglePathFilter);\n                        return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(PassiveByDefaultSinglePathFilter, [{\n                            key: 'skipNode',\n                            get: function () {\n                                var _this6 = this;\n                                return this.nodeProperties.every(function (property) {\n                                    var option = _this6.options[property.name];\n                                    return option.value == option.defaultValue && !option.input;\n                                });\n                            }\n                        }]);\n                    return PassiveByDefaultSinglePathFilter;\n                }(SinglePathFilter);\n                var filterClasses = {\n                    gain: function (_PassiveByDefaultSing) {\n                        babelHelpers.inherits(gain, _PassiveByDefaultSing);\n                        function gain() {\n                            babelHelpers.classCallCheck(this, gain);\n                            return babelHelpers.possibleConstructorReturn(this, _PassiveByDefaultSing.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(PassiveByDefaultSinglePathFilter),\n                    panner: function (_PassiveByDefaultSing2) {\n                        babelHelpers.inherits(panner, _PassiveByDefaultSing2);\n                        function panner() {\n                            babelHelpers.classCallCheck(this, panner);\n                            return babelHelpers.possibleConstructorReturn(this, _PassiveByDefaultSing2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(PassiveByDefaultSinglePathFilter),\n                    biquad: function (_SinglePathFilter2) {\n                        babelHelpers.inherits(biquad, _SinglePathFilter2);\n                        function biquad() {\n                            babelHelpers.classCallCheck(this, biquad);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            type: 'select'\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            fn: function (x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            }\n                                        },\n                                        {\n                                            name: 'gain',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    // lowshelf, highshelf and peaking are passive when gain==0\n                                    return !this.options.type.input && [\n                                        'lowshelf',\n                                        'highshelf',\n                                        'peaking'\n                                    ].indexOf(this.options.type.value) >= 0 && !this.options.gain.input && this.options.gain == 0;\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(SinglePathFilter),\n                    convolver: function (_Filter2) {\n                        babelHelpers.inherits(convolver, _Filter2);\n                        function convolver() {\n                            babelHelpers.classCallCheck(this, convolver);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        convolver.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                            var _this11 = this;\n                            var messageHtmlName = this.getPropertyInputHtmlName('buffer');\n                            var a = JsLines.b();\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                            } else {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')));\n                            }\n                            a.apply(undefined, ['var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this11.nodeJsName + ');';\n                            })));\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a.apply(undefined, [\n                                    'var ' + this.wetGainNodeJsName + '=ctx.createGain();',\n                                    this.nodeJsName + '.connect(' + this.wetGainNodeJsName + ');',\n                                    'var ' + this.dryGainNodeJsName + '=ctx.createGain();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(' + _this11.dryGainNodeJsName + ');';\n                                })));\n                                if (this.options.reverb.input) {\n                                    var inputHtmlName = this.getPropertyInputHtmlName('reverb');\n                                    var inputJsName = this.getPropertyInputJsName('reverb');\n                                    a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', ';(' + inputJsName + '.oninput=function(){', '\\t' + this.wetGainNodeJsName + '.gain.value=' + inputJsName + '.value;', '\\t' + this.dryGainNodeJsName + '.gain.value=1-' + inputJsName + '.value;', '})();');\n                                }\n                            }\n                            a('var xhr=new XMLHttpRequest();', 'xhr.open(\\'GET\\',\\'' + this.options.url + '\\');', // TODO html escape\n                            'xhr.responseType=\\'arraybuffer\\';', 'xhr.onload=function(){', '\\tif (this.status==200) {', // TODO we are checking status here, but what if <audio>'s status is an error?\n                            '\\t\\tctx.decodeAudioData(this.response,function(buffer){', '\\t\\t\\t' + this.nodeJsName + '.buffer=buffer;', '\\t\\t\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';', '\\t\\t});', '\\t} else {', '\\t\\tthis.onerror();', '\\t}', '};', 'xhr.onerror=function(){', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.filters.convolver.buffer.error') + '\\';', '};', 'xhr.send();');\n                            return a.e();\n                        };\n                        babelHelpers.createClass(convolver, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'convolver';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createConvolver';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'reverb',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'buffer',\n                                            type: 'xhr'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'dryGainNodeJsName',\n                                get: function () {\n                                    return toCamelCase(this.type + this.nSuffix + '.dry.gain.node');\n                                }\n                            },\n                            {\n                                key: 'wetGainNodeJsName',\n                                get: function () {\n                                    return toCamelCase(this.type + this.nSuffix + '.wet.gain.node');\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.options.reverb == 0 && !this.options.reverb.input;\n                                }\n                            },\n                            {\n                                key: 'nodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.wetGainNodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            }\n                        ]);\n                        return convolver;\n                    }(Filter),\n                    equalizer: function (_Filter3) {\n                        babelHelpers.inherits(equalizer, _Filter3);\n                        function equalizer() {\n                            babelHelpers.classCallCheck(this, equalizer);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter3.apply(this, arguments));\n                        }\n                        equalizer.prototype.getFrequencyOption = function getFrequencyOption(i) {\n                            return this.options[this.nodeProperties[i].name];\n                        };\n                        equalizer.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            if (!this.allGainsConstant) {\n                                featureContext.alignedInputs = true;\n                            }\n                        };\n                        equalizer.prototype.getHtmlPropertyLines = function getHtmlPropertyLines(i18n, property) {\n                            return NoseWrapLines.b('<div class=aligned>', '</div>').ae(_Filter3.prototype.getHtmlPropertyLines.call(this, i18n, property));\n                        };\n                        equalizer.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                            var _this13 = this;\n                            var singleFreq = this.affectedFreqsAndOptions.length == 1;\n                            var allGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == false;\n                            });\n                            var noGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == true;\n                            });\n                            var getJsData = function () {\n                                return _this13.affectedFreqsAndOptions.map(function (fo) {\n                                    if (noGainsConstant) {\n                                        return fo.freq;\n                                    } else {\n                                        return '[' + fo.freq + ',' + (fo.option.input ? 'null' : fo.option.value) + ']';\n                                    }\n                                }).join();\n                            };\n                            var getJsDataItem = function () {\n                                if (noGainsConstant) {\n                                    return 'freq';\n                                } else {\n                                    return 'freqData';\n                                }\n                            };\n                            var getJsLoopLines = function () {\n                                var freq = singleFreq ? _this13.affectedFreqsAndOptions[0].freq : 'freq';\n                                var gain = singleFreq ? _this13.affectedFreqsAndOptions[0].option.value : 'gain';\n                                var nodeJsName = allGainsConstant || singleFreq ? _this13.nodeJsName : 'node';\n                                var inputJsName = singleFreq ? _this13.getPropertyInputJsName('gain' + freq) : 'input';\n                                var inputHtmlNameExpr = singleFreq ? '\\'' + _this13.getPropertyInputHtmlName('gain' + freq) + '\\'' : '\\'' + _this13.getPropertyInputHtmlName('gain') + '\\'+freq';\n                                var a = JsLines.b();\n                                if (!(noGainsConstant || singleFreq)) {\n                                    a('var freq=freqData[0], gain=freqData[1];');\n                                }\n                                if (allGainsConstant && !singleFreq) {\n                                    a('');\n                                } else {\n                                    a('var ');\n                                }\n                                a.t(nodeJsName + '=ctx.' + _this13.ctxCreateMethodName + '();');\n                                if (singleFreq) {\n                                    a.apply(undefined, prevNodeJsNames.map(function (prevNodeJsName) {\n                                        return prevNodeJsName + '.connect(' + nodeJsName + ');';\n                                    }));\n                                } else {\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode.connect(' + nodeJsName + ');');\n                                    } else {\n                                        a('prevNodes.forEach(function(prevNode){', '\\tprevNode.connect(' + nodeJsName + ');', '});');\n                                    }\n                                }\n                                a(nodeJsName + '.type=\\'peaking\\';', nodeJsName + '.frequency.value=' + freq + ';');\n                                var constLines = JsLines.bae(nodeJsName + '.gain.value=' + gain + ';');\n                                var varLines = JsLines.bae('var ' + inputJsName + '=document.getElementById(' + inputHtmlNameExpr + ');', ';(' + inputJsName + '.oninput=function(){', '\\t' + nodeJsName + '.gain.value=' + inputJsName + '.value;', '})();');\n                                if (!noGainsConstant && allGainsConstant) {\n                                    a(constLines);\n                                } else if (noGainsConstant && !allGainsConstant) {\n                                    a(varLines);\n                                } else if (!noGainsConstant && !allGainsConstant) {\n                                    a(WrapLines.b('if (gain!==null) {', '} else {', '}').ae(constLines, varLines));\n                                }\n                                if (!singleFreq) {\n                                    var outerNodeJsName = allGainsConstant ? nodeJsName : _this13.nodeJsName + '=' + nodeJsName;\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode=' + outerNodeJsName + ';');\n                                    } else {\n                                        a('prevNodes=[' + outerNodeJsName + '];');\n                                    }\n                                }\n                                return a.e();\n                            };\n                            if (singleFreq) {\n                                return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')), getJsLoopLines());\n                            } else {\n                                var a = JsLines.b();\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                                if (prevNodeJsNames.length == 1) {\n                                    a('var prevNode=' + prevNodeJsNames[0] + ';');\n                                } else {\n                                    a('var prevNodes=[' + prevNodeJsNames.join() + '];');\n                                }\n                                a('var ' + this.nodeJsName + ';', WrapLines.b(JsLines.bae(';[' + getJsData() + '].forEach(function(' + getJsDataItem() + '){'), JsLines.bae('});')).ae(getJsLoopLines()));\n                                return a.e();\n                            }\n                        };\n                        babelHelpers.createClass(equalizer, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'equalizer';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'frequencies',\n                                get: function () {\n                                    return [\n                                        60,\n                                        170,\n                                        350,\n                                        1000,\n                                        3500,\n                                        10000\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return this.frequencies.map(function (freq) {\n                                        return {\n                                            name: 'gain' + freq,\n                                            type: 'range'\n                                        };\n                                    });\n                                }\n                            },\n                            {\n                                key: 'affectedFreqsAndOptions',\n                                get: function () {\n                                    var _this14 = this;\n                                    return this.frequencies.map(function (freq, i) {\n                                        var option = _this14.getFrequencyOption(i);\n                                        return {\n                                            freq: freq,\n                                            option: option\n                                        };\n                                    }).filter(function (fo) {\n                                        return fo.option.input != false || fo.option.value != 0;\n                                    });\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.affectedFreqsAndOptions.length == 0;\n                                }\n                            }\n                        ]);\n                        return equalizer;\n                    }(Filter)\n                };\n                var FilterSequence = function (_CollectionFeature) {\n                    babelHelpers.inherits(FilterSequence, _CollectionFeature);\n                    function FilterSequence() {\n                        babelHelpers.classCallCheck(this, FilterSequence);\n                        return babelHelpers.possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    FilterSequence.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return filterClasses[entryOption.filter];\n                    };\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        this.entries.forEach(function (entry) {\n                            if (!entry.skipNode) {\n                                featureContext.audioContext = true;\n                                entry.requestFeatureContext(featureContext);\n                            }\n                        });\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return Lines.bae.apply(Lines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    FilterSequence.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return InterleaveLines.bae.apply(InterleaveLines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            var lines = entry.getJsInitLines(i18n, prevNodeJsNames);\n                            prevNodeJsNames = entry.nodeJsNames;\n                            return lines;\n                        }));\n                    };\n                    FilterSequence.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        this.entries.forEach(function (entry) {\n                            if (!entry.skipNode) {\n                                prevNodeJsNames = entry.nodeJsNames;\n                            }\n                        });\n                        return prevNodeJsNames;\n                    };\n                    return FilterSequence;\n                }(CollectionFeature);\n                module.exports = FilterSequence;\n            },\n            {\n                '17': 17,\n                '18': 18,\n                '19': 19,\n                '20': 20,\n                '24': 24,\n                '26': 26,\n                '5': 5\n            }\n        ],\n        9: [\n            function (require, module, exports) {\n                'use strict';\n                var strings = {\n                    'options.sources': 'Sources',\n                    'options.sources.audio': 'Audio element',\n                    'options.sources.audio.add': 'Add audio element',\n                    'options.sources.audio.url': 'Source URL',\n                    'options.sources.video': 'Video element',\n                    'options.sources.video.add': 'Add video element',\n                    'options.sources.video.url': 'Source URL',\n                    'options.sources.video.width': 'Player width',\n                    'options.sources.video.height': 'Player height',\n                    'options.filters': 'Filters',\n                    'options.filters.gain': 'Gain',\n                    'options.filters.gain.add': 'Add gain',\n                    'options.filters.gain.gain': 'Gain',\n                    'options.filters.panner': 'Stereo panner',\n                    'options.filters.panner.add': 'Add stereo panner',\n                    'options.filters.panner.pan': 'Pan',\n                    'options.filters.biquad': 'Biquad filter',\n                    'options.filters.biquad.add': 'Add biquad filter',\n                    'options.filters.biquad.type': 'Filter type',\n                    'options.filters.biquad.type.lowpass': 'lowpass',\n                    'options.filters.biquad.type.highpass': 'highpass',\n                    'options.filters.biquad.type.bandpass': 'bandpass',\n                    'options.filters.biquad.type.lowshelf': 'lowshelf',\n                    'options.filters.biquad.type.highshelf': 'highshelf',\n                    'options.filters.biquad.type.peaking': 'peaking',\n                    'options.filters.biquad.type.notch': 'notch',\n                    'options.filters.biquad.type.allpass': 'allpass',\n                    'options.filters.biquad.frequency': 'Frequency',\n                    'options.filters.biquad.Q': 'Log(Q)',\n                    'options.filters.biquad.detune': 'Detune',\n                    'options.filters.biquad.gain': 'Gain [dB]',\n                    'options.filters.convolver': 'Convolver',\n                    'options.filters.convolver.add': 'Add convolver',\n                    'options.filters.convolver.url': 'Impulse responce URL',\n                    'options.filters.convolver.reverb': 'Reverb (dry/wet)',\n                    'options.filters.convolver.buffer.loading': 'Loading and decoding the impulse response',\n                    'options.filters.convolver.buffer.error': 'Error while loading the impulse response',\n                    'options.filters.equalizer': 'Equalizer',\n                    'options.filters.equalizer.add': 'Add equalizer',\n                    'options.filters.equalizer.gain60': '60 Hz gain',\n                    // TODO {,} expansion\n                    'options.filters.equalizer.gain170': '170 Hz gain',\n                    'options.filters.equalizer.gain350': '350 Hz gain',\n                    'options.filters.equalizer.gain1000': '1000 Hz gain',\n                    'options.filters.equalizer.gain3500': '3500 Hz gain',\n                    'options.filters.equalizer.gain10000': '10000 Hz gain',\n                    'options.destination': 'Destination',\n                    'options.destination.compressor': 'Add dynamics compressor before the destination',\n                    'options.destination.compressor.enable': 'Enable dynamics compressor',\n                    'options.destination.waveform': 'Add waveform visualization',\n                    'options-output.drag': 'Drag or press up/down while in focus to reorder',\n                    'options-output.delete': 'Delete',\n                    'options-output.input': 'Editable',\n                    'options-output.range': 'with range',\n                    'options-output.reset': 'Reset',\n                    'code-output.save': 'Save source code',\n                    'code-output.run': 'Run in new window',\n                    'code-output.warning.no-hljs': '<a href=\\'https://highlightjs.org/\\'>highlight.js</a> (hosted on cdnjs.cloudflare.com) is not loaded. Syntax highlighting is disabled.',\n                    'code-output.warning.jsfiddle-run': 'You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working',\n                    'code-output.section.html': 'HTML',\n                    'code-output.section.css': 'CSS',\n                    'code-output.section.js': 'JavaScript',\n                    'code-output.embedded': 'embedded in HTML source code',\n                    'code-output.mode.full': 'complete HTML',\n                    'code-output.mode.body': 'only HTML body',\n                    'code-output.mode.embed': 'embed in HTML',\n                    'code-output.mode.paste': 'extract to paste into HTML later',\n                    'code-output.mode.file': 'extract to load as external resource',\n                    'comment.context': 'create [audio context][context]',\n                    'comment.sources.audio': 'create [audio source node][source]',\n                    'comment.sources.video': 'create [video source node][source]',\n                    'comment.filters.gain': 'create [gain node][gain]',\n                    'comment.filters.panner': 'create [stereo panner node][panner]',\n                    'comment.filters.biquad': 'create [biquad filter node][biquad]',\n                    'comment.filters.convolver': 'create dry and wet routes with [convolver node][convolver]',\n                    'comment.filters.convolver.single': 'create [convolver node][convolver]',\n                    'comment.filters.equalizer': 'create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]',\n                    'comment.filters.equalizer.single': 'create equalizer as a [peaking][peaking] [biquad filter node][biquad]',\n                    'comment.destination': 'connect last node to [destination][destination]',\n                    'comment.destination.compressor': 'create [dynamics compressor node][compressor]',\n                    'comment.destination.waveform': 'create [analyser node][analyser] for waveform visualization'\n                };\n                /*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\n                module.exports = function (lang) {\n                    // TODO use lang to pick strings\n                    var i18n = function (id) {\n                        return strings[id];\n                    };\n                    i18n.lang = lang;\n                    return i18n;\n                };\n            },\n            {}\n        ],\n        10: [\n            function (require, module, exports) {\n                'use strict';\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18n = require(9)('en');\n                var Options = require(13);\n                var Code = require(4);\n                var OptionsOutput = require(12);\n                var CodeOutput = require(3);\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return new Code(options.fix(), i18n);\n                        }, i18n);\n                        options.updateCallback = codeOutput.update;\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output).append(codeOutput.$output);\n                    });\n                });\n            },\n            {\n                '12': 12,\n                '13': 13,\n                '3': 3,\n                '4': 4,\n                '9': 9\n            }\n        ],\n        11: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = Object.create(require(21));\n                // differs from webgl-starter:\n                //\thas defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\n                //\tno setToDefault, which is needed only if speed is present\n                //\tname is set, b/c it wasn't needed only for speed\n                var FixedLiveNumber = function () {\n                    function FixedLiveNumber(src) {\n                        babelHelpers.classCallCheck(this, FixedLiveNumber);\n                        this.value = src.value;\n                        this.min = src.min;\n                        this.max = src.max;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableMin = src.availableMin;\n                        this.availableMax = src.availableMax;\n                        this.step = src.step;\n                        this.name = src.name;\n                    }\n                    FixedLiveNumber.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveNumber.prototype.toString = function toString() {\n                        return String(this.value);\n                    };\n                    return FixedLiveNumber;\n                }();\n                // differs from webgl-starter:\n                //\tinput is a boolean\n                // \tfloat subclasses have a fixed step of 0.01\n                //\tno speed\n                //\thas range specified as [availableMin,availableMax,defaultMin,defaultMax]\n                Option.LiveNumber = function (_Option$RangeInput) {\n                    babelHelpers.inherits(_class, _Option$RangeInput);\n                    function _class(name, availableRange, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class);\n                        var dataValue = undefined, dataMin = undefined, dataMax = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataMin = data.min;\n                            dataMax = data.max;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$RangeInput.call(this, name, availableRange, defaultValue, dataValue, fullName, isVisible, updateCallback));\n                        _this.defaultMin = availableRange[2] !== undefined ? availableRange[2] : _this.availableMin;\n                        _this.defaultMax = availableRange[3] !== undefined ? availableRange[3] : _this.availableMax;\n                        _this._min = dataMin !== undefined ? dataMin : _this.defaultMin;\n                        _this._max = dataMax !== undefined ? dataMax : _this.defaultMax;\n                        _this._input = !!dataInput;\n                        _this._$range = null;\n                        return _this;\n                    }\n                    _class.prototype.updateInternalVisibility = function updateInternalVisibility() {\n                        if (this._$range)\n                            this._$range.toggle(this._input);\n                    };\n                    _class.prototype.exportHelper = function exportHelper(src) {\n                        var data = {};\n                        if (src.value != src.defaultValue)\n                            data.value = src.value;\n                        if (src.min != src.availableMin)\n                            data.min = src.min;\n                        if (src.max != src.availableMax)\n                            data.max = src.max;\n                        if (src.input)\n                            data.input = src.input;\n                        return data;\n                    };\n                    _class.prototype.export = function _export() {\n                        return this.exportHelper(this);\n                    };\n                    _class.prototype.fix = function fix() {\n                        return new FixedLiveNumber(this);\n                    };\n                    babelHelpers.createClass(_class, [\n                        {\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.updateInternalVisibility();\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: 'min',\n                            get: function () {\n                                return this._min;\n                            },\n                            set: function (min) {\n                                this._min = min;\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: 'max',\n                            get: function () {\n                                return this._max;\n                            },\n                            set: function (max) {\n                                this._max = max;\n                                this.updateCallback();\n                            }\n                        },\n                        {\n                            key: '$range',\n                            get: function () {\n                                return this._$range;\n                            },\n                            set: function ($range) {\n                                this._$range = $range;\n                                this.updateInternalVisibility();\n                            }\n                        }\n                    ]);\n                    return _class;\n                }(Option.RangeInput);\n                Option.LiveInt = function (_Option$LiveNumber) {\n                    babelHelpers.inherits(_class2, _Option$LiveNumber);\n                    function _class2() {\n                        babelHelpers.classCallCheck(this, _class2);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class2, [{\n                            key: 'step',\n                            get: function () {\n                                return 1;\n                            }\n                        }]);\n                    return _class2;\n                }(Option.LiveNumber);\n                Option.LiveFloat = function (_Option$LiveNumber2) {\n                    babelHelpers.inherits(_class3, _Option$LiveNumber2);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber2.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class3, [{\n                            key: 'step',\n                            get: function () {\n                                return 0.01;\n                            }\n                        }]);\n                    return _class3;\n                }(Option.LiveNumber);\n                var FixedLiveSelect = function () {\n                    function FixedLiveSelect(src) {\n                        babelHelpers.classCallCheck(this, FixedLiveSelect);\n                        this.value = src.value;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableValues = src.availableValues;\n                        this.name = src.name;\n                    }\n                    FixedLiveSelect.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveSelect.prototype.toString = function toString() {\n                        return this.value;\n                    };\n                    return FixedLiveSelect;\n                }();\n                Option.LiveSelect = function (_Option$Select) {\n                    babelHelpers.inherits(_class4, _Option$Select);\n                    function _class4(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class4);\n                        var dataValue = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$Select.call(this, name, availableValues, defaultValue, dataValue, fullName, isVisible, updateCallback));\n                        _this4._input = !!dataInput;\n                        return _this4;\n                    }\n                    _class4.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        if (this.input)\n                            data.input = this.input;\n                        return data;\n                    };\n                    _class4.prototype.fix = function fix() {\n                        return new FixedLiveSelect(this);\n                    };\n                    babelHelpers.createClass(_class4, [{\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class4;\n                }(Option.Select);\n                module.exports = Option;\n            },\n            { '21': 21 }\n        ],\n        12: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require(11);\n                var BaseOptionsOutput = require(22);\n                var OptionsOutput = function (_BaseOptionsOutput) {\n                    babelHelpers.inherits(OptionsOutput, _BaseOptionsOutput);\n                    function OptionsOutput() {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptionsOutput.apply(this, arguments));\n                    }\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        _BaseOptionsOutput.prototype.setOptionClassWriters.call(this, optionClassWriters);\n                        optionClassWriters.set(Option.LiveNumber, function (option, writeOption, i18n, generateId) {\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', option.step);\n                            };\n                            var setInputAttrsAndListeners = function ($input, getOtherInput) {\n                                return setInputAttrs($input).val(option.value).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        var $that = getOtherInput();\n                                        $that.val(this.value);\n                                        option.value = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var writeMinMaxInput = function (minOrMax) {\n                                return setInputAttrs($('<input type=\\'number\\' required>')).val(option[minOrMax]).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        option[minOrMax] = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var id = generateId();\n                            var inputCheckboxId = generateId();\n                            var $sliderInput = undefined, $numberInput = undefined, $inputCheckbox = undefined;\n                            var $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' <span class=\\'min\\'>' + option.availableMin + '</span> ').append($sliderInput = setInputAttrsAndListeners($('<input type=\\'range\\' id=\\'' + id + '\\'>'), function () {\n                                return $numberInput;\n                            })).append(' <span class=\\'max\\'>' + option.availableMax + '</span> ').append($numberInput = setInputAttrsAndListeners($('<input type=\\'number\\' required>'), function () {\n                                return $sliderInput;\n                            })).append(' ').append($inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            })).append(' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ').append(option.$range = $('<span class=\\'range\\'>').append(i18n('options-output.range') + ' ').append($rangeMinInput = writeMinMaxInput('min')).append(' .. ').append($rangeMaxInput = writeMinMaxInput('max'))).append(' ').append($('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $sliderInput.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                                $rangeMinInput.val(option.defaultMin).change();\n                                $rangeMaxInput.val(option.defaultMax).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.LiveSelect, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var inputCheckboxId = generateId();\n                            var $select = undefined, $inputCheckbox = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            })).append(' ').append($inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            })).append(' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ').append($('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $select.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                            }));\n                        });\n                    };\n                    return OptionsOutput;\n                }(BaseOptionsOutput);\n                module.exports = OptionsOutput;\n            },\n            {\n                '11': 11,\n                '22': 22\n            }\n        ],\n        13: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseOptions = require(23);\n                var Options = function (_BaseOptions) {\n                    babelHelpers.inherits(Options, _BaseOptions);\n                    function Options() {\n                        babelHelpers.classCallCheck(this, Options);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [\n                                    [\n                                        'Array',\n                                        'sources',\n                                        [\n                                            // urls are from w3c mooc\n                                            [\n                                                'Group',\n                                                'audio',\n                                                [[\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/drums.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3'\n                                                        ]\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'video',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.mp4'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'width',\n                                                        [\n                                                            1,\n                                                            1920\n                                                        ],\n                                                        320\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'height',\n                                                        [\n                                                            1,\n                                                            1080\n                                                        ],\n                                                        240\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        'source'\n                                    ],\n                                    [\n                                        'Array',\n                                        'filters',\n                                        [\n                                            [\n                                                'Group',\n                                                'gain',\n                                                [[\n                                                        'LiveFloat',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            10,\n                                                            0,\n                                                            1\n                                                        ],\n                                                        1\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'panner',\n                                                [[\n                                                        'LiveFloat',\n                                                        'pan',\n                                                        [\n                                                            -1,\n                                                            1\n                                                        ],\n                                                        0\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'biquad',\n                                                [\n                                                    [\n                                                        'LiveSelect',\n                                                        'type',\n                                                        [\n                                                            'lowpass',\n                                                            'highpass',\n                                                            'bandpass',\n                                                            'lowshelf',\n                                                            'highshelf',\n                                                            'peaking',\n                                                            'notch',\n                                                            'allpass'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'LiveInt',\n                                                        'frequency',\n                                                        [\n                                                            0,\n                                                            22050\n                                                        ],\n                                                        350\n                                                    ],\n                                                    [\n                                                        'LiveFloat',\n                                                        'Q',\n                                                        [\n                                                            -4,\n                                                            4\n                                                        ],\n                                                        0\n                                                    ],\n                                                    // log Q\n                                                    [\n                                                        'LiveInt',\n                                                        'gain',\n                                                        [\n                                                            -30,\n                                                            30\n                                                        ],\n                                                        0\n                                                    ],\n                                                    [\n                                                        'LiveInt',\n                                                        'detune',\n                                                        [\n                                                            0,\n                                                            100\n                                                        ]\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'convolver',\n                                                [\n                                                    [\n                                                        'LiveFloat',\n                                                        'reverb',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        ['http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav']\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'equalizer',\n                                                [\n                                                    60,\n                                                    170,\n                                                    350,\n                                                    1000,\n                                                    3500,\n                                                    10000\n                                                ].map(function (freq) {\n                                                    return [\n                                                        'LiveInt',\n                                                        'gain' + freq,\n                                                        [\n                                                            -30,\n                                                            30\n                                                        ],\n                                                        0\n                                                    ];\n                                                })\n                                            ]\n                                        ],\n                                        'filter'\n                                    ],\n                                    [\n                                        'Group',\n                                        'destination',\n                                        [\n                                            [\n                                                'Checkbox',\n                                                'compressor'\n                                            ],\n                                            // Firefox compresses automatically?\n                                            [\n                                                'Checkbox',\n                                                'waveform'\n                                            ]\n                                        ]\n                                    ]\n                                ];\n                            }\n                        },\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(11);\n                            }\n                        }\n                    ]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            {\n                '11': 11,\n                '23': 23\n            }\n        ],\n        14: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ], [\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ], [\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ]);\n                var Lines = require(19);\n                var JsLines = require(18);\n                var WrapLines = require(26);\n                var InterleaveLines = require(17);\n                var RefLines = require(24);\n                var CollectionFeature = require(5);\n                function capitalize(s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                }\n                function toCamelCase(s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                }\n                var Source = function () {\n                    function Source(options, n) {\n                        babelHelpers.classCallCheck(this, Source);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Source.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return WrapLines.b('<div>', '</div>').ae(this.getElementHtmlLines(featureContext, i18n));\n                    };\n                    Source.prototype.getJsInitLines = function getJsInitLines(i18n) {\n                        return JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'var ' + this.nodeJsName + '=ctx.createMediaElementSource(document.getElementById(\\'' + this.elementHtmlName + '\\'));');\n                    };\n                    // abstract:\n                    // get type()\n                    // getElementHtmlLines(featureContext,i18n)\n                    babelHelpers.createClass(Source, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'elementHtmlName',\n                            get: function () {\n                                return 'my.' + this.type + this.nSuffix;\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return toCamelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Source;\n                }();\n                var sourceClasses = {\n                    audio: function (_Source) {\n                        babelHelpers.inherits(audio, _Source);\n                        function audio() {\n                            babelHelpers.classCallCheck(this, audio);\n                            return babelHelpers.possibleConstructorReturn(this, _Source.apply(this, arguments));\n                        }\n                        audio.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject, this.options.url, this.elementHtmlName, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        babelHelpers.createClass(audio, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'audio';\n                                }\n                            }]);\n                        return audio;\n                    }(Source),\n                    video: function (_Source2) {\n                        babelHelpers.inherits(video, _Source2);\n                        function video() {\n                            babelHelpers.classCallCheck(this, video);\n                            return babelHelpers.possibleConstructorReturn(this, _Source2.apply(this, arguments));\n                        }\n                        video.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject2, this.options.url, this.elementHtmlName, this.options.width, this.options.height, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        babelHelpers.createClass(video, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'video';\n                                }\n                            }]);\n                        return video;\n                    }(Source)\n                };\n                var SourceSet = function (_CollectionFeature) {\n                    babelHelpers.inherits(SourceSet, _CollectionFeature);\n                    function SourceSet() {\n                        babelHelpers.classCallCheck(this, SourceSet);\n                        return babelHelpers.possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    SourceSet.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return sourceClasses[entryOption.source];\n                    };\n                    SourceSet.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.entries.length > 0) {\n                            featureContext.audioProcessing = true;\n                        }\n                    };\n                    SourceSet.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioContext) {\n                            a.apply(undefined, this.entries.map(function (entry) {\n                                return entry.getJsInitLines(i18n);\n                            }));\n                        }\n                        return a.e();\n                    };\n                    SourceSet.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (featureContext.audioContext) {\n                            return this.entries.map(function (entry) {\n                                return entry.nodeJsName;\n                            });\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return SourceSet;\n                }(CollectionFeature);\n                module.exports = SourceSet;\n            },\n            {\n                '17': 17,\n                '18': 18,\n                '19': 19,\n                '24': 24,\n                '26': 26,\n                '5': 5\n            }\n        ],\n        15: [\n            function (require, module, exports) {\n                'use strict';\n                var CodeOutput = function () {\n                    function CodeOutput(generateCode, i18n) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, CodeOutput);\n                        var code = generateCode();\n                        var $sectionCode = {}, $sectionModeInput = {};\n                        var $jsSemicolonsCheckbox = undefined;\n                        var getHtmlDataUri = function (html) {\n                            return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                        };\n                        var getFormatting = function () {\n                            return {\n                                refs: _this.refs,\n                                jsSemicolons: $jsSemicolonsCheckbox.prop('checked')\n                            };\n                        };\n                        var writeControls = function () {\n                            return $('<div>').append($('<button type=\\'button\\'>' + i18n('code-output.run') + '</button>').click(function () {\n                                /*\r\n    // doesn't work in IE\r\n    window.open(getHtmlDataUri(\r\n    \tcode.get(this.formatting).join(\"\\n\")\r\n    ),\"generatedCode\");\r\n    */\n                                var w = window.open('', 'generatedCode');\n                                w.document.open();\n                                w.document.write(code.get(getFormatting()).join('\\n'));\n                                w.document.close();\n                            })).append(' ').append($('<button type=\\'button\\'>Open in CodePen</button>').click(function () {\n                                // http://blog.codepen.io/documentation/api/prefill/\n                                var sections = code.extractSections({\n                                    html: 'body',\n                                    css: 'paste',\n                                    js: 'paste'\n                                });\n                                var getSection = function (sectionName) {\n                                    return sections[sectionName].get(getFormatting()).join('\\n');\n                                };\n                                $('<form method=\\'post\\' action=\\'http://codepen.io/pen/define/\\'>').append($('<input type=\\'hidden\\' name=\\'data\\'>').val(JSON.stringify({\n                                    html: getSection('html'),\n                                    css: getSection('css'),\n                                    js: getSection('js'),\n                                    title: code.title\n                                }))).appendTo('body').submit();\n                            })).append(' ').append($('<button type=\\'button\\'>Open in JSFiddle</button>').click(function () {\n                                // http://doc.jsfiddle.net/api/post.html\n                                var sections = code.extractSections({\n                                    html: 'body',\n                                    css: 'paste',\n                                    js: 'paste'\n                                });\n                                var writeSection = function (sectionName) {\n                                    return $('<input type=\\'hidden\\'>').attr('name', sectionName).val(sections[sectionName].get(getFormatting()).join('\\n'));\n                                };\n                                $('<form method=\\'post\\' action=\\'http://jsfiddle.net/api/post/library/pure/\\'>').append(writeSection('html')).append(writeSection('css')).append(writeSection('js')).append($('<input type=\\'hidden\\' name=\\'title\\'>').val(code.title)).append('<input type=\\'hidden\\' name=\\'wrap\\' value=\\'b\\'>').appendTo('body').submit();\n                            })).append(' <span class=\\'tip-warn\\'><span class=\\'tip-content\\'>' + i18n('code-output.warning.jsfiddle-run') + '</span></span>');\n                        };\n                        var getSectionModes = function () {\n                            return {\n                                html: $sectionModeInput['html'].val(),\n                                css: $sectionModeInput['css'].val(),\n                                js: $sectionModeInput['js'].val()\n                            };\n                        };\n                        var extractCode = function () {\n                            var sectionModes = getSectionModes();\n                            var sections = code.extractSections(sectionModes);\n                            for (var sectionName in sections) {\n                                if (sectionModes[sectionName] == 'embed') {\n                                    $sectionCode[sectionName].empty().append('<p>' + i18n('code-output.embedded') + '</p>');\n                                } else {\n                                    var $code = undefined;\n                                    $sectionCode[sectionName].empty().append($('<pre>').append($code = $('<code class=\\'' + sectionName + '\\'>')));\n                                    $code.html(sections[sectionName].getHtml(getFormatting()).join('\\n'));\n                                    if (window.hljs) {\n                                        hljs.highlightBlock($code[0]);\n                                    }\n                                }\n                            }\n                        };\n                        var writeFormattingControls = function () {\n                            return $('<details>').append('<summary>Formatting</summary>').append($('<div>').append($('<label>').append($jsSemicolonsCheckbox = $('<input type=\\'checkbox\\'>').change(extractCode)).append(' JavaScript semicolons')));\n                        };\n                        var writeSection = function (sectionName) {\n                            var extractable = sectionName != 'html';\n                            var $summary = $('<summary>' + i18n('code-output.section.' + sectionName) + '</summary>');\n                            var $saveButton = undefined;\n                            $summary.append(' ').append($sectionModeInput[sectionName] = $('<select>').append((sectionName == 'html' ? [\n                                'full',\n                                'body'\n                            ] : [\n                                'embed',\n                                'paste',\n                                'file'\n                            ]).map(function (mode) {\n                                return $('<option>').val(mode).html(i18n('code-output.mode.' + mode));\n                            })).change(function () {\n                                if (extractable) {\n                                    $saveButton.prop('disabled', this.value == 'embed');\n                                }\n                                extractCode();\n                            }));\n                            $summary.append(' ').append(/*\r\n   // doesn't work in IE\r\n   $(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n   \t// yes I want a button, but download attr is only available for links\r\n   \t$(this).attr('href',getHtmlDataUri(\r\n   \t\tsection.get(this.formatting).join(\"\\n\")\r\n   \t));\r\n   })\r\n   */\n                            $saveButton = $('<button type=\\'button\\'>' + i18n('code-output.save') + '</button>').click(function () {\n                                var section = code.extractSections(getSectionModes())[sectionName];\n                                // http://stackoverflow.com/a/24354303\n                                var blob = new Blob([section.get(getFormatting()).join('\\n')], { type: section.mimeType });\n                                if (navigator.msSaveOrOpenBlob) {\n                                    navigator.msSaveOrOpenBlob(blob, section.filename);\n                                } else {\n                                    var $a = $('<a>').attr('download', section.filename).attr('href', URL.createObjectURL(blob)).appendTo('body');\n                                    $a.get(0).click();\n                                    $a.remove();\n                                }\n                            }));\n                            if (extractable) {\n                                $saveButton.prop('disabled', $sectionModeInput[sectionName].val() == 'embed');\n                            }\n                            return $('<details>').append($summary).append($sectionCode[sectionName] = $('<div class=\\'code\\'>'));\n                        };\n                        var $output = $('<div class=\\'code-output\\'>').append(writeControls()).append(writeFormattingControls()).append(writeSection('html')).append(writeSection('css')).append(writeSection('js'));\n                        if (!window.hljs) {\n                            $output.append('<p>' + i18n('code-output.warning.no-hljs') + '</p>');\n                        }\n                        $output.append(writeControls());\n                        extractCode();\n                        var delay = 200;\n                        var timeoutId = null;\n                        var update = function () {\n                            clearTimeout(timeoutId);\n                            timeoutId = setTimeout(function () {\n                                code = generateCode();\n                                extractCode();\n                            }, delay);\n                        };\n                        // public props:\n                        this.$output = $output;\n                        this.update = update;\n                    }\n                    // private interface:\n                    babelHelpers.createClass(CodeOutput, [{\n                            key: 'refs',\n                            get: function () {\n                                return {};\n                            }\n                        }]);\n                    return CodeOutput;\n                }();\n                module.exports = CodeOutput;\n            },\n            {}\n        ],\n        16: [\n            function (require, module, exports) {\n                'use strict';\n                var CodeSection = function () {\n                    function CodeSection(filename, mimeType, lines) {\n                        babelHelpers.classCallCheck(this, CodeSection);\n                        this.filename = filename;\n                        this.mimeType = mimeType;\n                        this.lines = lines;\n                    }\n                    CodeSection.prototype.get = function get(formatting) {\n                        return this.lines.get(formatting);\n                    };\n                    CodeSection.prototype.getHtml = function getHtml(formatting) {\n                        return this.lines.getHtml(formatting);\n                    };\n                    return CodeSection;\n                }();\n                module.exports = CodeSection;\n            },\n            {}\n        ],\n        17: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var InterleaveLines = function (_Lines) {\n                    babelHelpers.inherits(InterleaveLines, _Lines);\n                    function InterleaveLines() {\n                        babelHelpers.classCallCheck(this, InterleaveLines);\n                        return babelHelpers.possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    InterleaveLines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var first = true;\n                        var fp = function () {\n                            if (first) {\n                                first = false;\n                            } else {\n                                out.push('');\n                            }\n                        };\n                        this.data.forEach(function (item) {\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (subOut.length > 0) {\n                                    fp();\n                                    out.push.apply(out, subOut);\n                                }\n                            } else if (typeof item == 'string') {\n                                fp();\n                                var s = html ? Lines.strHtmlEscape(item) : item;\n                                out.push(s);\n                            }\n                        });\n                        return out;\n                    };\n                    return InterleaveLines;\n                }(Lines);\n                module.exports = InterleaveLines;\n            },\n            { '19': 19 }\n        ],\n        18: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var JsLines = function (_Lines) {\n                    babelHelpers.inherits(JsLines, _Lines);\n                    function JsLines() {\n                        babelHelpers.classCallCheck(this, JsLines);\n                        return babelHelpers.possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    JsLines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        if (formatting.jsSemicolons) {\n                            return s.replace(/^;/, '');\n                        } else {\n                            return s.replace(/;$/, '');\n                        }\n                    };\n                    return JsLines;\n                }(Lines);\n                module.exports = JsLines;\n            },\n            { '19': 19 }\n        ],\n        19: [\n            function (require, module, exports) {\n                'use strict';\n                /*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t);\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t);\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b();\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t);\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t);\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t);\r\n\treturn a.e();\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\n                var TO = {};\n                // TODO Symbol\n                var Lines = function () {\n                    // lines private interface:\n                    function Lines(data) {\n                        babelHelpers.classCallCheck(this, Lines);\n                        if (!Array.isArray(data)) {\n                            throw new TypeError('attempted to construct Lines with non-array data argument');\n                        }\n                        this.data = data;\n                    }\n                    Lines.prototype.isDataEmpty = function isDataEmpty() {\n                        for (var i = 0; i < this.data.length; i++) {\n                            var item = this.data[i];\n                            if (item instanceof Lines) {\n                                if (!item.isEmpty()) {\n                                    return false;\n                                }\n                            } else if (typeof item == 'string') {\n                                return false;\n                            }\n                        }\n                        return true;\n                    };\n                    Lines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        return s;\n                    };\n                    Lines.prototype.doGet = function doGet(formatting, html) {\n                        var _this = this;\n                        var out = [];\n                        var addTo = false;\n                        this.data.forEach(function (item) {\n                            if (item === TO) {\n                                addTo = true;\n                            } else if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (addTo) {\n                                    out.push(out.pop() + subOut.shift());\n                                }\n                                out.push.apply(out, subOut);\n                                addTo = false;\n                            } else if (typeof item == 'string') {\n                                item = _this.processStringInGet(item, formatting);\n                                var s = html ? Lines.strHtmlEscape(item) : item;\n                                if (addTo) {\n                                    out.push(out.pop() + s);\n                                } else {\n                                    out.push(s);\n                                }\n                                addTo = false;\n                            }\n                        });\n                        return out;\n                    };\n                    // lines public interface:\n                    Lines.b = function b() {\n                        var _this2 = this, _arguments = arguments;\n                        var data = [];\n                        var makeLines = function () {\n                            return new (Function.prototype.bind.apply(_this2, [null].concat([data], Array.prototype.slice.call(_arguments))))();\n                        };\n                        var a = function () {\n                            return a.a.apply(a, arguments);\n                        };\n                        a.a = function () {\n                            data.push.apply(data, arguments);\n                            return this;\n                        };\n                        a.t = function () {\n                            data.push.apply(data, [TO].concat(Array.prototype.slice.call(arguments)));\n                            return this;\n                        };\n                        a.e = makeLines;\n                        a.ae = function () {\n                            return this.a.apply(this, arguments).e();\n                        };\n                        return a;\n                    };\n                    Lines.ba = function ba() {\n                        var _b;\n                        return (_b = this.b()).a.apply(_b, arguments);\n                    };\n                    Lines.be = function be() {\n                        return this.b().e();\n                    };\n                    Lines.bae = function bae() {\n                        var _b2;\n                        return (_b2 = this.b()).a.apply(_b2, arguments).e();\n                    };\n                    Lines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    Lines.prototype.get = function get(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, false);\n                    };\n                    Lines.prototype.getHtml = function getHtml(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, true);\n                    };\n                    // string utilities:\n                    Lines.strRepeat = function strRepeat(s, n) {\n                        return Array(n + 1).join(s);\n                    };\n                    Lines.strHtmlEscape = function strHtmlEscape(s) {\n                        var entityMap = {\n                            '&': '&amp;',\n                            '<': '&lt;',\n                            '>': '&gt;',\n                            '\"': '&quot;',\n                            '\\'': '&#39;'\n                        };\n                        return String(s).replace(/[&<>\"']/g, function (m) {\n                            return entityMap[m];\n                        });\n                    };\n                    Lines.html = function html(strings) {\n                        var _arguments2 = arguments;\n                        // html template tag\n                        // usage example for attributes: Lines.html`<input type=text value=${value}>`\n                        // usage example for elements: Lines.html`<option>${option}</option>`\n                        return strings.reduce(function (r, s, i) {\n                            var v = _arguments2[i];\n                            switch (r.slice(-1)) {\n                            case '=':\n                                if (v === false) {\n                                    return r.replace(/\\s+[a-zA-Z0-9-]+=$/, '') + s;    // TODO more permitting attr name regexp\n                                } else if (v === true) {\n                                    return r.replace(/=$/, '') + s;\n                                }\n                                v = String(v).replace(/&/g, '&amp;');\n                                if (v == '') {\n                                    return r.replace(/=$/, '') + s;\n                                } else if (!/[\\s\"'=<>`]/.test(v)) {\n                                    return r + v + s;\n                                } else if (!/'/.test(v)) {\n                                    return r + '\\'' + v + '\\'' + s;\n                                } else {\n                                    v = v.replace(/\"/g, '&quot;');\n                                    return r + '\"' + v + '\"' + s;\n                                }\n                            case '>':\n                                v = String(v).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n                                return r + v + s;\n                            }\n                            throw new Error('invalid character before substitution');\n                        });\n                    };\n                    return Lines;\n                }();\n                module.exports = Lines;\n            },\n            {}\n        ],\n        20: [\n            function (require, module, exports) {\n                'use strict';\n                var WrapLines = require(26);\n                var NoseWrapLines = function (_WrapLines) {\n                    babelHelpers.inherits(NoseWrapLines, _WrapLines);\n                    function NoseWrapLines() {\n                        babelHelpers.classCallCheck(this, NoseWrapLines);\n                        return babelHelpers.possibleConstructorReturn(this, _WrapLines.apply(this, arguments));\n                    }\n                    NoseWrapLines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    NoseWrapLines.prototype.doGet = function doGet(formatting, html) {\n                        if (this.isEmpty()) {\n                            return [];\n                        } else {\n                            return _WrapLines.prototype.doGet.call(this, formatting, html);\n                        }\n                    };\n                    return NoseWrapLines;\n                }(WrapLines);\n                module.exports = NoseWrapLines;\n            },\n            { '26': 26 }\n        ],\n        21: [\n            function (require, module, exports) {\n                'use strict';\n                // constructors typically called from Options class\n                // to call them manually, use the following args:\n                //\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\n                // the rest of arguments' order is not settled, don't use them\n                // \t+ TODO not sure about data\n                /*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    function _class(name, _1, _2, _3, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class);\n                        this.name = name;\n                        this.isVisible = isVisible;\n                        this.updateCallback = updateCallback;\n                        this.fullName = fullName;\n                        this._$ = null;\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    babelHelpers.createClass(_class, [{\n                            key: '$',\n                            get: function () {\n                                return this._$;\n                            },\n                            set: function ($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    babelHelpers.inherits(_class2, _Option$Base);\n                    function _class2(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class2);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        if (defaultValue !== undefined) {\n                            _this.defaultValue = defaultValue;\n                        } else {\n                            _this.defaultValue = availableValues[0];\n                        }\n                        if (typeof data == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    babelHelpers.createClass(_class2, [{\n                            key: 'value',\n                            get: function () {\n                                return this._value;\n                            },\n                            set: function (value) {\n                                this._value = value;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.BooleanInput = function (_Option$Input) {\n                    babelHelpers.inherits(_class3, _Option$Input);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBooleanInput = function (_Option$Input2) {\n                    babelHelpers.inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        babelHelpers.classCallCheck(this, _class4);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function () {\n                                return value;\n                            },\n                            toString: function () {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.FactorInput = function (_Option$NonBooleanInp) {\n                    babelHelpers.inherits(_class5, _Option$NonBooleanInp);\n                    function _class5(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class5);\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp.apply(this, arguments));\n                        _this4.availableValues = availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBooleanInput);\n                Option.RangeInput = function (_Option$NonBooleanInp2) {\n                    babelHelpers.inherits(_class6, _Option$NonBooleanInp2);\n                    function _class6(name, availableRange, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class6);\n                        var _this5 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp2.apply(this, arguments));\n                        _this5.availableMin = availableRange[0];\n                        _this5.availableMax = availableRange[1];\n                        return _this5;\n                    }\n                    return _class6;\n                }(Option.NonBooleanInput);\n                Option.Collection = function (_Option$Base2) {\n                    babelHelpers.inherits(_class7, _Option$Base2);\n                    function _class7(name, entries, _1, _2, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class7);\n                        var _this6 = babelHelpers.possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = entries;\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        this.entries.forEach(function (entry) {\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        });\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        this.entries.forEach(function (entry) {\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        });\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    babelHelpers.inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        babelHelpers.classCallCheck(this, _class8);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$BooleanInput) {\n                    babelHelpers.inherits(_class9, _Option$BooleanInput);\n                    function _class9(name, _, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class9);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$BooleanInput.call(this, name, undefined, !!defaultValue, data, fullName, isVisible, updateCallback));\n                    }\n                    return _class9;\n                }(Option.BooleanInput);\n                Option.Select = function (_Option$FactorInput) {\n                    babelHelpers.inherits(_class10, _Option$FactorInput);\n                    function _class10() {\n                        babelHelpers.classCallCheck(this, _class10);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.FactorInput);\n                Option.Text = function (_Option$FactorInput2) {\n                    babelHelpers.inherits(_class11, _Option$FactorInput2);\n                    function _class11() {\n                        babelHelpers.classCallCheck(this, _class11);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.FactorInput);\n                Option.Int = function (_Option$RangeInput) {\n                    babelHelpers.inherits(_class12, _Option$RangeInput);\n                    function _class12() {\n                        babelHelpers.classCallCheck(this, _class12);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$RangeInput.apply(this, arguments));\n                    }\n                    return _class12;\n                }(Option.RangeInput);\n                Option.Root = function (_Option$Collection) {\n                    babelHelpers.inherits(_class13, _Option$Collection);\n                    function _class13() {\n                        babelHelpers.classCallCheck(this, _class13);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class13;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    babelHelpers.inherits(_class14, _Option$Collection2);\n                    function _class14() {\n                        babelHelpers.classCallCheck(this, _class14);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class14;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    babelHelpers.inherits(_class15, _Option$Base4);\n                    function _class15(name, availableConstructors, typePropertyName, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class15);\n                        var _this14 = babelHelpers.possibleConstructorReturn(this, _Option$Base4.call(this, name, undefined, undefined, undefined, fullName, isVisible, updateCallback));\n                        _this14.availableConstructors = availableConstructors;\n                        // Map {type:constructor}\n                        if (typePropertyName === undefined)\n                            typePropertyName = 'type';\n                        _this14.typePropertyName = typePropertyName;\n                        _this14._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if (typeof data == 'object') {\n                            subDatas = data.value;\n                        }\n                        var defaultType = _this14.availableTypes[0];\n                        for (var i = 0; i < subDatas.length; i++) {\n                            var subData = subDatas[i];\n                            var subType = defaultType;\n                            if (typeof subData == 'object' && subData[typePropertyName] !== undefined) {\n                                subType = subData[typePropertyName];\n                            }\n                            var subCtor = _this14.availableConstructors.get(subType);\n                            if (subCtor) {\n                                _this14._entries.push(subCtor(subData));\n                            }\n                        }\n                        return _this14;\n                    }\n                    _class15.prototype.addEntry = function addEntry(type) {\n                        var entry = this.availableConstructors.get(type)();\n                        this._entries.push(entry);\n                        this.updateCallback();\n                        return entry;\n                    };\n                    _class15.prototype.export = function _export() {\n                        var _this15 = this;\n                        var defaultType = this.availableTypes[0];\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != defaultType)\n                                    subData[_this15.typePropertyName] = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class15.prototype.fix = function fix() {\n                        var _this16 = this;\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if (typeof subFixed == 'object')\n                                    subFixed[_this16.typePropertyName] = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    babelHelpers.createClass(_class15, [\n                        {\n                            key: 'availableTypes',\n                            get: function () {\n                                var types = [];\n                                this.availableConstructors.forEach(function (_, type) {\n                                    types.push(type);\n                                });\n                                return types;\n                            }\n                        },\n                        {\n                            key: 'entries',\n                            get: function () {\n                                return this._entries;\n                            },\n                            set: function (entries) {\n                                this._entries = entries;\n                                this.updateCallback();\n                            }\n                        }\n                    ]);\n                    return _class15;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        22: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require(21);\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = new Map();\n                        this.setOptionClassWriters(optionClassWriters);\n                        function write(option) {\n                            var optionProto = option;\n                            while (optionProto = Object.getPrototypeOf(optionProto)) {\n                                var optionClassWriter = optionClassWriters.get(optionProto.constructor);\n                                if (optionClassWriter) {\n                                    return optionClassWriter(option, write, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = write(options.root);\n                    }\n                    // override this fn for custom writers\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        optionClassWriters.set(Option.Root, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Group, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Void, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'option void\\'>').html(i18n('options.' + option.fullName));\n                        });\n                        optionClassWriters.set(Option.Checkbox, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').prop('checked', option.value).change(function () {\n                                option.value = $(this).prop('checked');\n                            })).append(' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                        });\n                        optionClassWriters.set(Option.Select, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }));\n                        });\n                        optionClassWriters.set(Option.Text, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var listId = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($('<input type=\\'text\\' id=\\'' + id + '\\' list=\\'' + listId + '\\' />').val(option.value).on('input change', function () {\n                                option.value = this.value;\n                            })).append(' ').append($('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').text(availableValue);\n                            })));\n                        });\n                        optionClassWriters.set(Option.Int, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($('<input type=\\'number\\' id=\\'' + id + '\\' required />').val(option.value).attr('min', option.availableMin).attr('max', option.availableMax).attr('step', option.step).on('input change', function () {\n                                if (this.checkValidity()) {\n                                    option.value = this.value;\n                                }\n                            }));\n                        });\n                        optionClassWriters.set(Option.Array, function (option, writeOption, i18n, generateId) {\n                            var $dragged = null;\n                            var $entries = undefined;\n                            var updateArrayEntries = function () {\n                                option.entries = $entries.children().map(function () {\n                                    return $(this).data('option');\n                                }).get();\n                            };\n                            var writeDraggableOption = function (option) {\n                                // have to make drag handler 'draggable', not the whole item\n                                // because inputs and labels don't like to be inside 'draggable'\n                                // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                                return $('<div class=\\'draggable-with-handle\\'>').data('option', option).append($('<div draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag') + '\\'>').on('dragstart', function (ev) {\n                                    $dragged = $(this).parent();\n                                    ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                                    ev.originalEvent.dataTransfer.setData('Text', name);\n                                    if (ev.originalEvent.dataTransfer.setDragImage) {\n                                        // doesn't work in IE\n                                        ev.originalEvent.dataTransfer.setDragImage($dragged[0], 0, 0);\n                                    }\n                                    setTimeout(function () {\n                                        $dragged.addClass('ghost');\n                                    }, 0);\n                                }).keydown(function (ev) {\n                                    var $handle = $(this);\n                                    var $sorted = $handle.parent();\n                                    if (ev.keyCode == 38) {\n                                        $sorted.prev().before($sorted);\n                                        $handle.focus();\n                                        updateArrayEntries();\n                                        return false;\n                                    } else if (ev.keyCode == 40) {\n                                        $sorted.next().after($sorted);\n                                        $handle.focus();\n                                        updateArrayEntries();\n                                        return false;\n                                    }\n                                })).append(writeOption(option)).append(//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>×</div>\")\n                                $('<div tabindex=\\'0\\' class=\\'delete\\' title=\\'' + i18n('options-output.delete') + '\\'>').click(function () {\n                                    $(this).parent().remove();\n                                    updateArrayEntries();\n                                }).keydown(function (ev) {\n                                    if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                        $(this).parent().remove();\n                                        updateArrayEntries();\n                                        return false;\n                                    }\n                                })).on('dragover', function (ev) {\n                                    ev.preventDefault();\n                                    ev.originalEvent.dataTransfer.dropEffect = 'move';\n                                    var $target = $(this);\n                                    if ($dragged) {\n                                        if ($target.nextAll().is($dragged)) {\n                                            $target.before($dragged);\n                                            updateArrayEntries();\n                                        } else if ($target.prevAll().is($dragged)) {\n                                            $target.after($dragged);\n                                            updateArrayEntries();\n                                        }\n                                    }\n                                }).on('drop', function (ev) {\n                                    ev.preventDefault();\n                                }).on('dragend', function (ev) {\n                                    ev.preventDefault();\n                                    if ($dragged) {\n                                        $dragged.removeClass('ghost');\n                                        $dragged = null;\n                                    }\n                                });\n                            };\n                            option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append($entries = $('<div>').append(option.entries.map(writeDraggableOption)));\n                            var $buttons = $('<div>');\n                            option.availableTypes.forEach(function (type, i) {\n                                if (i)\n                                    $buttons.append(' ');\n                                $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                    var entry = option.addEntry(type);\n                                    $entries.append(writeDraggableOption(entry));\n                                }));\n                            });\n                            option.$.append($buttons);\n                            return option.$;\n                        });\n                    };\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            { '21': 21 }\n        ],\n        23: [\n            function (require, module, exports) {\n                'use strict';\n                var Options = function () {\n                    function Options(data) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        this.updateCallback = undefined;\n                        // general update callback for stuff like regenerating the code\n                        var simpleUpdateCallback = function () {\n                            if (_this.updateCallback)\n                                _this.updateCallback();\n                        };\n                        var Option = this.optionClasses;\n                        var optionByFullName = {};\n                        var optionsWithVisibilityAffectedByFullName = {};\n                        var makeEntry = function (description, fullNamePath, data, isInsideArray) {\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var name = description[1];\n                            var fullName = fullNamePath + name;\n                            var ctorArgsDescription = description.slice(2);\n                            var contents = [];\n                            var defaultValue = undefined;\n                            var visibilityData = {};\n                            var nScalars = 0;\n                            var nArrays = 0;\n                            var nObjects = 0;\n                            for (var i = 0; i < ctorArgsDescription.length; i++) {\n                                var arg = ctorArgsDescription[i];\n                                if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                    if (nScalars == 0) {\n                                        defaultValue = arg;\n                                    } else {\n                                        throw new Error('too many scalar arguments');\n                                    }\n                                    nScalars++;\n                                } else if (Array.isArray(arg)) {\n                                    if (nArrays == 0) {\n                                        if (!isInsideArray && className == 'Array') {\n                                            // TODO test array inside array\n                                            contents = new Map();\n                                            arg.forEach(function (x) {\n                                                var type = x[1];\n                                                var ctor = function (subData) {\n                                                    return makeEntry(x, fullName + '.', subData, true);\n                                                };\n                                                contents.set(type, ctor);\n                                            });\n                                        } else {\n                                            contents = arg.map(function (x) {\n                                                if (Array.isArray(x)) {\n                                                    var subName = x[1];\n                                                    var subData = undefined;\n                                                    if (typeof data == 'object')\n                                                        subData = data[subName];\n                                                    return makeEntry(x, fullName + '.', subData, isInsideArray);    // nested option\n                                                } else {\n                                                    return x;    // available value / value range boundary\n                                                }\n                                            });\n                                        }\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nArrays++;\n                                } else if (!isInsideArray && arg instanceof Object) {\n                                    if (nObjects == 0) {\n                                        visibilityData = arg;\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nObjects++;\n                                } else {\n                                    throw new Error('unknown argument type');\n                                }\n                            }\n                            var isVisible = undefined, updateCallback = undefined;\n                            if (isInsideArray) {\n                                updateCallback = simpleUpdateCallback;\n                                isVisible = function () {\n                                    return true;\n                                };\n                            } else {\n                                isVisible = function () {\n                                    for (var testName in visibilityData) {\n                                        var value = optionByFullName[testName].value;\n                                        if (visibilityData[testName].indexOf(value) < 0) {\n                                            return false;\n                                        }\n                                    }\n                                    return true;\n                                };\n                                updateCallback = function () {\n                                    if (optionsWithVisibilityAffectedByFullName[fullName] !== undefined) {\n                                        optionsWithVisibilityAffectedByFullName[fullName].forEach(function (option) {\n                                            option.updateVisibility();\n                                        });\n                                    }\n                                    if (_this.updateCallback)\n                                        _this.updateCallback();\n                                };\n                            }\n                            var option = new Option[className](name, contents, defaultValue, data, fullName, isVisible, updateCallback);\n                            if (!isInsideArray) {\n                                optionByFullName[fullName] = option;\n                                for (var testName in visibilityData) {\n                                    if (optionsWithVisibilityAffectedByFullName[testName] === undefined) {\n                                        optionsWithVisibilityAffectedByFullName[testName] = [];\n                                    }\n                                    optionsWithVisibilityAffectedByFullName[testName].push(option);\n                                }\n                            }\n                            return option;\n                        };\n                        this.root = new Option.Root(null, this.entriesDescription.map(function (description) {\n                            var subName = description[1];\n                            var subData = undefined;\n                            if (typeof data == 'object')\n                                subData = data[subName];\n                            return makeEntry(description, '', subData, false);\n                        }), undefined, data, null, function () {\n                            return true;\n                        }, simpleUpdateCallback);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(21);\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { '21': 21 }\n        ],\n        24: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var RefLines = function (_Lines) {\n                    babelHelpers.inherits(RefLines, _Lines);\n                    function RefLines(data, ref) {\n                        babelHelpers.classCallCheck(this, RefLines);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.ref = ref;\n                        return _this;\n                    }\n                    RefLines.parse = function parse(s) {\n                        var a = Lines.ba('');\n                        var re = /^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/;\n                        for (; s.length > 0;) {\n                            var match = re.exec(s);\n                            if (match) {\n                                a.t(match[1]);\n                                a.t(this.b(match[3]).ae(match[2]));\n                                s = s.substr(match[0].length);\n                            } else {\n                                a.t(s);\n                                break;\n                            }\n                        }\n                        return a.e();\n                    };\n                    RefLines.prototype.doGet = function doGet(formatting, html) {\n                        var plainOut = _Lines.prototype.doGet.call(this, formatting, html);\n                        var href = undefined;\n                        if (html && typeof formatting.refs == 'object') {\n                            href = formatting.refs[this.ref];\n                        }\n                        if (href !== undefined) {\n                            return plainOut.map(function (s) {\n                                return '<a href=\\'' + Lines.strHtmlEscape(href) + '\\'>' + s + '</a>';\n                            });\n                        } else {\n                            return plainOut;\n                        }\n                    };\n                    return RefLines;\n                }(Lines);\n                module.exports = RefLines;\n            },\n            { '19': 19 }\n        ],\n        25: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ], [\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<script src=',\n                        '></script>'\n                    ], [\n                        '<script src=',\n                        '></script>'\n                    ]), _templateObject3 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<html lang=',\n                        '>'\n                    ], [\n                        '<html lang=',\n                        '>'\n                    ]);\n                var Lines = require(19);\n                var NoseWrapLines = require(20);\n                var CodeSection = require(16);\n                var WebCode = function () {\n                    function WebCode() {\n                        babelHelpers.classCallCheck(this, WebCode);\n                    }\n                    WebCode.prototype.get = function get(formatting) {\n                        return this.getLines().get(formatting);\n                    };\n                    WebCode.prototype.getHtml = function getHtml(formatting) {\n                        return this.getLines().getHtml(formatting);\n                    };\n                    WebCode.prototype.extractSections = function extractSections(sectionModes) {\n                        if (sectionModes === undefined) {\n                            sectionModes = {};\n                        }\n                        var stylePlaceLines = NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines);\n                        var styleExtractLines = Lines.be();\n                        if (sectionModes.css == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                stylePlaceLines = Lines.be();\n                            } else {\n                                stylePlaceLines = Lines.bae('<!-- <style> ' + this.getSectionPasteComment('css') + ' </style> -->');\n                            }\n                            styleExtractLines = this.cachedStyleLines;\n                        } else if (sectionModes.css == 'file') {\n                            stylePlaceLines = Lines.bae(Lines.html(_templateObject, this.basename + '.css'));\n                            styleExtractLines = this.cachedStyleLines;\n                        }\n                        var scriptPlaceLines = NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines);\n                        var scriptExtractLines = Lines.be();\n                        if (sectionModes.js == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                scriptPlaceLines = Lines.be();\n                            } else {\n                                scriptPlaceLines = Lines.bae('<!-- <script> ' + this.getSectionPasteComment('js') + ' </script> -->');\n                            }\n                            scriptExtractLines = this.cachedScriptLines;\n                        } else if (sectionModes.js == 'file') {\n                            scriptPlaceLines = Lines.bae(Lines.html(_templateObject2, this.basename + '.js'));\n                            scriptExtractLines = this.cachedScriptLines;\n                        }\n                        var htmlExtractLines = undefined;\n                        if (sectionModes.html == 'body') {\n                            htmlExtractLines = this.getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        } else {\n                            htmlExtractLines = this.getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        }\n                        var type = function (sectionName) {\n                            return 'text/' + (sectionName == 'js' ? 'javascript' : sectionName);\n                        };\n                        return {\n                            html: new CodeSection(this.filename, type('html'), htmlExtractLines),\n                            css: new CodeSection(this.basename + '.css', type('css'), styleExtractLines),\n                            js: new CodeSection(this.basename + '.js', type('js'), scriptExtractLines)\n                        };\n                    };\n                    // get title()\n                    // private:\n                    WebCode.prototype.getLines = function getLines() {\n                        return this.getFullHtmlSectionLines(NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines), NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines));\n                    };\n                    WebCode.prototype.getFullHtmlSectionLines = function getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        var a = Lines.b();\n                        a('<!DOCTYPE html>');\n                        if (this.lang !== null) {\n                            a(Lines.html(_templateObject3, this.lang));\n                        } else {\n                            a('<html>');\n                        }\n                        a('<head>', '<meta charset=utf-8>');\n                        if (this.title !== null) {\n                            a('<title>' + this.title + '</title>');\n                        }\n                        a(stylePlaceLines, this.cachedHeadLines, '</head>', '<body>', this.cachedBodyLines, scriptPlaceLines, '</body>', '</html>');\n                        return a.e();\n                    };\n                    WebCode.prototype.getBodyHtmlSectionLines = function getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        return Lines.bae(stylePlaceLines, this.cachedBodyLines, scriptPlaceLines);\n                    };\n                    WebCode.prototype.getSectionPasteComment = function getSectionPasteComment(sectionName) {\n                        // section placeholder comment in paste mode - likely to be overridden with i18n\n                        return sectionName + ' goes here';\n                    };\n                    babelHelpers.createClass(WebCode, [\n                        {\n                            key: 'filename',\n                            // public:\n                            get: function () {\n                                return this.basename + '.html';\n                            }\n                        },\n                        {\n                            key: 'mimeType',\n                            get: function () {\n                                return 'text/html';\n                            }\n                        },\n                        {\n                            key: 'cachedStyleLines',\n                            get: function () {\n                                if (!this._styleLines)\n                                    this._styleLines = this.styleLines;\n                                return this._styleLines;\n                            }\n                        },\n                        {\n                            key: 'cachedHeadLines',\n                            get: function () {\n                                if (!this._headLines)\n                                    this._headLines = this.headLines;\n                                return this._headLines;\n                            }\n                        },\n                        {\n                            key: 'cachedBodyLines',\n                            get: function () {\n                                if (!this._bodyLines)\n                                    this._bodyLines = this.bodyLines;\n                                return this._bodyLines;\n                            }\n                        },\n                        {\n                            key: 'cachedScriptLines',\n                            get: function () {\n                                if (!this._scriptLines)\n                                    this._scriptLines = this.scriptLines;\n                                return this._scriptLines;\n                            }    // to be redefined in subclasses:\n                        },\n                        {\n                            key: 'basename',\n                            get: function () {\n                                // filename base\n                                return 'source';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                // language tag for <html lang='xx'> or null to skip it - likely read from i18n\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                // page title or null to skip it\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                // contents of <style>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'headLines',\n                            get: function () {\n                                // contents of <head> following <style>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                // contents of <body> preceding <script>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                // contents of <script>\n                                return Lines.be();\n                            }\n                        }\n                    ]);\n                    return WebCode;\n                }();\n                /*\r\n\t// TODO implement indent reformatting like this:\r\n\tjoin(indent) {\r\n\t\treturn this.data.map(function(line){\r\n\t\t\treturn line.replace(/^(\\t)+/,function(match){\r\n\t\t\t\treturn Array(match.length+1).join(indent);\r\n\t\t\t});\r\n\t\t}).join('\\n');\r\n\t}\r\n*/\n                module.exports = WebCode;\n            },\n            {\n                '16': 16,\n                '19': 19,\n                '20': 20\n            }\n        ],\n        26: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(19);\n                var WrapLines = function (_Lines) {\n                    babelHelpers.inherits(WrapLines, _Lines);\n                    function WrapLines(data) {\n                        babelHelpers.classCallCheck(this, WrapLines);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.wrappers = [];\n                        for (var i = 1; i < arguments.length; i++) {\n                            _this.wrappers.push(arguments[i]);\n                        }\n                        return _this;\n                    }\n                    WrapLines.prototype.isEmpty = function isEmpty() {\n                        return false;\n                    };\n                    WrapLines.prototype.doGet = function doGet(formatting, html) {\n                        var _this2 = this;\n                        var out = [];\n                        var i = 0;\n                        var pushWrapper = function () {\n                            var item = _this2.wrappers[i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut);\n                            } else if (typeof item == 'string') {\n                                var s = html ? Lines.strHtmlEscape(item) : item;\n                                out.push(s);\n                            }\n                            i++;\n                        };\n                        pushWrapper();\n                        this.data.forEach(function (item) {\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut.map(function (s) {\n                                    return '\\t' + s;\n                                }));\n                                if (_this2.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            } else if (typeof item == 'string') {\n                                var s = html ? Lines.strHtmlEscape(item) : item;\n                                out.push('\\t' + s);\n                                if (_this2.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            }\n                        });\n                        if (this.wrappers.length == 2) {\n                            pushWrapper();\n                        }\n                        return out;\n                    };\n                    return WrapLines;\n                }(Lines);\n                module.exports = WrapLines;\n            },\n            { '19': 19 }\n        ]\n    }, {}, [10]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature.js')\r\n\r\nclass AudioContext extends Feature {\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.context')),\r\n\t\t\t\t\"var ctx=new (AudioContext || webkitAudioContext);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioContext\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature.js')\r\n\r\nclass Canvas extends Feature {\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=Lines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"<div>\",\r\n\t\t\t\t\"\t<canvas id=my.canvas width=300 height=100></canvas>\",\r\n\t\t\t\t\"</div>\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvas=document.getElementById('my.canvas');\",\r\n\t\t\t\t\"var canvasContext=canvas.getContext('2d');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\nconst BaseCodeOutput=require('crnx-base/code-output')\r\n\r\nclass CodeOutput extends BaseCodeOutput {\r\n\tget refs() {\r\n\t\treturn {\r\n\t\t\tcontext:     'https://www.w3.org/TR/webaudio/#AudioContext',\r\n\t\t\tsource:      'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\r\n\t\t\tgain:        'https://www.w3.org/TR/webaudio/#GainNode',\r\n\t\t\tpanner:      'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\r\n\t\t\tbiquad:      'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\r\n\t\t\tconvolver:   'https://www.w3.org/TR/webaudio/#ConvolverNode',\r\n\t\t\tpeaking:     'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\r\n\t\t\tdestination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\r\n\t\t\tcompressor:  'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\r\n\t\t\tanalyser:    'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nconst AudioContext=require('./audio-context.js')\r\nconst SourceSet=require('./source-set.js')\r\nconst FilterSequence=require('./filter-sequence.js')\r\nconst Destination=require('./destination.js')\r\nconst Canvas=require('./canvas.js')\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst BaseWebCode=require('crnx-base/web-code')\r\n\r\nclass Code extends BaseWebCode {\r\n\tconstructor(options,i18n) {\r\n\t\tsuper()\r\n\t\tthis.i18n=i18n\r\n\t\tthis.featureContext={}\r\n\t\tthis.features=[\r\n\t\t\tnew AudioContext,\r\n\t\t\tnew SourceSet(options.sources),\r\n\t\t\tnew FilterSequence(options.filters),\r\n\t\t\tnew Destination(options.destination),\r\n\t\t\tnew Canvas,\r\n\t\t]\r\n\t\tthis.features.forEach(feature=>{\r\n\t\t\tfeature.requestFeatureContext(this.featureContext)\r\n\t\t})\r\n\t}\r\n\tget basename() {\r\n\t\treturn 'webaudio'\r\n\t}\r\n\tget lang() {\r\n\t\treturn 'en'\r\n\t}\r\n\tget title() {\r\n\t\treturn \"WebAudio example - Generated code\"\r\n\t}\r\n\tget styleLines() {\r\n\t\tconst a=Lines.b()\r\n\t\tif (this.featureContext.alignedInputs) {\r\n\t\t\ta(\r\n\t\t\t\t\".aligned label {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 10em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"canvas {\",\r\n\t\t\t\t\"\tborder: 1px solid;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget bodyLines() {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getHtmlLines(this.featureContext,this.i18n))\r\n\t\t)\r\n\t}\r\n\tget scriptLines() {\r\n\t\tlet prevNodeJsNames\r\n\t\treturn InterleaveLines.bae(\r\n\t\t\t...this.features.map(feature=>{\r\n\t\t\t\tconst lines=feature.getJsInitLines(this.featureContext,this.i18n,prevNodeJsNames)\r\n\t\t\t\tprevNodeJsNames=feature.getNodeJsNames(this.featureContext,prevNodeJsNames)\r\n\t\t\t\treturn lines\r\n\t\t\t}),\r\n\t\t\tNoseWrapLines.b(\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"function visualize() {\"\r\n\t\t\t\t),\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"\trequestAnimationFrame(visualize);\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"requestAnimationFrame(visualize);\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopLines(this.featureContext,this.i18n))\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=Code\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst Feature=require('./feature.js')\r\n\r\nclass CollectionFeature extends Feature {\r\n\tconstructor(entryOptions) {\r\n\t\tsuper()\r\n\t\tconst entryCounts=new Map\r\n\t\tentryOptions.entries.forEach(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tentryCounts.set(entryClass,entryCounts.get(entryClass)+1||1)\r\n\t\t})\r\n\t\tconst entryCounts2=new Map\r\n\t\tthis.entries=entryOptions.entries.map(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tif (entryCounts.get(entryClass)>1) {\r\n\t\t\t\tconst n=entryCounts2.get(entryClass)||0\r\n\t\t\t\tentryCounts2.set(entryClass,n+1)\r\n\t\t\t\treturn new entryClass(entryOption,n)\r\n\t\t\t} else {\r\n\t\t\t\treturn new entryClass(entryOption)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(...this.entries.map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\t// abstract:\r\n\t// getEntryClass(entryOption) {}\r\n}\r\n\r\nmodule.exports=CollectionFeature\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature.js')\r\n\r\nclass Destination extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tif (this.options.compressor || this.options.waveform) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t}\r\n\t\tif (this.options.waveform) {\r\n\t\t\tfeatureContext.canvas=true\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=NoseWrapLines.b(\"<div>\",\"</div>\")\r\n\t\tif (featureContext.audioProcessing && this.options.compressor) {\r\n\t\t\ta(\r\n\t\t\t\t\"<input id=my.compressor type=checkbox checked>\",\r\n\t\t\t\tLines.html`<label for=my.compressor>${i18n('options.destination.compressor.enable')}</label>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioProcessing && featureContext.audioContext) {\r\n\t\t\tif (this.options.compressor) {\r\n\t\t\t\tlet nextNodeJsName=(this.options.waveform ? 'analyserNode' : 'ctx.destination')\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.compressor')),\r\n\t\t\t\t\t\"var compressorNode=ctx.createDynamicsCompressor();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(compressorNode);\")\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"document.getElementById('my.compressor').onchange=function(){\",\r\n\t\t\t\t\t\t\"\tif (this.checked) {\",\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(compressorNode);\"),\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\t\"};\",\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tprevNodeJsNames=['compressorNode']\r\n\t\t\t}\r\n\t\t\tif (this.options.waveform) {\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.waveform')),\r\n\t\t\t\t\t\"var analyserNode=ctx.createAnalyser();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(analyserNode);\"),\r\n\t\t\t\t\t\"analyserNode.fftSize=1024;\",\r\n\t\t\t\t\t\"var analyserData=new Uint8Array(analyserNode.frequencyBinCount);\",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t)\r\n\t\t\t\tprevNodeJsNames=['analyserNode']\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination')),\r\n\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(ctx.destination);\")\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsLoopLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioProcessing && this.options.waveform) {\r\n\t\t\ta(\r\n\t\t\t\t\"analyserNode.getByteTimeDomainData(analyserData);\",\r\n\t\t\t\t\"canvasContext.clearRect(0,0,canvas.width,canvas.height);\",\r\n\t\t\t\t\"canvasContext.beginPath();\",\r\n\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/analyserData.length;\",\r\n\t\t\t\t\"\tvar y=analyserData[i]*canvas.height/255;\",\r\n\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\"\t\tcanvasContext.moveTo(x,y);\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tcanvasContext.lineTo(x,y);\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"canvasContext.stroke();\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"ctx.destination\"]\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Destination\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature.js')\r\n\r\nfunction capitalize(s) {\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\nfunction toCamelCase(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n\r\nclass Filter {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tgetPropertyOptionName(property) {\r\n\t\treturn 'options.filters.'+this.type+'.'+property.name\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.'+propertyName+'.input')\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlPropertyLines(i18n,property) {\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tconst a=Lines.b()\r\n\t\tif (property.type=='range' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}</label>`,\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=range value=${option} min=${option.min} max=${option.max} step=${option.step!=1?option.step:false}>`\r\n\t\t\t)\r\n\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}</label>`,\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tLines.html`<select id=${inputHtmlName}>`,`</select>`\r\n\t\t\t\t).ae(\r\n\t\t\t\t\t...option.availableValues.map(value=>Lines.html`<option selected=${option.value==value}>${value}</option>`)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<span id=${inputHtmlName}>${i18n(this.getPropertyOptionName(property)+'.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget skipNode() {\r\n\t\treturn false\r\n\t}\r\n\t// { not called if skipNode is set\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn NoseWrapLines.b(\r\n\t\t\t\"<div>\",\"</div>\"\r\n\t\t).ae(\r\n\t\t\t...this.nodeProperties.map(property=>this.getHtmlPropertyLines(i18n,property))\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tget nodeJsNames() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\t// }\r\n\t// abstract:\r\n\t// get type()\r\n\t// get ctxCreateMethodName()\r\n\t// get nodeProperties()\r\n}\r\n\r\nclass SinglePathFilter extends Filter {\r\n\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\treturn Lines.bae(\r\n\t\t\tsuper.getJsInitLines(i18n,prevNodeJsNames),\r\n\t\t\t...this.nodeProperties.map(property=>{\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\tconst nodePropertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (option.input) {\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName(property.name)\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\t\t\t\tlet value=inputJsName+\".value\"\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t// was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".\"+eventProp+\"=function(){\",\r\n\t\t\t\t\t\t\"\t\"+nodePropertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (option.value!=option.defaultValue) {\r\n\t\t\t\t\tlet value=option.value\r\n\t\t\t\t\tif (property.type=='select') {\r\n\t\t\t\t\t\tvalue=\"'\"+value+\"'\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tnodePropertyJsName+\"=\"+value+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass PassiveByDefaultSinglePathFilter extends SinglePathFilter {\r\n\tget skipNode() {\r\n\t\treturn this.nodeProperties.every(property=>{\r\n\t\t\tconst option=this.options[property.name]\r\n\t\t\treturn option.value==option.defaultValue && !option.input\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'gain' }\r\n\t\tget ctxCreateMethodName() { return 'createGain' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tpanner: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'panner' }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends SinglePathFilter {\r\n\t\tget type()                { return 'biquad' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\t// lowshelf, highshelf and peaking are passive when gain==0\r\n\t\t\treturn (\r\n\t\t\t\t!this.options.type.input && ['lowshelf','highshelf','peaking'].indexOf(this.options.type.value)>=0 &&\r\n\t\t\t\t!this.options.gain.input && this.options.gain==0\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tconvolver: class extends Filter {\r\n\t\tget type()                { return 'convolver' }\r\n\t\tget ctxCreateMethodName() { return 'createConvolver' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'reverb',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'buffer',\r\n\t\t\t\t\ttype:'xhr',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget dryGainNodeJsName() {\r\n\t\t\treturn toCamelCase(this.type+this.nSuffix+'.dry.gain.node')\r\n\t\t}\r\n\t\tget wetGainNodeJsName() {\r\n\t\t\treturn toCamelCase(this.type+this.nSuffix+'.wet.gain.node')\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.options.reverb==0 && !this.options.reverb.input\r\n\t\t}\r\n\t\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\t\tconst messageHtmlName=this.getPropertyInputHtmlName('buffer')\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type)))\r\n\t\t\t} else {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')))\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.wetGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\tthis.nodeJsName+\".connect(\"+this.wetGainNodeJsName+\");\",\r\n\t\t\t\t\t\"var \"+this.dryGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.dryGainNodeJsName+\");\"\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.reverb.input) {\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('reverb')\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName('reverb')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\t\"xhr.open('GET','\"+this.options.url+\"');\", // TODO html escape\r\n\t\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\t\"xhr.onload=function(){\",\r\n\t\t\t\t\"\tif (this.status==200) {\", // TODO we are checking status here, but what if <audio>'s status is an error?\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,function(buffer){\",\r\n\t\t\t\t\"\t\t\t\"+this.nodeJsName+\".buffer=buffer;\",\r\n\t\t\t\t\"\t\t\tdocument.getElementById('\"+messageHtmlName+\"').textContent='';\",\r\n\t\t\t\t\"\t\t});\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.onerror=function(){\",\r\n\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.filters.convolver.buffer.error')+\"';\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.send();\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tget nodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.wetGainNodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tequalizer: class extends Filter {\r\n\t\tget type()                { return 'equalizer' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget frequencies()         { return [60,170,350,1000,3500,10000] }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn this.frequencies.map(freq=>({\r\n\t\t\t\tname:'gain'+freq,\r\n\t\t\t\ttype:'range',\r\n\t\t\t}))\r\n\t\t}\r\n\t\tgetFrequencyOption(i) {\r\n\t\t\treturn this.options[this.nodeProperties[i].name]\r\n\t\t}\r\n\t\tget affectedFreqsAndOptions() {\r\n\t\t\treturn this.frequencies.map((freq,i)=>{\r\n\t\t\t\tconst option=this.getFrequencyOption(i)\r\n\t\t\t\treturn {freq,option}\r\n\t\t\t}).filter(fo=>(fo.option.input!=false || fo.option.value!=0))\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tif (!this.allGainsConstant) {\r\n\t\t\t\tfeatureContext.alignedInputs=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetHtmlPropertyLines(i18n,property) {\r\n\t\t\treturn NoseWrapLines.b(\r\n\t\t\t\t\"<div class=aligned>\",\"</div>\"\r\n\t\t\t).ae(\r\n\t\t\t\tsuper.getHtmlPropertyLines(i18n,property)\r\n\t\t\t)\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.affectedFreqsAndOptions.length==0\r\n\t\t}\r\n\t\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\t\tconst singleFreq=this.affectedFreqsAndOptions.length==1\r\n\t\t\tconst allGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==false)\r\n\t\t\tconst noGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==true)\r\n\t\t\tconst getJsData=()=>{\r\n\t\t\t\treturn this.affectedFreqsAndOptions.map(fo=>{\r\n\t\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\t\treturn fo.freq\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"[\"+fo.freq+\",\"+(fo.option.input ? 'null' : fo.option.value)+\"]\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).join()\r\n\t\t\t}\r\n\t\t\tconst getJsDataItem=()=>{\r\n\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\treturn \"freq\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"freqData\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getJsLoopLines=()=>{\r\n\t\t\t\tconst freq=(singleFreq ? this.affectedFreqsAndOptions[0].freq : 'freq')\r\n\t\t\t\tconst gain=(singleFreq ? this.affectedFreqsAndOptions[0].option.value : 'gain')\r\n\t\t\t\tconst nodeJsName=((allGainsConstant || singleFreq) ? this.nodeJsName : 'node')\r\n\t\t\t\tconst inputJsName=(singleFreq\r\n\t\t\t\t\t? this.getPropertyInputJsName('gain'+freq)\r\n\t\t\t\t\t: 'input'\r\n\t\t\t\t)\r\n\t\t\t\tconst inputHtmlNameExpr=(singleFreq\r\n\t\t\t\t\t? \"'\"+this.getPropertyInputHtmlName('gain'+freq)+\"'\"\r\n\t\t\t\t\t: \"'\"+this.getPropertyInputHtmlName('gain')+\"'+freq\"\r\n\t\t\t\t)\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (!(noGainsConstant || singleFreq)) {\r\n\t\t\t\t\ta(\"var freq=freqData[0], gain=freqData[1];\")\r\n\t\t\t\t}\r\n\t\t\t\tif (allGainsConstant && !singleFreq) {\r\n\t\t\t\t\ta(\"\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var \")\r\n\t\t\t\t}\r\n\t\t\t\ta.t(nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\")\r\n\t\t\t\tif (singleFreq) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode.connect(\"+nodeJsName+\");\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\r\n\t\t\t\t\t\t\t\"prevNodes.forEach(function(prevNode){\",\r\n\t\t\t\t\t\t\t\"\tprevNode.connect(\"+nodeJsName+\");\",\r\n\t\t\t\t\t\t\t\"});\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\tnodeJsName+\".type='peaking';\",\r\n\t\t\t\t\tnodeJsName+\".frequency.value=\"+freq+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst constLines=JsLines.bae(\r\n\t\t\t\t\tnodeJsName+\".gain.value=\"+gain+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst varLines=JsLines.bae(\r\n\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById(\"+inputHtmlNameExpr+\");\",\r\n\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\"\t\"+nodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\"})();\"\r\n\t\t\t\t)\r\n\t\t\t\tif (!noGainsConstant && allGainsConstant) {\r\n\t\t\t\t\ta(constLines)\r\n\t\t\t\t} else if (noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(varLines)\r\n\t\t\t\t} else if (!noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(WrapLines.b(\"if (gain!==null) {\",\"} else {\",\"}\").ae(constLines,varLines))\r\n\t\t\t\t}\r\n\t\t\t\tif (!singleFreq) {\r\n\t\t\t\t\tconst outerNodeJsName=(allGainsConstant ? nodeJsName : this.nodeJsName+\"=\"+nodeJsName)\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode=\"+outerNodeJsName+\";\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\"prevNodes=[\"+outerNodeJsName+\"];\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')),\r\n\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type))\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\ta(\"var prevNode=\"+prevNodeJsNames[0]+\";\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var prevNodes=[\"+prevNodeJsNames.join()+\"];\")\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.nodeJsName+\";\",\r\n\t\t\t\t\tWrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[\"+getJsData()+\"].forEach(function(\"+getJsDataItem()+\"){\"),JsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass FilterSequence extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn filterClasses[entryOption.filter]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tfeatureContext.audioContext=true\r\n\t\t\t\tentry.requestFeatureContext(featureContext)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn Lines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn InterleaveLines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>{\r\n\t\t\tconst lines=entry.getJsInitLines(i18n,prevNodeJsNames)\r\n\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\treturn lines\r\n\t\t}))\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=FilterSequence\r\n","'use strict'\r\n\r\nlet strings={\r\n\t'options.sources': \"Sources\",\r\n\t'options.sources.audio': \"Audio element\",\r\n\t'options.sources.audio.add': \"Add audio element\",\r\n\t'options.sources.audio.url': \"Source URL\",\r\n\t'options.sources.video': \"Video element\",\r\n\t'options.sources.video.add': \"Add video element\",\r\n\t'options.sources.video.url': \"Source URL\",\r\n\t'options.sources.video.width': \"Player width\",\r\n\t'options.sources.video.height': \"Player height\",\r\n\r\n\t'options.filters': \"Filters\",\r\n\t'options.filters.gain': \"Gain\",\r\n\t'options.filters.gain.add': \"Add gain\",\r\n\t'options.filters.gain.gain': \"Gain\",\r\n\t'options.filters.panner': \"Stereo panner\",\r\n\t'options.filters.panner.add': \"Add stereo panner\",\r\n\t'options.filters.panner.pan': \"Pan\",\r\n\t'options.filters.biquad': \"Biquad filter\",\r\n\t'options.filters.biquad.add': \"Add biquad filter\",\r\n\t'options.filters.biquad.type': \"Filter type\",\r\n\t'options.filters.biquad.type.lowpass': \"lowpass\",\r\n\t'options.filters.biquad.type.highpass': \"highpass\",\r\n\t'options.filters.biquad.type.bandpass': \"bandpass\",\r\n\t'options.filters.biquad.type.lowshelf': \"lowshelf\",\r\n\t'options.filters.biquad.type.highshelf': \"highshelf\",\r\n\t'options.filters.biquad.type.peaking': \"peaking\",\r\n\t'options.filters.biquad.type.notch': \"notch\",\r\n\t'options.filters.biquad.type.allpass': \"allpass\",\r\n\t'options.filters.biquad.frequency': \"Frequency\",\r\n\t'options.filters.biquad.Q': \"Log(Q)\",\r\n\t'options.filters.biquad.detune': \"Detune\",\r\n\t'options.filters.biquad.gain': \"Gain [dB]\",\r\n\t'options.filters.convolver': \"Convolver\",\r\n\t'options.filters.convolver.add': \"Add convolver\",\r\n\t'options.filters.convolver.url': \"Impulse responce URL\",\r\n\t'options.filters.convolver.reverb': \"Reverb (dry/wet)\",\r\n\t'options.filters.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t'options.filters.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\t'options.filters.equalizer': \"Equalizer\",\r\n\t'options.filters.equalizer.add': \"Add equalizer\",\r\n\t'options.filters.equalizer.gain60': \"60 Hz gain\", // TODO {,} expansion\r\n\t'options.filters.equalizer.gain170': \"170 Hz gain\",\r\n\t'options.filters.equalizer.gain350': \"350 Hz gain\",\r\n\t'options.filters.equalizer.gain1000': \"1000 Hz gain\",\r\n\t'options.filters.equalizer.gain3500': \"3500 Hz gain\",\r\n\t'options.filters.equalizer.gain10000': \"10000 Hz gain\",\r\n\r\n\t'options.destination': \"Destination\",\r\n\t'options.destination.compressor': \"Add dynamics compressor before the destination\",\r\n\t'options.destination.compressor.enable': \"Enable dynamics compressor\",\r\n\t'options.destination.waveform': \"Add waveform visualization\",\r\n\r\n\t'options-output.drag': \"Drag or press up/down while in focus to reorder\",\r\n\t'options-output.delete': \"Delete\",\r\n\t'options-output.input': \"Editable\",\r\n\t'options-output.range': \"with range\",\r\n\t'options-output.reset': \"Reset\",\r\n\r\n\t'code-output.save': \"Save source code\",\r\n\t'code-output.run': \"Run in new window\",\r\n\t'code-output.warning.no-hljs': \"<a href='https://highlightjs.org/'>highlight.js</a> (hosted on cdnjs.cloudflare.com) is not loaded. Syntax highlighting is disabled.\",\r\n\t'code-output.warning.jsfiddle-run': \"You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working\",\r\n\t'code-output.section.html': \"HTML\",\r\n\t'code-output.section.css': \"CSS\",\r\n\t'code-output.section.js': \"JavaScript\",\r\n\t'code-output.embedded': \"embedded in HTML source code\",\r\n\t'code-output.mode.full': \"complete HTML\",\r\n\t'code-output.mode.body': \"only HTML body\",\r\n\t'code-output.mode.embed': \"embed in HTML\",\r\n\t'code-output.mode.paste': \"extract to paste into HTML later\",\r\n\t'code-output.mode.file': \"extract to load as external resource\",\r\n\r\n\t'comment.context': \"create [audio context][context]\",\r\n\t'comment.sources.audio': \"create [audio source node][source]\",\r\n\t'comment.sources.video': \"create [video source node][source]\",\r\n\t'comment.filters.gain': \"create [gain node][gain]\",\r\n\t'comment.filters.panner': \"create [stereo panner node][panner]\",\r\n\t'comment.filters.biquad': \"create [biquad filter node][biquad]\",\r\n\t'comment.filters.convolver': \"create dry and wet routes with [convolver node][convolver]\",\r\n\t'comment.filters.convolver.single': \"create [convolver node][convolver]\",\r\n\t'comment.filters.equalizer': \"create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]\",\r\n\t'comment.filters.equalizer.single': \"create equalizer as a [peaking][peaking] [biquad filter node][biquad]\",\r\n\t'comment.destination': \"connect last node to [destination][destination]\",\r\n\t'comment.destination.compressor': \"create [dynamics compressor node][compressor]\",\r\n\t'comment.destination.waveform': \"create [analyser node][analyser] for waveform visualization\",\r\n}\r\n\r\n/*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\r\n\r\nmodule.exports=function(lang){\r\n\t// TODO use lang to pick strings\r\n\tconst i18n=function(id){\r\n\t\treturn strings[id]\r\n\t}\r\n\ti18n.lang=lang\r\n\treturn i18n\r\n}\r\n","'use strict'\r\n\r\nlet idCounter=0\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++)\r\n}\r\n\r\nconst i18n=require('./i18n.js')('en')\r\nconst Options=require('./options.js')\r\nconst Code=require('./code.js')\r\nconst OptionsOutput=require('./options-output.js')\r\nconst CodeOutput=require('./code-output.js')\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst options=new Options()\r\n\t\tconst codeOutput=new CodeOutput(()=>new Code(options.fix(),i18n),i18n)\r\n\t\toptions.updateCallback=codeOutput.update\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n)\r\n\t\t$container.empty()\r\n\t\t\t.append(optionsOutput.$output)\r\n\t\t\t.append(codeOutput.$output)\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst Option=Object.create(require('crnx-base/option-classes'))\r\n\r\n// differs from webgl-starter:\r\n//\thas defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\n//\tno setToDefault, which is needed only if speed is present\r\n//\tname is set, b/c it wasn't needed only for speed\r\nclass FixedLiveNumber {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.min=src.min\r\n\t\tthis.max=src.max\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableMin=src.availableMin\r\n\t\tthis.availableMax=src.availableMax\r\n\t\tthis.step=src.step\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn String(this.value)\r\n\t}\r\n}\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed step of 0.01\r\n//\tno speed\r\n//\thas range specified as [availableMin,availableMax,defaultMin,defaultMax]\r\nOption.LiveNumber = class extends Option.RangeInput {\r\n\tconstructor(name,availableRange,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataMin  =data.min\r\n\t\t\tdataMax  =data.max\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(name,availableRange,defaultValue,dataValue,fullName,isVisible,updateCallback)\r\n\t\tthis.defaultMin=(availableRange[2]!==undefined?availableRange[2]:this.availableMin)\r\n\t\tthis.defaultMax=(availableRange[3]!==undefined?availableRange[3]:this.availableMax)\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:this.defaultMin\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:this.defaultMax\r\n\t\tthis._input=!!dataInput\r\n\t\tthis._$range=null\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input)\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateInternalVisibility()\r\n\t\tthis.updateCallback()\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min\r\n\t\tthis.updateCallback()\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max\r\n\t\tthis.updateCallback()\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range\r\n\t\tthis.updateInternalVisibility()\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={}\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value\r\n\t\tif (src.min!=src.availableMin) data.min=src.min\r\n\t\tif (src.max!=src.availableMax) data.max=src.max\r\n\t\tif (src.input) data.input=src.input\r\n\t\treturn data\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this)\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveNumber(this)\r\n\t}\r\n}\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget step() {\r\n\t\treturn 1\r\n\t}\r\n}\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget step() {\r\n\t\treturn 0.01\r\n\t}\r\n}\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableValues=src.availableValues\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tlet dataValue,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(name,availableValues,defaultValue,dataValue,fullName,isVisible,updateCallback)\r\n\t\tthis._input=!!dataInput\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateCallback()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\tif (this.input) data.input=this.input\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this)\r\n\t}\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes.js')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters)\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',option.step)\r\n\t\t\tconst setInputAttrsAndListeners=($input,getOtherInput)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst $that=getOtherInput()\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst writeMinMaxInput=minOrMax=>setInputAttrs($(\"<input type='number' required>\"))\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tlet $sliderInput,$numberInput,$inputCheckbox\r\n\t\t\tlet $rangeMinInput,$rangeMaxInput\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" <span class='min'>\"+option.availableMin+\"</span> \")\r\n\t\t\t\t.append($sliderInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='range' id='\"+id+\"'>\"),\r\n\t\t\t\t\t()=>$numberInput\r\n\t\t\t\t))\r\n\t\t\t\t.append(\" <span class='max'>\"+option.availableMax+\"</span> \")\r\n\t\t\t\t.append($numberInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='number' required>\"),\r\n\t\t\t\t\t()=>$sliderInput\r\n\t\t\t\t))\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\toption.$range=$(\"<span class='range'>\")\r\n\t\t\t\t\t\t.append(i18n('options-output.range')+\" \")\r\n\t\t\t\t\t\t.append($rangeMinInput=writeMinMaxInput('min'))\r\n\t\t\t\t\t\t.append(\" .. \")\r\n\t\t\t\t\t\t.append($rangeMaxInput=writeMinMaxInput('max'))\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t\t\t$rangeMinInput.val(option.defaultMin).change()\r\n\t\t\t\t\t\t$rangeMaxInput.val(option.defaultMax).change()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tlet $select,$inputCheckbox\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\t\toption.availableValues.map(function(availableValue){\r\n\t\t\t\t\t\t\treturn $(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t\t$select.val(option.defaultValue).change()\r\n\t\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nconst BaseOptions=require('crnx-base/options')\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Array','sources',[ // urls are from w3c mooc\r\n\t\t\t\t['Group','audio',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','video',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.mp4',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','width',[1,1920],320],\r\n\t\t\t\t\t['Int','height',[1,1080],240],\r\n\t\t\t\t]],\r\n\t\t\t],'source'],\r\n\t\t\t['Array','filters',[\r\n\t\t\t\t['Group','gain',[\r\n\t\t\t\t\t['LiveFloat','gain',[0,10,0,1],1],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','panner',[\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','biquad',[\r\n\t\t\t\t\t['LiveSelect','type',[\r\n\t\t\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['LiveInt','frequency',[0,22050],350],\r\n\t\t\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t\t\t['LiveInt','gain',[-30,30],0],\r\n\t\t\t\t\t['LiveInt','detune',[0,100]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','convolver',[\r\n\t\t\t\t\t['LiveFloat','reverb',[0,1]],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','equalizer',[60,170,350,1000,3500,10000].map(freq=>['LiveInt','gain'+freq,[-30,30],0])],\r\n\t\t\t],'filter'],\r\n\t\t\t['Group','destination',[\r\n\t\t\t\t['Checkbox','compressor'], // Firefox compresses automatically?\r\n\t\t\t\t['Checkbox','waveform'],\r\n\t\t\t]],\r\n\t\t]\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes.js')\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature.js')\r\n\r\nfunction capitalize(s) {\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\nfunction toCamelCase(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n\r\nclass Source {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tget elementHtmlName() {\r\n\t\treturn 'my.'+this.type+this.nSuffix\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn WrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tthis.getElementHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.createMediaElementSource(document.getElementById('\"+this.elementHtmlName+\"'));\"\r\n\t\t)\r\n\t}\r\n\t// abstract:\r\n\t// get type()\r\n\t// getElementHtmlLines(featureContext,i18n)\r\n}\r\n\r\nconst sourceClasses={\r\n\taudio: class extends Source {\r\n\t\tget type() { return 'audio' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<audio src=${this.options.url} id=${this.elementHtmlName} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></audio>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tvideo: class extends Source {\r\n\t\tget type() { return 'video' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<video src=${this.options.url} id=${this.elementHtmlName} width=${this.options.width} height=${this.options.height} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></video>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass SourceSet extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn sourceClasses[entryOption.source]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.entries.length>0) {\r\n\t\t\tfeatureContext.audioProcessing=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(...this.entries.map(entry=>entry.getJsInitLines(i18n)))\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn this.entries.map(entry=>entry.nodeJsName)\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=SourceSet\r\n","'use strict';\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCode,i18n) {\r\n\t\tlet code=generateCode();\r\n\t\tconst $sectionCode={}, $sectionModeInput={};\r\n\t\tlet $jsSemicolonsCheckbox;\r\n\t\tconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html);\r\n\t\tconst getFormatting=()=>{\r\n\t\t\treturn {\r\n\t\t\t\trefs: this.refs,\r\n\t\t\t\tjsSemicolons: $jsSemicolonsCheckbox.prop('checked'),\r\n\t\t\t};\r\n\t\t}\r\n\t\tconst writeControls=()=>{\r\n\t\t\treturn $(\"<div>\").append(\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('code-output.run')+\"</button>\").click(function(){\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t// doesn't work in IE\r\n\t\t\t\t\twindow.open(getHtmlDataUri(\r\n\t\t\t\t\t\tcode.get(this.formatting).join(\"\\n\")\r\n\t\t\t\t\t),\"generatedCode\");\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tconst w=window.open(\"\",\"generatedCode\");\r\n\t\t\t\t\tw.document.open();\r\n\t\t\t\t\tw.document.write(\r\n\t\t\t\t\t\tcode.get(getFormatting()).join(\"\\n\")\r\n\t\t\t\t\t);\r\n\t\t\t\t\tw.document.close();\r\n\t\t\t\t})\r\n\t\t\t).append(\" \").append(\r\n\t\t\t\t$(\"<button type='button'>Open in CodePen</button>\").click(function(){\r\n\t\t\t\t\t// http://blog.codepen.io/documentation/api/prefill/\r\n\t\t\t\t\tconst sections=code.extractSections({html:'body',css:'paste',js:'paste'});\r\n\t\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\t\tsections[sectionName].get(getFormatting()).join(\"\\n\");\r\n\t\t\t\t\t$(\"<form method='post' action='http://codepen.io/pen/define/'>\")\r\n\t\t\t\t\t\t.append($(\"<input type='hidden' name='data'>\").val(JSON.stringify({\r\n\t\t\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\t\t\ttitle: code.title,\r\n\t\t\t\t\t\t})))\r\n\t\t\t\t\t\t.appendTo('body')\r\n\t\t\t\t\t\t.submit();\r\n\t\t\t\t})\r\n\t\t\t).append(\" \").append(\r\n\t\t\t\t$(\"<button type='button'>Open in JSFiddle</button>\").click(function(){\r\n\t\t\t\t\t// http://doc.jsfiddle.net/api/post.html\r\n\t\t\t\t\tconst sections=code.extractSections({html:'body',css:'paste',js:'paste'});\r\n\t\t\t\t\tconst writeSection=sectionName=>\r\n\t\t\t\t\t\t$(\"<input type='hidden'>\")\r\n\t\t\t\t\t\t\t.attr('name',sectionName)\r\n\t\t\t\t\t\t\t.val(sections[sectionName].get(getFormatting()).join(\"\\n\"));\r\n\t\t\t\t\t$(\"<form method='post' action='http://jsfiddle.net/api/post/library/pure/'>\")\r\n\t\t\t\t\t\t.append(writeSection('html'))\r\n\t\t\t\t\t\t.append(writeSection('css'))\r\n\t\t\t\t\t\t.append(writeSection('js'))\r\n\t\t\t\t\t\t.append($(\"<input type='hidden' name='title'>\").val(code.title))\r\n\t\t\t\t\t\t.append(\"<input type='hidden' name='wrap' value='b'>\")\r\n\t\t\t\t\t\t.appendTo('body')\r\n\t\t\t\t\t\t.submit();\r\n\t\t\t\t})\r\n\t\t\t).append(\" <span class='tip-warn'><span class='tip-content'>\"+i18n('code-output.warning.jsfiddle-run')+\"</span></span>\")\r\n\t\t};\r\n\t\tconst getSectionModes=()=>({\r\n\t\t\thtml: $sectionModeInput['html'].val(),\r\n\t\t\tcss:  $sectionModeInput['css' ].val(),\r\n\t\t\tjs:   $sectionModeInput['js'  ].val(),\r\n\t\t});\r\n\t\tconst extractCode=()=>{\r\n\t\t\tconst sectionModes=getSectionModes();\r\n\t\t\tconst sections=code.extractSections(sectionModes);\r\n\t\t\tfor (let sectionName in sections) {\r\n\t\t\t\tif (sectionModes[sectionName]=='embed') {\r\n\t\t\t\t\t$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\t\"<p>\"+i18n('code-output.embedded')+\"</p>\"\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet $code;\r\n\t\t\t\t\t$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\t$(\"<pre>\").append(\r\n\t\t\t\t\t\t\t$code=$(\"<code class='\"+sectionName+\"'>\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\t$code.html(\r\n\t\t\t\t\t\tsections[sectionName].getHtml(getFormatting()).join(\"\\n\")\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (window.hljs) {\r\n\t\t\t\t\t\thljs.highlightBlock($code[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst writeFormattingControls=()=>{\r\n\t\t\treturn $(\"<details>\")\r\n\t\t\t\t.append(\"<summary>Formatting</summary>\")\r\n\t\t\t\t.append($(\"<div>\")\r\n\t\t\t\t\t.append($(\"<label>\")\r\n\t\t\t\t\t\t.append($jsSemicolonsCheckbox=$(\"<input type='checkbox'>\").change(extractCode))\r\n\t\t\t\t\t\t.append(\" JavaScript semicolons\")\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t};\r\n\t\tconst writeSection=(sectionName)=>{\r\n\t\t\tconst extractable=sectionName!='html';\r\n\t\t\tconst $summary=$(\"<summary>\"+i18n('code-output.section.'+sectionName)+\"</summary>\");\r\n\t\t\tlet $saveButton;\r\n\t\t\t$summary.append(\" \").append(\r\n\t\t\t\t$sectionModeInput[sectionName]=$(\"<select>\").append(\r\n\t\t\t\t\t(sectionName=='html'\r\n\t\t\t\t\t\t? ['full','body']\r\n\t\t\t\t\t\t: ['embed','paste','file']\r\n\t\t\t\t\t).map(mode=>\r\n\t\t\t\t\t\t$(\"<option>\").val(mode).html(i18n('code-output.mode.'+mode))\r\n\t\t\t\t\t)\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tif (extractable) {\r\n\t\t\t\t\t\t$saveButton.prop('disabled',this.value=='embed');\r\n\t\t\t\t\t}\r\n\t\t\t\t\textractCode();\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\t$summary.append(\" \").append(\r\n\t\t\t\t/*\r\n\t\t\t\t// doesn't work in IE\r\n\t\t\t\t$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n\t\t\t\t\t// yes I want a button, but download attr is only available for links\r\n\t\t\t\t\t$(this).attr('href',getHtmlDataUri(\r\n\t\t\t\t\t\tsection.get(this.formatting).join(\"\\n\")\r\n\t\t\t\t\t));\r\n\t\t\t\t})\r\n\t\t\t\t*/\r\n\t\t\t\t$saveButton=$(\"<button type='button'>\"+i18n('code-output.save')+\"</button>\").click(function(){\r\n\t\t\t\t\tconst section=code.extractSections(getSectionModes())[sectionName];\r\n\t\t\t\t\t// http://stackoverflow.com/a/24354303\r\n\t\t\t\t\tconst blob=new Blob(\r\n\t\t\t\t\t\t[section.get(getFormatting()).join(\"\\n\")],\r\n\t\t\t\t\t\t{type:section.mimeType}\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob,section.filename);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst $a=$(\"<a>\")\r\n\t\t\t\t\t\t\t.attr('download',section.filename)\r\n\t\t\t\t\t\t\t.attr('href',URL.createObjectURL(blob))\r\n\t\t\t\t\t\t\t.appendTo('body');\r\n\t\t\t\t\t\t$a.get(0).click();\r\n\t\t\t\t\t\t$a.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tif (extractable) {\r\n\t\t\t\t$saveButton.prop('disabled',$sectionModeInput[sectionName].val()=='embed');\r\n\t\t\t}\r\n\t\t\treturn $(\"<details>\")\r\n\t\t\t\t.append($summary)\r\n\t\t\t\t.append($sectionCode[sectionName]=$(\"<div class='code'>\"));\r\n\t\t};\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(writeControls())\r\n\t\t\t.append(writeFormattingControls())\r\n\t\t\t.append(writeSection('html'))\r\n\t\t\t.append(writeSection('css'))\r\n\t\t\t.append(writeSection('js'));\r\n\t\tif (!window.hljs) {\r\n\t\t\t$output.append(\"<p>\"+i18n('code-output.warning.no-hljs')+\"</p>\");\r\n\t\t}\r\n\t\t$output.append(writeControls());\r\n\t\textractCode();\r\n\r\n\t\tconst delay=200;\r\n\t\tlet timeoutId=null;\r\n\t\tconst update=()=>{\r\n\t\t\tclearTimeout(timeoutId);\r\n\t\t\ttimeoutId=setTimeout(()=>{\r\n\t\t\t\tcode=generateCode();\r\n\t\t\t\textractCode();\r\n\t\t\t},delay);\r\n\t\t};\r\n\r\n\t\t// public props:\r\n\t\tthis.$output=$output;\r\n\t\tthis.update=update;\r\n\t}\r\n\r\n\t// private interface:\r\n\tget refs() {\r\n\t\treturn {};\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput;\r\n","'use strict';\r\n\r\nclass CodeSection {\r\n\tconstructor(filename,mimeType,lines) {\r\n\t\tthis.filename=filename;\r\n\t\tthis.mimeType=mimeType;\r\n\t\tthis.lines=lines;\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.lines.get(formatting);\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.lines.getHtml(formatting);\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeSection;\r\n","'use strict';\r\n\r\nconst Lines=require('./lines.js');\r\n\r\nclass InterleaveLines extends Lines {\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[];\r\n\t\tlet first=true;\r\n\t\tconst fp=()=>{\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false;\r\n\t\t\t} else {\r\n\t\t\t\tout.push('');\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html);\r\n\t\t\t\tif (subOut.length>0) {\r\n\t\t\t\t\tfp();\r\n\t\t\t\t\tout.push(...subOut);\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tfp();\r\n\t\t\t\tconst s=(html ? Lines.strHtmlEscape(item) : item);\r\n\t\t\t\tout.push(s);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn out;\r\n\t}\r\n}\r\n\r\nmodule.exports=InterleaveLines;\r\n","'use strict';\r\n\r\nconst Lines=require('./lines.js');\r\n\r\nclass JsLines extends Lines {\r\n\tprocessStringInGet(s,formatting) {\r\n\t\tif (formatting.jsSemicolons) {\r\n\t\t\treturn s.replace(/^;/,'');\r\n\t\t} else {\r\n\t\t\treturn s.replace(/;$/,'');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=JsLines;\r\n","'use strict';\r\n\r\n/*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t);\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t);\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b();\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t);\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t);\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t);\r\n\treturn a.e();\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\r\n\r\nconst TO={}; // TODO Symbol\r\n\r\nclass Lines {\r\n\t// lines private interface:\r\n\tconstructor(data) {\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\tthrow new TypeError(\"attempted to construct Lines with non-array data argument\");\r\n\t\t}\r\n\t\tthis.data=data;\r\n\t}\r\n\tisDataEmpty() {\r\n\t\tfor (let i=0;i<this.data.length;i++) {\r\n\t\t\tconst item=this.data[i];\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tif (!item.isEmpty()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tprocessStringInGet(s,formatting) {\r\n\t\treturn s;\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[];\r\n\t\tlet addTo=false;\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item===TO) {\r\n\t\t\t\taddTo=true;\r\n\t\t\t} else if (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html);\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+subOut.shift());\r\n\t\t\t\t}\r\n\t\t\t\tout.push(...subOut);\r\n\t\t\t\taddTo=false;\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\titem=this.processStringInGet(item,formatting);\r\n\t\t\t\tconst s=(html ? Lines.strHtmlEscape(item) : item);\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+s);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout.push(s);\r\n\t\t\t\t}\r\n\t\t\t\taddTo=false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn out;\r\n\t}\r\n\r\n\t// lines public interface:\r\n\tstatic b() {\r\n\t\tconst data=[];\r\n\t\tconst makeLines=()=>new this(data,...arguments);\r\n\t\tconst a=function(){\r\n\t\t\treturn a.a(...arguments);\r\n\t\t};\r\n\t\ta.a=function(){\r\n\t\t\tdata.push(...arguments);\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\ta.t=function(){\r\n\t\t\tdata.push(TO,...arguments);\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\ta.e=makeLines;\r\n\t\ta.ae=function(){\r\n\t\t\treturn this.a(...arguments).e();\r\n\t\t};\r\n\t\treturn a;\r\n\t}\r\n\tstatic ba() {\r\n\t\treturn this.b().a(...arguments);\r\n\t}\r\n\tstatic be() {\r\n\t\treturn this.b().e();\r\n\t}\r\n\tstatic bae() {\r\n\t\treturn this.b().a(...arguments).e();\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty();\r\n\t}\r\n\tget(formatting) {\r\n\t\tif (formatting===undefined) formatting={};\r\n\t\treturn this.doGet(formatting,false);\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\tif (formatting===undefined) formatting={};\r\n\t\treturn this.doGet(formatting,true);\r\n\t}\r\n\r\n\t// string utilities:\r\n\tstatic strRepeat(s,n) {\r\n\t\treturn Array(n+1).join(s);\r\n\t}\r\n\tstatic strHtmlEscape(s) {\r\n\t\tconst entityMap={\r\n\t\t\t'&': '&amp;',\r\n\t\t\t'<': '&lt;',\r\n\t\t\t'>': '&gt;',\r\n\t\t\t'\"': '&quot;',\r\n\t\t\t\"'\": '&#39;',\r\n\t\t};\r\n\t\treturn String(s).replace(/[&<>\"']/g,m=>entityMap[m]);\r\n\t}\r\n\tstatic html(strings/*,...values*/) {\r\n\t\t// html template tag\r\n\t\t// usage example for attributes: Lines.html`<input type=text value=${value}>`\r\n\t\t// usage example for elements: Lines.html`<option>${option}</option>`\r\n\t\treturn strings.reduce((r,s,i)=>{\r\n\t\t\tlet v=arguments[i];\r\n\t\t\tswitch (r.slice(-1)) {\r\n\t\t\tcase '=':\r\n\t\t\t\tif (v===false) {\r\n\t\t\t\t\treturn r.replace(/\\s+[a-zA-Z0-9-]+=$/,'')+s; // TODO more permitting attr name regexp\r\n\t\t\t\t} else if (v===true) {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s;\r\n\t\t\t\t}\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;');\r\n\t\t\t\tif (v=='') {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s;\r\n\t\t\t\t} else if (!/[\\s\"'=<>`]/.test(v)) {\r\n\t\t\t\t\treturn r+v+s;\r\n\t\t\t\t} else if (!/'/.test(v)) {\r\n\t\t\t\t\treturn r+\"'\"+v+\"'\"+s;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tv=v.replace(/\"/g,'&quot;');\r\n\t\t\t\t\treturn r+'\"'+v+'\"'+s;\r\n\t\t\t\t}\r\n\t\t\tcase '>':\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;');\r\n\t\t\t\treturn r+v+s;\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"invalid character before substitution\");\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports=Lines;\r\n","'use strict';\r\n\r\nconst WrapLines=require('./wrap-lines.js');\r\n\r\nclass NoseWrapLines extends WrapLines {\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty();\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn [];\r\n\t\t} else {\r\n\t\t\treturn super.doGet(formatting,html);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=NoseWrapLines;\r\n","'use strict';\r\n\r\n// constructors typically called from Options class\r\n// to call them manually, use the following args:\r\n//\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\r\n// the rest of arguments' order is not settled, don't use them\r\n// \t+ TODO not sure about data\r\n\r\n/*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={};\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tconstructor(name,_1,_2,_3,fullName,isVisible,updateCallback) {\r\n\t\tthis.name=name;\r\n\t\tthis.isVisible=isVisible;\r\n\t\tthis.updateCallback=updateCallback;\r\n\t\tthis.fullName=fullName;\r\n\t\tthis._$=null;\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$;\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$;\r\n\t\tthis.updateVisibility();\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible());\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value;\r\n\t\t} else {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value;\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nOption.Input = class extends Option.Base {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tif (defaultValue!==undefined) {\r\n\t\t\tthis.defaultValue=defaultValue;\r\n\t\t} else {\r\n\t\t\tthis.defaultValue=availableValues[0];\r\n\t\t}\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value;\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data;\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue;\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value;\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value;\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\nOption.BooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\treturn this.value;\r\n\t}\r\n};\r\n\r\nOption.NonBooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value;\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value; },\r\n\t\t\ttoString() { return String(value); },\r\n\t\t};\r\n\t}\r\n};\r\n\r\nOption.FactorInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableValues=availableValues;\r\n\t}\r\n};\r\n\r\nOption.RangeInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableRange,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableMin=availableRange[0];\r\n\t\tthis.availableMax=availableRange[1];\r\n\t}\r\n};\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tconstructor(name,entries,_1,_2,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.entries=entries;\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name);\r\n\t\t});\r\n\t\treturn data;\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[];\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix());\r\n\t\t});\r\n\t\treturn fixed;\r\n\t}\r\n};\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.BooleanInput {\r\n\tconstructor(name,_,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,!!defaultValue,data,fullName,isVisible,updateCallback);\r\n\t}\r\n};\r\n\r\nOption.Select = class extends Option.FactorInput {};\r\n\r\nOption.Text = class extends Option.FactorInput {};\r\n\r\nOption.Int = class extends Option.RangeInput {};\r\n\r\nOption.Root = class extends Option.Collection {};\r\n\r\nOption.Group = class extends Option.Collection {};\r\n\r\nOption.Array = class extends Option.Base {\r\n\tconstructor(name,availableConstructors,typePropertyName,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,undefined,undefined,fullName,isVisible,updateCallback);\r\n\t\tthis.availableConstructors=availableConstructors; // Map {type:constructor}\r\n\t\tif (typePropertyName===undefined) typePropertyName='type';\r\n\t\tthis.typePropertyName=typePropertyName;\r\n\t\tthis._entries=[];\r\n\t\tlet subDatas=[];\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data;\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value;\r\n\t\t}\r\n\t\tlet defaultType=this.availableTypes[0];\r\n\t\tfor (let i=0;i<subDatas.length;i++) {\r\n\t\t\tconst subData=subDatas[i];\r\n\t\t\tlet subType=defaultType;\r\n\t\t\tif (typeof subData == 'object' && subData[typePropertyName]!==undefined) {\r\n\t\t\t\tsubType=subData[typePropertyName];\r\n\t\t\t}\r\n\t\t\tlet subCtor=this.availableConstructors.get(subType);\r\n\t\t\tif (subCtor) {\r\n\t\t\t\tthis._entries.push(subCtor(subData));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget availableTypes() {\r\n\t\tconst types=[];\r\n\t\tthis.availableConstructors.forEach((_,type)=>{\r\n\t\t\ttypes.push(type);\r\n\t\t});\r\n\t\treturn types;\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries;\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\taddEntry(type) {\r\n\t\tconst entry=this.availableConstructors.get(type)();\r\n\t\tthis._entries.push(entry);\r\n\t\tthis.updateCallback();\r\n\t\treturn entry;\r\n\t}\r\n\texport() {\r\n\t\tlet defaultType=this.availableTypes[0];\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export();\r\n\t\t\t\tconst subType=entry.name;\r\n\t\t\t\tif (subType!=defaultType) subData[this.typePropertyName]=subType;\r\n\t\t\t\treturn entry.shortenExport(subData);\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix();\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed[this.typePropertyName]=entry.name;\r\n\t\t\t\treturn subFixed;\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n};\r\n\r\nmodule.exports=Option;\r\n","'use strict';\r\n\r\nconst Option=require('./option-classes.js');\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map;\r\n\t\tthis.setOptionClassWriters(optionClassWriters);\r\n\t\tfunction write(option) {\r\n\t\t\tlet optionProto=option;\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor);\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,write,i18n,generateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=write(options.root);\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Group,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option void'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.value=$(this).prop('checked');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\");\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\treturn option.$=$(\"<div>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\tconst listId=generateId();\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"' />\")\r\n\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<datalist id='\"+listId+\"'>\")\r\n\t\t\t\t\t\t.append(\r\n\t\t\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Int,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId();\r\n\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t.append(\" \")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$(\"<input type='number' id='\"+id+\"' required />\")\r\n\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t\t\t.attr('step',option.step)\r\n\t\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t});\r\n\t\toptionClassWriters.set(Option.Array,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tlet $dragged=null;\r\n\t\t\tlet $entries;\r\n\t\t\tconst updateArrayEntries=()=>{\r\n\t\t\t\toption.entries=$entries.children().map(function(){\r\n\t\t\t\t\treturn $(this).data('option');\r\n\t\t\t\t}).get();\r\n\t\t\t};\r\n\t\t\tconst writeDraggableOption=option=>{\r\n\t\t\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\t\t\treturn $(\"<div class='draggable-with-handle'>\")\r\n\t\t\t\t\t.data('option',option)\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<div draggable='true' tabindex='0' title='\"+i18n('options-output.drag')+\"'>\")\r\n\t\t\t\t\t\t\t.on('dragstart',function(ev){\r\n\t\t\t\t\t\t\t\t$dragged=$(this).parent();\r\n\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move';\r\n\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name);\r\n\t\t\t\t\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage($dragged[0],0,0);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t$dragged.addClass('ghost');\r\n\t\t\t\t\t\t\t\t},0);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\tconst $handle=$(this);\r\n\t\t\t\t\t\t\t\tconst $sorted=$handle.parent();\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\t\t\t\t\t$sorted.prev().before($sorted);\r\n\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\t\t\t\t\t$sorted.next().after($sorted);\r\n\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.append(writeOption(option))\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>×</div>\")\r\n\t\t\t\t\t\t$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>\")\r\n\t\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.on('dragover',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\tev.originalEvent.dataTransfer.dropEffect='move';\r\n\t\t\t\t\t\tconst $target=$(this);\r\n\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\tif ($target.nextAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t$target.before($dragged);\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t} else if ($target.prevAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t$target.after($dragged);\r\n\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('drop',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('dragend',function(ev){\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\t$dragged.removeClass('ghost');\r\n\t\t\t\t\t\t\t$dragged=null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\toption.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\")\r\n\t\t\t\t.append(\r\n\t\t\t\t\t$entries=$(\"<div>\")\r\n\t\t\t\t\t\t.append(option.entries.map(writeDraggableOption))\r\n\t\t\t\t);\r\n\t\t\tconst $buttons=$(\"<div>\");\r\n\t\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\t\tif (i) $buttons.append(\" \");\r\n\t\t\t\t$buttons.append(\r\n\t\t\t\t\t$(\"<button type='button'>\")\r\n\t\t\t\t\t\t.html(i18n('options.'+option.fullName+'.'+type+'.add'))\r\n\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\tconst entry=option.addEntry(type);\r\n\t\t\t\t\t\t\t$entries.append(writeDraggableOption(entry));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\toption.$.append($buttons);\r\n\t\t\treturn option.$;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput;\r\n","'use strict';\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tthis.updateCallback=undefined; // general update callback for stuff like regenerating the code\r\n\t\tconst simpleUpdateCallback=()=>{\r\n\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t};\r\n\t\tconst Option=this.optionClasses;\r\n\t\tconst optionByFullName={};\r\n\t\tconst optionsWithVisibilityAffectedByFullName={};\r\n\t\tconst makeEntry=(description,fullNamePath,data,isInsideArray)=>{\r\n\t\t\tconst className=description[0];\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`);\r\n\t\t\t}\r\n\t\t\tconst name=description[1];\r\n\t\t\tconst fullName=fullNamePath+name;\r\n\t\t\tconst ctorArgsDescription=description.slice(2);\r\n\t\t\tlet contents=[];\r\n\t\t\tlet defaultValue;\r\n\t\t\tlet visibilityData={};\r\n\t\t\tlet nScalars=0;\r\n\t\t\tlet nArrays=0;\r\n\t\t\tlet nObjects=0;\r\n\t\t\tfor (let i=0;i<ctorArgsDescription.length;i++) {\r\n\t\t\t\tlet arg=ctorArgsDescription[i];\r\n\t\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\t\tif (nScalars==0) {\r\n\t\t\t\t\t\tdefaultValue=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many scalar arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnScalars++;\r\n\t\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\t\tif (nArrays==0) {\r\n\t\t\t\t\t\tif (!isInsideArray && className=='Array') { // TODO test array inside array\r\n\t\t\t\t\t\t\tcontents=new Map;\r\n\t\t\t\t\t\t\targ.forEach(x=>{\r\n\t\t\t\t\t\t\t\tconst type=x[1];\r\n\t\t\t\t\t\t\t\tconst ctor=subData=>makeEntry(x,fullName+'.',subData,true);\r\n\t\t\t\t\t\t\t\tcontents.set(type,ctor);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontents=arg.map(x=>{\r\n\t\t\t\t\t\t\t\tif (Array.isArray(x)) {\r\n\t\t\t\t\t\t\t\t\tconst subName=x[1];\r\n\t\t\t\t\t\t\t\t\tlet subData;\r\n\t\t\t\t\t\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\t\t\t\t\t\treturn makeEntry(x,fullName+'.',subData,isInsideArray); // nested option\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn x; // available value / value range boundary\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnArrays++;\r\n\t\t\t\t} else if (!isInsideArray && (arg instanceof Object)) {\r\n\t\t\t\t\tif (nObjects==0) {\r\n\t\t\t\t\t\tvisibilityData=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnObjects++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"unknown argument type\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet isVisible,updateCallback;\r\n\t\t\tif (isInsideArray) {\r\n\t\t\t\tupdateCallback=simpleUpdateCallback;\r\n\t\t\t\tisVisible=()=>true;\r\n\t\t\t} else {\r\n\t\t\t\tisVisible=()=>{\r\n\t\t\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\t\t\tconst value=optionByFullName[testName].value;\r\n\t\t\t\t\t\tif (visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\t\t\t\tupdateCallback=()=>{\r\n\t\t\t\t\tif (optionsWithVisibilityAffectedByFullName[fullName]!==undefined) {\r\n\t\t\t\t\t\toptionsWithVisibilityAffectedByFullName[fullName].forEach(option=>{\r\n\t\t\t\t\t\t\toption.updateVisibility();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst option=new Option[className](name,contents,defaultValue,data,fullName,isVisible,updateCallback);\r\n\t\t\tif (!isInsideArray) {\r\n\t\t\t\toptionByFullName[fullName]=option;\r\n\t\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\t\tif (optionsWithVisibilityAffectedByFullName[testName]===undefined) {\r\n\t\t\t\t\t\toptionsWithVisibilityAffectedByFullName[testName]=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptionsWithVisibilityAffectedByFullName[testName].push(option);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option;\r\n\t\t};\r\n\t\tthis.root=new Option.Root(\r\n\t\t\tnull,this.entriesDescription.map(description=>{\r\n\t\t\t\tconst subName=description[1];\r\n\t\t\t\tlet subData;\r\n\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\treturn makeEntry(description,'',subData,false);\r\n\t\t\t}),undefined,data,null,()=>true,simpleUpdateCallback\r\n\t\t);\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes.js');\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn [];\r\n\t}\r\n\t// public methods\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export());\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix();\r\n\t}\r\n}\r\n\r\nmodule.exports=Options;\r\n","'use strict';\r\n\r\nconst Lines=require('./lines.js');\r\n\r\nclass RefLines extends Lines {\r\n\tconstructor(data,ref) {\r\n\t\tsuper(data);\r\n\t\tthis.ref=ref;\r\n\t}\r\n\tstatic parse(s) {\r\n\t\tconst a=Lines.ba(\"\");\r\n\t\tconst re=/^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/;\r\n\t\tfor (;s.length>0;) {\r\n\t\t\tconst match=re.exec(s);\r\n\t\t\tif (match) {\r\n\t\t\t\ta.t(match[1]);\r\n\t\t\t\ta.t(this.b(match[3]).ae(match[2]));\r\n\t\t\t\ts=s.substr(match[0].length);\r\n\t\t\t} else {\r\n\t\t\t\ta.t(s);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e();\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst plainOut=super.doGet(formatting,html);\r\n\t\tlet href;\r\n\t\tif (html && typeof formatting.refs == 'object') {\r\n\t\t\thref=formatting.refs[this.ref];\r\n\t\t}\r\n\t\tif (href!==undefined) {\r\n\t\t\treturn plainOut.map(s=>\"<a href='\"+Lines.strHtmlEscape(href)+\"'>\"+s+\"</a>\");\r\n\t\t} else {\r\n\t\t\treturn plainOut;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=RefLines;\r\n","'use strict';\r\n\r\nconst Lines=require('./lines.js');\r\nconst NoseWrapLines=require('./nose-wrap-lines.js');\r\nconst CodeSection=require('./code-section.js');\r\n\r\nclass WebCode {\r\n\t// public:\r\n\tget filename() {\r\n\t\treturn this.basename+'.html';\r\n\t}\r\n\tget mimeType() {\r\n\t\treturn 'text/html';\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.getLines().get(formatting);\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.getLines().getHtml(formatting);\r\n\t}\r\n\textractSections(sectionModes) {\r\n\t\tif (sectionModes===undefined) {\r\n\t\t\tsectionModes={};\r\n\t\t}\r\n\t\tlet stylePlaceLines=NoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines);\r\n\t\tlet styleExtractLines=Lines.be();\r\n\t\tif (sectionModes.css=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tstylePlaceLines=Lines.be();\r\n\t\t\t} else {\r\n\t\t\t\tstylePlaceLines=Lines.bae(\"<!-- <style> \"+this.getSectionPasteComment('css')+\" </style> -->\");\r\n\t\t\t}\r\n\t\t\tstyleExtractLines=this.cachedStyleLines;\r\n\t\t} else if (sectionModes.css=='file') {\r\n\t\t\tstylePlaceLines=Lines.bae(Lines.html`<link rel=stylesheet href=${this.basename+'.css'}>`);\r\n\t\t\tstyleExtractLines=this.cachedStyleLines;\r\n\t\t}\r\n\t\tlet scriptPlaceLines=NoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines);\r\n\t\tlet scriptExtractLines=Lines.be();\r\n\t\tif (sectionModes.js=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tscriptPlaceLines=Lines.be();\r\n\t\t\t} else {\r\n\t\t\t\tscriptPlaceLines=Lines.bae(\"<!-- <script> \"+this.getSectionPasteComment('js')+\" </script> -->\");\r\n\t\t\t}\r\n\t\t\tscriptExtractLines=this.cachedScriptLines;\r\n\t\t} else if (sectionModes.js=='file') {\r\n\t\t\tscriptPlaceLines=Lines.bae(Lines.html`<script src=${this.basename+'.js'}></script>`);\r\n\t\t\tscriptExtractLines=this.cachedScriptLines;\r\n\t\t}\r\n\t\tlet htmlExtractLines;\r\n\t\tif (sectionModes.html=='body') {\r\n\t\t\thtmlExtractLines=this.getBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines);\r\n\t\t} else {\r\n\t\t\thtmlExtractLines=this.getFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines);\r\n\t\t}\r\n\t\tconst type=sectionName=>'text/'+(sectionName=='js'?'javascript':sectionName);\r\n\t\treturn {\r\n\t\t\thtml: new CodeSection(this.filename,type('html'),htmlExtractLines),\r\n\t\t\tcss:  new CodeSection(this.basename+'.css',type('css'),styleExtractLines),\r\n\t\t\tjs:   new CodeSection(this.basename+'.js',type('js'),scriptExtractLines),\r\n\t\t};\r\n\t}\r\n\t// get title()\r\n\r\n\t// private:\r\n\tgetLines() {\r\n\t\treturn this.getFullHtmlSectionLines(\r\n\t\t\tNoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines),\r\n\t\t\tNoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\t);\r\n\t}\r\n\tgetFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\tconst a=Lines.b();\r\n\t\ta(\"<!DOCTYPE html>\");\r\n\t\tif (this.lang!==null) {\r\n\t\t\ta(Lines.html`<html lang=${this.lang}>`);\r\n\t\t} else {\r\n\t\t\ta(\"<html>\");\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"<head>\",\r\n\t\t\t\"<meta charset=utf-8>\"\r\n\t\t);\r\n\t\tif (this.title!==null) {\r\n\t\t\ta(\"<title>\"+this.title+\"</title>\");\r\n\t\t}\r\n\t\ta(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\t\"</head>\",\r\n\t\t\t\"<body>\",\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines,\r\n\t\t\t\"</body>\",\r\n\t\t\t\"</html>\"\r\n\t\t);\r\n\t\treturn a.e();\r\n\t}\r\n\tgetBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\treturn Lines.bae(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines\r\n\t\t);\r\n\t}\r\n\tget cachedStyleLines()  { if (!this._styleLines)  this._styleLines =this.styleLines;  return this._styleLines;  }\r\n\tget cachedHeadLines()   { if (!this._headLines)   this._headLines  =this.headLines;   return this._headLines;   }\r\n\tget cachedBodyLines()   { if (!this._bodyLines)   this._bodyLines  =this.bodyLines;   return this._bodyLines;   }\r\n\tget cachedScriptLines() { if (!this._scriptLines) this._scriptLines=this.scriptLines; return this._scriptLines; }\r\n\r\n\t// to be redefined in subclasses:\r\n\tget basename() { // filename base\r\n\t\treturn 'source';\r\n\t}\r\n\tget lang() { // language tag for <html lang='xx'> or null to skip it - likely read from i18n\r\n\t\treturn null;\r\n\t}\r\n\tget title() { // page title or null to skip it\r\n\t\treturn null;\r\n\t}\r\n\tget styleLines() { // contents of <style>\r\n\t\treturn Lines.be();\r\n\t}\r\n\tget headLines() { // contents of <head> following <style>\r\n\t\treturn Lines.be();\r\n\t}\r\n\tget bodyLines() { // contents of <body> preceding <script>\r\n\t\treturn Lines.be();\r\n\t}\r\n\tget scriptLines() { // contents of <script>\r\n\t\treturn Lines.be();\r\n\t}\r\n\tgetSectionPasteComment(sectionName) { // section placeholder comment in paste mode - likely to be overridden with i18n\r\n\t\treturn sectionName+\" goes here\";\r\n\t}\r\n}\r\n\r\n/*\r\n\t// TODO implement indent reformatting like this:\r\n\tjoin(indent) {\r\n\t\treturn this.data.map(function(line){\r\n\t\t\treturn line.replace(/^(\\t)+/,function(match){\r\n\t\t\t\treturn Array(match.length+1).join(indent);\r\n\t\t\t});\r\n\t\t}).join('\\n');\r\n\t}\r\n*/\r\n\r\nmodule.exports=WebCode;\r\n","'use strict';\r\n\r\nconst Lines=require('./lines.js');\r\n\r\nclass WrapLines extends Lines {\r\n\tconstructor(data) {\r\n\t\tsuper(data);\r\n\t\tthis.wrappers=[];\r\n\t\tfor (let i=1;i<arguments.length;i++) {\r\n\t\t\tthis.wrappers.push(arguments[i]);\r\n\t\t}\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn false;\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[];\r\n\t\tlet i=0;\r\n\t\tconst pushWrapper=()=>{\r\n\t\t\tconst item=this.wrappers[i];\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html);\r\n\t\t\t\tout.push(...subOut);\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? Lines.strHtmlEscape(item) : item);\r\n\t\t\t\tout.push(s);\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t};\r\n\t\tpushWrapper();\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html);\r\n\t\t\t\tout.push(...subOut.map(s=>'\\t'+s));\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper();\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? Lines.strHtmlEscape(item) : item);\r\n\t\t\t\tout.push('\\t'+s);\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (this.wrappers.length==2) {\r\n\t\t\tpushWrapper();\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n}\r\n\r\nmodule.exports=WrapLines;\r\n"],"sourceRoot":"."}