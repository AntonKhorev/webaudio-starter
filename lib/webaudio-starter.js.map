{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/crnx-base/code-output-i18n.js","webaudio-starter.js","node_modules/crnx-base/code-output.js","node_modules/crnx-base/code-section.js","node_modules/crnx-base/details-polyfill.js","node_modules/crnx-base/fake-lodash/camelcase.js","node_modules/crnx-base/fake-lodash/capitalize.js","node_modules/crnx-base/fake-lodash/debounce.js","node_modules/crnx-base/fake-lodash/escape.js","node_modules/crnx-base/format-number.js","node_modules/crnx-base/format-numbers.js","node_modules/crnx-base/group-option-output.js","node_modules/crnx-base/i18n-expand-curly.js","node_modules/crnx-base/i18n-link-wikipedia.js","node_modules/crnx-base/i18n.js","node_modules/crnx-base/interleave-lines.js","node_modules/crnx-base/js-lines.js","node_modules/crnx-base/lines.js","node_modules/crnx-base/nose-wrap-lines.js","node_modules/crnx-base/option-classes.js","node_modules/crnx-base/options-output-i18n.js","node_modules/crnx-base/options-output.js","node_modules/crnx-base/options.js","node_modules/crnx-base/ref-lines.js","node_modules/crnx-base/tip.js","node_modules/crnx-base/web-code.js","node_modules/crnx-base/wrap-lines.js","node_modules/crnx-build/babel-helpers/math-log10.es5","node_modules/crnx-build/babel-helpers/arraylike-prototype-includes.es5","src/audio-context.js","node_modules/crnx-build/babel-helpers/string-prototype-repeat.es5","src/audio-graph-con-node-classes.js","src/audio-graph-gen-node-classes.js","src/audio-graph-vis-node-classes.js","src/audio-graph.js","src/biquad-filter-node-option-output.js","src/canvas-context.js","src/canvas.js","src/code-output.js","src/code.js","src/equalizer-filter-node-option-output.js","src/feature.js","src/filter-node-option-output.js","src/graph-option-output.js","src/group-node-option-output.js","src/i18n.js","src/iir-filter-node-option-output.js","src/loader.js","src/main.js","src/node-options-output.js","src/option-classes.js","src/options-output.js","src/options.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","lang","strings","additionalStringsPrefix","additionalStrings","en","save","run","open.codepen","open.jsfiddle","open.plunker","section.html","section.css","section.js","embedded","mode.full","mode.body","mode.embed","mode.paste","mode.file","formatting","formatting.indent","formatting.indentNumber","formatting.jsSemicolons","warning.no-hljs","ru","id",2,"debounce","detailsPolyfill","getHtmlDataUri","html","encodeURIComponent","makeObjectWithSetters","values","setCallback","obj","_loop","prop","Object","defineProperty","get","set","v","CodeOutput","generateCode","i18n","_this","this","___babelHelper___classCallCheck","defaultFormatting","update","flush","applyUpdatedCode","sectionModes","css","js","_code","initDomProps","writeFormattingControls","This","$indentCheckbox","undefined","$indentNumber","updateIndent","indent","checkValidity","Number","val","$","append","change","on","jsSemicolons","checked","each","writeSection","sectionName","writeSectionSummary","$sectionCode","$output","writeButtons","window","hljs","prototype","$saveButtons","sections","extractSections","empty","$code","getHtml","join","highlightBlock","postData","url","target","data","$form","name","attr","appendTo","submit","remove","click","navigator","msSaveOrOpenBlob","w","open","document","write","close","getSection","JSON","stringify","title","wrap","_postData","filename","$summary","map","mode","value","section","blob","Blob","type","mimeType","$a","download","href","URL","createObjectURL","___babelHelper___createClass","key","29","4","7",3,"CodeSection","lines","detailsSupported","createElement","$details","ev","preventDefault","toggleOpen","removeAttr","keyCodeEnter","keyCodeSpace","handleEvent","closest","is","addClass","children","keydown","keyCode",5,"capitalize","split","6","charAt","toUpperCase","slice","func","wait","timeoutId","debounced","clearTimeout","setTimeout",8,"entityMap","&","<",">","\"","'","String","replace","m",9,"formatNumbers","formatNumber","number","precision","glsl","10","formatNumbersInternal","numbers","keepDot","noPlus","maxPrecision","hasNegative","p","toFixed","match","ss","Array","isArray","_i","_number","_s",11,"GroupOptionOutput","option","writeOption","generateId","fullName","entries",12,"inStrings","expandIdAndString","string","idMatch","expandRegexp","exec","idStart","idMidsStr","idEnd","idMids","stringMatch","stringStart","stringMidsStr","stringEnd","stringMids","forEach","idMid","stringMid",13,"p1","link","text","indexOf",14,"escape","langStrings","defaultLang","has","pluralSuffix","ns","nn","Math","abs","teen","plural","haveToAttachUnit","unit","test","expandedUnit","abbrFn","abbr","expansion","numberWithUnits","numberWithoutUnits","numberUnits","27",15,"Lines","InterleaveLines","_Lines","___babelHelper___possibleConstructorReturn","apply","arguments","___babelHelper___inherits","doGet","out","first","fp","push","_arr","item","subOut","17",16,"JsLines","processStringInGet","TO","TypeError","isDataEmpty","isEmpty","addTo","_arr2","_i2","pop","shift","b","_arguments","makeLines","Function","bind","concat","ae","ba","_b","be","bae","_b2","count","_arguments2","reduce",18,"WrapLines","NoseWrapLines","_WrapLines","26",19,"Option","Base","_class","settings","parent","visibilityManager","makeEntry","updateCallbacks","_$","isVisible","register","visibilityData","visibilityDataLogic","testName","options","declareAffectedBy","make","nScalars","nArrays","nObjects","scalarArg","arrayArg","objectArg","_len","rest","_key","arg","optionClass","collectArgs","updateVisibility","toggle","updateCallback","addUpdateCallback","shortenExport","dataKeys","keys","shortenExportAssign","parentData","Input","_Option$Base","_class2","defaultValue","_value","create","export","Boolean","_Option$Input","_class3","fix","NonBoolean","_Option$Input2","_class4","valueOf","toString","Factor","_Option$NonBoolean","_class5","_this4","availableValues","_Option$NonBoolean2","_class6","_this5","availableMin","availableMax","fixed","Struct","_Option$Base2","_class7","_this6","descriptions","x","subName","subData","entry","fixedEntries","_i3","Collection","_Option$Base3","_class8","_this7","availableConstructors","Map","enterCollection","_arr3","_i4","ctor","exitCollection","typePropertyName","subDatas","defaultType","availableTypes","indexedEntries","subType","subCtor","populateEntries","fn","getElementsPropertyName","setElementExportData","element","setElementFixData","_this8","getEntryFromElement","_ref","_this9","subFixed","types","_","Void","_Option$Base4","_class9","Checkbox","_Option$Boolean","_class10","Select","_Option$Factor","_class11","Text","_Option$Factor2","_class12","Int","_Option$Number","_class13","Float","_Option$Number2","_class14","_this15","Root","_Option$Struct","_class15","_class16","Group","_Option$Struct2","_Option$Collection","_class17","datas","_entries","filter",20,"reset","drag","drag.tip","delete","delete.tip",21,"writeTip","OptionsOutput","optionProto","getPrototypeOf","optionClassWriter","optionClassWriters","constructor","setOptionClassWriters","root","getLeadLabel","valueId","valueInfoId","$select","availableValue","some","$tip","handler","find","listId","setInputAttrs","$input","min","max","step","pow","setInputAttrsAndListeners","$that","parseFloat","$sliderInput","$numberInput","fmt","infoId","24",22,"OptionVisibilityManager","inCollection","affects","Options","updateVisibilityAffectedBy","byFullName","optionClasses","description","_Option$className","className","makeArgs","entriesDescription",23,"RefLines","ref","tipClass","parse","re","substr","plainOut","refs","tipContent","popupTimeoutId","popupLevel","handlePopup","dLevel","delay","removeClass","mouseenter","focusin",25,"_templateObject","___babelHelper___taggedTemplateLiteralLoose","cachedStyleLines","_templateObject2","_templateObject3","basename","WebCode","getLines","stylePlaceLines","styleExtractLines","getSectionPasteComment","scriptPlaceLines","cachedScriptLines","scriptExtractLines","htmlExtractLines","getBodyHtmlSectionLines","getFullHtmlSectionLines","cachedHeadLines","cachedBodyLines","_styleLines","styleLines","_headLines","headLines","_bodyLines","bodyLines","_scriptLines","scriptLines","pushWrapper","wrappers","_this2","haystack","needle","start","includes",28,"log10","log","LN10","AudioContext","repeat",30,"Feature","_Feature","declTarget","requestFeatureContext","featureContext","getConnectAssignJsLines","decl","connectors","connectArgs","connectArgsConcat","connectReturnValue","connector","_connector","getInitJsLines","audioContext","noVendorPrefix","41",31,"GenNode","VisNode","ConNode","MANY","Node","nextNodes","Set","prevNodes","toGenNode","node","estimatedNOutputs","estimatedNInputs","ContainerNode","_Node","innerNode","passive","downstreamEffect","upstreamEffect","MediaElementNode","_Node2","FilterNode","_Node3","PassiveByDefaultFilterNode","_FilterNode","VisualizationNode","propertyNames","every","propertyName","input","_Node4","toVisNode","bypass","_ContainerNode","_ContainerNode2","rewireInput","rewireOutput","drywet","analyser","visNodes","_Node5","innerNodes","genNode","visNode","initParent","nodeJsName","isEquivalentAnalyser","that","logFftSize","stereoVolume","_Node6","volume","leftAnalyserNodeJsName","rightAnalyserNodeJsName","junction","_PassiveByDefaultFilt","activeJunction","_ConNode$junction","audio","_MediaElementNode","video","_MediaElementNode2","sample","_Node7","gain","_PassiveByDefaultFilt2","panner","_PassiveByDefaultFilt3","ff","biquad","_FilterNode2","convolver","iir","_FilterNode3","feedforward","fb","feedback","j","_j","_FilterNode4","_class18","equalizer","_FilterNode5","_this22","EqualizerFilter","frequencies","freq","compressor","_FilterNode6","waveform","_VisualizationNode","frequencyBars","_VisualizationNode2","frequencyOutline","_VisualizationNode3","_class19","_templateObject4","_VisualizationNode4","_class20","destination","_Node8","_class21","32","33","50","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","camelCase","initEdges","getInputs","getOutputs","getPrevNodeOutputs","names","getNextNodeInputs","getPropertyInputHtmlName","getPropertyInputJsName","getPropertyJsConstant","property","getPropertyHtmlLines","skip","inputHtmlName","propertyOptionName","fmtAttrs","fmtLabels","minMax","_WrapLines$b","getPropertyJsLines","propertyJsName","inputJsName","eventProp","getXhrJsLines","onDecodeLines","onErrorLines","leadLines","midLines","endLines","loaderOnError","getPreVisJsLines","getVisJsLines","jsCommentType","getHtmlLines","getElementHtmlLines","nodeHtmlName","properties","ctxCreateMethodName","enabled","rewire","method","fromNames","toNames","fromName","toName","wetGainDummyNode","wetGainNodeJsName","dryGainNodeJsName","wetProperty","wet","canvas","maxLogFftSize","maxLogFftSizeNodeJsName","_this10","getAnalyserNodeLines","jsName","prevOutputs","_this11","splitterNodeJsName","_this12","messageHtmlName","getSampleLines","_this17","width","height","loader","fmtMul","fmtNum","startOptions","randomValue","baseOption","randomOption","base","random","lastNodeName","pitch","randomPitch","randomGain","getOnClickLines","interval","randomShift","getOnDecodeLines","getOnErrorLines","BiquadFilter","typeUsesQ","typeUsesGain","noGainsConstant","affectedFreqsAndOptions","inputNodeJsName","outputNodeJsName","nInputs","_i5","_ref2","alignedInputs","_this24","_this25","prevNodeOutputs","singleFreq","allGainsConstant","_ref3","_ref4","getJsData","_ref5","getJsDataItem","getJsLoopLines","inputHtmlNameExpr","constLines","varLines","outerNodeJsName","VisFunction","_this26","_ref6","_Node9","CanvasContext","FrequencyBarsVisFunction","addArgValues","frequencyCutoff","args","getArgValue","getTernaryOpArgValue","cases","argValue","caseArgValue","caseResultValue","getConditionalArgLines","caseResultLines","getDeclJsLines","canvasContext","declArgs","getBodyJsLines","getCallJsLines","passValues","_len2","FrequencyOutlineVisFunction","_key2","WaveformVisFunction","_VisFunction","analyserNode","setProp","_VisFunction2","nBars","y","colorInput","fillStyle","_VisFunction3","getOutlineLines","VolumeVisFunction","_VisFunction4","xOffset","makeVisFunction","analyserNodeJsName","_featureContext$featu","featureContextProp","listVisFunctionArgValues","_featureContext$featu2","getColorStyle","color","cutoff","coloring","coloringInput","nextNode","nodeOptions","canvasVolumeGradient","canvasVolumeMeterCounter","36",34,"AudioGraph","haveNodeOutputIntersection","node1","node2","intersect","replaceNode","oldNode","newNode","prevNode","add","deleteNode","createNodes","createNodesAndScores","nodes","destinationScore","nodeType","bypassable","enabledInput","keepBestNodes","nodesAndScores","bestNode","bestScore","_nodesAndScores$i","score","linkNodes","next","keepDistinctNodes","inputNodes","outputNodes","visited","insertActiveJunctions","fixedOutputs","rewireNodes","fixedInputs","junctionNode","removePassiveNodes","_loop2","removingWouldCreateTooManyConnections","estimatedNPrevNodeOutputs","nOutputs","estimatedNNextNodeInputs","hasDirectParallelConnections","parallel","prevNextNode","removeUnaffectedNodes","propagateEffect","effectPropertyName","nodesPropertyName","rec","_i6","_node","visitedDownstream","visitedUpstream","wrapVisualizationNodes","combineAnalyserNodes","deleted","nextNodesToCombine","size","_i7","_node$innerNodes","_i8","_node2","sortNodes","typeCounts","typeLastNodes","conNodes","transform","conToGenMap","genNodes","translateConToGen","conNodesSet","conNode","_i9","_node3","nodeJsLines",35,"FilterNodeOptionOutput","BiquadFilterNodeOptionOutput","_FilterNodeOptionOutp","getFilterNodes","biquadNode","createBiquadFilter","fixedOption","frequency","detune","Q","writeExtraSection","computeCoefs","sampleRate","post20160415","F_s","f_0","G","A","omega_0","PI","alpha_Q","sin","Q_dB","alpha_B","sqrt","alpha_Q_dB","S","alpha_S","c","cos","aSA2","newCoefsCheckboxId","$newCoefsCheckbox","$cloneButton","coefs","removeData","42","CanvasContextJsLines","_JsLines","flags","modified","unshift","colorOption","cs","props","lineWidth","strokeStyle",37,"Canvas","getClearLines","background","visualizeWaveformFn","visualizeFrequencyBarsFn","visualizeFrequencyOutlineFn","visualizeVolumeFn",38,"BaseCodeOutput","_BaseCodeOutput","$warnings","isInteresting","$warning","$section","context","source","peaking","splitter","buffer",39,"Loader","BaseWebCode","Code","_BaseWebCode","features","api","graph","feature","_NoseWrapLines$b","_this3","47",40,"EqualizerFilterNodeOptionOutput","GroupNodeOptionOutput","pad","maxNGridLines","fontSize","fontOffset","minFrequencyInLogMode","linearFrequencyArray","logFrequencyArray","logFrequencyArrayLinearLimit0","logFrequencyArrayLinearLimit1","magnitudeArray","phaseArray","magnitudeArray0","phaseArray0","mix","canCreateAudioContext","initAudioContext","webkitAudioContext","Float32Array","maxFrequency","log10minFrequency","log10maxFrequency","_GroupNodeOptionOutpu","magnitudeLogScale","magnitudeCanvasContext","phaseCanvasContext","frequencyLogScale","updatePlots","filterNodes","maxAbs","removeNans","array","interpolate","i0","i1","hasStartValue","hasEndValue","v0","v1","nanStart","isFinite","frequencyArray","filterNode","getFrequencyResponse","k","plotResponse","units","enforcedCenter","enforcedRange","enforcedFloor","majorGridLineTest","_Math","_Math2","setPlotRange","min0","max0","ph","minArr","maxArr","minArrCentered","maxArrCentered","calcY","getGridNumbers","numLogs","Infinity","tk","tp","ceil","dv","drawGrid","visibleNumbers","calcPosition","labelLimit","_Math3","translate","font","textAlign","getLabel","labelWidth","measureText","round","drawLine","beginPath","moveTo","lineTo","stroke","majorGridLine","setLineDash","fillText","restore","drawYGrid","yGridNumbersAndPrecision","yVisibleGridNumbers","drawXGrid","yLabelWidth","rotate","calcX","xGridNumbersAndPrecision","xVisibleGridNumbers","drawGraph","_y","clearRect","immediateUpdate","delayedUpdate","$mainSection","$option","$plotUi","isPlotUiVisible","isPlotUiErrorFree","addErrorSection","errorMessage","addPlotSections","magnitudeId","frequencyId","$settingsSection","$magnitudeCanvas","getContext","$magnitudeSection","$phaseCanvas","$frequencySection","$extraSection","writeMoreButton","$moreButtonText","$button","hide","show","44","GraphOptionOutput","NodeOptionsOutput","gridSize","nodeWidth","inactiveColor","closeColor","$lines","$nodes","maxZIndex","outputPad","g2pCoord","gCoord","parseInt","p2gCoord","pCoord","writeVisibleLine","x1","y1","x2","y2","createElementNS","marker-start","marker-end","stroke-width","writeInvisibleLine","stroke-opacity","moveLine","$line","coords","detach","getNodeName","$node","nodeOption","nodeIndex","getNodePortCoords","dirIndex","pos","position","left","top","updateNodeSequence","$selectOptions","thatNode","writeLi","$toNode","disconnectNodes","$inList","$outList","$inSelect","$outSelect","canConnectNodes","$thisNode","$thatNode","disconnectInToOut","$outNode","$inNode","connectNodes","connectInToOut","xy1","xy2","$vLine","$iLine","mouseover","mouseout","addNode","gx0","gy0","nodeOptionsOutput","dragAnimationId","snapAnimationId","writePort","isClosed","dirNames","thisDir","$hole","mousedown","fromNodeIndex","canConnectTo","toNodeIndex","_getNodePortCoords","documentHandlers","mouseup","off","nodeHandlers","mousemove","nodesPos","offset","pageX","pageY","_getNodePortCoords2","stopPropagation","writeBox","$box","enableSwitch","enableSwitchId","writeAdditionalControls","enableInputSwitchId","z-index","ins","outs","after","cancelAnimationFrame","inEdges","outEdges","dragX1","dragY1","setNodePosition","_getNodePortCoords3","_getNodePortCoords4","handlers","snapX1","snapY1","gx","gy","snapX2","snapY2","snapDuration","snapStartTime","performance","now","snapAnimationHandler","time","requestAnimationFrame","dragX2","dragY2","$buttons","$legend","$graph","resizeAnimationHandler","clientWidth","scrollLeft","clientHeight","scrollTop","49",45,"webaudioSpec","webaudioIssue","webaudioDetect","enColors","ruColors","options.graph","options.graph.{audio,video}","options.graph.{audio,video}.add","options.graph.sample","options.graph.sample.add","options.graph.sample.repeat","options.graph.sample.interval","options.graph.sample.randomShift","options.graph.sample.pitch","options.graph.sample.randomPitch","options.graph.sample.gain","options.graph.sample.randomGain","options.graph.{audio,video,sample}.url","options.graph.video.{width,height}","options.graph.gain","options.graph.gain.add","options.graph.gain.gain","options.graph.panner","options.graph.panner.add","options.graph.panner.pan","options.graph.biquad","options.graph.biquad.add","options.graph.biquad.type","options.graph.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}","options.graph.biquad.frequency","options.graph.biquad.detune","options.graph.biquad.Q","options.graph.biquad.gain","options.graph.iir","options.graph.iir.add","options.graph.iir.feedforward","options.graph.iir.feedback","options.graph.convolver","options.graph.convolver.add","options.graph.convolver.url","options.graph.convolver.wet","options.graph.equalizer","options.graph.equalizer.add","options.graph.equalizer.gain{60,170,350,1000,3500,10000}","options.graph.compressor","options.graph.compressor.add","options.graph.{waveform,frequencyBars,frequencyOutline}","options.graph.{waveform,frequencyBars,frequencyOutline}.add","options.graph.volume","options.graph.volume.add","options.graph.stereoVolume","options.graph.stereoVolume.add","options.graph.{waveform,frequencyBars,frequencyOutline,volume,stereoVolume}.logFftSize","options.graph.{waveform,frequencyOutline}.width","options.graph.{waveform,frequencyOutline}.color","options.graph.{waveform,frequencyOutline}.color.{r,g,b,a}","options.graph.{frequencyBars,frequencyOutline}.cutoff","options.graph.{frequencyBars,frequencyOutline}.base","options.graph.{frequencyBars,frequencyOutline}.base.{bottom,middle}","options.graph.frequencyBars.coloring","options.graph.frequencyBars.coloring.component","options.graph.frequencyBars.coloring.spectral","options.graph.frequencyBars.coloringInput","options.graph.frequencyBars.coloringInput.{amplitude,frequency}","options.graph.destination","options.graph.destination.add","options.graph.junction","options.graph.analyser","options.canvas","options.canvas.{width,height}","options.canvas.background","options.canvas.background.type","options.canvas.background.type.{clear,filled}","options.canvas.background.color","options.canvas.background.color.{r,g,b,a}","options.loader","options.loader.errors","options.loader.errors.none","options.loader.errors.network","options.loader.errors.http","options.api","options.api.noVendorPrefix","options.api.connectReturnValue","options-info.graph.{waveform,frequencyBars,frequencyOutline}.logFftSize","options-info.graph.{volume,stereoVolume}.logFftSize","options-info.graph.{frequencyBars,frequencyOutline}.cutoff","options-info.canvas.background.color.a","options-output.input","options-output.range","options-output.filter.frequencyResponse","options-output.filter.magnitude","options-output.filter.phase","options-output.filter.logMagnitude","options-output.filter.logFrequency","options-output.filter.contextError","options-output.filter.nodeError","options-output.filter.biquad.clone","options-output.filter.biquad.clone.newCoefs","options-output.filter.biquad.clone.info","options-output.iir-filter-coefs.invalid","options-output.show","options-output.hide","options-output.enabled","code-output.warning.jsfiddle-run","code-output.warning.interesting","code.title","label.graph.sample.play","label.graph.sample.buffer.loading","label.graph.sample.buffer.error","label.graph.convolver.buffer.loading","label.graph.convolver.buffer.error","comment.context","comment.graph.junction","comment.graph.audio","comment.graph.video","comment.graph.sample","comment.graph.gain","comment.graph.panner","comment.graph.convolver","comment.graph.convolver.drywet","comment.graph.compressor","comment.graph.analyser","comment.graph.stereoVolume","comment.graph.biquad","comment.graph.iir","comment.graph.equalizer","comment.graph.equalizer.single","comment.graph.destination","units.pixel.a","units.pixel.{1,2}","units.hertz.a","units.hertz.{1,2}","units.decibel.a","units.decibel.{1,2}","units.second.a","units.second.{1,2}","options.graph.biquad.type.lowpass","options.graph.biquad.type.highpass","options.graph.biquad.type.bandpass","options.graph.biquad.type.{lowshelf,highshelf,peaking}","options.graph.biquad.type.notch","options.graph.biquad.type.allpass","options.graph.frequencyBars.base","options.graph.frequencyBars.base.{bottom,middle}","options.graph.frequencyOutline.base","options.graph.frequencyOutline.base.{bottom,middle}","options-info.graph.convolver.wet","units.pixel.{1,2,5}","units.hertz.{1,2,5}","units.decibel.{1,2,5}","units.second.{1,2,5}",46,"IIRFilterNodeOptionOutput","createIIRFilter","errors",48,"idCounter","i18ns","$container","codeOutput","optionsOutput","51","52","BaseOptionsOutput","_BaseOptionsOutput","hasClass","LiveSelect","inputCheckboxId","$inputCheckbox","IIRFilterCoefs","isValueValid","setCustomValidity","inputAttrs","LiveNumber","writeMinMaxInput","minOrMax","$rangeMinInput","$rangeMaxInput","$rangeSpan1","$rangeSpan2","$range","before","defaultMin","defaultMax","IIRFilter","dataValue","dataMin","dataMax","dataInput","_min","_max","_input","_$range","updateInternalVisibility","exportHelper","src","LiveInt","_Option$LiveNumber","LiveFloat","_Option$LiveNumber2","FixedLiveSelect","_Option$Select","GraphNode","_Option$Group","_enabled","AudioGraphNode","_Option$GraphNode","_enabledInput","WetAudioGraphNode","_Option$AudioGraphNod","_Option$AudioGraphNod2","lowpass","highpass","bandpass","notch","allpass","lowshelf","highshelf","_Option$Text","result","_Option$AudioGraphNod3","_Option$AudioGraphNod4","Graph","subtracts","sub","storeNodes","_nodes","resetNodeConnectionData","addConnectionData","AcyclicGraph","_Option$Graph","_connectivityMatrix","Int8Array",43,"BaseOptions","_BaseOptions","canvas.background.type"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='code-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'save': \"Save source code\",\r\n\t\t\t'run': \"Run in new window\",\r\n\t\t\t'open.codepen': \"Open in CodePen\",\r\n\t\t\t'open.jsfiddle': \"Open in JSFiddle\",\r\n\t\t\t'open.plunker': \"Open in Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"embedded in HTML source code\",\r\n\t\t\t'mode.full': \"complete HTML\",\r\n\t\t\t'mode.body': \"only HTML body\",\r\n\t\t\t'mode.embed': \"embed in HTML\",\r\n\t\t\t'mode.paste': \"extract to paste into HTML later\",\r\n\t\t\t'mode.file': \"extract to load as external resource\",\r\n\t\t\t'formatting': \"Formatting\",\r\n\t\t\t'formatting.indent': \"indent with tabs\",\r\n\t\t\t'formatting.indentNumber': \"spaces per indent\",\r\n\t\t\t'formatting.jsSemicolons': \"JavaScript semicolons\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'save': \"Сохранить исходный код\",\r\n\t\t\t'run': \"Запустить в новом окне\",\r\n\t\t\t'open.codepen': \"Открыть в CodePen\",\r\n\t\t\t'open.jsfiddle': \"Открыть в JSFiddle\",\r\n\t\t\t'open.plunker': \"Открыть в Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"встроен в код HTML\",\r\n\t\t\t'mode.full': \"полностью\",\r\n\t\t\t'mode.body': \"только <code>body</code>\",\r\n\t\t\t'mode.embed': \"встроить в HTML\",\r\n\t\t\t'mode.paste': \"извлечь для последующей вставки в HTML\",\r\n\t\t\t'mode.file': \"извлечь для загрузки в качестве внешнего ресурса\",\r\n\t\t\t'formatting': \"Форматирование\",\r\n\t\t\t'formatting.indent': \"отступы с помощью tab\",\r\n\t\t\t'formatting.indentNumber': \"пробелов в отступе\",\r\n\t\t\t'formatting.jsSemicolons': \"<code>;</code> в JavaScript\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена.\",\r\n\t\t},\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n",null,"'use strict'\r\n\r\nconst debounce=require('./fake-lodash/debounce')\r\nconst detailsPolyfill=require('./details-polyfill')\r\n\r\nconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html)\r\n\r\nconst makeObjectWithSetters=(values,setCallback)=>{\r\n\tconst obj={}\r\n\tfor (let prop in values) {\r\n\t\tObject.defineProperty(obj,prop,{\r\n\t\t\tget: ()=>values[prop],\r\n\t\t\tset: v=>{\r\n\t\t\t\tvalues[prop]=v\r\n\t\t\t\tsetCallback()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn obj\r\n}\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCode,i18n) {\r\n\t\tthis.formatting=makeObjectWithSetters(\r\n\t\t\tthis.defaultFormatting,\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.sectionModes=makeObjectWithSetters(\r\n\t\t\t{html:'full',css:'embed',js:'embed'},\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis._code=generateCode()\r\n\t\tthis.update=debounce(()=>{\r\n\t\t\tthis._code=generateCode()\r\n\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t},200)\r\n\r\n\t\tthis.initDomProps()\r\n\t\tconst writeFormattingControls=()=>{\r\n\t\t\tconst This=this\r\n\t\t\tlet $indentCheckbox,$indentNumber\r\n\t\t\tconst updateIndent=()=>{\r\n\t\t\t\tlet indent='\\t'\r\n\t\t\t\tif (!$indentCheckbox.prop('checked')) {\r\n\t\t\t\t\tlet n=4\r\n\t\t\t\t\tif ($indentNumber[0].checkValidity()) {\r\n\t\t\t\t\t\tn=Number($indentNumber.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindent=' '.repeat(n)\r\n\t\t\t\t}\r\n\t\t\t\tthis.formatting.indent=indent\r\n\t\t\t}\r\n\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\"<summary>\"+i18n('code-output.formatting')+\"</summary>\",\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.indent=='\\t')\r\n\t\t\t\t\t\t\t.change(updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indent')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentNumber=$(\"<input type='number' min='0' max='32' required>\")\r\n\t\t\t\t\t\t\t.val(this.formatting.indent=='\\t'?4:this.formatting.indent.length)\r\n\t\t\t\t\t\t\t.on('input change',updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indentNumber')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.jsSemicolons)\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\tThis.formatting.jsSemicolons=this.checked\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.jsSemicolons')\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst writeSection=(sectionName)=>{\r\n\t\t\treturn $(\"<details open>\").append(\r\n\t\t\t\tthis.writeSectionSummary(sectionName,i18n),\r\n\t\t\t\tthis.$sectionCode[sectionName]=$(\"<div class='code'>\")\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(this.writeButtons(i18n)).append(\r\n\t\t\twriteFormattingControls(),\r\n\t\t\twriteSection('html'),\r\n\t\t\twriteSection('css'),\r\n\t\t\twriteSection('js')\r\n\t\t)\r\n\t\tif (!window.hljs) {\r\n\t\t\t$output.append(\"<p>\"+i18n('code-output.warning.no-hljs')+\"</p>\")\r\n\t\t}\r\n\t\t$output.append(this.writeButtons(i18n))\r\n\t\tthis.applyUpdatedCode(i18n)\r\n\r\n\t\t// public interface:\r\n\t\t// this.update\r\n\t\tthis.$output=$output\r\n\t}\r\n\r\n\t// private interface:\r\n\tget code() {\r\n\t\tthis.update.flush()\r\n\t\treturn this._code\r\n\t}\r\n\r\n\t// extend/override fns:\r\n\tget defaultFormatting() {\r\n\t\treturn {\r\n\t\t\tindent: '\\t',\r\n\t\t\tjsSemicolons: false,\r\n\t\t}\r\n\t}\r\n\tinitDomProps() {\r\n\t\tthis.$sectionCode={}\r\n\t\tthis.$saveButtons={}\r\n\t}\r\n\tapplyUpdatedCode(i18n) { // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\r\n\t\tconst sections=this.code.extractSections(this.sectionModes)\r\n\t\tfor (let sectionName in sections) {\r\n\t\t\tif (this.sectionModes[sectionName]=='embed') {\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\"<p>\"+i18n('code-output.embedded')+\"</p>\"\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tlet $code\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t$(\"<pre>\").append(\r\n\t\t\t\t\t\t$code=$(\"<code class='\"+sectionName+\"'>\")\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t$code.html(\r\n\t\t\t\t\tsections[sectionName].getHtml(this.formatting).join(\"\\n\")\r\n\t\t\t\t)\r\n\t\t\t\tif (window.hljs) {\r\n\t\t\t\t\thljs.highlightBlock($code[0])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sectionName!='html') { // extractable section\r\n\t\t\t\tthis.$saveButtons[sectionName].prop('disabled',this.sectionModes[sectionName]=='embed')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst This=this\r\n\t\tconst postData=(url,target,data)=>{\r\n\t\t\tconst $form=$(`<form method='post' action='${url}' target='${target}'>`)\r\n\t\t\tfor (let name in data) {\r\n\t\t\t\t$form.append(\r\n\t\t\t\t\t$(\"<input type='hidden'>\").attr('name',name).val(data[name])\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$form.appendTo('body').submit().remove()\r\n\t\t}\r\n\t\treturn $(\"<div>\").append(\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.run')+\"</button>\").click(function(){\r\n\t\t\t\tconst html=This.code.get(This.formatting).join(\"\\n\")\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * Firefox and Chrome have trouble showing the source\r\n\t\t\t\t\t// * weird bug in Firefox:\r\n\t\t\t\t\t//   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\r\n\t\t\t\t\t// * Firefox shows url of a generator page\r\n\t\t\t\t\tconst w=window.open(\"\",\"generatedCode\")\r\n\t\t\t\t\tw.document.open()\r\n\t\t\t\t\tw.document.write(html)\r\n\t\t\t\t\tw.document.close()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * doesn't work in IE b/c they decided it's security risk\r\n\t\t\t\t\t// * long url\r\n\t\t\t\t\twindow.open(getHtmlDataUri(html),\"generatedCode\")\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.codepen')+\"</button>\").click(function(){\r\n\t\t\t\t// http://blog.codepen.io/documentation/api/prefill/\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://codepen.io/pen/define/','codepenGeneratedCode',{\r\n\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\t\ttitle: This.code.title, // doesn't work?\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.jsfiddle')+\"</button>\").click(function(){\r\n\t\t\t\t// http://doc.jsfiddle.net/api/post.html\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://jsfiddle.net/api/post/library/pure/','jsfiddleGeneratedCode',{\r\n\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\ttitle: This.code.title,\r\n\t\t\t\t\twrap: 'b',\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.plunker')+\"</button>\").click(function(){\r\n\t\t\t\t// https://github.com/angular/angular.js/blob/489835dd0b36a108bedd5ded439a186aca4fa739/docs/app/src/examples.js#L139-L157\r\n\t\t\t\tconst sections=This.code.extractSections({html:'full',css:'file',js:'file'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://plnkr.co/edit/?p=preview','plunkerGeneratedCode',{\r\n\t\t\t\t\t//['files['+sections['html'].filename+']']: getSection('html'), // wants index.html\r\n\t\t\t\t\t['files[index.html]']: getSection('html'),\r\n\t\t\t\t\t['files['+sections['css'].filename+']']: getSection('css'),\r\n\t\t\t\t\t['files['+sections['js'].filename+']']: getSection('js'),\r\n\t\t\t\t\t'private': true,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst This=this\r\n\t\tconst $summary=$(\"<summary>\"+i18n('code-output.section.'+sectionName)+\"</summary>\")\r\n\t\t$summary.append(\r\n\t\t\t\" \",\r\n\t\t\t$(\"<select>\").append(\r\n\t\t\t\t(sectionName=='html'\r\n\t\t\t\t\t? ['full','body']\r\n\t\t\t\t\t: ['embed','paste','file']\r\n\t\t\t\t).map(mode=>\r\n\t\t\t\t\t$(\"<option>\").val(mode).html(i18n('code-output.mode.'+mode))\r\n\t\t\t\t)\r\n\t\t\t).val(this.sectionModes[sectionName]).change(function(){\r\n\t\t\t\tThis.sectionModes[sectionName]=this.value\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t// doesn't work in IE\r\n\t\t\t//$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n\t\t\t//\t// yes I want a button, but download attr is only available for links\r\n\t\t\t//\t$(this).attr('href',getHtmlDataUri(\r\n\t\t\t//\t\tsection.get(this.formatting).join(\"\\n\")\r\n\t\t\t//\t))\r\n\t\t\t//})\r\n\t\t\tthis.$saveButtons[sectionName]=$(\"<button type='button'>\"+i18n('code-output.save')+\"</button>\").click(function(){\r\n\t\t\t\tconst section=This.code.extractSections(This.sectionModes)[sectionName]\r\n\t\t\t\t// http://stackoverflow.com/a/24354303\r\n\t\t\t\tconst blob=new Blob(\r\n\t\t\t\t\t[section.get(This.formatting).join(\"\\n\")],\r\n\t\t\t\t\t{type:section.mimeType}\r\n\t\t\t\t)\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob,section.filename)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst $a=$(\"<a>\").attr({\r\n\t\t\t\t\t\tdownload: section.filename,\r\n\t\t\t\t\t\thref: URL.createObjectURL(blob),\r\n\t\t\t\t\t}).appendTo('body')\r\n\t\t\t\t\t$a.get(0).click()\r\n\t\t\t\t\t$a.remove()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\treturn $summary\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nclass CodeSection {\r\n\tconstructor(filename,mimeType,lines) {\r\n\t\tthis.filename=filename\r\n\t\tthis.mimeType=mimeType\r\n\t\tthis.lines=lines\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.lines.get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.lines.getHtml(formatting)\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeSection\r\n","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tconst $details=$(this)\r\n\t$details.on('click','summary :input, summary a[href]',function(ev){ // firefox lets those events through\r\n\t\tev.preventDefault()\r\n\t})\r\n\tif (detailsSupported) return\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n","// assumes string is dot-separated, like this: \"some.html.id\"\r\nvar capitalize=require('./capitalize')\r\nmodule.exports=function(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n","// assumes string is lowercase\r\nmodule.exports=function(s){\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\n","// no options\r\nmodule.exports=function(func,wait){\r\n\tvar timeoutId=null\r\n\tvar debounced=function(){\r\n\t\tclearTimeout(timeoutId)\r\n\t\ttimeoutId=setTimeout(function(){\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t},wait)\r\n\t}\r\n\tdebounced.flush=function(){\r\n\t\tif (timeoutId) {\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t}\r\n\t}\r\n\treturn debounced\r\n}\r\n","module.exports=function(s){\r\n\tvar entityMap={\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#39;',\r\n\t\t// lodash also escapes `\r\n\t}\r\n\treturn String(s).replace(/[&<>\"']/g,m=>entityMap[m])\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbers=require('./format-numbers')\r\n\r\nconst formatNumber=(number,precision)=>formatNumbers     ([number],precision)[0]\r\nformatNumber.html =(number,precision)=>formatNumbers.html([number],precision)[0]\r\nformatNumber.js   =(number,precision)=>formatNumbers.js  ([number],precision)[0]\r\nformatNumber.glsl =(number,precision)=>formatNumbers.glsl([number],precision)[0]\r\n\r\nmodule.exports=formatNumber\r\n","'use strict'\r\n\r\nconst formatNumbersInternal=(numbers,precision,keepDot,noPlus)=>{\r\n\tlet maxPrecision=0\r\n\tif (keepDot) {\r\n\t\tmaxPrecision=1\r\n\t}\r\n\tlet hasNegative=false\r\n\tfor (let i in numbers) {\r\n\t\tlet p\r\n\t\tif (precision!==undefined) {\r\n\t\t\tp=precision\r\n\t\t} else if (numbers[i].precision!==undefined) {\r\n\t\t\tp=numbers[i].precision\r\n\t\t} else {\r\n\t\t\tthrow new Error('formatNumbers received no precision')\r\n\t\t}\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(p)\r\n\t\tif (Number(s)<0) { // protects against negative zero\r\n\t\t\thasNegative=true\r\n\t\t}\r\n\t\tif (p>0) {\r\n\t\t\tp-=s.match(/0*$/)[0].length\r\n\t\t}\r\n\t\tif (p>maxPrecision) {\r\n\t\t\tmaxPrecision=p\r\n\t\t}\r\n\t}\r\n\tconst ss=Array.isArray(numbers)?[]:{}\r\n\tfor (let i in numbers) {\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(maxPrecision)\r\n\t\tif (Number(s)>=0 && s.charAt(0)=='-') {  // protects against negative zero\r\n\t\t\ts=s.slice(1)\r\n\t\t}\r\n\t\tif (!noPlus && hasNegative && number>0) {\r\n\t\t\ts='+'+s\r\n\t\t}\r\n\t\tss[i]=s\r\n\t}\r\n\treturn ss\r\n}\r\n\r\nconst formatNumbers=(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.html =(number,precision)=>formatNumbersInternal(number,precision,false,true)\r\nformatNumbers.js   =(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.glsl =(number,precision)=>formatNumbersInternal(number,precision,true)\r\n\r\nmodule.exports=formatNumbers\r\n","'use strict'\r\n\r\nclass GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$output=option.$=$(\"<fieldset class='option'>\").append(\r\n\t\t\t\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\",\r\n\t\t\toption.entries.map(writeOption)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GroupOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=function(inStrings){\r\n\tconst strings={}\r\n\tconst expandRegexp=/^([^{]*)\\{([^}]*)\\}(.*)$/\r\n\tfunction expandIdAndString(id,string) {\r\n\t\tconst idMatch=expandRegexp.exec(id)\r\n\t\tif (idMatch) {\r\n\t\t\tconst [,idStart,idMidsStr,idEnd]=idMatch\r\n\t\t\tconst idMids=idMidsStr.split(',')\r\n\t\t\tconst stringMatch=expandRegexp.exec(string)\r\n\t\t\tif (stringMatch) {\r\n\t\t\t\tconst [,stringStart,stringMidsStr,stringEnd]=stringMatch\r\n\t\t\t\tconst stringMids=stringMidsStr.split(',')\r\n\t\t\t\tidMids.forEach((idMid,i)=>{\r\n\t\t\t\t\tif (stringMidsStr!='') {\r\n\t\t\t\t\t\tconst stringMid=stringMids[i]\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+stringMid+stringEnd)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+idMid+stringEnd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tidMids.forEach(idMid=>{\r\n\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,string)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrings[id]=string\r\n\t\t}\r\n\t}\r\n\tfor (let id in inStrings) {\r\n\t\texpandIdAndString(id,inStrings[id])\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tfor (let id in strings) {\r\n\t\tstrings[id]=strings[id].replace(/\\[\\[(.*?)\\]\\]/g,(match,p1)=>{\r\n\t\t\tlet link,text;\r\n\t\t\tconst i=p1.indexOf('|');\r\n\t\t\tif (i<0) {\r\n\t\t\t\tlink=p1;\r\n\t\t\t\ttext=p1;\r\n\t\t\t} else {\r\n\t\t\t\tlink=p1.slice(0,i);\r\n\t\t\t\ttext=p1.slice(i+1);\r\n\t\t\t}\r\n\t\t\treturn \"<a href='https://\"+lang+\".wikipedia.org/wiki/\"+link.replace(/ /g,'_')+\"'>\"+text+\"</a>\";\r\n\t\t});\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nmodule.exports=langStrings=>lang=>{\r\n\tconst defaultLang='en'\r\n\tlang=lang||defaultLang\r\n\tlang=lang.split('-')[0]  // get primary language subtag\r\n\tlet strings=langStrings[lang]\r\n\tif (strings===undefined) {\r\n\t\tlang=defaultLang\r\n\t\tstrings=langStrings[lang]\r\n\t}\r\n\tconst i18n=function(id){\r\n\t\tif (strings[id]!==undefined) {\r\n\t\t\treturn strings[id]\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"undefined string \"+id)\r\n\t\t}\r\n\t}\r\n\ti18n.lang=lang\r\n\ti18n.has=id=>strings[id]!==undefined\r\n\tif (lang=='en') {\r\n\t\ti18n.number=(n)=>String(n).replace('-','−')\r\n\t\ti18n.pluralSuffix=(n)=>{\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst nn=Number(n)\r\n\t\t\t\tif (Math.abs(nn)==1) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (lang=='ru') {\r\n\t\ti18n.number=(n)=>String(n).replace('-','−').replace('.',',')\r\n\t\ti18n.pluralSuffix=(n)=>{\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst teen=ns.slice(-2,-1)==='1'\r\n\t\t\t\tif (ns.slice(-1)==='1' && !teen) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else if ('234'.includes(ns.slice(-1)) && !teen) {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '5'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ti18n.plural=(n,id)=>i18n(id+'.'+i18n.pluralSuffix(n))\r\n\tconst haveToAttachUnit=unit=>(unit.length==1 && /^\\W/.test(unit))\r\n\tconst expandedUnit=(n,unit,abbrFn)=>{\r\n\t\tif (abbrFn===undefined) { // codegen needs its own fn\r\n\t\t\tabbrFn=(abbr,expansion)=>\"<abbr title='\"+escape(expansion)+\"'>\"+abbr+\"</abbr>\" // expansion is html for stuff like s^(-1)\r\n\t\t}\r\n\t\tlet abbr\r\n\t\tif (unit=='1/second') {\r\n\t\t\tabbr=i18n('units.second.a')+\"<sup>−1</sup>\"\r\n\t\t} else {\r\n\t\t\tabbr=i18n('units.'+unit+'.a')\r\n\t\t}\r\n\t\tconst expansion=i18n.plural(n,'units.'+unit)\r\n\t\treturn abbrFn(abbr,expansion)\r\n\t}\r\n\ti18n.numberWithUnits=(n,unit,abbrFn)=>{\r\n\t\tlet s=i18n.number(n)\r\n\t\tif (unit===undefined) {\r\n\t\t\treturn s\r\n\t\t} else if (haveToAttachUnit(unit)) {\r\n\t\t\treturn s+unit\r\n\t\t} else {\r\n\t\t\treturn s+' '+expandedUnit(n,unit,abbrFn)\r\n\t\t}\r\n\t}\r\n\t// example:\r\n\t// 1 .. 4 seconds = (1)(4)(seconds)\r\n\t// 1% .. 4% = (1%)(4%)()\r\n\t// made with 3 calls: (numberWithoutUnits)(numberWithoutUnits)(numberUnits)\r\n\ti18n.numberWithoutUnits=function(n,unit){\r\n\t\tlet s=i18n.number(n)\r\n\t\tif (unit!==undefined && haveToAttachUnit(unit)) {\r\n\t\t\treturn s+unit\r\n\t\t} else {\r\n\t\t\treturn s\r\n\t\t}\r\n\t}\r\n\ti18n.numberUnits=function(n,unit,abbrFn){\r\n\t\tif (unit!==undefined && !haveToAttachUnit(unit)) {\r\n\t\t\treturn expandedUnit(n,unit,abbrFn)\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\treturn i18n\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass InterleaveLines extends Lines {\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet first=true\r\n\t\tconst fp=()=>{\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false\r\n\t\t\t} else {\r\n\t\t\t\tout.push('')\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (subOut.length>0) {\r\n\t\t\t\t\tfp()\r\n\t\t\t\t\tout.push(...subOut)\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tfp()\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=InterleaveLines\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\n\r\nclass JsLines extends Lines {\r\n\tprocessStringInGet(s,formatting) {\r\n\t\tif (formatting.jsSemicolons) {\r\n\t\t\treturn s.replace(/^;/,'')\r\n\t\t} else {\r\n\t\t\treturn s.replace(/;$/,'')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=JsLines\r\n","'use strict'\r\n\r\n/*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nconst TO={} // TODO Symbol\r\n\r\nclass Lines {\r\n\t// lines private interface:\r\n\tconstructor(data) {\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\tthrow new TypeError(\"attempted to construct Lines with non-array data argument\")\r\n\t\t}\r\n\t\tthis.data=data\r\n\t}\r\n\tisDataEmpty() {\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tif (!item.isEmpty()) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tprocessStringInGet(s,formatting) {\r\n\t\treturn s\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet addTo=false\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item===TO) {\r\n\t\t\t\taddTo=true\r\n\t\t\t} else if (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (addTo && subOut.length>0) {\r\n\t\t\t\t\tout.push(out.pop()+subOut.shift())\r\n\t\t\t\t}\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t\taddTo=false\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tlet s=this.processStringInGet(item,formatting)\r\n\t\t\t\tif (formatting.indent!==undefined && formatting.indent!='\\t') {\r\n\t\t\t\t\ts=s.replace(/^(\\t)+/,match=>formatting.indent/*:string*/.repeat(match.length))\r\n\t\t\t\t}\r\n\t\t\t\ts=(html ? escape(s) : s)\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+s)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout.push(s)\r\n\t\t\t\t}\r\n\t\t\t\taddTo=false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n\r\n\t// lines public interface:\r\n\tstatic b() {\r\n\t\tconst data=[]\r\n\t\tconst makeLines=()=>new this(data,...arguments)\r\n\t\tconst a=function(){\r\n\t\t\treturn a.a(...arguments)\r\n\t\t}\r\n\t\ta.a=function(){\r\n\t\t\tdata.push(...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.t=function(){\r\n\t\t\tdata.push(TO,...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.e=makeLines\r\n\t\ta.ae=function(){\r\n\t\t\treturn this.a(...arguments).e()\r\n\t\t}\r\n\t\treturn a\r\n\t}\r\n\tstatic ba() {\r\n\t\treturn this.b().a(...arguments)\r\n\t}\r\n\tstatic be() {\r\n\t\treturn this.b().e()\r\n\t}\r\n\tstatic bae() {\r\n\t\treturn this.b().a(...arguments).e()\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tget(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,false)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,true)\r\n\t}\r\n\tcount() {\r\n\t\treturn this.doGet({},false).length // can be faster b/c don't need to output stuff\r\n\t}\r\n\r\n\t// TODO make HtmlLines\r\n\tstatic html(strings/*,...values*/) {\r\n\t\t// html template tag\r\n\t\t// usage example for attributes: Lines.html`<input type=text value=${value}>`\r\n\t\t// usage example for elements: Lines.html`<option>${option}</option>`\r\n\t\treturn strings.reduce((r,s,i)=>{\r\n\t\t\tlet v=arguments[i]\r\n\t\t\tswitch (r.slice(-1)) {\r\n\t\t\tcase '=':\r\n\t\t\t\tif (v===false) {\r\n\t\t\t\t\treturn r.replace(/\\s+[a-zA-Z0-9-]+=$/,'')+s // TODO more permitting attr name regexp\r\n\t\t\t\t} else if (v===true) {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t}\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;')\r\n\t\t\t\tif (v=='') {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t} else if (!/[\\s\"'=<>`]/.test(v)) {\r\n\t\t\t\t\treturn r+v+s\r\n\t\t\t\t} else if (!/'/.test(v)) {\r\n\t\t\t\t\treturn r+\"'\"+v+\"'\"+s\r\n\t\t\t\t} else {\r\n\t\t\t\t\tv=v.replace(/\"/g,'&quot;')\r\n\t\t\t\t\treturn r+'\"'+v+'\"'+s\r\n\t\t\t\t}\r\n\t\t\tcase '>':\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;')\r\n\t\t\t\treturn r+v+s\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"invalid character before substitution\")\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=Lines\r\n","'use strict'\r\n\r\nconst WrapLines=require('./wrap-lines')\r\n\r\nclass NoseWrapLines extends WrapLines {\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn []\r\n\t\t} else {\r\n\t\t\treturn super.doGet(formatting,html)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=NoseWrapLines\r\n","'use strict'\r\n\r\n/*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for structs\r\n\t\t'entries' array of suboptions for struct and array\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={}\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tstatic make(name,...rest) {\r\n\t\tlet nScalars=0, nArrays=0, nObjects=0\r\n\t\tlet scalarArg, arrayArg=[], objectArg={}\r\n\t\tfor (const arg of rest) {\r\n\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\tif (nScalars++==0) scalarArg=arg\r\n\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\tif (nArrays++==0) arrayArg=arg\r\n\t\t\t} else if (arg instanceof Object) {\r\n\t\t\t\tif (nObjects++==0) objectArg=arg\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst optionClass=this\r\n\t\tconst settings=this.collectArgs(scalarArg,arrayArg,objectArg)\r\n\t\treturn function(data,parent,visibilityManager,makeEntry){\r\n\t\t\treturn new optionClass(name,settings,data,parent,visibilityManager,makeEntry)\r\n\t\t}\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn settings\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tthis.parent=parent\r\n\t\tthis.name=name\r\n\t\tthis.fullName=name\r\n\t\tif (parent && parent.fullName!==null) {\r\n\t\t\tthis.fullName=parent.fullName+'.'+name\r\n\t\t}\r\n\t\tthis.updateCallbacks=[]\r\n\t\tthis._$=null\r\n\t\t// visibility and callbacks\r\n\t\tthis.isVisible=()=>true\r\n\t\tif (visibilityManager) {\r\n\t\t\tvisibilityManager.register(this)\r\n\t\t\tif (settings.visibilityData!==undefined) {\r\n\t\t\t\tif (settings.visibilityDataLogic!='or') {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)>=0) {\r\n\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\tvisibilityManager.declareAffectedBy(this,testName)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$\r\n\t\tthis.updateVisibility()\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible())\r\n\t}\r\n\tupdate() {\r\n\t\tthis.updateCallbacks.forEach(updateCallback=>{\r\n\t\t\tupdateCallback()\r\n\t\t})\r\n\t\tif (this.parent) {\r\n\t\t\tthis.parent.update()\r\n\t\t}\r\n\t}\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.updateCallbacks.push(updateCallback)\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value\r\n\t\t} else {\r\n\t\t\treturn data\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Input = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.defaultValue===undefined) settings.defaultValue=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.defaultValue=settings.defaultValue\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\treturn data\r\n\t}\r\n}\r\n\r\nOption.Boolean = class extends Option.Input {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn super.collectArgs(!!scalarArg,arrayArg,settings)\r\n\t}\r\n\tfix() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.NonBoolean = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value },\r\n\t\t\ttoString() { return String(value) },\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Factor = class extends Option.NonBoolean {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableValues===undefined) settings.availableValues=arrayArg\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableValues[0]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableValues=settings.availableValues\r\n\t}\r\n}\r\n\r\nOption.Number = class extends Option.NonBoolean { // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableMin===undefined) settings.availableMin=arrayArg[0]\r\n\t\tif (settings.availableMax===undefined) settings.availableMax=arrayArg[1]\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableMin\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableMin=settings.availableMin\r\n\t\tthis.availableMax=settings.availableMax\r\n\t\tthis.unit=settings.unit\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.precision=this.precision\r\n\t\tfixed.unit=this.unit\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.Struct = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.entries=settings.descriptions.map(x=>{\r\n\t\t\tconst subName=x[1]\r\n\t\t\tlet subData\r\n\t\t\tif (typeof data == 'object') subData=data[subName]\r\n\t\t\treturn makeEntry(x,subData,this,visibilityManager) // nested option\r\n\t\t})\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name)\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[]\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix())\r\n\t\t}\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\tif (settings.typePropertyName===undefined) settings.typePropertyName=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableConstructors=new Map\r\n\t\tif (visibilityManager) visibilityManager.enterCollection()\r\n\t\tfor (const x of settings.descriptions) { // TODO test array inside array\r\n\t\t\tconst type=x[1]\r\n\t\t\tconst ctor=subData=>makeEntry(x,subData,this,visibilityManager)\r\n\t\t\tthis.availableConstructors.set(type,ctor)\r\n\t\t}\r\n\t\tif (visibilityManager) visibilityManager.exitCollection()\r\n\t\tif (settings.typePropertyName!==undefined) {\r\n\t\t\tthis.typePropertyName=settings.typePropertyName\r\n\t\t} else {\r\n\t\t\tthis.typePropertyName='type'\r\n\t\t}\r\n\t\t// populate array entries from data:\r\n\t\tlet subDatas=[]\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value\r\n\t\t}\r\n\t\tconst defaultType=this.availableTypes[0]\r\n\t\tconst indexedEntries=subDatas.map(subData=>{ // can contain nulls for faulty entries, this._entries can't contain them\r\n\t\t\tlet subType=defaultType\r\n\t\t\tif (typeof subData == 'object' && subData[this.typePropertyName]!==undefined) {\r\n\t\t\t\tsubType=subData[this.typePropertyName]\r\n\t\t\t}\r\n\t\t\tconst subCtor=this.availableConstructors.get(subType)\r\n\t\t\tif (subCtor) { // can't throw an exception b/c have to be resistant to invalid data\r\n\t\t\t\treturn subCtor(subData)\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.populateEntries(subDatas,indexedEntries)\r\n\t}\r\n\t// protected\r\n\t//getElementsPropertyName() {}\r\n\t//populateEntries(datas,entries) {}\r\n\tmap(fn) {\r\n\t\treturn this[this.getElementsPropertyName()].map(fn)\r\n\t}\r\n\t//getEntryFromElement(element)\r\n\tsetElementExportData(element,data) {}\r\n\tsetElementFixData(element,fixed) {}\r\n\t// public\r\n\tget availableTypes() {\r\n\t\tconst types=[]\r\n\t\tthis.availableConstructors.forEach((_,type)=>{\r\n\t\t\ttypes.push(type)\r\n\t\t})\r\n\t\treturn types\r\n\t}\r\n\tmakeEntry(type,data) {\r\n\t\treturn this.availableConstructors.get(type)(data)\r\n\t}\r\n\texport() {\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\treturn {\r\n\t\t\tvalue: this.map(element=>{\r\n\t\t\t\tconst entry=this.getEntryFromElement(element)\r\n\t\t\t\tconst subData=entry.export()\r\n\t\t\t\tconst subType=entry.name\r\n\t\t\t\tif (subType!=defaultType) subData[this.typePropertyName]=subType\r\n\t\t\t\tthis.setElementExportData(element,subData)\r\n\t\t\t\treturn entry.shortenExport(subData)\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\t[this.getElementsPropertyName()]: this.map(element=>{\r\n\t\t\t\tconst entry=this.getEntryFromElement(element)\r\n\t\t\t\tconst subFixed=entry.fix()\r\n\t\t\t\tif (typeof subFixed == 'object') {\r\n\t\t\t\t\tsubFixed[this.typePropertyName]=entry.name\r\n\t\t\t\t\tthis.setElementFixData(element,subFixed)\r\n\t\t\t\t}\r\n\t\t\t\treturn subFixed\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.Boolean {}\r\n\r\nOption.Select = class extends Option.Factor {}\r\n\r\nOption.Text = class extends Option.Factor {}\r\n\r\nOption.Int = class extends Option.Number {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.Float = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.precision!==undefined) {\r\n\t\t\tthis.precision=settings.precision\r\n\t\t} else {\r\n\t\t\tif (this.availableMax>=100) {\r\n\t\t\t\tthis.precision=1\r\n\t\t\t} else if (this.availableMax>=10) {\r\n\t\t\t\tthis.precision=2\r\n\t\t\t} else {\r\n\t\t\t\tthis.precision=3\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Root = class extends Option.Struct {}\r\n\r\nOption.Group = class extends Option.Struct {}\r\n\r\nOption.Array = class extends Option.Collection {\r\n\tgetElementsPropertyName() {\r\n\t\treturn 'entries'\r\n\t}\r\n\tpopulateEntries(datas,entries) {\r\n\t\tthis._entries=entries.filter(entry=>!!entry)\r\n\t}\r\n\tgetEntryFromElement(entry) {\r\n\t\treturn entry\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries\r\n\t\tthis.update()\r\n\t}\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='options-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'reset': \"Reset\",\r\n\t\t\t'drag': \"Drag\",\r\n\t\t\t'drag.tip': \"Drag or press ↑/↓ while in focus to reorder items\",\r\n\t\t\t'delete': \"Delete\",\r\n\t\t\t'delete.tip': \"Delete item\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'reset': \"Сбросить\",\r\n\t\t\t'drag': \"Перетащить\",\r\n\t\t\t'drag.tip': \"Перетаскивайте или нажимайте ↑/↓, пока элемент в фокусе, чтобы изменить порядок элементов\",\r\n\t\t\t'delete': \"Удалить\",\r\n\t\t\t'delete.tip': \"Удалить элемент\",\r\n\t\t}\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbers=require('./format-numbers')\r\nconst writeTip=require('./tip')\r\nconst Option=require('./option-classes')\r\nconst GroupOptionOutput=require('./group-option-output')\r\n\r\n/*\r\n\tmatching css is:\r\n\t\t.options-output fieldset.option\r\n\t\t\tcan contain suboptions (fieldset.option and div.option)\r\n\t\t\tchildren have to be matched with > to aviod style collisions with other option-output hierarchies\r\n\t\t.options-output div.option\r\n\t\t\tcan't contain suboptions\r\n*/\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map\r\n\t\tthis.setOptionClassWriters(optionClassWriters)\r\n\t\tfunction writeOption(option) {\r\n\t\t\tlet optionProto=option\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor)\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,writeOption,i18n,generateId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=writeOption(options.root)\r\n\t}\r\n\tgetLeadLabel(id,i18n,option) {\r\n\t\treturn \"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label><span class='space'> </span>\"\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Group,function(){\r\n\t\t\treturn new GroupOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\").append(\r\n\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.value=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\"\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst valueId=value=>'options.'+option.fullName+'.'+value\r\n\t\t\tconst valueInfoId=value=>'options-info.'+option.fullName+'.'+value\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n(valueId(availableValue)))\r\n\t\t\t\t\t)\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tif (option.availableValues.some(availableValue=>i18n.has(valueInfoId(availableValue)))) {\r\n\t\t\t\tconst $tip=writeTip('info',\"\")\r\n\t\t\t\toption.$.append(\" \",$tip)\r\n\t\t\t\tconst handler=function(){\r\n\t\t\t\t\tif (i18n.has(valueInfoId(this.value))) {\r\n\t\t\t\t\t\t$tip.find('.tip-content').html(i18n(valueInfoId(this.value)))\r\n\t\t\t\t\t\t$tip.css('display','') // $tip.show() won't work right with inline-block\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$tip.css('display','none')\r\n\t\t\t\t\t\t$tip.find('.tip-content').empty()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thandler.call($select[0])\r\n\t\t\t\t$select.change(handler)\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst listId=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"'>\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<datalist id='\"+listId+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Number,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input.attr({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax,\r\n\t\t\t\tstep: Math.pow(0.1,p).toFixed(p),\r\n\t\t\t})\r\n\t\t\tconst setInputAttrsAndListeners=($input,$that)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst $sliderInput=$(\"<input type='range' id='\"+id+\"'>\")\r\n\t\t\tconst $numberInput=$(\"<input type='number' required>\")\r\n\t\t\tconst fmt=formatNumbers({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax\r\n\t\t\t},option.precision)\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<span class='nowrap'>\").append(\r\n\t\t\t\t\t\"<span class='min'>\"+i18n.numberWithUnits(fmt.min,option.unit)+\"</span> \",\r\n\t\t\t\t\tsetInputAttrsAndListeners($sliderInput,$numberInput),\r\n\t\t\t\t\t\" <span class='max'>\"+i18n.numberWithUnits(fmt.max,option.unit)+\"</span>\"\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\tsetInputAttrsAndListeners($numberInput,$sliderInput),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tconst infoId='options-info.'+option.fullName\r\n\t\t\tif (i18n.has(infoId)) {\r\n\t\t\t\toption.$.append(\" \",writeTip('info',i18n(infoId)))\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nclass OptionVisibilityManager {\r\n\tconstructor() {\r\n\t\tthis.options={}\r\n\t\tthis.affects={}\r\n\t\tthis.inCollection=0\r\n\t}\r\n\tregister(option) {\r\n\t\tif (!this.inCollection) {\r\n\t\t\tthis.options[option.fullName]=option\r\n\t\t\toption.addUpdateCallback(()=>{\r\n\t\t\t\tthis.updateVisibilityAffectedBy(option.fullName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tdeclareAffectedBy(option,byFullName) {\r\n\t\tif (this.affects[byFullName]===undefined) {\r\n\t\t\tthis.affects[byFullName]=[]\r\n\t\t}\r\n\t\tthis.affects[byFullName].push(option)\r\n\t}\r\n\tupdateVisibilityAffectedBy(byFullName) {\r\n\t\tif (this.affects[byFullName]!==undefined) {\r\n\t\t\tthis.affects[byFullName].forEach(option=>{\r\n\t\t\t\toption.updateVisibility()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tenterCollection() {\r\n\t\tthis.inCollection+=1\r\n\t}\r\n\texitCollection() {\r\n\t\tthis.inCollection-=1\r\n\t}\r\n}\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tconst Option=this.optionClasses\r\n\t\tconst makeEntry=(description,data,parent,visibilityManager)=>{\r\n\t\t\tconst className=description[0]\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`)\r\n\t\t\t}\r\n\t\t\tconst makeArgs=description.slice(1)\r\n\t\t\treturn Option[className].make(...makeArgs)(\r\n\t\t\t\tdata,parent,visibilityManager,makeEntry\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.root=Option.Root.make(null,this.entriesDescription)(\r\n\t\t\tdata,null,new OptionVisibilityManager,makeEntry\r\n\t\t)\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn []\r\n\t}\r\n\t// public methods\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.root.addUpdateCallback(updateCallback)\r\n\t}\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export())\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix()\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass RefLines extends Lines {\r\n\tconstructor(data,ref) {\r\n\t\tsuper(data)\r\n\t\tthis.ref=ref\r\n\t}\r\n\tstatic parse(s) {\r\n\t\tconst a=Lines.ba(\"\")\r\n\t\tconst re=/^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/\r\n\t\tfor (;s.length>0;) {\r\n\t\t\tconst match=re.exec(s)\r\n\t\t\tif (match) {\r\n\t\t\t\ta.t(match[1])\r\n\t\t\t\ta.t(this.b(match[3]).ae(match[2]))\r\n\t\t\t\ts=s.substr(match[0].length)\r\n\t\t\t} else {\r\n\t\t\t\ta.t(s)\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst plainOut=super.doGet(formatting,html)\r\n\t\tlet href\r\n\t\tif (html && typeof formatting.refs == 'object') {\r\n\t\t\thref=formatting.refs[this.ref]\r\n\t\t}\r\n\t\tif (href!==undefined) {\r\n\t\t\treturn plainOut.map(s=>\"<a href='\"+escape(href)+\"'>\"+s+\"</a>\")\r\n\t\t} else {\r\n\t\t\treturn plainOut\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=RefLines\r\n","'use strict'\r\n\r\nmodule.exports=(tipClass,tipContent)=>{\r\n\tconst $tip=$(`<span class='tip-${tipClass}' tabindex='0'><span class='tip-content'>${tipContent}</span></span>`)\r\n\tlet popupTimeoutId=null\r\n\tlet popupLevel=0\r\n\tconst handlePopup=(dLevel,delay)=>{\r\n\t\tif (delay===undefined) {\r\n\t\t\tdelay=200\r\n\t\t}\r\n\t\tif (dLevel==+1 && popupLevel==0) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{ // sort of hoverintent, simple delay will do b/c tip icon is small\r\n\t\t\t\t$tip.addClass('open')\r\n\t\t\t},delay)\r\n\t\t} else if (dLevel==-1 && popupLevel==1) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{\r\n\t\t\t\t$tip.removeClass('open')\r\n\t\t\t},delay)\r\n\t\t}\r\n\t\tpopupLevel+=dLevel\r\n\t}\r\n\t$tip.mouseenter(function(){\r\n\t\thandlePopup(+1)\r\n\t}).focusin(function(){\r\n\t\thandlePopup(+1,0) // need immediate popup on focusin\r\n\t}).on('mouseleave focusout',function(){\r\n\t\thandlePopup(-1)\r\n\t})\r\n\treturn $tip\r\n}\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\nconst NoseWrapLines=require('./nose-wrap-lines')\r\nconst CodeSection=require('./code-section')\r\n\r\nclass WebCode {\r\n\t// public:\r\n\tget filename() {\r\n\t\treturn this.basename+'.html'\r\n\t}\r\n\tget mimeType() {\r\n\t\treturn 'text/html'\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.getLines().get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.getLines().getHtml(formatting)\r\n\t}\r\n\textractSections(sectionModes) {\r\n\t\tif (sectionModes===undefined) {\r\n\t\t\tsectionModes={}\r\n\t\t}\r\n\t\tlet stylePlaceLines=NoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines)\r\n\t\tlet styleExtractLines=Lines.be()\r\n\t\tif (sectionModes.css=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tstylePlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tstylePlaceLines=Lines.bae(\"<!-- <style> \"+this.getSectionPasteComment('css')+\" </style> -->\")\r\n\t\t\t}\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t} else if (sectionModes.css=='file') {\r\n\t\t\tstylePlaceLines=Lines.bae(Lines.html`<link rel=stylesheet href=${this.basename+'.css'}>`)\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t}\r\n\t\tlet scriptPlaceLines=NoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\tlet scriptExtractLines=Lines.be()\r\n\t\tif (sectionModes.js=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tscriptPlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tscriptPlaceLines=Lines.bae(\"<!-- <script> \"+this.getSectionPasteComment('js')+\" </script> -->\")\r\n\t\t\t}\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t} else if (sectionModes.js=='file') {\r\n\t\t\tscriptPlaceLines=Lines.bae(Lines.html`<script src=${this.basename+'.js'}></script>`)\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t}\r\n\t\tlet htmlExtractLines\r\n\t\tif (sectionModes.html=='body') {\r\n\t\t\thtmlExtractLines=this.getBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t} else {\r\n\t\t\thtmlExtractLines=this.getFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t}\r\n\t\tconst type=sectionName=>'text/'+(sectionName=='js'?'javascript':sectionName)\r\n\t\treturn {\r\n\t\t\thtml: new CodeSection(this.filename,type('html'),htmlExtractLines),\r\n\t\t\tcss:  new CodeSection(this.basename+'.css',type('css'),styleExtractLines),\r\n\t\t\tjs:   new CodeSection(this.basename+'.js',type('js'),scriptExtractLines),\r\n\t\t}\r\n\t}\r\n\t// get title()\r\n\r\n\t// private:\r\n\tgetLines() {\r\n\t\treturn this.getFullHtmlSectionLines(\r\n\t\t\tNoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines),\r\n\t\t\tNoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\t)\r\n\t}\r\n\tgetFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\tconst a=Lines.b()\r\n\t\ta(\"<!DOCTYPE html>\")\r\n\t\tif (this.lang!==null) {\r\n\t\t\ta(Lines.html`<html lang=${this.lang}>`)\r\n\t\t} else {\r\n\t\t\ta(\"<html>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"<head>\",\r\n\t\t\t\"<meta charset=utf-8>\"\r\n\t\t)\r\n\t\tif (this.title!==null) {\r\n\t\t\ta(\"<title>\"+this.title+\"</title>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\t\"</head>\",\r\n\t\t\t\"<body>\",\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines,\r\n\t\t\t\"</body>\",\r\n\t\t\t\"</html>\"\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n\tgetBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\treturn Lines.bae(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines\r\n\t\t)\r\n\t}\r\n\tget cachedStyleLines()  { if (!this._styleLines)  this._styleLines =this.styleLines;  return this._styleLines  }\r\n\tget cachedHeadLines()   { if (!this._headLines)   this._headLines  =this.headLines;   return this._headLines   }\r\n\tget cachedBodyLines()   { if (!this._bodyLines)   this._bodyLines  =this.bodyLines;   return this._bodyLines   }\r\n\tget cachedScriptLines() { if (!this._scriptLines) this._scriptLines=this.scriptLines; return this._scriptLines }\r\n\r\n\t// to be redefined in subclasses:\r\n\tget basename() { // filename base\r\n\t\treturn 'source'\r\n\t}\r\n\tget lang() { // language tag for <html lang=xx> or null to skip it - likely read from i18n\r\n\t\treturn null\r\n\t}\r\n\tget title() { // page title or null to skip it\r\n\t\treturn null\r\n\t}\r\n\tget styleLines() { // contents of <style>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget headLines() { // contents of <head> following <style>, goes to <body> in html body mode\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget bodyLines() { // contents of <body> preceding <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget scriptLines() { // contents of <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetSectionPasteComment(sectionName) { // section placeholder comment in paste mode - likely to be overridden with i18n\r\n\t\treturn sectionName+\" goes here\"\r\n\t}\r\n}\r\n\r\nmodule.exports=WebCode\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass WrapLines extends Lines {\r\n\tconstructor(data,...wrappers) {\r\n\t\tsuper(data)\r\n\t\tthis.wrappers=wrappers\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn false\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tlet indent='\\t'\r\n\t\tif (formatting.indent!==undefined) {\r\n\t\t\tindent=formatting.indent\r\n\t\t}\r\n\t\tconst out=[]\r\n\t\tlet i=0\r\n\t\tconst pushWrapper=()=>{\r\n\t\t\tconst item=this.wrappers[i]\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\tpushWrapper()\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut.map(s=>indent+s))\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(indent+s)\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.wrappers.length==2) {\r\n\t\t\tpushWrapper()\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=WrapLines\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\r\nmodule.exports = Math.log10 || function(x){\r\n\treturn Math.log(x) / Math.LN10\r\n}\r\n","module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t!((typeof haystack === 'string') || (Array.isArray(haystack)))\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass AudioContext extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.getConnectAssignJsLines=(decl,target,value,connectors,connectArgs)=>{\r\n\t\t\tlet declTarget=target\r\n\t\t\tif (decl!='') {\r\n\t\t\t\tdeclTarget=decl+\" \"+target\r\n\t\t\t}\r\n\t\t\tlet connectArgsConcat=\"\"\r\n\t\t\tif (connectArgs!==undefined) {\r\n\t\t\t\tconnectArgsConcat=\",\"+connectArgs\r\n\t\t\t}\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.connectReturnValue && Array.isArray(connectors) && connectors.length==1) {\r\n\t\t\t\tconst connector=connectors[0]\r\n\t\t\t\ta(declTarget+\"=\"+connector+\".connect(\"+value+connectArgsConcat+\");\")\r\n\t\t\t} else {\r\n\t\t\t\ta(declTarget+\"=\"+value+\";\")\r\n\t\t\t\tif (Array.isArray(connectors)) {\r\n\t\t\t\t\ta(...connectors.map(connector=>connector+\".connect(\"+target+connectArgsConcat+\");\"))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst connector=connectors.slice(0,-1) // hack to get singular name form plural\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tconnectors+\".forEach(function(\"+connector+\"){\",\r\n\t\t\t\t\t\t\"\t\"+connector+\".connect(\"+target+connectArgsConcat+\");\",\r\n\t\t\t\t\t\t\"});\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(RefLines.parse(\"// \"+i18n('comment.context')))\r\n\t\t\tif (this.options.noVendorPrefix) {\r\n\t\t\t\ta(\"var ctx=new AudioContext;\")\r\n\t\t\t} else {\r\n\t\t\t\ta(\"var ctx=new (AudioContext || webkitAudioContext);\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioContext\r\n","module.exports = function(s){\r\n\treturn function(n){\r\n\t\tif (\r\n\t\t\t(s!=null && s.repeat!==undefined) ||\r\n\t\t\t(typeof s !== 'string')\r\n\t\t) {\r\n\t\t\treturn s.repeat(n)\r\n\t\t} else {\r\n\t\t\treturn Array(n+1).join(s)\r\n\t\t}\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst GenNode=require('./audio-graph-gen-node-classes')\r\nconst VisNode=require('./audio-graph-vis-node-classes')\r\n\r\nconst ConNode={}\r\n\r\nconst MANY=100 // \"infinity\", can't use infinity directly b/c have to multiply by it\r\n\r\n//// abstract classes (not exported)\r\n\r\nclass Node {\r\n\tconstructor(options={}) {\r\n\t\tthis.options=options\r\n\t\t// can be set/modified by graph constructor:\r\n\t\tthis.nextNodes=new Set\r\n\t\tthis.prevNodes=new Set\r\n\t\t//this.n=undefined\r\n\t}\r\n\t// public:\r\n\t// get type() // required for n-assignment, can't do it by class with aggregation nodes like Node.bypass\r\n\tget passive() {\r\n\t\treturn false\r\n\t}\r\n\tget downstreamEffect() {\r\n\t\treturn false // source node\r\n\t}\r\n\tget upstreamEffect() {\r\n\t\treturn false // destination or visualization node\r\n\t}\r\n\tget fixedInputs() {\r\n\t\treturn true\r\n\t}\r\n\tget fixedOutputs() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNInputs() { // ok to overestimate\r\n\t\treturn 0\r\n\t}\r\n\tget estimatedNOutputs() { // ok to overestimate\r\n\t\treturn 0\r\n\t}\r\n\tget bypassable() {\r\n\t\treturn false\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\treturn new GenNode[this.type](this.options,name)\r\n\t}\r\n\t// public helpers:\r\n\tget estimatedNPrevNodeOutputs() {\r\n\t\tlet count=0\r\n\t\tthis.prevNodes.forEach(node=>{\r\n\t\t\tcount+=node.estimatedNOutputs\r\n\t\t})\r\n\t\treturn count\r\n\t}\r\n\tget estimatedNNextNodeInputs() {\r\n\t\tlet count=0\r\n\t\tthis.nextNodes.forEach(node=>{\r\n\t\t\tcount+=node.estimatedNInputs\r\n\t\t})\r\n\t\treturn count\r\n\t}\r\n}\r\n\r\nclass ContainerNode extends Node {\r\n\tconstructor(options,innerNode) {\r\n\t\tsuper(options)\r\n\t\tthis.innerNode=innerNode\r\n\t}\r\n\tget type() {\r\n\t\treturn this.innerNode.type\r\n\t}\r\n\tget passive() {\r\n\t\treturn this.innerNode.passive\r\n\t}\r\n\tget downstreamEffect() {\r\n\t\treturn this.innerNode.downstreamEffect\r\n\t}\r\n\tget upstreamEffect() {\r\n\t\treturn this.innerNode.upstreamEffect\r\n\t}\r\n}\r\n\r\nclass MediaElementNode extends Node {\r\n\tget downstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget bypassable() {\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nclass FilterNode extends Node {\r\n\tget estimatedNInputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget bypassable() {\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nclass PassiveByDefaultFilterNode extends FilterNode {\r\n\tget passive() {\r\n\t\treturn this.propertyNames.every(propertyName=>{\r\n\t\t\tconst option=this.options[propertyName]\r\n\t\t\treturn option.value==option.defaultValue && !option.input\r\n\t\t})\r\n\t}\r\n\t// protected:\r\n\tget propertyNames() {\r\n\t\treturn []\r\n\t}\r\n}\r\n\r\nclass VisualizationNode extends Node {\r\n\tget upstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNInputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn 1\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\tthrow new Error(`Attempted to make GenNode for visualization ConNode.${this.type}`)\r\n\t}\r\n\ttoVisNode() {\r\n\t\treturn new VisNode[this.type](this.options)\r\n\t}\r\n}\r\n\r\n//// concrete classes\r\n\r\n// TODO fix bug with parallel bypasses\r\n// TODO fix bug with non-fixed inner element\r\n// \tby insulating it with junctions - can't do it now b/c can't ask for junctions to be generated - graph has to do it\r\n// \t(currently it's impossible to get this bug through options)\r\nConNode.bypass = class extends ContainerNode { // used when enableInput is set\r\n\tconstructor(options,innerNode) {\r\n\t\tsuper(options,innerNode)\r\n\t\tthis.rewireInput=(this.innerNode.upstreamEffect || !this.innerNode.downstreamEffect) // prefer to rewire inputs\r\n\t\tthis.rewireOutput=this.innerNode.downstreamEffect\r\n\t\t// TODO rewire smaller side\r\n\t}\r\n\tget fixedInputs() {\r\n\t\treturn this.passive\r\n\t}\r\n\tget fixedOutputs() {\r\n\t\treturn this.passive\r\n\t}\r\n\tget estimatedNInputs() {\r\n\t\treturn MANY\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn MANY\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\treturn new GenNode.bypass(\r\n\t\t\tthis.options,name,\r\n\t\t\tthis.innerNode.toGenNode(name),\r\n\t\t\tthis.rewireInput,this.rewireOutput\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConNode.drywet = class extends ContainerNode {\r\n\tget estimatedNInputs() {\r\n\t\treturn this.innerNode.estimatedNInputs+1\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn 2\r\n\t}\r\n\tget bypassable() {\r\n\t\treturn true\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\treturn new GenNode.drywet(\r\n\t\t\tthis.options,name,\r\n\t\t\tthis.innerNode.toGenNode(name)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConNode.analyser = class extends Node {\r\n\tconstructor(options,innerNodes) { // options come from any inner node - only need options.logFftSize\r\n\t\tsuper(options)\r\n\t\tthis.innerNodes=innerNodes\r\n\t}\r\n\tget type() {\r\n\t\treturn 'analyser'\r\n\t}\r\n\tget upstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNInputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn 1\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\tconst visNodes=this.innerNodes.map(innerNode=>innerNode.toVisNode())\r\n\t\tconst genNode=new GenNode.analyser(this.options,name,visNodes)\r\n\t\tfor (const visNode of visNodes) {\r\n\t\t\tvisNode.initParent(genNode.nodeJsName)\r\n\t\t}\r\n\t\treturn genNode\r\n\t}\r\n\tisEquivalentAnalyser(that) {\r\n\t\treturn (\r\n\t\t\tthat instanceof ConNode.analyser &&\r\n\t\t\tthis.options.logFftSize.value==that.options.logFftSize.value\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConNode.stereoVolume = class extends Node {\r\n\tget type() {\r\n\t\treturn 'stereoVolume'\r\n\t}\r\n\tget upstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNInputs() {\r\n\t\treturn 1\r\n\t}\r\n\ttoGenNode(name) {\r\n\t\tconst visNodes=[\r\n\t\t\tnew VisNode.volume(this.options),\r\n\t\t\tnew VisNode.volume(this.options),\r\n\t\t]\r\n\t\tconst genNode=new GenNode.stereoVolume(this.options,name,visNodes)\r\n\t\tvisNodes[0].initParent(genNode.leftAnalyserNodeJsName)\r\n\t\tvisNodes[1].initParent(genNode.rightAnalyserNodeJsName)\r\n\t\treturn genNode\r\n\t}\r\n}\r\n\r\nConNode.junction = class extends PassiveByDefaultFilterNode { // special node used as summator/junction\r\n\tget type() {\r\n\t\treturn 'junction'\r\n\t}\r\n}\r\n\r\nConNode.activeJunction = class extends ConNode.junction { // to be inserted between non-fixed i/o nodes\r\n\t// type is kept unchanged\r\n\tget passive() {\r\n\t\treturn false // can't optimize away (TODO allow parallel merging)\r\n\t}\r\n}\r\n\r\nConNode.audio = class extends MediaElementNode {\r\n\tget type() {\r\n\t\treturn 'audio'\r\n\t}\r\n}\r\n\r\nConNode.video = class extends MediaElementNode {\r\n\tget type() {\r\n\t\treturn 'video'\r\n\t}\r\n}\r\n\r\nConNode.sample = class extends Node {\r\n\tget type() {\r\n\t\treturn 'sample'\r\n\t}\r\n\tget downstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget fixedOutputs() {\r\n\t\treturn false\r\n\t}\r\n\tget estimatedNOutputs() {\r\n\t\treturn MANY\r\n\t}\r\n}\r\n\r\nConNode.gain = class extends PassiveByDefaultFilterNode {\r\n\tget type() {\r\n\t\treturn 'gain'\r\n\t}\r\n\t// protected:\r\n\tget propertyNames() {\r\n\t\treturn ['gain']\r\n\t}\r\n}\r\n\r\nConNode.panner = class extends PassiveByDefaultFilterNode {\r\n\tget type() {\r\n\t\treturn 'panner'\r\n\t}\r\n\t// protected:\r\n\tget propertyNames() {\r\n\t\treturn ['pan']\r\n\t}\r\n}\r\n\r\nConNode.biquad = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'biquad'\r\n\t}\r\n\tget passive() {\r\n\t\t// lowshelf, highshelf and peaking are passive when gain==0\r\n\t\treturn (\r\n\t\t\t!this.options.type.input && ['lowshelf','highshelf','peaking'].indexOf(this.options.type.value)>=0 &&\r\n\t\t\t!this.options.gain.input && this.options.gain==0\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConNode.iir = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'iir'\r\n\t}\r\n\tget passive() {\r\n\t\t// corresponding coefs are equal, sequences are of equal length or differ by trailing zero coefs\r\n\t\tconst ff=JSON.parse('['+this.options.feedforward+']')\r\n\t\tconst fb=JSON.parse('['+this.options.feedback+']')\r\n\t\tlet i=0\r\n\t\twhile (i<ff.length && i<fb.length) {\r\n\t\t\tif (ff[i]!=fb[i]) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\tfor (let j=i;j<ff.length;j++) {\r\n\t\t\tif (ff[j]!=0) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let j=i;j<fb.length;j++) {\r\n\t\t\tif (fb[j]!=0) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nConNode.convolver = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'convolver'\r\n\t}\r\n}\r\n\r\nConNode.equalizer = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'equalizer'\r\n\t}\r\n\tget passive() {\r\n\t\treturn Option.EqualizerFilter.frequencies.every(freq=>{\r\n\t\t\tconst option=this.options['gain'+freq]\r\n\t\t\treturn option.value==0 && !option.input\r\n\t\t})\r\n\t}\r\n}\r\n\r\nConNode.compressor = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'compressor'\r\n\t}\r\n}\r\n\r\nConNode.waveform = class extends VisualizationNode {\r\n\tget type() {\r\n\t\treturn 'waveform'\r\n\t}\r\n}\r\n\r\nConNode.frequencyBars = class extends VisualizationNode {\r\n\tget type() {\r\n\t\treturn 'frequencyBars'\r\n\t}\r\n}\r\n\r\nConNode.frequencyOutline = class extends VisualizationNode {\r\n\tget type() {\r\n\t\treturn 'frequencyOutline'\r\n\t}\r\n}\r\n\r\nConNode.volume = class extends VisualizationNode {\r\n\tget type() {\r\n\t\treturn 'volume'\r\n\t}\r\n}\r\n\r\nConNode.destination = class extends Node {\r\n\tget type() {\r\n\t\treturn 'destination'\r\n\t}\r\n\tget upstreamEffect() {\r\n\t\treturn true\r\n\t}\r\n\tget estimatedNInputs() {\r\n\t\treturn 1\r\n\t}\r\n\tget bypassable() {\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nmodule.exports=ConNode\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumber=require('crnx-base/format-number')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst Option=require('./option-classes')\r\nconst Feature=require('./feature')\r\n\r\nconst GenNode={}\r\n\r\n//// abstract classes (not exported)\r\n\r\nclass Node extends Feature {\r\n\tconstructor(options,name) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t\tthis.name=name\r\n\t}\r\n\tinitEdges(prevNodes,nextNodes) { // call it before calling any other methods\r\n\t\tthis.prevNodes=prevNodes // need then only for inputs/outputs - could just keep inputs/outputs if not for bypass node\r\n\t\tthis.nextNodes=nextNodes\r\n\t}\r\n\t// get type()\r\n\tget jsCommentType() {\r\n\t\treturn this.type\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn []\r\n\t}\r\n\tgetOutputs() {\r\n\t\treturn []\r\n\t}\r\n\t// public helpers:\r\n\t// TODO replace prevNodes.forEach with for-of loop\r\n\tgetPrevNodeOutputs() {\r\n\t\t// [].concat(prevNodes.map(node=>node.getOutputs())) // ?\r\n\t\tconst names=[]\r\n\t\tthis.prevNodes.forEach(node=>{\r\n\t\t\tnames.push(...node.getOutputs())\r\n\t\t})\r\n\t\treturn names\r\n\t}\r\n\tgetNextNodeInputs() {\r\n\t\tconst names=[]\r\n\t\tthis.nextNodes.forEach(node=>{\r\n\t\t\tnames.push(...node.getInputs())\r\n\t\t})\r\n\t\treturn names\r\n\t}\r\n\t// protected:\r\n\tget nodeHtmlName() { // TODO rename to htmlName\r\n\t\treturn 'my.'+this.name\r\n\t}\r\n\tget nodeJsName() { // TODO rename to jsName\r\n\t\treturn camelCase(this.name+'.node')\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.name+'.'+propertyName\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn camelCase(this.name+'.'+propertyName+'.input')\r\n\t}\r\n\tgetPropertyJsConstant(property,option,value=option.value) {\r\n\t\tif (property.type=='range') {\r\n\t\t\tvalue=formatNumber.js(value,option.precision)\r\n\t\t} else if (property.type=='select') {\r\n\t\t\tvalue=\"'\"+value+\"'\"\r\n\t\t}\r\n\t\tif (property.fn) {\r\n\t\t\tvalue=property.fn(value)\r\n\t\t}\r\n\t\treturn value\r\n\t}\r\n\tgetPropertyHtmlLines(featureContext,i18n,property) {\r\n\t\tif (property.skip) {\r\n\t\t\treturn Lines.be()\r\n\t\t}\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tconst propertyOptionName='options.graph.'+this.type+'.'+property.name\r\n\t\tconst a=Lines.b()\r\n\t\tif (property.type=='range' && option.input) {\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst fmtAttrs=formatNumbers.html({ min:option.min, max:option.max, value:option.value },p)\r\n\t\t\tconst fmtLabels=formatNumbers({ min:option.min, max:option.max },p)\r\n\t\t\tconst minMax=n=>i18n.numberWithUnits(n,option.unit,(a,e)=>Lines.html`<abbr title=${e}>`+a+`</abbr>`)\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(propertyOptionName)}:</label>`,\r\n\t\t\t\t\"<span class=min>\"+minMax(fmtLabels.min)+\"</span>\",\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=range value=${fmtAttrs.value} min=${fmtAttrs.min} max=${fmtAttrs.max} step=${p?Math.pow(0.1,p).toFixed(p):false}>`,\r\n\t\t\t\t\"<span class=max>\"+minMax(fmtLabels.max)+\"</span>\"\r\n\t\t\t)\r\n\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(propertyOptionName)}:</label>`,\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tLines.html`<select id=${inputHtmlName}>`,`</select>`\r\n\t\t\t\t).ae(\r\n\t\t\t\t\t...option.availableValues.map(value=>{\r\n\t\t\t\t\t\tconst title=i18n(propertyOptionName+'.'+value)\r\n\t\t\t\t\t\treturn Lines.html`<option selected=${option.value==value} value=${value!=title && value}>${title}</option>`\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<span id=${inputHtmlName}>${i18n('label.graph.'+this.type+'.'+property.name+'.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetPropertyJsLines(featureContext,i18n,property) {\r\n\t\tif (property.skip) {\r\n\t\t\treturn JsLines.be()\r\n\t\t}\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst propertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")\r\n\t\tconst inputJsName=this.getPropertyInputJsName(property.name)\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tif (property.type!='xhr' && option.input) {\r\n\t\t\tlet value=inputJsName+\".value\"\r\n\t\t\tif (property.fn) {\r\n\t\t\t\tvalue=property.fn(value)\r\n\t\t\t}\r\n\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange')\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t// was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\";(\"+inputJsName+\".\"+eventProp+\"=function(){\",\r\n\t\t\t\t\"\t\"+propertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\"})();\"\r\n\t\t\t)\r\n\t\t} else if (property.type!='xhr' && option.value!=option.defaultValue) {\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\tpropertyJsName+\"=\"+this.getPropertyJsConstant(property,option)+\";\"\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\treturn this.getXhrJsLines(featureContext,i18n,JsLines.bae(\r\n\t\t\t\tpropertyJsName+\"=buffer;\",\r\n\t\t\t\t\"document.getElementById('\"+inputHtmlName+\"').textContent='';\"\r\n\t\t\t),JsLines.bae(\r\n\t\t\t\t\"document.getElementById('\"+inputHtmlName+\"').textContent='\"+i18n('label.graph.'+this.type+'.'+property.name+'.error')+\"';\"\r\n\t\t\t))\r\n\t\t}\r\n\t\treturn JsLines.be()\r\n\t}\r\n\tgetXhrJsLines(featureContext,i18n,onDecodeLines,onErrorLines) {\r\n\t\tconst leadLines=JsLines.bae(\r\n\t\t\t\"loadSample('\"+this.options.url+\"',function(buffer){\" // TODO html escape\r\n\t\t)\r\n\t\tconst midLines=JsLines.bae(\r\n\t\t\t\"},function(){\"\r\n\t\t)\r\n\t\tconst endLines=JsLines.bae(\r\n\t\t\t\"});\"\r\n\t\t)\r\n\t\tif (!featureContext.loaderOnError) {\r\n\t\t\treturn WrapLines.b(leadLines,endLines).ae(onDecodeLines)\r\n\t\t} else {\r\n\t\t\treturn WrapLines.b(leadLines,midLines,endLines).ae(onDecodeLines,onErrorLines)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ContainerNode extends Node {\r\n\tconstructor(options,name,innerNode) {\r\n\t\tsuper(options,name)\r\n\t\tthis.innerNode=innerNode\r\n\t}\r\n\tget type() {\r\n\t\treturn this.innerNode.type\r\n\t}\r\n\tget jsCommentType() {\r\n\t\treturn this.innerNode.jsCommentType\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t\tthis.innerNode.requestFeatureContext(featureContext)\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) {\r\n\t\treturn this.innerNode.getPreVisJsLines(featureContext,i18n)\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) {\r\n\t\treturn this.innerNode.getVisJsLines(featureContext,i18n)\r\n\t}\r\n}\r\n\r\nclass MediaElementNode extends Node {\r\n\tgetOutputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn NoseWrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tthis.getElementHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\t// protected:\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.createMediaElementSource(document.getElementById('\"+this.nodeHtmlName+\"'));\"\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass FilterNode extends Node {\r\n\tgetInputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tgetOutputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.properties.map(\r\n\t\t\t\tproperty=>NoseWrapLines.b(\r\n\t\t\t\t\t\"<div>\",\"</div>\"\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tthis.getPropertyHtmlLines(featureContext,i18n,property)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tfeatureContext.getConnectAssignJsLines(\r\n\t\t\t\t\"var\",this.nodeJsName,\r\n\t\t\t\t\"ctx.\"+this.ctxCreateMethodName+\"()\",\r\n\t\t\t\tthis.getPrevNodeOutputs()\r\n\t\t\t),\r\n\t\t\t...this.properties.map(property=>this.getPropertyJsLines(featureContext,i18n,property))\r\n\t\t)\r\n\t}\r\n\t// protected:\r\n\t// get ctxCreateMethodName()\r\n\tget properties() {\r\n\t\treturn []\r\n\t}\r\n}\r\n\r\n//// concrete classes\r\n\r\nGenNode.bypass = class extends ContainerNode { // used when enableInput is set\r\n\tconstructor(options,name,innerNode,rewireInput,rewireOutput) {\r\n\t\tsuper(options,name,innerNode)\r\n\t\tthis.rewireInput=rewireInput\r\n\t\tthis.rewireOutput=rewireOutput\r\n\t}\r\n\tinitEdges(prevNodes,nextNodes) {\r\n\t\tsuper.initEdges(prevNodes,nextNodes)\r\n\t\tthis.innerNode.initEdges(prevNodes,nextNodes)\r\n\t}\r\n\tgetInputs() {\r\n\t\tconst names=[]\r\n\t\tif (this.options.enabled || !this.rewireInput) {\r\n\t\t\tnames.push(...this.innerNode.getInputs())\r\n\t\t}\r\n\t\tif (!this.options.enabled) {\r\n\t\t\tnames.push(...this.getNextNodeInputs())\r\n\t\t}\r\n\t\treturn names\r\n\t}\r\n\tgetOutputs() {\r\n\t\tconst names=[]\r\n\t\tif (this.options.enabled || !this.rewireOutput) {\r\n\t\t\tnames.push(...this.innerNode.getOutputs())\r\n\t\t}\r\n\t\tif (!this.options.enabled) {\r\n\t\t\tnames.push(...this.getPrevNodeOutputs())\r\n\t\t}\r\n\t\treturn names\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName('enabled')\r\n\t\treturn Lines.bae(\r\n\t\t\tNoseWrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=checkbox checked=${this.options.enabled}>`,\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n('options-output.enabled')}</label>` // TODO correct i18n\r\n\t\t\t),\r\n\t\t\tthis.innerNode.getHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName('enabled')\r\n\t\tconst a=JsLines.b()\r\n\t\tconst rewire=(method,fromNames,toNames)=>{\r\n\t\t\tfor (const fromName of fromNames) {\r\n\t\t\t\tfor (const toName of toNames) {\r\n\t\t\t\t\ta(`\\t\\t${fromName}.${method}(${toName});`)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\ta(\r\n\t\t\tthis.innerNode.getInitJsLines(featureContext,i18n),\r\n\t\t\t`document.getElementById('${inputHtmlName}').onchange=function(){`,\r\n\t\t\t`\tif (this.checked) {`\r\n\t\t)\r\n\t\trewire('disconnect',this.getPrevNodeOutputs(),this.getNextNodeInputs())\r\n\t\tif (this.rewireInput) {\r\n\t\t\trewire('connect',this.getPrevNodeOutputs(),this.innerNode.getInputs())\r\n\t\t}\r\n\t\tif (this.rewireOutput) {\r\n\t\t\trewire('connect',this.innerNode.getOutputs(),this.getNextNodeInputs())\r\n\t\t}\r\n\t\ta(\r\n\t\t\t`\t} else {`\r\n\t\t)\r\n\t\tif (this.rewireOutput) {\r\n\t\t\trewire('disconnect',this.innerNode.getOutputs(),this.getNextNodeInputs())\r\n\t\t}\r\n\t\tif (this.rewireInput) {\r\n\t\t\trewire('disconnect',this.getPrevNodeOutputs(),this.innerNode.getInputs())\r\n\t\t}\r\n\t\trewire('connect',this.getPrevNodeOutputs(),this.getNextNodeInputs())\r\n\t\ta(\r\n\t\t\t`\t}`,\r\n\t\t\t`};`\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nGenNode.drywet = class extends ContainerNode {\r\n\tinitEdges(prevNodes,nextNodes) {\r\n\t\tsuper.initEdges(prevNodes,nextNodes)\r\n\t\tconst wetGainDummyNode={\r\n\t\t\tgetInputs() {\r\n\t\t\t\t[this.wetGainNodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.innerNode.initEdges(prevNodes,[wetGainDummyNode])\r\n\t}\r\n\tget jsCommentType() {\r\n\t\treturn this.innerNode.jsCommentType+'.drywet'\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn [this.dryGainNodeJsName,...this.innerNode.getInputs()]\r\n\t}\r\n\tgetOutputs() {\r\n\t\treturn [this.dryGainNodeJsName,this.wetGainNodeJsName]\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\tthis.getPropertyHtmlLines(featureContext,i18n,this.wetProperty),\r\n\t\t\tthis.innerNode.getHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\ta(\r\n\t\t\tthis.innerNode.getInitJsLines(featureContext,i18n)\r\n\t\t)\r\n\t\ta(\r\n\t\t\tfeatureContext.getConnectAssignJsLines(\r\n\t\t\t\t\"var\",this.dryGainNodeJsName,\r\n\t\t\t\t\"ctx.createGain()\",\r\n\t\t\t\tthis.getPrevNodeOutputs()\r\n\t\t\t)\r\n\t\t)\r\n\t\tif (!this.options.wet.input) {\r\n\t\t\ta(\r\n\t\t\t\tthis.dryGainNodeJsName+\".gain.value=\"+this.getPropertyJsConstant(this.wetProperty,this.options.wet,1-this.options.wet)+\";\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\tfeatureContext.getConnectAssignJsLines(\r\n\t\t\t\t\"var\",this.wetGainNodeJsName,\r\n\t\t\t\t\"ctx.createGain()\",\r\n\t\t\t\tthis.innerNode.getOutputs()\r\n\t\t\t)\r\n\t\t)\r\n\t\tif (!this.options.wet.input) {\r\n\t\t\ta(\r\n\t\t\t\tthis.wetGainNodeJsName+\".gain.value=\"+this.getPropertyJsConstant(this.wetProperty,this.options.wet)+\";\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.options.wet.input) {\r\n\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('wet')\r\n\t\t\tconst inputJsName=this.getPropertyInputJsName('wet')\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-\"+inputJsName+\".value;\",\r\n\t\t\t\t\"})();\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\t// protected:\r\n\tget dryGainNodeJsName() {\r\n\t\treturn camelCase(this.name+'.dry.gain.node')\r\n\t}\r\n\tget wetGainNodeJsName() {\r\n\t\treturn camelCase(this.name+'.wet.gain.node')\r\n\t}\r\n\tget wetProperty() {\r\n\t\treturn {name:'wet',type:'range'}\r\n\t}\r\n}\r\n\r\nGenNode.analyser = class extends Node {\r\n\tconstructor(options,name,visNodes) {\r\n\t\tsuper(options,name)\r\n\t\tthis.visNodes=visNodes\r\n\t}\r\n\tget type() {\r\n\t\treturn 'analyser'\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tgetOutputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t\tfeatureContext.canvas=true\r\n\t\tif (featureContext.maxLogFftSize==undefined || featureContext.maxLogFftSize<this.options.logFftSize) {\r\n\t\t\tfeatureContext.maxLogFftSize=this.options.logFftSize\r\n\t\t\tfeatureContext.maxLogFftSizeNodeJsName=this.nodeJsName\r\n\t\t}\r\n\t\tfor (const visNode of this.visNodes) {\r\n\t\t\tvisNode.requestFeatureContext(featureContext)\r\n\t\t}\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst getAnalyserNodeLines=(jsName,prevOutputs,connectArgs)=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(featureContext.getConnectAssignJsLines(\"var\",jsName,\"ctx.createAnalyser()\",prevOutputs,connectArgs))\r\n\t\t\tif (this.options.logFftSize!=11) { // default FFT size is 2048\r\n\t\t\t\ta(jsName+\".fftSize=\"+(1<<this.options.logFftSize)+\";\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\treturn getAnalyserNodeLines(this.nodeJsName,this.getPrevNodeOutputs())\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.visNodes.map(visNode=>visNode.getPreVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.visNodes.map(visNode=>visNode.getVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGenNode.stereoVolume = class extends Node {\r\n\tconstructor(options,name,visNodes) {\r\n\t\tsuper(options,name)\r\n\t\tthis.visNodes=visNodes\r\n\t}\r\n\tget type() {\r\n\t\treturn 'stereoVolume'\r\n\t}\r\n\tget splitterNodeJsName() {\r\n\t\treturn camelCase(this.name+'.splitter.node')\r\n\t}\r\n\tget leftAnalyserNodeJsName() {\r\n\t\treturn camelCase(this.name+'.left.analyser.node')\r\n\t}\r\n\tget rightAnalyserNodeJsName() {\r\n\t\treturn camelCase(this.name+'.right.analyser.node')\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn [this.splitterNodeJsName]\r\n\t}\r\n\trequestFeatureContext(featureContext) { // copypaste from analyser except for \"leftAnalyserNodeJsName\" TODO refactor\r\n\t\tfeatureContext.audioContext=true\r\n\t\tfeatureContext.canvas=true\r\n\t\tif (featureContext.maxLogFftSize==undefined || featureContext.maxLogFftSize<this.options.logFftSize) {\r\n\t\t\tfeatureContext.maxLogFftSize=this.options.logFftSize\r\n\t\t\tfeatureContext.maxLogFftSizeNodeJsName=this.leftAnalyserNodeJsName\r\n\t\t}\r\n\t\tfor (const visNode of this.visNodes) {\r\n\t\t\tvisNode.requestFeatureContext(featureContext)\r\n\t\t}\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst getAnalyserNodeLines=(jsName,prevOutputs,connectArgs)=>{ // copypaste from analyser TODO refactor\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(featureContext.getConnectAssignJsLines(\"var\",jsName,\"ctx.createAnalyser()\",prevOutputs,connectArgs))\r\n\t\t\tif (this.options.logFftSize!=11) { // default FFT size is 2048\r\n\t\t\t\ta(jsName+\".fftSize=\"+(1<<this.options.logFftSize)+\";\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\treturn JsLines.bae(\r\n\t\t\tfeatureContext.getConnectAssignJsLines(\"var\",this.splitterNodeJsName,\"ctx.createChannelSplitter()\",this.getPrevNodeOutputs()),\r\n\t\t\tgetAnalyserNodeLines(this.leftAnalyserNodeJsName,[this.splitterNodeJsName],\"0\"),\r\n\t\t\tgetAnalyserNodeLines(this.rightAnalyserNodeJsName,[this.splitterNodeJsName],\"1\")\r\n\t\t)\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) { // copypaste from analyser TODO refactor\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.visNodes.map(visNode=>visNode.getPreVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) { // copypaste from analyser TODO refactor\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.visNodes.map(visNode=>visNode.getVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGenNode.junction = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'junction'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createGain'\r\n\t}\r\n}\r\n\r\nGenNode.audio = class extends MediaElementNode {\r\n\tget type() {\r\n\t\treturn 'audio'\r\n\t}\r\n\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\tLines.html`<audio src=${this.options.url} id=${this.nodeHtmlName} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></audio>`\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGenNode.video = class extends MediaElementNode {\r\n\tget type() {\r\n\t\treturn 'video'\r\n\t}\r\n\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\tLines.html`<video src=${this.options.url} id=${this.nodeHtmlName} width=${this.options.width} height=${this.options.height} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></video>`\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGenNode.sample = class extends Node {\r\n\tget type() {\r\n\t\treturn 'sample'\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t\tfeatureContext.loader=true\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst messageHtmlName=this.nodeHtmlName+'.buffer'\r\n\t\treturn NoseWrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tLines.html`<button id=${this.nodeHtmlName} disabled>${i18n('label.graph.sample.play')}</button> <span id=${messageHtmlName}>${i18n('label.graph.sample.buffer.loading')}</span>`\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst messageHtmlName=this.nodeHtmlName+'.buffer'\r\n\t\tconst fmtMul=(fmtNum)=>{\r\n\t\t\tif (fmtNum==1) {\r\n\t\t\t\treturn \"\"\r\n\t\t\t} else {\r\n\t\t\t\treturn \"*\"+fmtNum\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getSampleLines=(startOptions)=>{\r\n\t\t\tconst randomValue=(baseOption,randomOption)=>{\r\n\t\t\t\tconst numbers={}\r\n\t\t\t\tnumbers.base=baseOption\r\n\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\tnumbers.random=randomOption\r\n\t\t\t\t}\r\n\t\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\t\tlet value=fmt.base\r\n\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\tvalue+=\"+Math.random()\"+fmtMul(fmt.random)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet lastNodeName=\"bufferSourceNode\"\r\n\t\t\ta(\r\n\t\t\t\t\"var bufferSourceNode=ctx.createBufferSource();\",\r\n\t\t\t\t\"bufferSourceNode.buffer=buffer;\"\r\n\t\t\t)\r\n\t\t\tif (this.options.pitch!=1 || this.options.randomPitch>0) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"bufferSourceNode.playbackRate.value=\"+randomValue(this.options.pitch,this.options.randomPitch)+\";\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (this.options.gain!=1 || this.options.randomGain>0) {\r\n\t\t\t\tlastNodeName=\"bufferSourceGainNode\"\r\n\t\t\t\ta(\r\n\t\t\t\t\tfeatureContext.getConnectAssignJsLines(\"var\",\"bufferSourceGainNode\",\"ctx.createGain()\",[\"bufferSourceNode\"]),\r\n\t\t\t\t\t\"bufferSourceGainNode.gain.value=\"+randomValue(this.options.gain,this.options.randomGain)+\";\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t...this.getNextNodeInputs().map(\r\n\t\t\t\t\tnodeJsName=>lastNodeName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t),\r\n\t\t\t\t\"bufferSourceNode.start(\"+startOptions+\");\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getOnClickLines=()=>{\r\n\t\t\tlet startOptions=\"\"\r\n\t\t\tconst numbers={}\r\n\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\tnumbers.interval=this.options.interval\r\n\t\t\t}\r\n\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\tnumbers.randomShift=this.options.randomShift\r\n\t\t\t}\r\n\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\tstartOptions+=\"+i\"+fmtMul(fmt.interval)\r\n\t\t\t}\r\n\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\tstartOptions+=\"+Math.random()\"+fmtMul(fmt.randomShift)\r\n\t\t\t}\r\n\t\t\tif (startOptions.length>0) {\r\n\t\t\t\tstartOptions=\"ctx.currentTime\"+startOptions\r\n\t\t\t}\r\n\t\t\tif (this.options.repeat==1) {\r\n\t\t\t\treturn getSampleLines(startOptions)\r\n\t\t\t} else {\r\n\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"for (var i=0;i<\"+this.options.repeat+\";i++) {\"),\r\n\t\t\t\t\tJsLines.bae(\"}\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetSampleLines(startOptions)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getOnDecodeLines=()=>{\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\t\"var button=document.getElementById('\"+this.nodeHtmlName+\"');\",\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"button.onclick=function(){\"),\r\n\t\t\t\t\tJsLines.bae(\"};\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetOnClickLines()\r\n\t\t\t\t),\r\n\t\t\t\t\"button.disabled=false;\",\r\n\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='';\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst getOnErrorLines=()=>{\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('label.graph.sample.buffer.error')+\"';\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.getXhrJsLines(featureContext,i18n,getOnDecodeLines(),getOnErrorLines())\r\n\t}\r\n}\r\n\r\nGenNode.gain = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'gain'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createGain'\r\n\t}\r\n\tget properties() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname:'gain',\r\n\t\t\t\ttype:'range',\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n\r\nGenNode.panner = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'panner'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createStereoPanner'\r\n\t}\r\n\tget properties() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname:'pan',\r\n\t\t\t\ttype:'range',\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n\r\nGenNode.biquad = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'biquad'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createBiquadFilter'\r\n\t}\r\n\tget properties() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname:'type',\r\n\t\t\t\ttype:'select',\r\n\t\t\t},{\r\n\t\t\t\tname:'frequency',\r\n\t\t\t\ttype:'range',\r\n\t\t\t},{\r\n\t\t\t\tname:'detune',\r\n\t\t\t\ttype:'range',\r\n\t\t\t},{\r\n\t\t\t\tname:'Q',\r\n\t\t\t\ttype:'range',\r\n\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesQ(this.options.type.value)),\r\n\t\t\t},{\r\n\t\t\t\tname:'gain',\r\n\t\t\t\ttype:'range',\r\n\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesGain(this.options.type.value)),\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n\r\nGenNode.iir = class extends Node { // not FilterNode b/c has different init\r\n\tget type() {\r\n\t\treturn 'iir'\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tgetOutputs() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tfeatureContext.getConnectAssignJsLines(\r\n\t\t\t\t\"var\",this.nodeJsName,\r\n\t\t\t\t\"ctx.createIIRFilter([\"+this.options.feedforward+\"],[\"+this.options.feedback+\"])\",\r\n\t\t\t\tthis.getPrevNodeOutputs()\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGenNode.convolver = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'convolver'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createConvolver'\r\n\t}\r\n\tget properties() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname:'buffer',\r\n\t\t\t\ttype:'xhr',\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tsuper.requestFeatureContext(featureContext)\r\n\t\tfeatureContext.loader=true\r\n\t}\r\n}\r\n\r\nGenNode.equalizer = class extends Node {\r\n\tget type() {\r\n\t\treturn 'equalizer'\r\n\t}\r\n\tget jsCommentType() {\r\n\t\tif (this.affectedFreqsAndOptions.length==1) {\r\n\t\t\treturn this.type+'.single'\r\n\t\t} else {\r\n\t\t\treturn this.type\r\n\t\t}\r\n\t}\r\n\tgetInputs() {\r\n\t\tif (this.affectedFreqsAndOptions.length==1) {\r\n\t\t\treturn [this.nodeJsName]\r\n\t\t} else {\r\n\t\t\treturn [this.inputNodeJsName]\r\n\t\t}\r\n\t}\r\n\tgetOutputs() {\r\n\t\tif (this.affectedFreqsAndOptions.length==1) {\r\n\t\t\treturn [this.nodeJsName]\r\n\t\t} else {\r\n\t\t\treturn [this.outputNodeJsName]\r\n\t\t}\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.audioContext=true\r\n\t\tlet nInputs=0\r\n\t\tfor (const [freq,option] of this.affectedFreqsAndOptions) {\r\n\t\t\tif (option.input) {\r\n\t\t\t\tif (++nInputs>1) {\r\n\t\t\t\t\tfeatureContext.alignedInputs=true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst properties=Option.EqualizerFilter.frequencies.map(freq=>({\r\n\t\t\tname:'gain'+freq,\r\n\t\t\ttype:'range',\r\n\t\t}))\r\n\t\treturn Lines.bae(\r\n\t\t\t...properties.map(\r\n\t\t\t\tproperty=>NoseWrapLines.b(\r\n\t\t\t\t\t\"<div>\",\"</div>\"\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tthis.getPropertyHtmlLines(featureContext,i18n,property)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst prevNodeOutputs=this.getPrevNodeOutputs()\r\n\t\tconst singleFreq=this.affectedFreqsAndOptions.length==1\r\n\t\tconst allGainsConstant=this.affectedFreqsAndOptions.every(([freq,option])=>option.input==false)\r\n\t\tconst noGainsConstant=this.affectedFreqsAndOptions.every(([freq,option])=>option.input==true)\r\n\t\tconst getJsData=()=>{\r\n\t\t\treturn this.affectedFreqsAndOptions.map(([freq,option])=>{\r\n\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\treturn freq\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"[\"+freq+\",\"+(option.input ? 'null' : option.value)+\"]\"\r\n\t\t\t\t}\r\n\t\t\t}).join()\r\n\t\t}\r\n\t\tconst getJsDataItem=()=>{\r\n\t\t\tif (noGainsConstant) {\r\n\t\t\t\treturn \"freq\"\r\n\t\t\t} else {\r\n\t\t\t\treturn \"freqData\"\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getJsLoopLines=()=>{\r\n\t\t\tconst freq=(singleFreq ? this.affectedFreqsAndOptions[0][0] : 'freq')\r\n\t\t\tconst gain=(singleFreq ? this.affectedFreqsAndOptions[0][1].value : 'gain')\r\n\t\t\tlet nodeJsName\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\tnodeJsName=this.nodeJsName\r\n\t\t\t} else if (allGainsConstant) {\r\n\t\t\t\tnodeJsName=this.outputNodeJsName\r\n\t\t\t} else {\r\n\t\t\t\tnodeJsName='node'\r\n\t\t\t}\r\n\t\t\tconst inputJsName=(singleFreq\r\n\t\t\t\t? this.getPropertyInputJsName('gain'+freq)\r\n\t\t\t\t: 'input'\r\n\t\t\t)\r\n\t\t\tconst inputHtmlNameExpr=(singleFreq\r\n\t\t\t\t? \"'\"+this.getPropertyInputHtmlName('gain'+freq)+\"'\"\r\n\t\t\t\t: \"'\"+this.getPropertyInputHtmlName('gain')+\"'+freq\"\r\n\t\t\t)\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (!(noGainsConstant || singleFreq)) {\r\n\t\t\t\ta(\"var freq=freqData[0], gain=freqData[1];\")\r\n\t\t\t}\r\n\t\t\tlet connectors\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\tconnectors=prevNodeOutputs\r\n\t\t\t} else {\r\n\t\t\t\tif (prevNodeOutputs.length==1) {\r\n\t\t\t\t\tconnectors=[\"prevNode\"]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconnectors=\"prevNodes\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta(featureContext.getConnectAssignJsLines(\r\n\t\t\t\t((allGainsConstant && !singleFreq) ? \"\" : \"var\"),nodeJsName,\r\n\t\t\t\t\"ctx.createBiquadFilter()\",\r\n\t\t\t\tconnectors\r\n\t\t\t))\r\n\t\t\tif (!singleFreq) { // TODO do only if named input node is requested\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"if (\"+this.inputNodeJsName+\"===undefined) {\",\r\n\t\t\t\t\t\"\t\"+this.inputNodeJsName+\"=\"+nodeJsName+\";\",\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tnodeJsName+\".type='peaking';\",\r\n\t\t\t\tnodeJsName+\".frequency.value=\"+freq+\";\"\r\n\t\t\t)\r\n\t\t\tconst constLines=JsLines.bae(\r\n\t\t\t\tnodeJsName+\".gain.value=\"+gain+\";\"\r\n\t\t\t)\r\n\t\t\tconst varLines=JsLines.bae(\r\n\t\t\t\t\"var \"+inputJsName+\"=document.getElementById(\"+inputHtmlNameExpr+\");\",\r\n\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\"\t\"+nodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\"})();\"\r\n\t\t\t)\r\n\t\t\tif (!noGainsConstant && allGainsConstant) {\r\n\t\t\t\ta(constLines)\r\n\t\t\t} else if (noGainsConstant && !allGainsConstant) {\r\n\t\t\t\ta(varLines)\r\n\t\t\t} else if (!noGainsConstant && !allGainsConstant) {\r\n\t\t\t\ta(WrapLines.b(\"if (gain!==null) {\",\"} else {\",\"}\").ae(constLines,varLines))\r\n\t\t\t}\r\n\t\t\tif (!singleFreq) {\r\n\t\t\t\tconst outerNodeJsName=(allGainsConstant ? nodeJsName : this.outputNodeJsName+\"=\"+nodeJsName)\r\n\t\t\t\tif (prevNodeOutputs.length==1) {\r\n\t\t\t\t\ta(\"prevNode=\"+outerNodeJsName+\";\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"prevNodes=[\"+outerNodeJsName+\"];\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tif (singleFreq) {\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\tgetJsLoopLines()\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (prevNodeOutputs.length==1) {\r\n\t\t\t\ta(\"var prevNode=\"+prevNodeOutputs[0]+\";\")\r\n\t\t\t} else {\r\n\t\t\t\ta(\"var prevNodes=[\"+prevNodeOutputs.join()+\"];\")\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+this.inputNodeJsName+\",\"+this.outputNodeJsName+\";\", // TODO declare this.inputNodeJsName only if named input node is requested\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\";[\"+getJsData()+\"].forEach(function(\"+getJsDataItem()+\"){\"),JsLines.bae(\"});\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t}\r\n\t// helpers:\r\n\tget affectedFreqsAndOptions() {\r\n\t\treturn Option.EqualizerFilter.frequencies.map(\r\n\t\t\t(freq,i)=>[freq,this.options['gain'+freq]]\r\n\t\t).filter(\r\n\t\t\t([freq,option])=>(option.input!=false || option.value!=0)\r\n\t\t)\r\n\t}\r\n\tget inputNodeJsName() {\r\n\t\treturn camelCase(this.name+'.input.node')\r\n\t}\r\n\tget outputNodeJsName() {\r\n\t\treturn camelCase(this.name+'.output.node')\r\n\t}\r\n}\r\n\r\nGenNode.compressor = class extends FilterNode {\r\n\tget type() {\r\n\t\treturn 'compressor'\r\n\t}\r\n\tget ctxCreateMethodName() {\r\n\t\treturn 'createDynamicsCompressor'\r\n\t}\r\n}\r\n\r\nGenNode.destination = class extends Node {\r\n\tget type() {\r\n\t\treturn 'destination'\r\n\t}\r\n\tgetInputs() {\r\n\t\treturn ['ctx.destination']\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.getPrevNodeOutputs().map(name=>name+\".connect(ctx.destination);\")\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GenNode\r\n","'use strict'\r\n\r\n// classes like GenNodes, but w/o inputs/outputs; to be aggregated by GenNode.analyser\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst Feature=require('./feature')\r\nconst CanvasContext=require('./canvas-context')\r\n\r\nclass VisFunction {\r\n\tconstructor() {\r\n\t\tthis.data={}\r\n\t}\r\n\taddArgValues(...values) {\r\n\t\tfor (let i=0;i<values.length;i++) {\r\n\t\t\tconst arg=this.args[i]\r\n\t\t\tconst value=values[i]\r\n\t\t\tif (this.data[arg]===undefined) {\r\n\t\t\t\tthis.data[arg]=value\r\n\t\t\t} else if (!Array.isArray(this.data[arg]) && this.data[arg]!=value) {\r\n\t\t\t\tthis.data[arg]=[]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetArgValue(arg) {\r\n\t\tif (Array.isArray(this.data[arg])) {\r\n\t\t\treturn arg\r\n\t\t} else {\r\n\t\t\treturn this.data[arg]\r\n\t\t}\r\n\t}\r\n\tgetTernaryOpArgValue(arg,cases) {\r\n\t\tconst argValue=this.getArgValue(arg)\r\n\t\tfor (const [caseArgValue,caseResultValue] of cases) {\r\n\t\t\tif (`'${caseArgValue}'`==argValue) {\r\n\t\t\t\treturn caseResultValue\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn `(${arg}=='${cases[0][0]}' ? ${cases[0][1]} : ${cases[1][1]})`\r\n\t}\r\n\tgetConditionalArgLines(arg,cases) {\r\n\t\tconst argValue=this.getArgValue(arg)\r\n\t\tfor (const [caseArgValue,caseResultLines] of cases) {\r\n\t\t\tif (`'${caseArgValue}'`==argValue) {\r\n\t\t\t\treturn caseResultLines\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn WrapLines.b(\r\n\t\t\tJsLines.bae(`if (${arg}=='${cases[0][0]}') {`),\r\n\t\t\tJsLines.bae(`} else {`),\r\n\t\t\tJsLines.bae(`}`)\r\n\t\t).ae(\r\n\t\t\tcases[0][1],\r\n\t\t\tcases[1][1]\r\n\t\t)\r\n\t}\r\n\tgetDeclJsLines(canvasContext) {\r\n\t\tconst declArgs=[]\r\n\t\tfor (let i=0;i<this.args.length;i++) {\r\n\t\t\tif (Array.isArray(this.data[this.args[i]])) {\r\n\t\t\t\tdeclArgs.push(this.args[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn WrapLines.b(\r\n\t\t\tJsLines.bae(\"function \"+this.name+\"(\"+declArgs.join()+\") {\"),\r\n\t\t\tJsLines.bae(\"}\")\r\n\t\t).ae(\r\n\t\t\tthis.getBodyJsLines(canvasContext)\r\n\t\t)\r\n\t}\r\n\tgetCallJsLines(...values) {\r\n\t\tconst passValues=[]\r\n\t\tfor (let i=0;i<values.length;i++) {\r\n\t\t\tif (Array.isArray(this.data[this.args[i]])) {\r\n\t\t\t\tpassValues.push(values[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn JsLines.bae(\r\n\t\t\tthis.name+\"(\"+passValues.join()+\");\"\r\n\t\t)\r\n\t}\r\n\t// get name()\r\n\t// get args()\r\n\t// getBodyJsLines(canvasContext)\r\n}\r\n\r\nclass WaveformVisFunction extends VisFunction {\r\n\tget name() {\r\n\t\treturn 'visualizeWaveform'\r\n\t}\r\n\tget args() {\r\n\t\treturn ['analyserNode','waveformWidth','waveformColor']\r\n\t}\r\n\tgetBodyJsLines(canvasContext) {\r\n\t\tconst analyserNode=this.getArgValue('analyserNode')\r\n\t\tconst a=canvasContext.b()\r\n\t\ta(\r\n\t\t\ta.setProp('lineWidth',this.getArgValue('waveformWidth')),\r\n\t\t\ta.setProp('strokeStyle',this.getArgValue('waveformColor')),\r\n\t\t\t`${analyserNode}.getByteTimeDomainData(analyserData);`,\r\n\t\t\t`${a.jsName}.beginPath();`,\r\n\t\t\t`for (var i=0;i<${analyserNode}.frequencyBinCount;i++) {`,\r\n\t\t\t`\tvar x=i*canvas.width/(${analyserNode}.frequencyBinCount-1);`,\r\n\t\t\t`\tvar y=analyserData[i]*canvas.height/256;`,\r\n\t\t\t`\tif (i==0) {`,\r\n\t\t\t`\t\t${a.jsName}.moveTo(x,y);`,\r\n\t\t\t`\t} else {`,\r\n\t\t\t`\t\t${a.jsName}.lineTo(x,y);`,\r\n\t\t\t`\t}`,\r\n\t\t\t`}`,\r\n\t\t\t`${a.jsName}.stroke();`\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nclass FrequencyBarsVisFunction extends VisFunction {\r\n\tget name() {\r\n\t\treturn 'visualizeFrequencyBars'\r\n\t}\r\n\tget args() {\r\n\t\treturn ['analyserNode','frequencyCutoff','barsBase','barsColoring','barsColoringInput']\r\n\t}\r\n\tgetBodyJsLines(canvasContext) {\r\n\t\tconst analyserNode=this.getArgValue('analyserNode')\r\n\t\tconst frequencyCutoff=this.getArgValue('frequencyCutoff')\r\n\t\tconst a=canvasContext.b()\r\n\t\tlet nBars=`${analyserNode}.frequencyBinCount`\r\n\t\tif (frequencyCutoff!=100) {\r\n\t\t\ta(`var nBars=Math.floor(${nBars}*${(frequencyCutoff/100).toFixed(2)});`)\r\n\t\t\tnBars=\"nBars\"\r\n\t\t}\r\n\t\tconst y=this.getTernaryOpArgValue('barsBase',[\r\n\t\t\t['bottom',`canvas.height-barHeight`],\r\n\t\t\t['middle',`(canvas.height-barHeight)/2`],\r\n\t\t])\r\n\t\tconst colorInput=this.getTernaryOpArgValue('barsColoringInput',[\r\n\t\t\t['amplitude',`analyserData[i]`],\r\n\t\t\t['frequency',`Math.round(i*255/${nBars})`],\r\n\t\t])\r\n\t\tconst fillStyle=this.getTernaryOpArgValue('barsColoring',[\r\n\t\t\t['component',`'rgb('+(${colorInput}+100)+',50,50)'`],\r\n\t\t\t['spectral',`'hsl('+(255-${colorInput})+',100%,50%)'`],\r\n\t\t])\r\n\t\ta.setProp('fillStyle',fillStyle) // throwaway setProp to force style save/restore\r\n\t\ta(\r\n\t\t\t`var barWidth=canvas.width/${nBars}*0.8;`,\r\n\t\t\t`${analyserNode}.getByteFrequencyData(analyserData);`,\r\n\t\t\t`for (var i=0;i<${nBars};i++) {`,\r\n\t\t\t`\tvar x=i*canvas.width/${nBars};`,\r\n\t\t\t`\t${a.jsName}.fillStyle=${fillStyle};`,\r\n\t\t\t`\tvar barHeight=analyserData[i]*canvas.height/256;`,\r\n\t\t\t`\tvar y=${y};`,\r\n\t\t\t`\t${a.jsName}.fillRect(x,y,barWidth,barHeight);`,\r\n\t\t\t`}`\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nclass FrequencyOutlineVisFunction extends VisFunction {\r\n\tget name() {\r\n\t\treturn 'visualizeFrequencyOutline'\r\n\t}\r\n\tget args() {\r\n\t\treturn ['analyserNode','frequencyCutoff','outlineBase','outlineWidth','outlineColor']\r\n\t}\r\n\tgetBodyJsLines(canvasContext) {\r\n\t\t// TODO remove residual \"bars\" naming\r\n\t\t// { copypaste from bars\r\n\t\tconst analyserNode=this.getArgValue('analyserNode')\r\n\t\tconst frequencyCutoff=this.getArgValue('frequencyCutoff')\r\n\t\tconst a=canvasContext.b()\r\n\t\tlet nBars=`${analyserNode}.frequencyBinCount`\r\n\t\tif (frequencyCutoff!=100) {\r\n\t\t\ta(`var nBars=Math.floor(${nBars}*${(frequencyCutoff/100).toFixed(2)});`)\r\n\t\t\tnBars=\"nBars\"\r\n\t\t}\r\n\t\t// }\r\n\t\tconst getOutlineLines=y=>JsLines.bae(\r\n\t\t\t`for (var i=0;i<${nBars};i++) {`,\r\n\t\t\t`\tvar x=i*canvas.width/${nBars};`,\r\n\t\t\t`\tvar barHeight=analyserData[i]*canvas.height/256;`,\r\n\t\t\t`\tvar y=${y};`,\r\n\t\t\t`\tif (i==0) {`,\r\n\t\t\t`\t\t${a.jsName}.moveTo(0,y);`,\r\n\t\t\t`\t}`,\r\n\t\t\t`\t${a.jsName}.lineTo(x+barWidth/2,y);`,\r\n\t\t\t`\tif (i==${nBars}-1) {`,\r\n\t\t\t`\t\t${a.jsName}.lineTo(canvas.width,y);`,\r\n\t\t\t`\t}`,\r\n\t\t\t`}`\r\n\t\t)\r\n\t\ta(\r\n\t\t\ta.setProp('lineWidth',this.getArgValue('outlineWidth')),\r\n\t\t\ta.setProp('strokeStyle',this.getArgValue('outlineColor')),\r\n\t\t\t`var barWidth=canvas.width/${nBars}*0.8;`,\r\n\t\t\t`${analyserNode}.getByteFrequencyData(analyserData);`, // TODO optimize out repeated calls to analyser\r\n\t\t\t`${a.jsName}.beginPath();`,\r\n\t\t\tthis.getConditionalArgLines('outlineBase',[ // TODO if-else case is too verbose, make another function to shorten it\r\n\t\t\t\t['bottom',getOutlineLines(`canvas.height-barHeight`)],\r\n\t\t\t\t['middle',WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(`;[-1,+1].forEach(function(aboveOrBelow){`),\r\n\t\t\t\t\tJsLines.bae(`});`)\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetOutlineLines(`(canvas.height+aboveOrBelow*barHeight)/2`)\r\n\t\t\t\t)],\r\n\t\t\t]),\r\n\t\t\t`${a.jsName}.stroke();`\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nclass VolumeVisFunction extends VisFunction {\r\n\tget name() {\r\n\t\treturn 'visualizeVolumeOutline'\r\n\t}\r\n\tget args() {\r\n\t\treturn ['analyserNode','xOffset']\r\n\t}\r\n\tgetBodyJsLines(canvasContext) {\r\n\t\tconst analyserNode=this.getArgValue('analyserNode')\r\n\t\tconst xOffset=this.getArgValue('xOffset')\r\n\t\tconst a=canvasContext.b()\r\n\t\ta(\r\n\t\t\t`${analyserNode}.getByteFrequencyData(analyserData);`, // TODO optimize out repeated calls to analyser\r\n\t\t\t`var sumAmplitudes=0;`,\r\n\t\t\t`for (var i=0;i<${analyserNode}.frequencyBinCount;i++) {`,\r\n\t\t\t`\tsumAmplitudes+=analyserData[i];`,\r\n\t\t\t`}`,\r\n\t\t\t`var meanAmplitude=sumAmplitudes/${analyserNode}.frequencyBinCount;`,\r\n\t\t\t`var barHeight=meanAmplitude*canvas.height/256;`,\r\n\t\t\ta.setProp('fillStyle','canvasVolumeGradient'),\r\n\t\t\t`${a.jsName}.fillRect(${xOffset},canvas.height-barHeight,25,barHeight);`\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nconst VisNode={}\r\n\r\n//// abstract classes (not exported)\r\n\r\nclass Node extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tinitParent(analyserNodeJsName) {\r\n\t\tthis.analyserNodeJsName=analyserNodeJsName\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (featureContext[this.featureContextProp]===undefined) {\r\n\t\t\tfeatureContext[this.featureContextProp]=this.makeVisFunction()\r\n\t\t}\r\n\t\tfeatureContext[this.featureContextProp].addArgValues(...this.listVisFunctionArgValues())\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) {\r\n\t\treturn featureContext[this.featureContextProp].getCallJsLines(...this.listVisFunctionArgValues())\r\n\t}\r\n\t// protected:\r\n\t// get featureContextProp()\r\n\t// makeVisFunction()\r\n\t// listVisFunctionArgValues()\r\n}\r\n\r\n//// concrete classes\r\n\r\nVisNode.waveform = class extends Node {\r\n\tget featureContextProp() {\r\n\t\treturn 'visualizeWaveformFn'\r\n\t}\r\n\tmakeVisFunction() {\r\n\t\treturn new WaveformVisFunction()\r\n\t}\r\n\tlistVisFunctionArgValues() {\r\n\t\treturn [\r\n\t\t\tthis.analyserNodeJsName,\r\n\t\t\tthis.options.width.value,\r\n\t\t\tCanvasContext.getColorStyle(this.options.color)\r\n\t\t]\r\n\t}\r\n}\r\n\r\nVisNode.frequencyBars = class extends Node {\r\n\tget featureContextProp() {\r\n\t\treturn 'visualizeFrequencyBarsFn'\r\n\t}\r\n\tmakeVisFunction() {\r\n\t\treturn new FrequencyBarsVisFunction()\r\n\t}\r\n\tlistVisFunctionArgValues() {\r\n\t\treturn [\r\n\t\t\tthis.analyserNodeJsName,\r\n\t\t\tthis.options.cutoff.value,\r\n\t\t\t\"'\"+this.options.base+\"'\",\r\n\t\t\t\"'\"+this.options.coloring+\"'\",\r\n\t\t\t\"'\"+this.options.coloringInput+\"'\"\r\n\t\t]\r\n\t}\r\n}\r\n\r\nVisNode.frequencyOutline = class extends Node {\r\n\tget featureContextProp() {\r\n\t\treturn 'visualizeFrequencyOutlineFn'\r\n\t}\r\n\tmakeVisFunction() {\r\n\t\treturn new FrequencyOutlineVisFunction()\r\n\t}\r\n\tlistVisFunctionArgValues() {\r\n\t\treturn [\r\n\t\t\tthis.analyserNodeJsName,\r\n\t\t\tthis.options.cutoff.value,\r\n\t\t\t\"'\"+this.options.base+\"'\",\r\n\t\t\tthis.options.width.value,\r\n\t\t\tCanvasContext.getColorStyle(this.options.color)\r\n\t\t]\r\n\t}\r\n}\r\n\r\nVisNode.volume = class extends Node {\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfeatureContext.canvasVolumeGradient=true\r\n\t\tif (featureContext.canvasVolumeMeterCounter===undefined) {\r\n\t\t\tfeatureContext.canvasVolumeMeterCounter=0 // TODO should be tracked by canvasContext\r\n\t\t}\r\n\t\tthis.xOffset=(featureContext.canvasVolumeMeterCounter++)*26\r\n\t\tsuper.requestFeatureContext(featureContext)\r\n\t}\r\n\tget featureContextProp() {\r\n\t\treturn 'visualizeVolumeFn'\r\n\t}\r\n\tmakeVisFunction() {\r\n\t\treturn new VolumeVisFunction()\r\n\t}\r\n\tlistVisFunctionArgValues() {\r\n\t\treturn [\r\n\t\t\tthis.analyserNodeJsName,\r\n\t\t\tthis.xOffset\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=VisNode\r\n","'use strict'\r\n\r\nconst ConNode=require('./audio-graph-con-node-classes')\r\nconst Lines=require('crnx-base/lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\n// con-node = node used for graph construction\r\n// gen-node = node used after graph construction\r\n// input, output = web audio api node represented as js expression\r\n\r\nclass AudioGraph extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tconst haveNodeOutputIntersection=(node1,node2)=>{\r\n\t\t\tlet intersect=false\r\n\t\t\tnode2.nextNodes.forEach(node=>{\r\n\t\t\t\tif (node1.nextNodes.has(node)) {\r\n\t\t\t\t\tintersect=true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn intersect\r\n\t\t}\r\n\t\tconst replaceNode=(oldNode,newNode)=>{\r\n\t\t\tnewNode.prevNodes=oldNode.prevNodes\r\n\t\t\tnewNode.nextNodes=oldNode.nextNodes\r\n\t\t\toldNode.prevNodes.forEach(prevNode=>{\r\n\t\t\t\tprevNode.nextNodes.delete(oldNode)\r\n\t\t\t\tprevNode.nextNodes.add(newNode)\r\n\t\t\t})\r\n\t\t\toldNode.nextNodes.forEach(nextNode=>{\r\n\t\t\t\tnextNode.prevNodes.delete(oldNode)\r\n\t\t\t\tnextNode.prevNodes.add(newNode)\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst deleteNode=(node)=>{\r\n\t\t\tnode.prevNodes.forEach(prevNode=>{\r\n\t\t\t\tprevNode.nextNodes.delete(node)\r\n\t\t\t\tnode.nextNodes.forEach(nextNode=>{\r\n\t\t\t\t\tprevNode.nextNodes.add(nextNode)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tnode.nextNodes.forEach(nextNode=>{\r\n\t\t\t\tnextNode.prevNodes.delete(node)\r\n\t\t\t\tnode.prevNodes.forEach(prevNode=>{\r\n\t\t\t\t\tnextNode.prevNodes.add(prevNode)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst createNodes=()=>{\r\n\t\t\tconst createNodesAndScores=()=>options.nodes.map((nodeOptions)=>{\r\n\t\t\t\tlet destinationScore=0\r\n\t\t\t\tlet node=new ConNode[nodeOptions.nodeType](nodeOptions)\r\n\t\t\t\tif (node instanceof ConNode.destination) {\r\n\t\t\t\t\tdestinationScore=1\r\n\t\t\t\t}\r\n\t\t\t\tif (node instanceof ConNode.convolver) {\r\n\t\t\t\t\tif (nodeOptions.wet==0 && !nodeOptions.wet.input) {\r\n\t\t\t\t\t\tnode=new ConNode.junction\r\n\t\t\t\t\t\tdestinationScore=0\r\n\t\t\t\t\t} else if (nodeOptions.wet!=1 || nodeOptions.wet.input) {\r\n\t\t\t\t\t\tnode=new ConNode.drywet(nodeOptions,node)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (node.bypassable) {\r\n\t\t\t\t\tif (!nodeOptions.enabled && !nodeOptions.enabledInput) {\r\n\t\t\t\t\t\tnode=new ConNode.junction\r\n\t\t\t\t\t\tdestinationScore=0\r\n\t\t\t\t\t} else if (nodeOptions.enabledInput) {\r\n\t\t\t\t\t\tnode=new ConNode.bypass(nodeOptions,node)\r\n\t\t\t\t\t\tdestinationScore*=2+nodeOptions.enabled\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn [node,destinationScore]\r\n\t\t\t})\r\n\t\t\tconst keepBestNodes=(nodesAndScores)=>{ // got to have only one \"best\" destination node\r\n\t\t\t\tlet bestNode=null\r\n\t\t\t\tlet bestScore=0 // interested only in scores above 0\r\n\t\t\t\tfor (let i=0;i<nodesAndScores.length;i++) {\r\n\t\t\t\t\tlet [node,score]=nodesAndScores[i]\r\n\t\t\t\t\tif (score>bestScore) {\r\n\t\t\t\t\t\tbestNode=node\r\n\t\t\t\t\t\tbestScore=score\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn nodesAndScores.map(([node,score])=>{\r\n\t\t\t\t\tif (bestNode!=null && score>0) {\r\n\t\t\t\t\t\treturn bestNode\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn node\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconst linkNodes=(nodes)=>{\r\n\t\t\t\tfor (let i=0;i<options.nodes.length;i++) {\r\n\t\t\t\t\tfor (const j of options.nodes[i].next) {\r\n\t\t\t\t\t\tnodes[i].nextNodes.add(nodes[j])\r\n\t\t\t\t\t\tnodes[j].prevNodes.add(nodes[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn nodes\r\n\t\t\t}\r\n\t\t\tconst keepDistinctNodes=(inputNodes)=>{\r\n\t\t\t\tconst outputNodes=[]\r\n\t\t\t\tconst visited=new Set\r\n\t\t\t\tfor (const node of inputNodes) {\r\n\t\t\t\t\tif (visited.has(node)) continue\r\n\t\t\t\t\tvisited.add(node)\r\n\t\t\t\t\toutputNodes.push(node)\r\n\t\t\t\t}\r\n\t\t\t\treturn outputNodes\r\n\t\t\t}\r\n\t\t\treturn keepDistinctNodes(linkNodes(keepBestNodes(createNodesAndScores())))\r\n\t\t}\r\n\t\tconst insertActiveJunctions=(inputNodes)=>{\r\n\t\t\tconst outputNodes=[]\r\n\t\t\tfor (const node of inputNodes) {\r\n\t\t\t\toutputNodes.push(node)\r\n\t\t\t\tif (node.fixedOutputs) continue\r\n\t\t\t\tconst rewireNodes=[]\r\n\t\t\t\tnode.nextNodes.forEach(nextNode=>{\r\n\t\t\t\t\tif (nextNode.fixedInputs) return\r\n\t\t\t\t\trewireNodes.push(nextNode)\r\n\t\t\t\t})\r\n\t\t\t\tfor (const nextNode of rewireNodes) {\r\n\t\t\t\t\tconst junctionNode=new ConNode.activeJunction\r\n\t\t\t\t\t// { TODO insertNode(junctionNode,node,nextNode)\r\n\t\t\t\t\tnode.nextNodes.delete(nextNode)\r\n\t\t\t\t\tnode.nextNodes.add(junctionNode)\r\n\t\t\t\t\tjunctionNode.prevNodes.add(node)\r\n\t\t\t\t\tnextNode.prevNodes.delete(node)\r\n\t\t\t\t\tnextNode.prevNodes.add(junctionNode)\r\n\t\t\t\t\tjunctionNode.nextNodes.add(nextNode)\r\n\t\t\t\t\t// }\r\n\t\t\t\t\toutputNodes.push(junctionNode)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn outputNodes\r\n\t\t}\r\n\t\t// TODO gain = 0 breaks, have to do before effect propagation\r\n\t\tconst removePassiveNodes=(inputNodes)=>{\r\n\t\t\tconst outputNodes=[]\r\n\t\t\tfor (const node of inputNodes) {\r\n\t\t\t\tif (!node.passive) {\r\n\t\t\t\t\toutputNodes.push(node)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst removingWouldCreateTooManyConnections=()=>{\r\n\t\t\t\t\t\tconst nInputs=node.estimatedNPrevNodeOutputs\r\n\t\t\t\t\t\tconst nOutputs=node.estimatedNNextNodeInputs\r\n\t\t\t\t\t\treturn nInputs*nOutputs>nInputs+nOutputs+1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst hasDirectParallelConnections=()=>{\r\n\t\t\t\t\t\tlet parallel=false\r\n\t\t\t\t\t\tnode.prevNodes.forEach(prevNode=>{\r\n\t\t\t\t\t\t\tprevNode.nextNodes.forEach(prevNextNode=>{\r\n\t\t\t\t\t\t\t\tparallel=parallel||node.nextNodes.has(prevNextNode)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn parallel\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (removingWouldCreateTooManyConnections() || hasDirectParallelConnections()) {\r\n\t\t\t\t\t\tconst junctionNode=new ConNode.junction\r\n\t\t\t\t\t\treplaceNode(node,junctionNode)\r\n\t\t\t\t\t\toutputNodes.push(junctionNode)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdeleteNode(node)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn outputNodes\r\n\t\t}\r\n\t\tconst removeUnaffectedNodes=(inputNodes)=>{\r\n\t\t\tconst propagateEffect=(effectPropertyName,nodesPropertyName)=>{\r\n\t\t\t\tconst visited=new Set\r\n\t\t\t\tconst rec=(node)=>{\r\n\t\t\t\t\tif (visited.has(node)) return\r\n\t\t\t\t\tvisited.add(node)\r\n\t\t\t\t\tnode[nodesPropertyName].forEach(rec)\r\n\t\t\t\t}\r\n\t\t\t\tfor (const node of inputNodes) {\r\n\t\t\t\t\tif (node[effectPropertyName]) {\r\n\t\t\t\t\t\trec(node)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn visited\r\n\t\t\t}\r\n\t\t\tconst visitedDownstream=propagateEffect('downstreamEffect','nextNodes')\r\n\t\t\tconst visitedUpstream=propagateEffect('upstreamEffect','prevNodes')\r\n\t\t\treturn inputNodes.filter(node=>{\r\n\t\t\t\tif (visitedDownstream.has(node) && visitedUpstream.has(node)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeleteNode(node)\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst wrapVisualizationNodes=(inputNodes)=>{\r\n\t\t\treturn inputNodes.map(node=>{\r\n\t\t\t\tif (node.toVisNode) {\r\n\t\t\t\t\tconst analyserNode=new ConNode.analyser(node.options,[node])\r\n\t\t\t\t\treplaceNode(node,analyserNode)\r\n\t\t\t\t\treturn analyserNode\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn node\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst combineAnalyserNodes=(inputNodes)=>{\r\n\t\t\tconst visited=new Set\r\n\t\t\tconst deleted=new Set\r\n\t\t\tconst rec=(node)=>{\r\n\t\t\t\tif (visited.has(node)) return\r\n\t\t\t\tvisited.add(node)\r\n\t\t\t\tif (node instanceof ConNode.analyser) {\r\n\t\t\t\t\tlet nextNodesToCombine=[]\r\n\t\t\t\t\tnode.nextNodes.forEach(nextNode=>{\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tnode.isEquivalentAnalyser(nextNode) &&\r\n\t\t\t\t\t\t\tnextNode.prevNodes.size==1 // no extra inputs besides current node\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\trec(nextNode)\r\n\t\t\t\t\t\t\tnextNodesToCombine.push(nextNode)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tfor (const nextNode of nextNodesToCombine) {\r\n\t\t\t\t\t\tif (!haveNodeOutputIntersection(node,nextNode)) {\r\n\t\t\t\t\t\t\tnode.innerNodes.push(...nextNode.innerNodes)\r\n\t\t\t\t\t\t\tdeleteNode(nextNode)\r\n\t\t\t\t\t\t\tdeleted.add(nextNode)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (const node of inputNodes) {\r\n\t\t\t\trec(node)\r\n\t\t\t}\r\n\t\t\treturn inputNodes.filter(node=>!deleted.has(node))\r\n\t\t}\r\n\t\tconst sortNodes=(inputNodes)=>{\r\n\t\t\tconst outputNodes=[]\r\n\t\t\tconst visited=new Set\r\n\t\t\tconst typeCounts={}\r\n\t\t\tconst typeLastNodes={}\r\n\t\t\tconst rec=(node)=>{\r\n\t\t\t\tif (visited.has(node)) return\r\n\t\t\t\tvisited.add(node)\r\n\t\t\t\tnode.prevNodes.forEach(rec)\r\n\t\t\t\tconst n=typeCounts[node.type]+1||1\r\n\t\t\t\ttypeCounts[node.type]=n\r\n\t\t\t\ttypeLastNodes[node.type]=node\r\n\t\t\t\tnode.n=n\r\n\t\t\t\toutputNodes.push(node)\r\n\t\t\t}\r\n\t\t\tinputNodes.forEach(rec)\r\n\t\t\tfor (const type in typeCounts) {\r\n\t\t\t\tif (typeCounts[type]==1) {\r\n\t\t\t\t\ttypeLastNodes[type].n=undefined\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn outputNodes\r\n\t\t}\r\n\t\tconst conNodes=[\r\n\t\t\tinsertActiveJunctions,removePassiveNodes,removeUnaffectedNodes,\r\n\t\t\twrapVisualizationNodes,combineAnalyserNodes,\r\n\t\t\tsortNodes\r\n\t\t].reduce(\r\n\t\t\t(nodes,transform)=>transform(nodes),\r\n\t\t\tcreateNodes()\r\n\t\t)\r\n\t\tconst conToGenMap=new Map\r\n\t\tconst genNodes=conNodes.map(node=>{\r\n\t\t\tlet name=node.type\r\n\t\t\tif (node.n!==undefined) {\r\n\t\t\t\tname+='.'+node.n\r\n\t\t\t}\r\n\t\t\tconst genNode=node.toGenNode(name)\r\n\t\t\tconToGenMap.set(node,genNode)\r\n\t\t\treturn genNode\r\n\t\t})\r\n\t\tfor (let i=0;i<conNodes.length;i++) {\r\n\t\t\tconst translateConToGen=(conNodesSet)=>{\r\n\t\t\t\tconst genNodes=[]\r\n\t\t\t\tconNodesSet.forEach(conNode=>{\r\n\t\t\t\t\tgenNodes.push(conToGenMap.get(conNode))\r\n\t\t\t\t})\r\n\t\t\t\treturn genNodes\r\n\t\t\t}\r\n\t\t\tgenNodes[i].initEdges(\r\n\t\t\t\ttranslateConToGen(conNodes[i].prevNodes),\r\n\t\t\t\ttranslateConToGen(conNodes[i].nextNodes)\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.nodes=genNodes\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tfor (const node of this.nodes) {\r\n\t\t\tnode.requestFeatureContext(featureContext)\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.nodes.map(node=>NoseWrapLines.b(\r\n\t\t\t\tLines.bae(\r\n\t\t\t\t\t\"<fieldset>\",\r\n\t\t\t\t\t\"\t<legend>\"+i18n('options.graph.'+node.type)+\"</legend>\"\r\n\t\t\t\t),\r\n\t\t\t\tLines.bae(\r\n\t\t\t\t\t\"</fieldset>\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\tnode.getHtmlLines(featureContext,i18n)\r\n\t\t\t))\r\n\t\t)\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioContext) return JsLines.be()\r\n\t\treturn InterleaveLines.bae(...this.nodes.map(node=>{\r\n\t\t\tconst nodeJsLines=node.getInitJsLines(featureContext,i18n)\r\n\t\t\tif (nodeJsLines.isEmpty()) {\r\n\t\t\t\treturn nodeJsLines\r\n\t\t\t} else {\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.graph.'+node.jsCommentType)),\r\n\t\t\t\t\tnodeJsLines\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioContext) return JsLines.be()\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.nodes.map(node=>node.getPreVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioContext) return JsLines.be()\r\n\t\treturn JsLines.bae(\r\n\t\t\t...this.nodes.map(node=>node.getVisJsLines(featureContext,i18n))\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioGraph\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst FilterNodeOptionOutput=require('./filter-node-option-output')\r\n\r\nclass BiquadFilterNodeOptionOutput extends FilterNodeOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\tbiquadNode.type=fixedOption.type.value\r\n\t\tbiquadNode.frequency.value=fixedOption.frequency.value\r\n\t\tbiquadNode.detune.value=fixedOption.detune.value\r\n\t\tbiquadNode.Q.value=Math.pow(10,fixedOption.Q.value)\r\n\t\tbiquadNode.gain.value=fixedOption.gain.value\r\n\t\treturn [biquadNode]\r\n\t}\r\n\twriteExtraSection(audioContext,i18n,generateId) {\r\n\t\tconst computeCoefs=(sampleRate,type,frequency,detune,Q,gain,post20160415)=>{\r\n\t\t\t// constants defined in the spec\r\n\t\t\tconst F_s=sampleRate\r\n\t\t\tconst f_0=frequency*Math.pow(2,detune/1200)\r\n\t\t\tconst G=gain\r\n\t\t\tconst A=Math.pow(10,G/40)\r\n\t\t\tconst omega_0=2*Math.PI*f_0/F_s\r\n\t\t\tconst alpha_Q=Math.sin(omega_0)/(2*Q)\r\n\t\t\tconst Q_dB=Math.pow(10,Q/20) // fix for incorrect alpha_B\r\n\t\t\tconst alpha_B=Math.sin(omega_0)/2*Math.sqrt((4-Math.sqrt(16-16/(Q_dB*Q_dB)))/2) // was incorrect in the spec\r\n\t\t\tconst alpha_Q_dB=Math.sin(omega_0)/(2*Q_dB) // introduced on 2016-04-15\r\n\t\t\tconst S=1\r\n\t\t\tconst alpha_S=Math.sin(omega_0)/2*Math.sqrt((A+1/A)*(1/S-1)+2)\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst c=Math.cos(omega_0)\r\n\t\t\tconst aSA2=2*alpha_S*Math.sqrt(A)\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\tcase 'lowpass':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[(1-c)/2,   1-c, (1-c)/2],\r\n\t\t\t\t\t(post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t]\r\n\t\t\tcase 'highpass':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[(1+c)/2, -(1+c), (1+c)/2],\r\n\t\t\t\t\t(post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t]\r\n\t\t\tcase 'bandpass':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[alpha_Q, 0, -alpha_Q],\r\n\t\t\t\t\t[1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t]\r\n\t\t\tcase 'notch':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[1, -2*c, 1],\r\n\t\t\t\t\t[1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t]\r\n\t\t\tcase 'allpass':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[1-alpha_Q, -2*c, 1+alpha_Q],\r\n\t\t\t\t\t[1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t]\r\n\t\t\tcase 'peaking':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[1+alpha_Q*A, -2*c, 1-alpha_Q*A],\r\n\t\t\t\t\t[1+alpha_Q/A, -2*c, 1-alpha_Q/A],\r\n\t\t\t\t]\r\n\t\t\tcase 'lowshelf':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t 2*A*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c + aSA2,\r\n\t\t\t\t\t\t  -2*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t]\r\n\t\t\tcase 'highshelf':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t-2*A*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c + aSA2,\r\n\t\t\t\t\t\t   2*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\tconst newCoefsCheckboxId=generateId()\r\n\t\tconst $newCoefsCheckbox=$(`<input type='checkbox' id='${newCoefsCheckboxId}'>`)\r\n\t\tconst $cloneButton=$(\"<button class='clone'>\"+i18n('options-output.filter.biquad.clone')+\"</button>\").click(function(){\r\n\t\t\tconst fixedOption=This.option.fix()\r\n\t\t\tconst coefs=computeCoefs(\r\n\t\t\t\taudioContext.sampleRate,\r\n\t\t\t\tfixedOption.type.value,\r\n\t\t\t\tfixedOption.frequency.value,\r\n\t\t\t\tfixedOption.detune.value,\r\n\t\t\t\tMath.pow(10,fixedOption.Q.value),\r\n\t\t\t\tfixedOption.gain.value,\r\n\t\t\t\t$newCoefsCheckbox.prop('checked')\r\n\t\t\t)\r\n\t\t\tif (coefs) {\r\n\t\t\t\tconst [ff,fb]=coefs\r\n\t\t\t\t$(this).data('coefs',{\r\n\t\t\t\t\tfeedforward: ff.join(),\r\n\t\t\t\t\tfeedback: fb.join(),\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t$(this).removeData('coefs')\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn $(\"<span class='node-option-section node-option-section-clone'>\").append(\r\n\t\t\t$cloneButton,\r\n\t\t\t\" \",\r\n\t\t\t$newCoefsCheckbox,\r\n\t\t\t\" <label for='\"+newCoefsCheckboxId+\"'>\"+i18n('options-output.filter.biquad.clone.newCoefs')+\"</label> \",\r\n\t\t\twriteTip('info',i18n('options-output.filter.biquad.clone.info'))\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=BiquadFilterNodeOptionOutput\r\n","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\n\r\nclass CanvasContextJsLines extends JsLines {\r\n\tconstructor(data,jsName,flags) {\r\n\t\tsuper(data)\r\n\t\tif (flags.modified) {\r\n\t\t\tdata.unshift(`${jsName}.save();`)\r\n\t\t\tdata.push(`${jsName}.restore();`)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass CanvasContext {\r\n\tconstructor(jsName) {\r\n\t\tthis.jsName=jsName\r\n\t}\r\n\tstatic getColorStyle(colorOption) {\r\n\t\tconst a=JsLines.b()\r\n\t\tconst cs=['r','g','b']\r\n\t\tconst color=cs.map(c=>colorOption[c]+\"%\").join()\r\n\t\tif (colorOption.a==100) {\r\n\t\t\tif (cs.every(c=>colorOption[c]%20==0)) {\r\n\t\t\t\treturn \"'#\"+cs.map(c=>(colorOption[c]/20*3).toString(16).toUpperCase()).join('')+\"'\"\r\n\t\t\t} else {\r\n\t\t\t\treturn `'rgb(${color})'`\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn `'rgba(${color},${(colorOption.a/100).toFixed(2)})'`\r\n\t\t}\r\n\t}\r\n\tb() {\r\n\t\tconst props={\r\n\t\t\tlineWidth: 1,\r\n\t\t\tstrokeStyle: \"'#000'\",\r\n\t\t\tfillStyle: \"'#000'\",\r\n\t\t}\r\n\t\tconst flags={\r\n\t\t\tmodified: false\r\n\t\t}\r\n\t\tconst a=CanvasContextJsLines.b(this.jsName,flags)\r\n\t\ta.setProp=(prop,value)=>{\r\n\t\t\tif (props[prop]==value) {\r\n\t\t\t\treturn JsLines.be()\r\n\t\t\t} else {\r\n\t\t\t\tflags.modified=true\r\n\t\t\t\tdelete props[prop]\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\t`${this.jsName}.${prop}=${value};`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\ta.getColorStyle=(colorOption)=>CanvasContext.getColorStyle(colorOption)\r\n\t\ta.jsName=this.jsName\r\n\t\treturn a\r\n\t}\r\n}\r\n\r\nmodule.exports=CanvasContext\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst CanvasContext=require('./canvas-context')\r\nconst Feature=require('./feature')\r\n\r\nclass Canvas extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=Lines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"<div>\",\r\n\t\t\t\tLines.html`\t<canvas id=my.canvas width=${this.options.width} height=${this.options.height}></canvas>`,\r\n\t\t\t\t\"</div>\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvas=document.getElementById('my.canvas');\",\r\n\t\t\t\t\"var canvasContext=canvas.getContext('2d');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (featureContext.canvasVolumeGradient) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvasVolumeGradient=canvasContext.createLinearGradient(0,0,0,canvas.height);\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(1.00,'#000');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.75,'#F00');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.25,'#FF0');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.00,'#FFF');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (featureContext.maxLogFftSizeNodeJsName!==undefined) {\r\n\t\t\ta(\r\n\t\t\t\t\"var analyserData=new Uint8Array(\"+featureContext.maxLogFftSizeNodeJsName+\".frequencyBinCount);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) {\r\n\t\tif (!featureContext.canvas) return JsLines.be()\r\n\t\tconst canvasContext=new CanvasContext('canvasContext')\r\n\t\tconst getClearLines=()=>{\r\n\t\t\tconst a=canvasContext.b()\r\n\t\t\tif (this.options.background.type=='clear') {\r\n\t\t\t\ta(a.jsName+\".clearRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t} else {\r\n\t\t\t\ta(a.setProp('fillStyle',a.getColorStyle(this.options.background.color)))\r\n\t\t\t\ta(a.jsName+\".fillRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.visualizeWaveformFn) {\r\n\t\t\ta(featureContext.visualizeWaveformFn.getDeclJsLines(canvasContext))\r\n\t\t}\r\n\t\tif (featureContext.visualizeFrequencyBarsFn) {\r\n\t\t\ta(featureContext.visualizeFrequencyBarsFn.getDeclJsLines(canvasContext))\r\n\t\t}\r\n\t\tif (featureContext.visualizeFrequencyOutlineFn) {\r\n\t\t\ta(featureContext.visualizeFrequencyOutlineFn.getDeclJsLines(canvasContext))\r\n\t\t}\r\n\t\tif (featureContext.visualizeVolumeFn) {\r\n\t\t\ta(featureContext.visualizeVolumeFn.getDeclJsLines(canvasContext))\r\n\t\t}\r\n\t\ta(getClearLines())\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst BaseCodeOutput=require('crnx-base/code-output')\r\n\r\nclass CodeOutput extends BaseCodeOutput {\r\n\tget defaultFormatting() {\r\n\t\tconst formatting=super.defaultFormatting\r\n\t\tformatting.refs={\r\n\t\t\tcontext:     'https://www.w3.org/TR/webaudio/#AudioContext',\r\n\t\t\tsource:      'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\r\n\t\t\tgain:        'https://www.w3.org/TR/webaudio/#GainNode',\r\n\t\t\tpanner:      'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\r\n\t\t\tbiquad:      'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\r\n\t\t\tiir:         'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\r\n\t\t\tconvolver:   'https://www.w3.org/TR/webaudio/#ConvolverNode',\r\n\t\t\tpeaking:     'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\r\n\t\t\tdestination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\r\n\t\t\tcompressor:  'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\r\n\t\t\tanalyser:    'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\r\n\t\t\tsplitter:    'https://www.w3.org/TR/webaudio/#the-channelsplitternode-interface',\r\n\t\t\tbuffer:      'https://www.w3.org/TR/webaudio/#AudioBufferSourceNode',\r\n\t\t}\r\n\t\treturn formatting\r\n\t}\r\n\tinitDomProps() {\r\n\t\tsuper.initDomProps()\r\n\t\tthis.$warnings=$()\r\n\t}\r\n\tapplyUpdatedCode(i18n) {\r\n\t\tsuper.applyUpdatedCode(i18n)\r\n\t\tthis.$warnings.css('display',this.code.isInteresting?'none':'') // .toggle() won't work right with inline-block\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst $warning=writeTip('warn',i18n('code-output.warning.jsfiddle-run'))\r\n\t\treturn super.writeButtons(i18n).append(\" \",$warning)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst $section=super.writeSectionSummary(sectionName,i18n)\r\n\t\tif (sectionName=='html' || sectionName=='js') {\r\n\t\t\tconst $warning=writeTip('warn',i18n('code-output.warning.interesting'))\r\n\t\t\t$section.append(\" \",$warning)\r\n\t\t\tthis.$warnings=this.$warnings.add($warning)\r\n\t\t}\r\n\t\treturn $section\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nconst AudioContext=require('./audio-context')\r\nconst Loader=require('./loader')\r\nconst AudioGraph=require('./audio-graph')\r\nconst Canvas=require('./canvas')\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst BaseWebCode=require('crnx-base/web-code')\r\n\r\nclass Code extends BaseWebCode {\r\n\tconstructor(options,i18n) {\r\n\t\tsuper()\r\n\t\tthis.i18n=i18n\r\n\t\tthis.featureContext={}\r\n\t\tthis.features=[\r\n\t\t\tnew AudioContext(options.api),\r\n\t\t\tnew Loader(options.loader),\r\n\t\t\tnew AudioGraph(options.graph),\r\n\t\t\tnew Canvas(options.canvas),\r\n\t\t]\r\n\t\t// possible feature context flags:\r\n\t\t//\talignedInputs = all input labels have to be the same width; requested by equalizer\r\n\t\t//\taudioContext =\r\n\t\t//\t\tAudioContext has to assign the audio context to var ctx\r\n\t\t//\t\tAudioGraph has to output the js\r\n\t\t//\t\tmedia elements of AudioGraph have to have crossorigin enabled\r\n\t\t//\tcanvas = Canvas has to output <canvas> element and create var canvas and var canvasContext\r\n\t\t//\tcanvasVolumeGradient = Canvas has to create var canvasVolumeGradient\r\n\t\t//\tloader = Loader has to provide loadSample() function\r\n\t\t//\tloaderOnError = loadSample() caller has to pass the error handler\r\n\t\t//\tmaxLogFftSize = max log(fft size) of all analysers\r\n\t\t//\tmaxLogFftSizeNodeJsName = name of analyser node with max log(fft size); if set, Canvas has to allocate analyserData array\r\n\t\t// visualization functions, either undefined or set to VisFunction object:\r\n\t\t//\tvisualizeWaveformFn\r\n\t\t//\tvisualizeFrequencyBarsFn\r\n\t\t//\tvisualizeFrequencyOutlineFn\r\n\t\t//\tvisualizeVolumeFn\r\n\t\t// counters:\r\n\t\t//\tcanvasVolumeMeterCounter = number of volume meters, for communication between volume vis fns\r\n\t\t// helpers:\r\n\t\t//\tgetConnectAssignJsLines = set by AudioContext\r\n\t\tfor (const feature of this.features) {\r\n\t\t\tfeature.requestFeatureContext(this.featureContext)\r\n\t\t}\r\n\t\tthis.isInteresting=!!this.featureContext.audioContext\r\n\t}\r\n\tget basename() {\r\n\t\treturn 'webaudio'\r\n\t}\r\n\tget lang() {\r\n\t\treturn this.i18n.lang\r\n\t}\r\n\tget title() {\r\n\t\treturn this.i18n('code.title')\r\n\t}\r\n\tget styleLines() {\r\n\t\tconst a=Lines.b()\r\n\t\tif (this.featureContext.alignedInputs) {\r\n\t\t\ta(\r\n\t\t\t\t\"label:first-child {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 10em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"\tline-height: 0.8em;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".min {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".max {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: left;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"canvas {\",\r\n\t\t\t\t\"\tborder: 1px solid;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget bodyLines() {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getHtmlLines(this.featureContext,this.i18n))\r\n\t\t)\r\n\t}\r\n\tget scriptLines() {\r\n\t\treturn InterleaveLines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getInitJsLines(this.featureContext,this.i18n)),\r\n\t\t\tNoseWrapLines.b(\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"function visualize() {\"\r\n\t\t\t\t),\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"\trequestAnimationFrame(visualize);\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"requestAnimationFrame(visualize);\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\t...this.features.map(feature=>feature.getPreVisJsLines(this.featureContext,this.i18n)),\r\n\t\t\t\t...this.features.map(feature=>feature.getVisJsLines(this.featureContext,this.i18n))\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=Code\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst FilterNodeOptionOutput=require('./filter-node-option-output')\r\n\r\nclass EqualizerFilterNodeOptionOutput extends FilterNodeOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\treturn Option.EqualizerFilter.frequencies.map(freq=>{\r\n\t\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\t\tbiquadNode.type='peaking'\r\n\t\t\tbiquadNode.frequency.value=freq\r\n\t\t\tbiquadNode.gain.value=fixedOption['gain'+freq].value\r\n\t\t\treturn biquadNode\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=EqualizerFilterNodeOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetPreVisJsLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetVisJsLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature\r\n","'use strict'\r\n\r\nconst debounce=require('crnx-base/fake-lodash/debounce')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst GroupNodeOptionOutput=require('./group-node-option-output')\r\n\r\nconst width=32*6 // 300\r\nconst height=32*6 // 300\r\nconst pad=16 // 30\r\nconst maxNGridLines=6 // 10\r\nconst fontSize=10\r\nconst fontOffset=3\r\nconst minFrequencyInLogMode=10\r\nlet audioContext\r\nlet linearFrequencyArray,logFrequencyArray\r\nlet logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1\r\nlet magnitudeArray,phaseArray\r\nlet magnitudeArray0,phaseArray0\r\n\r\nconst mix=(a,b,x)=>a*(1-x)+b*x\r\n\r\nconst canCreateAudioContext=()=>{\r\n\tconst initAudioContext=()=>{\r\n\t\taudioContext=new (AudioContext || webkitAudioContext)\r\n\t\tlinearFrequencyArray=new Float32Array(width)\r\n\t\tlogFrequencyArray=new Float32Array(width)\r\n\t\tmagnitudeArray=new Float32Array(width)\r\n\t\tphaseArray=new Float32Array(width)\r\n\t\tmagnitudeArray0=new Float32Array(width)\r\n\t\tphaseArray0=new Float32Array(width)\r\n\t\tconst maxFrequency=audioContext.sampleRate/2\r\n\t\tconst log10minFrequency=Math.log10(minFrequencyInLogMode)\r\n\t\tconst log10maxFrequency=Math.log10(maxFrequency)\r\n\t\tfor (let i=0;i<width;i++) {\r\n\t\t\tconst x=(i+0.5)/width\r\n\t\t\tlinearFrequencyArray[i]=maxFrequency*x\r\n\t\t\tlogFrequencyArray[i]=Math.pow(10,mix(log10minFrequency,log10maxFrequency,x))\r\n\t\t}\r\n\t\tlogFrequencyArrayLinearLimit0=mix(log10minFrequency,log10maxFrequency,0.5/width)\r\n\t\tlogFrequencyArrayLinearLimit1=mix(log10minFrequency,log10maxFrequency,1-0.5/width)\r\n\t}\r\n\tif (!audioContext) {\r\n\t\ttry {\r\n\t\t\tinitAudioContext()\r\n\t\t} catch (e) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\treturn true\r\n}\r\n\r\nclass FilterNodeOptionOutput extends GroupNodeOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\t//let $freqResponseUi=$()\r\n\t\t//const isFreqResponseUiShown=()=>$freqResponseUi.length>0\r\n\t\tlet magnitudeCanvasContext, phaseCanvasContext // TODO remove loitering on hide - but have to cancel update\r\n\t\tlet magnitudeLogScale=true, frequencyLogScale=false\r\n\t\tconst updatePlots=(filterNodes)=>{\r\n\t\t\tconst removeNans=array=>{\r\n\t\t\t\tconst interpolate=(i0,i1)=>{\r\n\t\t\t\t\tconst hasStartValue=i0>=0\r\n\t\t\t\t\tconst hasEndValue=i1<array.length\r\n\t\t\t\t\tlet v0,v1\r\n\t\t\t\t\tif (!hasStartValue && !hasEndValue) {\r\n\t\t\t\t\t\tv0=v1=0\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (hasStartValue) {\r\n\t\t\t\t\t\t\tv0=array[i0]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv0=array[i1]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (hasEndValue) {\r\n\t\t\t\t\t\t\tv1=array[i1]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv1=array[i0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i=i0+1;i<i1;i++) {\r\n\t\t\t\t\t\tconst x=(i-i0)/(i1-i0)\r\n\t\t\t\t\t\tarray[i]=mix(v0,v1,x)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet nanStart=-1\r\n\t\t\t\tfor (let i=0;i<array.length;i++) {\r\n\t\t\t\t\tif (!isFinite(array[i])) {\r\n\t\t\t\t\t\tif (nanStart<0) {\r\n\t\t\t\t\t\t\tnanStart=i\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\t\t\tinterpolate(nanStart-1,i)\r\n\t\t\t\t\t\t\tnanStart=-1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\tinterpolate(nanStart-1,array.length)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst frequencyArray=(frequencyLogScale\r\n\t\t\t\t? logFrequencyArray\r\n\t\t\t\t: linearFrequencyArray\r\n\t\t\t)\r\n\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\tmagnitudeArray[i]=1\r\n\t\t\t}\r\n\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\tphaseArray[i]=0\r\n\t\t\t}\r\n\t\t\tfor (const filterNode of filterNodes) {\r\n\t\t\t\tfilterNode.getFrequencyResponse(frequencyArray,magnitudeArray0,phaseArray0)\r\n\t\t\t\tremoveNans(magnitudeArray0)\r\n\t\t\t\tremoveNans(phaseArray0)\r\n\t\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\t\tmagnitudeArray[i]*=magnitudeArray0[i]\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\t\tphaseArray[i]+=phaseArray0[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tfor (let i=0;i<width;i++) { // convert to decibels\r\n\t\t\t\t\tmagnitudeArray[i]=20*Math.log10(magnitudeArray[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction wrap(v,maxAbs) {\r\n\t\t\t\tv%=maxAbs*2\r\n\t\t\t\tif (Math.abs(v)<=maxAbs) return v\r\n\t\t\t\treturn v-(v>0?1:-1)*maxAbs*2\r\n\t\t\t}\r\n\t\t\tlet k=0\r\n\t\t\tlet v0=0\r\n\t\t\tfor (let i=0;i<width;i++) { // unwrap phase\r\n\t\t\t\tlet v1=wrap(phaseArray[i]/Math.PI,1)\r\n\t\t\t\tk+=(v1<v0 && (v0-v1)>((v1+2)-v0))\r\n\t\t\t\tk-=(v1>v0 && (v1-v0)>(v0-(v1-2)))\r\n\t\t\t\tv0=v1\r\n\t\t\t\tphaseArray[i]=v0+2*k\r\n\t\t\t}\r\n\t\t\tconst plotResponse=(canvasContext,array,units,enforcedCenter,enforcedRange,enforcedFloor,majorGridLineTest)=>{\r\n\t\t\t\tlet min,max\r\n\t\t\t\tconst setPlotRange=(min0,max0)=>{\r\n\t\t\t\t\tconst ph=pad/height\r\n\t\t\t\t\tmin=((min0+max0)*ph-min0)/(2*ph-1)\r\n\t\t\t\t\tmax=((min0+max0)*ph-max0)/(2*ph-1)\r\n\t\t\t\t}\r\n\t\t\t\tconst minArr=Math.min(...array)\r\n\t\t\t\tconst maxArr=Math.max(...array)\r\n\t\t\t\tconst minArrCentered=Math.max(minArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tconst maxArrCentered=Math.max(maxArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tsetPlotRange(\r\n\t\t\t\t\tenforcedCenter+Math.min(0,-enforcedRange+Math.max(0,maxArrCentered-enforcedRange),minArrCentered),\r\n\t\t\t\t\tenforcedCenter+Math.max(0,enforcedRange-Math.max(0,-enforcedRange-minArrCentered),maxArrCentered)\r\n\t\t\t\t)\r\n\t\t\t\tconst calcY=v=>height*(1-(v-min)/(max-min))\r\n\t\t\t\tconst getGridNumbers=(min,max)=>{\r\n\t\t\t\t\tconst numLogs=Math.log10(max-min)-Math.log10(maxNGridLines)\r\n\t\t\t\t\tlet k\r\n\t\t\t\t\tlet p=Infinity\r\n\t\t\t\t\tfor (const tk of [1,2,5]) {\r\n\t\t\t\t\t\tconst tp=Math.ceil(numLogs-Math.log10(tk))\r\n\t\t\t\t\t\tif (tp<p) {\r\n\t\t\t\t\t\t\tp=tp\r\n\t\t\t\t\t\t\tk=tk\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst dv=k*Math.pow(10,p)\r\n\t\t\t\t\tconst v0=Math.ceil(min/dv)*dv\r\n\t\t\t\t\tconst numbers=[]\r\n\t\t\t\t\tfor (let v=v0;v<max;v+=dv) {\r\n\t\t\t\t\t\tnumbers.push(v)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [numbers,p<0?-p:0]\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGrid=(numbers,visibleNumbers,calcPosition,labelLimit,units,majorGridLineTest)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0,0.5) // don't translate along x to keep dashes sharp\r\n\t\t\t\t\tcanvasContext.fillStyle='#444'\r\n\t\t\t\t\tcanvasContext.font=`${fontSize}px`\r\n\t\t\t\t\tcanvasContext.textAlign='right'\r\n\t\t\t\t\tconst getLabel=n=>`${i18n.number(n)}${units}`\r\n\t\t\t\t\tconst labelWidth=Math.max(...visibleNumbers.map(n=>canvasContext.measureText(getLabel(n)).width))\r\n\t\t\t\t\tfor (let i=0;i<numbers.length;i++) {\r\n\t\t\t\t\t\tconst y=Math.round(calcPosition(numbers[i]))\r\n\t\t\t\t\t\tconst drawLine=()=>{\r\n\t\t\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(0,y)\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(width,y)\r\n\t\t\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst majorGridLine=majorGridLineTest(Number(visibleNumbers[i]))\r\n\t\t\t\t\t\tif (majorGridLine) {\r\n\t\t\t\t\t\t\tcanvasContext.strokeStyle='rgba(70%,70%,100%,0.3)'\r\n\t\t\t\t\t\t\tcanvasContext.setLineDash([])\r\n\t\t\t\t\t\t\tcanvasContext.lineWidth=3\r\n\t\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcanvasContext.strokeStyle=(majorGridLine ? '#000' : '#888')\r\n\t\t\t\t\t\tcanvasContext.setLineDash([1])\r\n\t\t\t\t\t\tcanvasContext.lineWidth=1\r\n\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\tif (y-fontOffset-fontSize>labelLimit) {\r\n\t\t\t\t\t\t\tcanvasContext.fillText(getLabel(visibleNumbers[i]),fontOffset+labelWidth,y-fontOffset)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t\treturn labelWidth\r\n\t\t\t\t}\r\n\t\t\t\tconst drawYGrid=()=>{\r\n\t\t\t\t\tconst yGridNumbersAndPrecision=getGridNumbers(min,max)\r\n\t\t\t\t\tconst yVisibleGridNumbers=formatNumbers(...yGridNumbersAndPrecision)\r\n\t\t\t\t\treturn drawGrid(yGridNumbersAndPrecision[0],yVisibleGridNumbers,calcY,0,units,majorGridLineTest)\r\n\t\t\t\t}\r\n\t\t\t\tconst drawXGrid=(yLabelWidth)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.rotate(-Math.PI/2)\r\n\t\t\t\t\tcanvasContext.translate(-height,0)\r\n\t\t\t\t\tlet calcX,xGridNumbersAndPrecision,xVisibleGridNumbers\r\n\t\t\t\t\tif (frequencyLogScale) {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-logFrequencyArrayLinearLimit0)/(logFrequencyArrayLinearLimit1-logFrequencyArrayLinearLimit0)\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1)\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(xGridNumbersAndPrecision[0].map(n=>Math.pow(10,n)),0)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-frequencyArray[0])/(frequencyArray[width-1]-frequencyArray[0])\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(frequencyArray[0],frequencyArray[width-1])\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(...xGridNumbersAndPrecision)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdrawGrid(xGridNumbersAndPrecision[0],xVisibleGridNumbers,calcX,fontOffset+yLabelWidth,' '+i18n('units.hertz.a'),v=>false)\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGraph=()=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0.5,0.5) // aim at centers of pixels\r\n\t\t\t\t\tcanvasContext.strokeStyle='#F00'\r\n\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\t\t\tconst x=i\r\n\t\t\t\t\t\tconst y=calcY(array[i])\r\n\t\t\t\t\t\tif (i==0) {\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(x,y)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(x,y)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tcanvasContext.clearRect(0,0,width,height)\r\n\t\t\t\tconst yLabelWidth=drawYGrid()\r\n\t\t\t\tdrawXGrid(yLabelWidth)\r\n\t\t\t\tdrawGraph()\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,' '+i18n('units.decibel.a'),0,1,-100,v=>v==0)\r\n\t\t\t} else {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,'',1,0.1,0,v=>(v==0 || v==1))\r\n\t\t\t}\r\n\t\t\tplotResponse(phaseCanvasContext,phaseArray,'π',0,0.1,-Infinity,v=>v%2==0)\r\n\t\t}\r\n\t\tconst immediateUpdate=()=>{\r\n\t\t\ttry { // may get called when node is deleted\r\n\t\t\t\tupdatePlots(this.getFilterNodes(audioContext))\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t\tconst delayedUpdate=debounce(immediateUpdate,50)\r\n\r\n\t\tconst $mainSection=$(\"<span class='node-option-section node-option-section-plot-header'>\").append(\r\n\t\t\ti18n('options-output.filter.frequencyResponse')\r\n\t\t)\r\n\t\tconst $option=$(\"<div class='node-option'>\").append($mainSection)\r\n\t\tlet $plotUi\r\n\t\tlet isPlotUiVisible=false\r\n\t\tlet isPlotUiErrorFree=false\r\n\t\tconst addErrorSection=(errorMessage)=>{\r\n\t\t\t$plotUi=$(\"<span class='node-option-section node-option-section-error'>\").append(errorMessage)\r\n\t\t\t$option.append(\r\n\t\t\t\t\" \",$plotUi\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst addPlotSections=()=>{\r\n\t\t\tlet filterNodes\r\n\t\t\ttry {\r\n\t\t\t\tfilterNodes=this.getFilterNodes(audioContext)\r\n\t\t\t} catch (e) {\r\n\t\t\t\taddErrorSection(i18n('options-output.filter.nodeError'))\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst magnitudeId=generateId()\r\n\t\t\tconst frequencyId=generateId()\r\n\t\t\tconst $settingsSection=$(\"<span class='node-option-section node-option-section-plot-settings'>\").append(\r\n\t\t\t\t$(\"<span class='setting'>\").append(\r\n\t\t\t\t\t$(\"<input type='checkbox' id='\"+magnitudeId+\"'>\").prop('checked',magnitudeLogScale).change(function(){\r\n\t\t\t\t\t\tmagnitudeLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\tif (isPlotUiVisible && isPlotUiErrorFree) {\r\n\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" <label for='\"+magnitudeId+\"'>\"+i18n('options-output.filter.logMagnitude')+\"</label>\"\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<span class='setting'>\").append(\r\n\t\t\t\t\t$(\"<input type='checkbox' id='\"+frequencyId+\"'>\").prop('checked',frequencyLogScale).change(function(){\r\n\t\t\t\t\t\tfrequencyLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\tif (isPlotUiVisible && isPlotUiErrorFree) {\r\n\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" <label for='\"+frequencyId+\"'>\"+i18n('options-output.filter.logFrequency')+\"</label>\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tconst $magnitudeCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\tmagnitudeCanvasContext=$magnitudeCanvas[0].getContext('2d')\r\n\t\t\tconst $magnitudeSection=$(\"<span class='node-option-section node-option-section-plot-figure'>\").append(\r\n\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.magnitude')+\"</figcaption>\",\r\n\t\t\t\t\t$magnitudeCanvas\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tconst $phaseCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\tconst $frequencySection=$(\"<span class='node-option-section node-option-section-plot-figure'>\").append(\r\n\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.phase')+\"</figcaption>\",\r\n\t\t\t\t\t$phaseCanvas\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tphaseCanvasContext=$phaseCanvas[0].getContext('2d')\r\n\t\t\tisPlotUiErrorFree=true\r\n\t\t\tupdatePlots(filterNodes)\r\n\t\t\t$plotUi=$settingsSection.add($magnitudeSection).add($frequencySection)\r\n\t\t\t$option.append(\" \",$settingsSection,\" \",$magnitudeSection,\" \",$frequencySection)\r\n\t\t\tconst $extraSection=this.writeExtraSection(audioContext,i18n,generateId)\r\n\t\t\tif ($extraSection) {\r\n\t\t\t\t$plotUi=$plotUi.add($extraSection)\r\n\t\t\t\t$option.append(\" \",$extraSection)\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst writeMoreButton=()=>{ // TODO i18n\r\n\t\t\tconst $moreButtonText=$(\"<span>\").html(\"More\")\r\n\t\t\treturn $(\"<button class='more' title='Show more options'>\").append($moreButtonText).click(function(){\r\n\t\t\t\tconst $button=$(this)\r\n\t\t\t\tif (!isPlotUiVisible) {\r\n\t\t\t\t\t$button.addClass('less').removeClass('more').attr('title',\"Show less options\")\r\n\t\t\t\t\t$moreButtonText.html(\"Less\")\r\n\t\t\t\t\tif ($plotUi) {\r\n\t\t\t\t\t\t$plotUi.show()\r\n\t\t\t\t\t\tif (isPlotUiErrorFree) {\r\n\t\t\t\t\t\t\timmediateUpdate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!canCreateAudioContext()) {\r\n\t\t\t\t\t\taddErrorSection(i18n('options-output.filter.contextError'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddPlotSections()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisPlotUiVisible=true\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$button.addClass('more').removeClass('less').attr('title',\"Show more options\")\r\n\t\t\t\t\t$moreButtonText.html(\"More\")\r\n\t\t\t\t\tif ($plotUi) {\r\n\t\t\t\t\t\t$plotUi.hide()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisPlotUiVisible=false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t$mainSection.append(\" \",writeMoreButton())\r\n\t\tthis.$output.append($option)\r\n\t\toption.addUpdateCallback(()=>{\r\n\t\t\tif (isPlotUiVisible && isPlotUiErrorFree) {\r\n\t\t\t\tdelayedUpdate()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// abstract\r\n\t// getFilterNodes(audioContext)\r\n\twriteExtraSection(audioContext,i18n,generateId) {}\r\n}\r\n\r\nmodule.exports=FilterNodeOptionOutput\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst NodeOptionsOutput=require('./node-options-output')\r\n\r\nclass GraphOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tconst gridSize=32\r\n\t\tconst nodeWidth=6\r\n\t\tconst inactiveColor='#444';\r\n\t\tconst closeColor='#C44';\r\n\t\tconst $lines=$(\r\n\t\t\t\"<svg xmlns='http://www.w3.org/2000/svg' version='1.1'>\"+\r\n\t\t\t\"<defs>\"+\r\n\t\t\t\t\"<marker id='circleMarker' markerWidth='8' markerHeight='8' refX='4' refY='4'>\"+\r\n\t\t\t\t\t\"<circle cx='4' cy='4' r='2' fill='\"+inactiveColor+\"' stroke='none' />\"+\r\n\t\t\t\t\"</marker>\"+\r\n\t\t\t\"</defs>\"+\r\n\t\t\t\"</svg>\"\r\n\t\t)\r\n\t\tconst $nodes=$(\"<div class='nodes'>\") // TODO populate with default/imported entries\r\n\t\tlet maxZIndex=0\r\n\t\tlet outputPad // can hardwire to 11 (11px)\r\n\t\tconst g2pCoord=(gCoord)=>{\r\n\t\t\tif (outputPad==null) outputPad=parseInt(this.$output.css('padding-left'))\r\n\t\t\treturn outputPad+gridSize*gCoord\r\n\t\t}\r\n\t\tconst p2gCoord=(pCoord)=>{\r\n\t\t\tif (outputPad==null) outputPad=parseInt(this.$output.css('padding-left'))\r\n\t\t\treturn Math.round((pCoord-outputPad)/gridSize)\r\n\t\t}\r\n\t\tconst writeVisibleLine=(x1,y1,x2,y2)=>$(\r\n\t\t\tdocument.createElementNS(\"http://www.w3.org/2000/svg\",\"line\")\r\n\t\t).attr({\r\n\t\t\t'marker-start': 'url(#circleMarker)', // TODO multiple overlaid markers look bad, scrap them\r\n\t\t\t'marker-end': 'url(#circleMarker)',\r\n\t\t\tstroke: inactiveColor,\r\n\t\t\t'stroke-width': 2,\r\n\t\t\tx1,y1,x2,y2\r\n\t\t})\r\n\t\tconst writeInvisibleLine=(x1,y1,x2,y2)=>$(\r\n\t\t\tdocument.createElementNS(\"http://www.w3.org/2000/svg\",\"line\")\r\n\t\t).attr({\r\n\t\t\tstroke: inactiveColor,\r\n\t\t\t'stroke-width': 10,\r\n\t\t\t'stroke-opacity': 0,\r\n\t\t\tx1,y1,x2,y2\r\n\t\t})\r\n\t\tconst moveLine=($line,coords)=>{\r\n\t\t\t$line.attr(coords)\r\n\t\t\t$lines.append($line.detach()) // ie bug: this is required once markers are used; see http://stackoverflow.com/questions/15693178/svg-line-markers-not-updating-when-line-moves-in-ie10\r\n\t\t}\r\n\t\tconst getNodeName=$node=>{\r\n\t\t\tconst nodeOption=$node.data('option')\r\n\t\t\tconst nodeIndex=$node.data('index')\r\n\t\t\treturn i18n('options.'+nodeOption.fullName)+\" #\"+nodeIndex\r\n\t\t}\r\n\t\tconst getNodePortCoords=($node,dirIndex)=>{\r\n\t\t\tconst pos=$node.position()\r\n\t\t\tconst x=pos.left+gridSize/2+dirIndex*gridSize*(nodeWidth-1)\r\n\t\t\tconst y=pos.top+gridSize*1.5\r\n\t\t\treturn [x,y]\r\n\t\t}\r\n\t\tconst updateNodeSequence=()=>{\r\n\t\t\tconst $selectOptions=$nodes.children().map(function(i){\r\n\t\t\t\tconst $node=$(this)\r\n\t\t\t\t$node.data('index',i)\r\n\t\t\t\t$node.find('.number').text(i)\r\n\t\t\t\treturn $(`<option value='${i}'>`).append(getNodeName($node))\r\n\t\t\t})\r\n\t\t\toption.nodes=$.map($nodes.children(),node=>{\r\n\t\t\t\tconst $node=$(node)\r\n\t\t\t\tconst next=[]\r\n\t\t\t\t$node.data('outs').forEach(($line,thatNode)=>{\r\n\t\t\t\t\tnext.push($(thatNode).data('index'))\r\n\t\t\t\t})\r\n\t\t\t\treturn {\r\n\t\t\t\t\tentry: $node.data('option'),\r\n\t\t\t\t\tnext,\r\n\t\t\t\t\tx: 0, // TODO real values - have to keep them in .data() too\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$nodes.children().each(function(i){\r\n\t\t\t\tconst $node=$(this)\r\n\t\t\t\tconst writeLi=($toNode,dirIndex)=>$(\"<li>\").append(\r\n\t\t\t\t\t$(\"<a>\").attr('href','#'+$toNode.attr('id')).append(getNodeName($toNode)),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>Disconnect</button>\").click(function(){ // TODO i18n\r\n\t\t\t\t\t\tdisconnectNodes($node,$toNode,dirIndex)\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\tconst $inList=$node.find('.node-port-in .node-port-controls ul').empty()\r\n\t\t\t\t$node.data('ins').forEach(($line,thatNode)=>{\r\n\t\t\t\t\t$inList.append(writeLi($(thatNode),0))\r\n\t\t\t\t})\r\n\t\t\t\tconst $outList=$node.find('.node-port-out .node-port-controls ul').empty()\r\n\t\t\t\t$node.data('outs').forEach(($line,thatNode)=>{\r\n\t\t\t\t\t$outList.append(writeLi($(thatNode),1))\r\n\t\t\t\t})\r\n\t\t\t\tconst $inSelect=$node.find('.node-port-in .node-port-controls select').empty()\r\n\t\t\t\tconst $outSelect=$node.find('.node-port-out .node-port-controls select').empty()\r\n\t\t\t\tfor (let j=0;j<$selectOptions.length;j++) {\r\n\t\t\t\t\tif (option.canConnectNodes(j,i)) {\r\n\t\t\t\t\t\t$inSelect.append($selectOptions[j])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (option.canConnectNodes(i,j)) {\r\n\t\t\t\t\t\t$outSelect.append($selectOptions[j])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// jquery has problems with appending several detached element at once like this:\r\n\t\t\t// \t$nodes.find('.node-port-controls select').empty().append($options)\r\n\t\t}\r\n\t\tconst disconnectNodes=($thisNode,$thatNode,dirIndex)=>{\r\n\t\t\tconst disconnectInToOut=($outNode,$inNode)=>{ // remove edge: $outNode -> $inNode\r\n\t\t\t\tconst $line=$outNode.data('outs').get($inNode[0])\r\n\t\t\t\t$outNode.data('outs').delete($inNode[0])\r\n\t\t\t\t$inNode.data('ins').delete($outNode[0])\r\n\t\t\t\t$line.remove()\r\n\t\t\t}\r\n\t\t\tif (dirIndex) {\r\n\t\t\t\tdisconnectInToOut($thisNode,$thatNode)\r\n\t\t\t} else {\r\n\t\t\t\tdisconnectInToOut($thatNode,$thisNode)\r\n\t\t\t}\r\n\t\t\tupdateNodeSequence()\r\n\t\t}\r\n\t\tconst connectNodes=($thisNode,$thatNode,dirIndex)=>{\r\n\t\t\tconst connectInToOut=($outNode,$inNode)=>{ // add edge: $outNode -> $inNode\r\n\t\t\t\tconst xy1=getNodePortCoords($outNode,1)\r\n\t\t\t\tconst xy2=getNodePortCoords($inNode,0)\r\n\t\t\t\tconst $vLine=writeVisibleLine(...xy1,...xy2)\r\n\t\t\t\tconst $iLine=writeInvisibleLine(...xy1,...xy2)\r\n\t\t\t\tconst $line=$vLine.add($iLine)\r\n\t\t\t\t$lines.append($line)\r\n\t\t\t\t$outNode.data('outs').set($inNode[0],$line)\r\n\t\t\t\t$inNode.data('ins').set($outNode[0],$line)\r\n\t\t\t\t$iLine.mouseover(function(){\r\n\t\t\t\t\t$vLine.attr('stroke',closeColor)\r\n\t\t\t\t}).mouseout(function(){\r\n\t\t\t\t\t$vLine.attr('stroke',inactiveColor)\r\n\t\t\t\t}).click(function(){\r\n\t\t\t\t\tdisconnectNodes($thisNode,$thatNode,dirIndex)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif (dirIndex) {\r\n\t\t\t\tconnectInToOut($thisNode,$thatNode)\r\n\t\t\t} else {\r\n\t\t\t\tconnectInToOut($thatNode,$thisNode)\r\n\t\t\t}\r\n\t\t\tupdateNodeSequence()\r\n\t\t}\r\n\t\tconst deleteNode=($node)=>{\r\n\t\t\t$node.data('ins').forEach(($line,thatNode)=>{\r\n\t\t\t\t$(thatNode).data('outs').delete($node[0])\r\n\t\t\t\t$line.remove()\r\n\t\t\t})\r\n\t\t\t$node.data('outs').forEach(($line,thatNode)=>{\r\n\t\t\t\t$(thatNode).data('ins').delete($node[0])\r\n\t\t\t\t$line.remove()\r\n\t\t\t})\r\n\t\t\t$node.remove()\r\n\t\t\tupdateNodeSequence()\r\n\t\t}\r\n\t\tconst addNode=(nodeOption,gx0,gy0)=>{\r\n\t\t\tconst nodeOptionsOutput=new NodeOptionsOutput({root: nodeOption},generateId,i18n)\r\n\t\t\tconst $node=nodeOptionsOutput.$output\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet dragAnimationId=null\r\n\t\t\tlet snapAnimationId=null\r\n\t\t\tconst writePort=(dirIndex,isClosed)=>{\r\n\t\t\t\tconst dirNames=['in','out'] // TODO i18n?\r\n\t\t\t\tconst thisDir=dirNames[dirIndex]\r\n\t\t\t\tif (isClosed) {\r\n\t\t\t\t\treturn $(`<div class='node-port node-port-${thisDir} node-port-closed'>`)\r\n\t\t\t\t}\r\n\t\t\t\tconst $select=$(\"<select>\")\r\n\t\t\t\tconst $hole=$(\"<div class='node-port-hole'>\").mousedown(function(ev){\r\n\t\t\t\t\tconst fromNodeIndex=$node.data('index')\r\n\t\t\t\t\tconst canConnectTo=($thatNode)=>{\r\n\t\t\t\t\t\tconst toNodeIndex=$thatNode.data('index')\r\n\t\t\t\t\t\treturn (dirIndex\r\n\t\t\t\t\t\t\t? option.canConnectNodes(fromNodeIndex,toNodeIndex)\r\n\t\t\t\t\t\t\t: option.canConnectNodes(toNodeIndex,fromNodeIndex)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst [x1,y1]=getNodePortCoords($node,dirIndex)\r\n\t\t\t\t\tconst $line=writeVisibleLine(x1,y1,x1,y1)\r\n\t\t\t\t\t$lines.append($line)\r\n\t\t\t\t\tconst documentHandlers={\r\n\t\t\t\t\t\tmouseup() {\r\n\t\t\t\t\t\t\t$(document).off(documentHandlers)\r\n\t\t\t\t\t\t\t$nodes.children().off(nodeHandlers)\r\n\t\t\t\t\t\t\t$line.remove()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmousemove(ev) {\r\n\t\t\t\t\t\t\tconst nodesPos=$nodes.offset()\r\n\t\t\t\t\t\t\tconst x2=ev.pageX-nodesPos.left\r\n\t\t\t\t\t\t\tconst y2=ev.pageY-nodesPos.top\r\n\t\t\t\t\t\t\tmoveLine($line,{x2,y2}) // TODO update in animation (?)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst nodeHandlers={\r\n\t\t\t\t\t\tmouseup() {\r\n\t\t\t\t\t\t\tconst $thatNode=$(this)\r\n\t\t\t\t\t\t\tif (canConnectTo($thatNode)) {\r\n\t\t\t\t\t\t\t\tconnectNodes($node,$thatNode,dirIndex)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// let documentHandlers.mouseup() do the clean up\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmousemove(ev) {\r\n\t\t\t\t\t\t\tconst $thatNode=$(this)\r\n\t\t\t\t\t\t\tif (canConnectTo($thatNode)) {\r\n\t\t\t\t\t\t\t\tconst [x2,y2]=getNodePortCoords($thatNode,1-dirIndex)\r\n\t\t\t\t\t\t\t\tmoveLine($line,{x2,y2}) // TODO update in animation (?)\r\n\t\t\t\t\t\t\t\tev.stopPropagation()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdocumentHandlers.mousemove(ev)\r\n\t\t\t\t\t$(document).on(documentHandlers)\r\n\t\t\t\t\t$nodes.children().on(nodeHandlers)\r\n\t\t\t\t\treturn false // prevent text selection\r\n\t\t\t\t})\r\n\t\t\t\treturn $(`<div class='node-port node-port-${thisDir}'>`).append(\r\n\t\t\t\t\t$hole,\r\n\t\t\t\t\t$(\"<div class='node-port-label'>\").append(\r\n\t\t\t\t\t\t`<span>audio </span>${thisDir}<span> connected to:</span>` // TODO i18n\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<div class='node-port-controls'>\").append(\r\n\t\t\t\t\t\t$(\"<ul>\"), // connected nodes\r\n\t\t\t\t\t\t$select, // nodes that are possible to connect to\r\n\t\t\t\t\t\t$(`<button title='connect audio ${thisDir} to selected node'>`).append( // TODO i18n\r\n\t\t\t\t\t\t\t\"<span>Connect</span>\"\r\n\t\t\t\t\t\t).click(function(){\r\n\t\t\t\t\t\t\tconst i=parseInt($select.val())\r\n\t\t\t\t\t\t\tif (i in $nodes) {\r\n\t\t\t\t\t\t\t\tconnectNodes($node,$node[i],dirIndex)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeBox=()=>{\r\n\t\t\t\tconst $box=$(\"<div class='node-box'>\")\r\n\t\t\t\tif (nodeOption.enableSwitch) {\r\n\t\t\t\t\tconst enableSwitchId=generateId()\r\n\t\t\t\t\t$box.append(\r\n\t\t\t\t\t\t$(`<input type='checkbox' id='${enableSwitchId}'>`).prop('checked',nodeOption.enabled).change(function(){\r\n\t\t\t\t\t\t\tnodeOption.enabled=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t` <label for='${enableSwitchId}'>`+i18n('options-output.enabled')+`</label>`\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $box\r\n\t\t\t}\r\n\t\t\tconst writeAdditionalControls=()=>{\r\n\t\t\t\t// webaudio-starter specific code\r\n\t\t\t\tif (nodeOption.enableSwitch) {\r\n\t\t\t\t\tconst enableInputSwitchId=generateId()\r\n\t\t\t\t\treturn $(\"<div class='node-under-box-switch'>\").append(\r\n\t\t\t\t\t\t$(`<input type='checkbox' id='${enableInputSwitchId}'>`).prop('checked',nodeOption.enabledInput).change(function(){\r\n\t\t\t\t\t\t\tnodeOption.enabledInput=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t` <label for='${enableInputSwitchId}'>switch</label>` // TODO i18n\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$node.attr({\r\n\t\t\t\tid,\r\n\t\t\t}).css({\r\n\t\t\t\tleft: g2pCoord(gx0),\r\n\t\t\t\ttop: g2pCoord(gy0),\r\n\t\t\t\t'z-index': ++maxZIndex,\r\n\t\t\t}).data({\r\n\t\t\t\toption: nodeOption,\r\n\t\t\t\tins: new Map(), // dom element -> line dom element\r\n\t\t\t\touts: new Map(), // dom element -> line dom element\r\n\t\t\t\t// also has 'index' set by updateNodeSequence()\r\n\t\t\t})\r\n\t\t\t$node.children('legend').append(\r\n\t\t\t\t` <span class='number-mark'>#<span class='number'></span></span>`\r\n\t\t\t).after(\r\n\t\t\t\t$(\"<div class='node-head-controls'>\").append(\r\n\t\t\t\t\t// TODO controls for keyboard movement\r\n\t\t\t\t\t$(\"<button class='delete' title='\"+i18n('options-output.delete.tip')+\"'>\").append(\r\n\t\t\t\t\t\t\"<span>\"+i18n('options-output.delete')+\"</span>\"\r\n\t\t\t\t\t).click(function(){\r\n\t\t\t\t\t\tcancelAnimationFrame(dragAnimationId)\r\n\t\t\t\t\t\tcancelAnimationFrame(snapAnimationId)\r\n\t\t\t\t\t\tdeleteNode($node)\r\n\t\t\t\t\t})\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div class='node-ports'>\").append(\r\n\t\t\t\t\twritePort(0,!nodeOption.inEdges),\r\n\t\t\t\t\twritePort(1,!nodeOption.outEdges),\r\n\t\t\t\t\twriteBox(),\r\n\t\t\t\t\twriteAdditionalControls()\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$node.mousedown(function(ev){\r\n\t\t\t\tcancelAnimationFrame(snapAnimationId)\r\n\t\t\t\tlet dragX1=ev.pageX\r\n\t\t\t\tlet dragY1=ev.pageY\r\n\t\t\t\tconst setNodePosition=(x,y)=>{\r\n\t\t\t\t\t$node.css({\r\n\t\t\t\t\t\tleft: x,\r\n\t\t\t\t\t\ttop: y,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst [x2,y2]=getNodePortCoords($node,0)\r\n\t\t\t\t\t$node.data('ins').forEach($line=>{\r\n\t\t\t\t\t\tmoveLine($line,{x2,y2})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst [x1,y1]=getNodePortCoords($node,1)\r\n\t\t\t\t\t$node.data('outs').forEach($line=>{\r\n\t\t\t\t\t\tmoveLine($line,{x1,y1})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconst handlers={\r\n\t\t\t\t\tmouseup() { // IE doesn't receive this event when the button is released outside the window (?)\r\n\t\t\t\t\t\tcancelAnimationFrame(dragAnimationId)\r\n\t\t\t\t\t\tdragAnimationId=null\r\n\t\t\t\t\t\t$(document).off(handlers)\r\n\t\t\t\t\t\tconst pos=$node.position()\r\n\t\t\t\t\t\tconst snapX1=pos.left\r\n\t\t\t\t\t\tconst snapY1=pos.top\r\n\t\t\t\t\t\tlet gx=p2gCoord(snapX1)\r\n\t\t\t\t\t\tif (gx<0) gx=0\r\n\t\t\t\t\t\tlet gy=p2gCoord(snapY1)\r\n\t\t\t\t\t\tif (gy<0) gy=0\r\n\t\t\t\t\t\t// TODO store new grid positions, update options\r\n\t\t\t\t\t\tconst snapX2=g2pCoord(gx)\r\n\t\t\t\t\t\tconst snapY2=g2pCoord(gy)\r\n\t\t\t\t\t\tconst snapDuration=150\r\n\t\t\t\t\t\tconst snapStartTime=performance.now()\r\n\t\t\t\t\t\tconst snapAnimationHandler=time=>{\r\n\t\t\t\t\t\t\tconst t=time-snapStartTime\r\n\t\t\t\t\t\t\tif (t>=snapDuration) {\r\n\t\t\t\t\t\t\t\tsetNodePosition(snapX2,snapY2)\r\n\t\t\t\t\t\t\t\tsnapAnimationId=null\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetNodePosition(\r\n\t\t\t\t\t\t\t\t\tsnapX1+(snapX2-snapX1)*t/snapDuration,\r\n\t\t\t\t\t\t\t\t\tsnapY1+(snapY2-snapY1)*t/snapDuration\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tsnapAnimationId=requestAnimationFrame(snapAnimationHandler)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsnapAnimationId=requestAnimationFrame(snapAnimationHandler)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmousemove(ev) {\r\n\t\t\t\t\t\tconst dragX2=ev.pageX\r\n\t\t\t\t\t\tconst dragY2=ev.pageY\r\n\t\t\t\t\t\tif (dragAnimationId==null) {\r\n\t\t\t\t\t\t\tdragAnimationId=requestAnimationFrame(()=>{\r\n\t\t\t\t\t\t\t\tconst pos=$node.position()\r\n\t\t\t\t\t\t\t\tsetNodePosition(\r\n\t\t\t\t\t\t\t\t\tpos.left+dragX2-dragX1,\r\n\t\t\t\t\t\t\t\t\tpos.top +dragY2-dragY1\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tdragX1=dragX2\r\n\t\t\t\t\t\t\t\tdragY1=dragY2\r\n\t\t\t\t\t\t\t\tdragAnimationId=null\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\tif ($node.css('z-index')<maxZIndex) {\r\n\t\t\t\t\t$node.css('z-index',++maxZIndex)\r\n\t\t\t\t}\r\n\t\t\t\t$(document).on(handlers)\r\n\t\t\t\tev.preventDefault() // prevent text selection\r\n\t\t\t}).on('mousedown','input, select, button',function(ev){\r\n\t\t\t\tev.stopPropagation() // don't run the handler defined above when using inputs\r\n\t\t\t})\r\n\t\t\t$nodes.append($node)\r\n\t\t\tupdateNodeSequence()\r\n\t\t}\r\n\t\t// { copypasted from array-option-output\r\n\t\tconst $buttons=$(\"<div class='buttons'>\")\r\n\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\tif (i) $buttons.append(\" \")\r\n\t\t\t$buttons.append(\r\n\t\t\t\t$(\"<button type='button'>\").html(\r\n\t\t\t\t\ti18n('options.'+option.fullName+'.'+type+'.add')\r\n\t\t\t\t).click(()=>{\r\n\t\t\t\t\tconst nodeOption=option.makeEntry(type)\r\n\t\t\t\t\taddNode(nodeOption,0,0)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\t// }\r\n\t\tconst $legend=$(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\")\r\n\t\tconst $graph=$(\"<div class='graph'>\").append(\r\n\t\t\t$lines,$nodes\r\n\t\t)\r\n\t\tthis.$output=option.$=$(\"<fieldset class='option'>\").append(\r\n\t\t\t$legend,\r\n\t\t\t$buttons, // TODO buttons for reordering/renumbering with toposort\r\n\t\t\t$graph\r\n\t\t)\r\n\t\tconst resizeAnimationHandler=()=>{ // would have done $graph.on('scroll resize',...), but there's no resize event for elements\r\n\t\t\t$lines.width($graph[0].clientWidth+$graph.scrollLeft())\r\n\t\t\t$lines.height($graph[0].clientHeight+$graph.scrollTop())\r\n\t\t\trequestAnimationFrame(resizeAnimationHandler)\r\n\t\t}\r\n\t\tresizeAnimationHandler()\r\n\t\t// make clone button work\r\n\t\t$nodes.on('click','button.clone',function(){\r\n\t\t\tconst coefs=$(this).data('coefs')\r\n\t\t\tif (coefs) {\r\n\t\t\t\tconst nodeOption=option.makeEntry('iir',coefs)\r\n\t\t\t\taddNode(nodeOption,0,0)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=GraphOptionOutput\r\n","'use strict'\r\n\r\nclass GroupNodeOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$output=option.$=$(\"<fieldset class='node-option'>\").append(\r\n\t\t\t\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\",\r\n\t\t\toption.entries.map(writeOption)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GroupNodeOptionOutput\r\n","'use strict'\r\n\r\nconst webaudioSpec='https://webaudio.github.io/web-audio-api/'\r\nconst webaudioIssue=n=>`<a href='https://github.com/WebAudio/web-audio-api/issues/${n}'>${n}</a>`\r\nconst webaudioDetect='https://github.com/GoogleChrome/web-audio-samples/wiki/Detection-of-lowpass-BiquadFilter-implementation'\r\n\r\nconst enColors=\"{<span style='color:#800'>Red</span>,<span style='color:#080'>Green</span>,<span style='color:#008'>Blue</span>,Opacity}\"\r\nconst ruColors=\"{<span style='color:#800'>Красный</span>,<span style='color:#080'>Зелёный</span>,<span style='color:#008'>Синий</span>,Альфа-канал}\"\r\n\r\nconst langStrings={\r\n\ten:{\r\n\t\t'options.graph': \"Audio graph\",\r\n\t\t'options.graph.{audio,video}': \"{Audio,Video} element\",\r\n\t\t'options.graph.{audio,video}.add': \"Add {} element\",\r\n\t\t'options.graph.sample': \"Sample\",\r\n\t\t'options.graph.sample.add': \"Add sample\",\r\n\t\t'options.graph.sample.repeat': \"Repeat sample\",\r\n\t\t'options.graph.sample.interval': \"Repeat interval\",\r\n\t\t'options.graph.sample.randomShift': \"Random start time\",\r\n\t\t'options.graph.sample.pitch': \"Pitch\",\r\n\t\t'options.graph.sample.randomPitch': \"Random pitch\",\r\n\t\t'options.graph.sample.gain': \"Gain\",\r\n\t\t'options.graph.sample.randomGain': \"Random gain\",\r\n\t\t'options.graph.{audio,video,sample}.url': \"URL\",\r\n\t\t'options.graph.video.{width,height}': \"Player {}\",\r\n\t\t'options.graph.gain': \"Gain\",\r\n\t\t'options.graph.gain.add': \"Add gain\",\r\n\t\t'options.graph.gain.gain': \"Gain\",\r\n\t\t'options.graph.panner': \"Stereo panner\",\r\n\t\t'options.graph.panner.add': \"Add stereo panner\",\r\n\t\t'options.graph.panner.pan': \"Pan\",\r\n\t\t'options.graph.biquad': \"Biquad filter\", // [[Digital biquad filter]]\r\n\t\t'options.graph.biquad.add': \"Add biquad filter\",\r\n\t\t'options.graph.biquad.type': \"Filter type\",\r\n\t\t'options.graph.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': \"{}\",\r\n\t\t'options.graph.biquad.frequency': \"Frequency\",\r\n\t\t'options.graph.biquad.detune': \"Detune\",\r\n\t\t'options.graph.biquad.Q': \"log(Q)\",\r\n\t\t'options.graph.biquad.gain': \"Gain\",\r\n\t\t'options.graph.iir': \"IIR filter\",\r\n\t\t'options.graph.iir.add': \"Add IIR filter\",\r\n\t\t'options.graph.iir.feedforward': \"Feedforward coefficients\", // Transfer fn numerator coefs\r\n\t\t'options.graph.iir.feedback': \"Feedback coefficients\", // Transfer fn denominator coefs\r\n\t\t'options.graph.convolver': \"Convolver\",\r\n\t\t'options.graph.convolver.add': \"Add convolver\",\r\n\t\t'options.graph.convolver.url': \"Impulse response URL\",\r\n\t\t'options.graph.convolver.wet': \"Reverb (dry/wet)\",\r\n\t\t'options.graph.equalizer': \"Equalizer\",\r\n\t\t'options.graph.equalizer.add': \"Add equalizer\",\r\n\t\t'options.graph.equalizer.gain{60,170,350,1000,3500,10000}': \"{} Hz gain\",\r\n\t\t'options.graph.compressor': \"Dynamics compressor\",\r\n\t\t'options.graph.compressor.add': \"Add dynamics compressor\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline}': \"Draw {waveform,frequency bars,frequency outline}\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline}.add': \"Add {waveform,frequency bars,frequency outline} visualization\",\r\n\t\t'options.graph.volume': \"Volume meter\",\r\n\t\t'options.graph.volume.add': \"Add volume meter\",\r\n\t\t'options.graph.stereoVolume': \"Stereo volume meter\",\r\n\t\t'options.graph.stereoVolume.add': \"Add stereo volume meter\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline,volume,stereoVolume}.logFftSize': \"log(FFT size)\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.width': \"Line width\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.color': \"Line color\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.color.{r,g,b,a}': \"{,}\"+enColors,\r\n\t\t'options.graph.{frequencyBars,frequencyOutline}.cutoff': \"<abbr title='Frequency'>Freq.</abbr> cutoff\",\r\n\t\t'options.graph.{frequencyBars,frequencyOutline}.base': \"Frequency {bars extend from,outline centered at}\",\r\n\t\t'options.graph.{frequencyBars,frequencyOutline}.base.{bottom,middle}': \"{,}{} of canvas\",\r\n\t\t'options.graph.frequencyBars.coloring': \"Frequency bars coloring\",\r\n\t\t'options.graph.frequencyBars.coloring.component': \"with single color component\",\r\n\t\t'options.graph.frequencyBars.coloring.spectral': \"spectral\",\r\n\t\t'options.graph.frequencyBars.coloringInput': \"Color depends on\",\r\n\t\t'options.graph.frequencyBars.coloringInput.{amplitude,frequency}': \"{}\",\r\n\t\t'options.graph.destination': \"Destination\",\r\n\t\t'options.graph.destination.add': \"Add destination\",\r\n\t\t'options.graph.junction': \"Junction\", // not used\r\n\t\t'options.graph.analyser': \"Analyser\", // not used\r\n\r\n\t\t'options.canvas': \"Canvas\",\r\n\t\t'options.canvas.{width,height}': \"Canvas {}\",\r\n\t\t'options.canvas.background': \"Background\",\r\n\t\t'options.canvas.background.type': \"Background type\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{}\",\r\n\t\t'options.canvas.background.color': \"Background fill color\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `Background fill ${enColors}`,\r\n\r\n\t\t'options.loader': \"Sample loader\",\r\n\t\t'options.loader.errors': \"Error handling\",\r\n\t\t'options.loader.errors.none': \"disabled\",\r\n\t\t'options.loader.errors.network': \"network errors\",\r\n\t\t'options.loader.errors.http': \"network and HTTP errors\",\r\n\r\n\t\t'options.api': \"Web Audio API support\",\r\n\t\t'options.api.noVendorPrefix': \"Can create an audio context without a vendor prefix\",\r\n\t\t'options.api.connectReturnValue': \"Can use a return value of <code>AudioNode.connect()</code>\",\r\n\r\n\t\t'options-info.graph.{waveform,frequencyBars,frequencyOutline}.logFftSize': \"[[Fast Fourier transform]] size. Use a larger size to get {a wider time window for the waveform,thinner frequency bars,more details on frequency outline}.\",\r\n\t\t'options-info.graph.{volume,stereoVolume}.logFftSize': \"[[Fast Fourier transform]] size.\",\r\n\t\t'options-info.graph.{frequencyBars,frequencyOutline}.cutoff': \"Limit plot to a fraction of low frequences.\",\r\n\t\t'options-info.canvas.background.color.a': \"Lower opacity values lead to a blur effect.\",\r\n\r\n\t\t'options-output.input': \"Editable\",\r\n\t\t'options-output.range': \"with range\",\r\n\t\t'options-output.filter.frequencyResponse': \"Frequency response\",\r\n\t\t'options-output.filter.magnitude': \"Magnitude\",\r\n\t\t'options-output.filter.phase': \"Phase\",\r\n\t\t'options-output.filter.logMagnitude': \"log magnitude scale\",\r\n\t\t'options-output.filter.logFrequency': \"log frequency scale\",\r\n\t\t'options-output.filter.contextError': \"Error creating audio context. Your browser likely doesn't support Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Error creating filter node. Your browser likely doesn't support this filter type.\",\r\n\t\t'options-output.filter.biquad.clone': \"Clone as IIR\",\r\n\t\t'options-output.filter.biquad.clone.newCoefs': \"following new API spec\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'>The API specification</a> was self-contradictory and implementations weren't following it. Additionally, it was discovered that filter coefficient formulas need to be changed to accomodate a wider range of lowpass and highpass filters. See Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)} and ${webaudioIssue(791)} for details. A possible method to check if an implementation has switched to the updated formulas is offered <a href='${webaudioDetect}'>here</a>.`,\r\n\t\t'options-output.iir-filter-coefs.invalid': \"comma-separated numbers required\",\r\n\t\t'options-output.show': \"Show\",\r\n\t\t'options-output.hide': \"Hide\",\r\n\t\t'options-output.enabled': \"Enabled\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working.\",\r\n\t\t'code-output.warning.interesting': \"You need at least one source, one active filter and one destination node connected together to get interesting JavaScript code.\",\r\n\r\n\t\t'code.title': \"Web Audio API example — generated code\",\r\n\r\n\t\t'label.graph.sample.play': \"Play sample\",\r\n\t\t'label.graph.sample.buffer.loading': \"Loading and decoding the sample\",\r\n\t\t'label.graph.sample.buffer.error': \"Error while loading the sample\",\r\n\t\t'label.graph.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t\t'label.graph.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\r\n\t\t'comment.context': \"create [audio context][context]\",\r\n\t\t'comment.graph.junction': \"create junction node as [gain node][gain]\",\r\n\t\t'comment.graph.audio': \"create [audio source node][source]\",\r\n\t\t'comment.graph.video': \"create [video source node][source]\",\r\n\t\t'comment.graph.sample': \"load [sample][buffer]\",\r\n\t\t'comment.graph.gain': \"create [gain node][gain]\",\r\n\t\t'comment.graph.panner': \"create [stereo panner node][panner]\",\r\n\t\t'comment.graph.convolver': \"create [convolver node][convolver]\",\r\n\t\t'comment.graph.convolver.drywet': \"create dry and wet routes with [convolver node][convolver]\",\r\n\t\t'comment.graph.compressor': \"create [dynamics compressor node][compressor]\",\r\n\t\t'comment.graph.analyser': \"create [analyser node][analyser]\",\r\n\t\t'comment.graph.stereoVolume': \"create [channel splitter node][splitter] connected to two [analyser nodes][analyser]\",\r\n\t\t'comment.graph.biquad': \"create [biquad filter node][biquad]\",\r\n\t\t'comment.graph.iir': \"create [IIR filter node][iir]\",\r\n\t\t'comment.graph.equalizer': \"create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]\",\r\n\t\t'comment.graph.equalizer.single': \"create equalizer as a [peaking][peaking] [biquad filter node][biquad]\",\r\n\t\t'comment.graph.destination': \"connect to [destination][destination]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2}': \"pixel{,s}\",\r\n\t\t'units.hertz.a': \"Hz\",\r\n\t\t'units.hertz.{1,2}': \"Hertz\",\r\n\t\t'units.decibel.a': \"dB\",\r\n\t\t'units.decibel.{1,2}': \"decibel{,s}\",\r\n\t\t'units.second.a': \"s\",\r\n\t\t'units.second.{1,2}': \"second{,s}\",\r\n\t},\r\n\tru:{\r\n\t\t'options.graph': \"Аудио-граф\",\r\n\t\t'options.graph.{audio,video}': \"Элемент <code>{}</code>\",\r\n\t\t'options.graph.{audio,video}.add': \"Добавить элемент <code>{}</code>\",\r\n\t\t'options.graph.sample': \"Сэмпл\",\r\n\t\t'options.graph.sample.add': \"Добавить сэмпл\",\r\n\t\t'options.graph.sample.repeat': \"Повторить сэмпл\",\r\n\t\t'options.graph.sample.interval': \"Интервал повторов\",\r\n\t\t'options.graph.sample.randomShift': \"Случ. сдвиг начала\",\r\n\t\t'options.graph.sample.pitch': \"Высота\",\r\n\t\t'options.graph.sample.randomPitch': \"Случайная высота\",\r\n\t\t'options.graph.sample.gain': \"Громкость\",\r\n\t\t'options.graph.sample.randomGain': \"Случайная громкость\",\r\n\t\t'options.graph.{audio,video,sample}.url': \"URL\",\r\n\t\t'options.graph.video.{width,height}': \"{Ширина,Высота}\",\r\n\t\t'options.graph.gain': \"Усилитель\",\r\n\t\t'options.graph.gain.add': \"Добавить усилитель\",\r\n\t\t'options.graph.gain.gain': \"Усиление\",\r\n\t\t'options.graph.panner': \"Панорамирование\",\r\n\t\t'options.graph.panner.add': \"Добавить панорамирование\",\r\n\t\t'options.graph.panner.pan': \"Баланс\",\r\n\t\t'options.graph.biquad': \"Биквадратный фильтр\", // \"Биквадратичный фильтр\"\r\n\t\t'options.graph.biquad.add': \"Добавить биквадратичный фильтр\",\r\n\t\t'options.graph.biquad.type': \"Тип фильтра\",\r\n\t\t'options.graph.biquad.type.lowpass': \"нижних частот\",\r\n\t\t'options.graph.biquad.type.highpass': \"верхних частот\",\r\n\t\t'options.graph.biquad.type.bandpass': \"полосовой\",\r\n\t\t'options.graph.biquad.type.{lowshelf,highshelf,peaking}': \"{}\", // TODO\r\n\t\t'options.graph.biquad.type.notch': \"полосно-заграждающий\",\r\n\t\t'options.graph.biquad.type.allpass': \"всепропускающий\", // http://www.dsplib.ru/content/allpass/allpass.html\r\n\t\t'options.graph.biquad.frequency': \"Частота\",\r\n\t\t'options.graph.biquad.detune': \"Detune\",\r\n\t\t'options.graph.biquad.Q': \"Log добротности\",\r\n\t\t'options.graph.biquad.gain': \"Усиление\",\r\n\t\t'options.graph.iir': \"БИХ-фильтр\",\r\n\t\t'options.graph.iir.add': \"Добавить БИХ-фильтр\",\r\n\t\t'options.graph.iir.feedforward': \"Коэффициенты прямой связи\", // Transfer fn numerator coefs\r\n\t\t'options.graph.iir.feedback': \"Коэффициенты обратной связи\", // Transfer fn denominator coefs\r\n\t\t'options.graph.convolver': \"Свёртка\",\r\n\t\t'options.graph.convolver.add': \"Добавить свёртку\",\r\n\t\t'options.graph.convolver.url': \"URL импульсной <abbr title='характеристики'>хар-ки</abbr>\",\r\n\t\t'options.graph.convolver.wet': \"Dry/wet\",\r\n\t\t'options.graph.equalizer': \"Эквалайзер\",\r\n\t\t'options.graph.equalizer.add': \"Добавить эквалайзер\",\r\n\t\t'options.graph.equalizer.gain{60,170,350,1000,3500,10000}': \"{} Гц\",\r\n\t\t'options.graph.compressor': \"Компрессор\",\r\n\t\t'options.graph.compressor.add': \"Добавить компрессор\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline}': \"Вид {волны,полос частот,контура частот}\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline}.add': \"Добавить визуализацию {волны,полос частот,контура частот}\",\r\n\t\t'options.graph.volume': \"Индикатор громкости\",\r\n\t\t'options.graph.volume.add': \"Добавить индикатор громкости\",\r\n\t\t'options.graph.stereoVolume': \"Стерео-громкость\",\r\n\t\t'options.graph.stereoVolume.add': \"Добавить стерео-индикатор громкости\",\r\n\t\t'options.graph.{waveform,frequencyBars,frequencyOutline,volume,stereoVolume}.logFftSize': \"log размера БПФ\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.width': \"Ширина линии\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.color': \"Цвет линии\",\r\n\t\t'options.graph.{waveform,frequencyOutline}.color.{r,g,b,a}': \"{,}\"+ruColors,\r\n\t\t'options.graph.{frequencyBars,frequencyOutline}.cutoff': \"Верх частот\",\r\n\t\t'options.graph.frequencyBars.base': \"Полосы частот растут от\",\r\n\t\t'options.graph.frequencyBars.base.{bottom,middle}': \"{низа,середины} элемента <code>canvas</code>\",\r\n\t\t'options.graph.frequencyOutline.base': \"Контур частот центрирован по\",\r\n\t\t'options.graph.frequencyOutline.base.{bottom,middle}': \"{низу,середине} элемента <code>canvas</code>\",\r\n\t\t'options.graph.frequencyBars.coloring': \"Раскраска полос частот\",\r\n\t\t'options.graph.frequencyBars.coloring.component': \"одним цветовым каналом\",\r\n\t\t'options.graph.frequencyBars.coloring.spectral': \"спектральная\",\r\n\t\t'options.graph.frequencyBars.coloringInput': \"Цвет полос зависит от\",\r\n\t\t'options.graph.frequencyBars.coloringInput.{amplitude,frequency}': \"{амплитуды,частоты}\",\r\n\t\t'options.graph.destination': \"Выход\",\r\n\t\t'options.graph.destination.add': \"Добавить выход\",\r\n\t\t'options.graph.junction': \"Узел для соединения\", // not used\r\n\t\t'options.graph.analyser': \"Анализатор\", // not used\r\n\r\n\t\t'options.canvas': \"Элемент <code>canvas</code>\",\r\n\t\t'options.canvas.{width,height}': \"{Ширина,Высота} элемента <code>canvas</code>\",\r\n\t\t'options.canvas.background': \"Фон\",\r\n\t\t'options.canvas.background.type': \"Тип фона\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{прозрачный,закрашенный}\",\r\n\t\t'options.canvas.background.color': \"Цвет фона\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `${ruColors} фона`,\r\n\r\n\t\t'options.loader': \"Загрузчик сэмплов\",\r\n\t\t'options.loader.errors': \"Обработка ошибок загрузки\",\r\n\t\t'options.loader.errors.none': \"отключена\",\r\n\t\t'options.loader.errors.network': \"для сетевых ошибок\",\r\n\t\t'options.loader.errors.http': \"для сетевых ошибок и ошибок HTTP\",\r\n\r\n\t\t'options.api': \"Поддержка Web Audio API\",\r\n\t\t'options.api.noVendorPrefix': \"Можно создавать аудио-контекст без префиксов производителей\",\r\n\t\t'options.api.connectReturnValue': \"Можно использовать значение, возвращаемое <code>AudioNode.connect()</code>\",\r\n\r\n\t\t'options-info.graph.convolver.wet': \"Соотношение прямого/обработанного звука.\", // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\r\n\t\t'options-info.graph.{waveform,frequencyBars,frequencyOutline}.logFftSize': \"Размер [[Быстрое преобразование Фурье|Быстрого преобразования Фурье]]. Больший размер даёт {более широкое окно для формы волны,более тонкие полосы частот,более подробный контур частот}.\",\r\n\t\t'options-info.graph.{volume,stereoVolume}.logFftSize': \"Размер [[Быстрое преобразование Фурье|Быстрого преобразования Фурье]].\",\r\n\t\t'options-info.graph.{frequencyBars,frequencyOutline}.cutoff': \"Ограничить рисование долей низких частот.\",\r\n\t\t'options-info.canvas.background.color.a': \"Низкие значения альфа-канала приводят к эффекту размывания.\",\r\n\r\n\t\t'options-output.input': \"Изменяемо\",\r\n\t\t'options-output.range': \"от и до\",\r\n\t\t'options-output.filter.frequencyResponse': \"Частотная характеристика\",\r\n\t\t'options-output.filter.magnitude': \"Амплитуда\",\r\n\t\t'options-output.filter.phase': \"Фаза\",\r\n\t\t'options-output.filter.logMagnitude': \"log-шкала амплитуды\",\r\n\t\t'options-output.filter.logFrequency': \"log-шкала частоты\",\r\n\t\t'options-output.filter.contextError': \"Ошибка создания аудио-контекста. Вероятно, браузер не поддерживает Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Ошибка создания узла фильтра. Вероятно, браузер не поддерживает данный тип фильтров.\",\r\n\t\t'options-output.filter.biquad.clone': \"БИХ-клон\",\r\n\t\t'options-output.filter.biquad.clone.newCoefs': \"по новой версии API\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'>Спецификация API</a> была противоречива и реализации ей не следовали. Также было обнаружено, что формулы для коэффициентов фильтров должны быть изменены, чтобы стало возможно задавать некоторые фильтры низких и высоких частот, которые ранее задать было невозможно. Подробности можно узнать из Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)} и ${webaudioIssue(791)}. Возможный метод обнаружения, перешла ли реализация на новые формулы, приводится <a href='${webaudioDetect}'>здесь</a>.`,\r\n\t\t'options-output.iir-filter-coefs.invalid': \"требуются числа, разделённые запятой\",\r\n\t\t'options-output.show': \"Показать\",\r\n\t\t'options-output.hide': \"Скрыть\",\r\n\t\t'options-output.enabled': \"Включен\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"Для корректного вывода звука в JSFiddle может потребоваться нажатие кнопки <kbd>Run</kbd>.\",\r\n\t\t'code-output.warning.interesting': \"Для нетривиального JavaScript-кода нужны по крайней мере один источник, один активный фильтр и один выход, соединённые вместе.\",\r\n\r\n\t\t'code.title': \"Пример использования Web Audio API — сгенерированный код\",\r\n\r\n\t\t'label.graph.sample.play': \"Играть сэмпл\",\r\n\t\t'label.graph.sample.buffer.loading': \"Идёт загрузка и декодирование сэмпла\",\r\n\t\t'label.graph.sample.buffer.error': \"Ошибка загрузки сэмпла\",\r\n\t\t'label.graph.convolver.buffer.loading': \"Идёт загрузка и декодирование импульсной характеристики\",\r\n\t\t'label.graph.convolver.buffer.error': \"Ошибка загрузки импульсной характеристики\",\r\n\r\n\t\t'comment.context': \"создаём [аудио-контекст][context]\",\r\n\t\t'comment.graph.junction': \"создаём узел для соединения в виде [узла усилителя][gain]\",\r\n\t\t'comment.graph.audio': \"создаём [узел источника аудио][source]\",\r\n\t\t'comment.graph.video': \"создаём [узел источника видео][source]\",\r\n\t\t'comment.graph.sample': \"загружаем [сэмпл][buffer]\",\r\n\t\t'comment.graph.gain': \"создаём [узел усилителя][gain]\",\r\n\t\t'comment.graph.panner': \"создаём [узел панорамирования][panner]\",\r\n\t\t'comment.graph.convolver': \"создаём [узел свёртки][convolver]\",\r\n\t\t'comment.graph.convolver.drywet': \"создаём прямой путь и путь через [узел свёртки][convolver]\",\r\n\t\t'comment.graph.compressor': \"создаём [узел компрессора][compressor]\",\r\n\t\t'comment.graph.analyser': \"создаём [узел анализатора][analyser]\",\r\n\t\t'comment.graph.stereoVolume': \"создаём [узел разделения каналов][splitter], соединённый с двумя [узлами анализатора][analyser]\",\r\n\t\t'comment.graph.biquad': \"создаём [узел биквадратичного фильтра][biquad]\",\r\n\t\t'comment.graph.iir': \"создаём [узел БИХ-фильтра][iir]\",\r\n\t\t'comment.graph.equalizer': \"создаём эквалайзер в виде последовательности [peaking][peaking] [биквадратичных фильтров][biquad]\",\r\n\t\t'comment.graph.equalizer.single': \"создаём эквалайзер в виде [peaking][peaking] [биквадратичного фильтра][biquad]\",\r\n\t\t'comment.graph.destination': \"соединяем с [выходом][destination]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2,5}': \"пиксел{ь,я,ей}\",\r\n\t\t'units.hertz.a': \"Гц\",\r\n\t\t'units.hertz.{1,2,5}': \"Герц{,а,}\",\r\n\t\t'units.decibel.a': \"дБ\",\r\n\t\t'units.decibel.{1,2,5}': \"децибел{,а,ов}\",\r\n\t\t'units.second.a': \"с\",\r\n\t\t'units.second.{1,2,5}': \"секунд{а,ы,}\",\r\n\t},\r\n}\r\n\r\n/*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\r\n\r\nfor (let lang in langStrings) {\r\n\tlet strings=langStrings[lang]\r\n\tstrings=require('crnx-base/i18n-expand-curly')(strings)\r\n\tstrings=require('crnx-base/i18n-link-wikipedia')(lang)(strings)\r\n\tstrings=require('crnx-base/options-output-i18n')(lang)(strings)\r\n\tstrings=require('crnx-base/code-output-i18n')(lang)(strings)\r\n\tlangStrings[lang]=strings\r\n}\r\n\r\nlangStrings['ru']['options-output.reset']=\"Сброс\" // глагол \"Сбросить\" слишком длинный для кнопки в редакторе графа; TODO apply only to graph ui\r\n\r\nmodule.exports=require('crnx-base/i18n')(langStrings)\r\n","'use strict'\r\n\r\nconst FilterNodeOptionOutput=require('./filter-node-option-output')\r\n\r\nclass IIRFilterNodeOptionOutput extends FilterNodeOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\treturn [audioContext.createIIRFilter(\r\n\t\t\tJSON.parse('['+this.option.entries[0].value+']'),\r\n\t\t\tJSON.parse('['+this.option.entries[1].value+']')\r\n\t\t)]\r\n\t}\r\n}\r\n\r\nmodule.exports=IIRFilterNodeOptionOutput\r\n","'use strict'\r\n\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Loader extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\tfeatureContext.loaderOnError=true\r\n\t\t}\r\n\t}\r\n\tgetInitJsLines(featureContext,i18n) {\r\n\t\tif (!featureContext.loader) return JsLines.be()\r\n\t\tconst a=JsLines.b()\r\n\t\ta(\r\n\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\"xhr.open('GET',url);\", // TODO html escape\r\n\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\"xhr.onload=function(){\"\r\n\t\t)\r\n\t\tif (this.options.errors=='http') {\r\n\t\t\ta(\r\n\t\t\t\t\"\tif (this.status==200) {\",\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,onDecode);\", // TODO decoding error handling\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\"\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\ta(\r\n\t\t\t\t\"\tctx.decodeAudioData(this.response,onDecode);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"};\"\r\n\t\t)\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\ta(\r\n\t\t\t\t\"xhr.onerror=onError;\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"xhr.send();\"\r\n\t\t)\r\n\t\treturn WrapLines.b(\r\n\t\t\tJsLines.bae(\"function loadSample(url,onDecode\"+(this.options.errors!='none' ? \",onError\" : \"\")+\") {\"),\r\n\t\t\tJsLines.bae(\"}\")\r\n\t\t).ae(a.e())\r\n\t}\r\n}\r\n\r\nmodule.exports=Loader\r\n","'use strict'\r\n\r\nlet idCounter=0\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++)\r\n}\r\n\r\nconst i18ns=require('./i18n')\r\nconst Options=require('./options')\r\nconst Code=require('./code')\r\nconst OptionsOutput=require('./options-output')\r\nconst CodeOutput=require('./code-output')\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst lang=$container.closest('[lang]').attr('lang')\r\n\t\tconst i18n=i18ns(lang)\r\n\t\tconst options=new Options()\r\n\t\tconst codeOutput=new CodeOutput(()=>new Code(options.fix(),i18n),i18n)\r\n\t\toptions.addUpdateCallback(codeOutput.update)\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n)\r\n\t\t$container.empty().append(\r\n\t\t\toptionsOutput.$output,\r\n\t\t\tcodeOutput.$output\r\n\t\t)\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst writeTip=require('crnx-base/tip')\r\nconst Option=require('./option-classes')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\nconst GroupNodeOptionOutput=require('./group-node-option-output')\r\nconst BiquadFilterNodeOptionOutput=require('./biquad-filter-node-option-output')\r\nconst IIRFilterNodeOptionOutput=require('./iir-filter-node-option-output')\r\nconst EqualizerFilterNodeOptionOutput=require('./equalizer-filter-node-option-output')\r\n\r\n// has .node-option option class name instead of .option\r\nclass NodeOptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tconst writeMoreButton=($extraSection)=>{ // TODO i18n\r\n\t\t\tconst $moreButtonText=$(\"<span>\").html(\"More\")\r\n\t\t\treturn $(\"<button class='more' title='Show more options'>\").append($moreButtonText).click(function(){\r\n\t\t\t\tconst $button=$(this)\r\n\t\t\t\tif ($button.hasClass('more')) {\r\n\t\t\t\t\t$button.addClass('less').removeClass('more').attr('title',\"Show less options\")\r\n\t\t\t\t\t$moreButtonText.html(\"Less\")\r\n\t\t\t\t\t$extraSection.show()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$button.addClass('more').removeClass('less').attr('title',\"Show more options\")\r\n\t\t\t\t\t$moreButtonText.html(\"More\")\r\n\t\t\t\t\t$extraSection.hide()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst valueId=value=>'options.'+option.fullName+'.'+value\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='node-option'>\").append(\r\n\t\t\t\t$(\"<span class='node-option-section node-option-section-text'>\").append(\r\n\t\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t\t$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n(valueId(availableValue)))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst $output=optionClassWriters.get(Option.Select)(option,writeOption,i18n,generateId)\r\n\t\t\tconst $mainSection=$output.children('.node-option-section-text')\r\n\t\t\tconst $select=$mainSection.children('select')\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tconst $inputCheckbox=$(\"<input type='checkbox' class='editable' id='\"+inputCheckboxId+\"'>\").prop('checked',option.input).change(function(){\r\n\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t})\r\n\t\t\tconst $extraSection=$(\"<span class='node-option-section node-option-section-extra'>\").append(\r\n\t\t\t\t$inputCheckbox,\r\n\t\t\t\t\" <label class='editable-middle' for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \",\r\n\t\t\t\t$(\"<button class='reset'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$select.val(option.defaultValue).change()\r\n\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t})\r\n\t\t\t).hide()\r\n\t\t\t$mainSection.append(\r\n\t\t\t\t\" \",writeMoreButton($extraSection)\r\n\t\t\t)\r\n\t\t\treturn $output.append(\" \",$extraSection)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst listId=generateId()\r\n\t\t\treturn option.$=$(\"<div class='node-option'>\").append(\r\n\t\t\t\t$(\"<span class='node-option-section node-option-section-text'>\").append(\r\n\t\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"' />\")\r\n\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<datalist id='\"+listId+\"'>\").append(\r\n\t\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t) // TODO expand on focus\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilterCoefs,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='node-option'>\").append(\r\n\t\t\t\t$(\"<span class='node-option-section node-option-section-text'>\").append(\r\n\t\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t\t$(\"<input type='text' id='\"+id+\"' required>\")\r\n\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\t\tif (Option.IIRFilterCoefs.isValueValid(this.value)) {\r\n\t\t\t\t\t\t\t\tthis.setCustomValidity('')\r\n\t\t\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.setCustomValidity(i18n('options-output.iir-filter-coefs.invalid'))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Number,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst inputAttrs={\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax,\r\n\t\t\t\tstep: Math.pow(0.1,p).toFixed(p),\r\n\t\t\t}\r\n\t\t\tconst setInputAttrsAndListeners=($input,$that)=>$input\r\n\t\t\t\t.attr(inputAttrs)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst $sliderInput=$(\"<input type='range' id='\"+id+\"'>\")\r\n\t\t\tconst $numberInput=$(\"<input type='number' required>\")\r\n\t\t\tconst fmt=formatNumbers({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax\r\n\t\t\t},option.precision)\r\n\t\t\tconst $mainSection=$(\"<span class='node-option-section node-option-section-number'>\").append(\r\n\t\t\t\t$(\"<span class='range-label'>\").append(\r\n\t\t\t\t\t\"<span class='min'>\"+i18n.numberWithoutUnits(fmt.min,option.unit)+\"</span> \",\r\n\t\t\t\t\t$(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\"),\r\n\t\t\t\t\t\" <span class='max'>\"+i18n.numberWithoutUnits(fmt.max,option.unit)+\"</span>\"\r\n\t\t\t\t),\r\n\t\t\t\t\" <span class='units'>\"+i18n.numberUnits(fmt.max,option.unit)+\"</span> \",\r\n\t\t\t\tsetInputAttrsAndListeners($sliderInput,$numberInput),\r\n\t\t\t\t\" \",\r\n\t\t\t\tsetInputAttrsAndListeners($numberInput,$sliderInput)\r\n\t\t\t)\r\n\t\t\tif (i18n.has('options-info.'+option.fullName)) {\r\n\t\t\t\t$mainSection.append(\r\n\t\t\t\t\t\" \",writeTip('info',i18n('options-info.'+option.fullName))\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst $extraSection=$(\"<span class='node-option-section node-option-section-extra'>\").append(\r\n\t\t\t\t$(\"<button class='reset'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t})\r\n\t\t\t).hide()\r\n\t\t\t$mainSection.append(\r\n\t\t\t\t\" \",writeMoreButton($extraSection)\r\n\t\t\t)\r\n\t\t\treturn option.$=$(\"<div class='node-option'>\").append(\r\n\t\t\t\t$mainSection,\" \",$extraSection\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst inputAttrs={\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax,\r\n\t\t\t\tstep: Math.pow(0.1,p).toFixed(p),\r\n\t\t\t}\r\n\t\t\tconst writeMinMaxInput=minOrMax=>$(\"<input type='number' class='\"+minOrMax+\"' required>\")\r\n\t\t\t\t.attr(inputAttrs)\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst $output=optionClassWriters.get(Option.Number)(option,writeOption,i18n,generateId)\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tconst $inputCheckbox=$(\"<input type='checkbox' class='editable' id='\"+inputCheckboxId+\"'>\").prop('checked',option.input).change(function(){\r\n\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t})\r\n\t\t\tconst $rangeMinInput=writeMinMaxInput('min')\r\n\t\t\tconst $rangeMaxInput=writeMinMaxInput('max')\r\n\t\t\tconst $rangeSpan1=$(\"<span>\"+i18n('options-output.range')+\"</span>\")\r\n\t\t\tconst $rangeSpan2=$(\"<span class='editable-bottom'>\").append(\r\n\t\t\t\t$rangeMinInput,\" <span class='dots'>..</span> \",$rangeMaxInput\r\n\t\t\t)\r\n\t\t\toption.$range=$rangeSpan1.add($rangeSpan2)\r\n\t\t\t$output.find('button.reset').before(\r\n\t\t\t\t$inputCheckbox,\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<span class='editable-top'>\").append(\r\n\t\t\t\t\t\"<label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \",\r\n\t\t\t\t\t$rangeSpan1\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$rangeSpan2,\r\n\t\t\t\t\" \"\r\n\t\t\t).click(function(){\r\n\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t$rangeMinInput.val(option.defaultMin).change()\r\n\t\t\t\t$rangeMaxInput.val(option.defaultMax).change()\r\n\t\t\t})\r\n\t\t\treturn $output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Group,function(){\r\n\t\t\treturn new GroupNodeOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.BiquadFilter,function(){\r\n\t\t\treturn new BiquadFilterNodeOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilter,function(){\r\n\t\t\treturn new IIRFilterNodeOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.EqualizerFilter,function(){\r\n\t\t\treturn new EqualizerFilterNodeOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=NodeOptionsOutput\r\n","'use strict'\r\n\r\nconst Option=Object.create(require('crnx-base/option-classes'))\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed precision of 2\r\n//\tno speed\r\n//\tcan specify defaultMin, defaultMax\r\n//\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\nOption.LiveNumber = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataMin  =data.min\r\n\t\t\tdataMax  =data.max\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.defaultMin!==undefined) {\r\n\t\t\tthis.defaultMin=settings.defaultMin\r\n\t\t} else {\r\n\t\t\tthis.defaultMin=this.availableMin\r\n\t\t}\r\n\t\tif (settings.defaultMax!==undefined) {\r\n\t\t\tthis.defaultMax=settings.defaultMax\r\n\t\t} else {\r\n\t\t\tthis.defaultMax=this.availableMax\r\n\t\t}\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:this.defaultMin\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:this.defaultMax\r\n\t\tthis._input=!!dataInput\r\n\t\tthis._$range=null\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input)\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateInternalVisibility()\r\n\t\tthis.update()\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min\r\n\t\tthis.update()\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max\r\n\t\tthis.update()\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range\r\n\t\tthis.updateInternalVisibility()\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={}\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value\r\n\t\tif (src.min!=src.availableMin) data.min=src.min\r\n\t\tif (src.max!=src.availableMax) data.max=src.max\r\n\t\tif (src.input) data.input=src.input\r\n\t\treturn data\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this)\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.min=this.min\r\n\t\tfixed.max=this.max\r\n\t\tfixed.input=this.input\r\n\t\tfixed.defaultValue=this.defaultValue\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 2\r\n\t}\r\n}\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableValues=src.availableValues\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tthis._input=!!dataInput\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\tif (this.input) data.input=this.input\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this)\r\n\t}\r\n}\r\n\r\n/*\r\n// DON'T DELETE\r\n// TODO copy to crnx-base, here it's only for filter coefs\r\nOption.AnyFloat = class extends Option.NonBoolean {\r\n}\r\n*/\r\n\r\nOption.GraphNode = class extends Option.Group {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.inEdges=(settings.inEdges===undefined)||settings.inEdges\r\n\t\tthis.outEdges=(settings.outEdges===undefined)||settings.outEdges\r\n\t\tthis.enableSwitch=!!settings.enableSwitch\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tif (typeof data == 'object' && data.enabled!==undefined) {\r\n\t\t\t\tthis._enabled=!!data.enabled\r\n\t\t\t} else {\r\n\t\t\t\tthis._enabled=true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\texport() {\r\n\t\tconst data=super.export()\r\n\t\tif (this.enableSwitch && this._enabled==false) {\r\n\t\t\tdata.enabled=this._enabled\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tfixed.enabled=this._enabled\r\n\t\t}\r\n\t\treturn fixed\r\n\t}\r\n\tget enabled() {\r\n\t\treturn this._enabled\r\n\t}\r\n\tset enabled(enabled) {\r\n\t\tthis._enabled=enabled\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tthis.update()\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.AudioGraphNode = class extends Option.GraphNode {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.enableSwitch===undefined) {\r\n\t\t\tsettings.enableSwitch=true\r\n\t\t}\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tif (typeof data == 'object') {\r\n\t\t\t\tthis._enabledInput=!!data.enabledInput\r\n\t\t\t} else {\r\n\t\t\t\tthis._enabledInput=false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\texport() {\r\n\t\tconst data=super.export()\r\n\t\tif (this.enableSwitch && this._enabledInput==true) {\r\n\t\t\tdata.enabledInput=this._enabledInput\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tfixed.enabledInput=this._enabledInput\r\n\t\t}\r\n\t\treturn fixed\r\n\t}\r\n\tget enabledInput() {\r\n\t\treturn this._enabledInput\r\n\t}\r\n\tset enabledInput(enabledInput) {\r\n\t\tthis._enabledInput=enabledInput\r\n\t\tif (this.enableSwitch) {\r\n\t\t\tthis.update()\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.WetAudioGraphNode = class extends Option.AudioGraphNode {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tarrayArg=[['LiveFloat','wet',[0,1],1],...arrayArg]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.BiquadFilter = class extends Option.AudioGraphNode {\r\n\tstatic typeUsesQ(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowpass': true,\r\n\t\t\t'highpass': true,\r\n\t\t\t'bandpass': true,\r\n\t\t\t'peaking': true,\r\n\t\t\t'notch': true,\r\n\t\t\t'allpass': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic typeUsesGain(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowshelf': true,\r\n\t\t\t'highshelf': true,\r\n\t\t\t'peaking': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['LiveSelect','type',[\r\n\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t]],\r\n\t\t\t['LiveInt','frequency',[0,22050],350,{ unit: 'hertz' }],\r\n\t\t\t['LiveInt','detune',[0,100],{ unit: '¢' }],\r\n\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t['LiveInt','gain',[-30,30],0,{ unit: 'decibel' }],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tconst type=this.entries[0]\r\n\t\tconst Q=this.entries[3]\r\n\t\tconst gain=this.entries[4]\r\n\t\tQ.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesQ(type.value))\r\n\t\tgain.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesGain(type.value))\r\n\t\ttype.addUpdateCallback(()=>{\r\n\t\t\tQ.updateVisibility()\r\n\t\t\tgain.updateVisibility()\r\n\t\t})\r\n\t}\r\n}\r\n\r\nOption.IIRFilterCoefs = class extends Option.Text {\r\n\tstatic isValueValid(value) { // has to be nonempty comma-separated number sequence\r\n\t\ttry {\r\n\t\t\tconst result=JSON.parse('['+value+']')\r\n\t\t\treturn result.length>0 && result.every(v=>(typeof v == 'number'))\r\n\t\t} catch (e) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tif (settings.defaultValue===undefined) {\r\n\t\t\tsettings.defaultValue=\"1\"\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tif (!Option.IIRFilterCoefs.isValueValid(this.value)) {\r\n\t\t\tthis.value=\"1\"\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.IIRFilter = class extends Option.AudioGraphNode {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['IIRFilterCoefs','feedforward'],\r\n\t\t\t['IIRFilterCoefs','feedback'],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.EqualizerFilter = class extends Option.AudioGraphNode {\r\n\tstatic get frequencies() {\r\n\t\treturn [60,170,350,1000,3500,10000]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=Option.EqualizerFilter.frequencies.map(\r\n\t\t\tfreq=>['LiveInt','gain'+freq,[-30,30],0,{ unit: 'decibel' }]\r\n\t\t)\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.Graph = class extends Option.Collection {\r\n\tgetElementsPropertyName() {\r\n\t\treturn 'nodes'\r\n\t}\r\n\tpopulateEntries(datas,entries) {\r\n\t\tconst subtracts=Array(entries.length)\r\n\t\tlet sub=0\r\n\t\tfor (let i=0;i<entries.length;i++) {\r\n\t\t\tsub+=!entries[i]\r\n\t\t\tsubtracts[i]=sub\r\n\t\t}\r\n\t\tconst nodes=[]\r\n\t\tfor (let i=0;i<entries.length;i++) {\r\n\t\t\tconst data=datas[i]\r\n\t\t\tconst entry=entries[i]\r\n\t\t\tif (!entry) continue\r\n\t\t\tconst node={ entry, next:[], x:0, y:0 }\r\n\t\t\tif (data.x!==undefined) node.x=data.x\r\n\t\t\tif (data.y!==undefined) node.y=data.y\r\n\t\t\tif (data.next!==undefined) {\r\n\t\t\t\tlet next=data.next\r\n\t\t\t\tif (!Array.isArray(next)) next=[next]\r\n\t\t\t\tfor (let j of next) {\r\n\t\t\t\t\tj=parseInt(j)\r\n\t\t\t\t\tif (!entries[j]) continue\r\n\t\t\t\t\tnode.next.push(j-subtracts[j])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnodes.push(node)\r\n\t\t}\r\n\t\tthis.storeNodes(nodes)\r\n\t}\r\n\tgetEntryFromElement(node) {\r\n\t\treturn node.entry\r\n\t}\r\n\tsetElementExportData(node,data) {\r\n\t\tif (node.next.length>1) {\r\n\t\t\tdata.next=node.next\r\n\t\t} else if (node.next.length==1) {\r\n\t\t\tdata.next=node.next[0]\r\n\t\t}\r\n\t\tdata.x=node.x\r\n\t\tdata.y=node.y\r\n\t}\r\n\tsetElementFixData(node,fixed) {\r\n\t\tfixed.next=node.next\r\n\t}\r\n\tstoreNodes(nodes) {\r\n\t\tthis._nodes=nodes.map(node=>({entry:node.entry, next:[], x:node.x, y:node.y}))\r\n\t\tthis.resetNodeConnectionData()\r\n\t\tfor (let i=0;i<nodes.length;i++) {\r\n\t\t\tfor (const j of nodes[i].next) {\r\n\t\t\t\tthis.connectNodes(i,j)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// introduced protected:\r\n\tresetNodeConnectionData() {}\r\n\taddConnectionData(i,j) {}\r\n\t// introduced public:\r\n\tget nodes() {\r\n\t\treturn this._nodes\r\n\t}\r\n\tset nodes(nodes) {\r\n\t\tthis.storeNodes(nodes)\r\n\t\tthis.update()\r\n\t\t// additionally it's ok to update nodes[i].x and nodes[i].y directly, but not other properties\r\n\t}\r\n\tcanConnectNodes(i,j) {\r\n\t\treturn (\r\n\t\t\tthis._nodes[i].entry.outEdges &&\r\n\t\t\tthis._nodes[j].entry.inEdges &&\r\n\t\t\t!this._nodes[i].next/*:Array*/.includes(j)\r\n\t\t)\r\n\t}\r\n\tconnectNodes(i,j) {\r\n\t\tif (this.canConnectNodes(i,j)) {\r\n\t\t\tthis._nodes[i].next.push(j)\r\n\t\t\tthis.addConnectionData(i,j)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.AcyclicGraph = class extends Option.Graph {\r\n\tresetNodeConnectionData() {\r\n\t\tconst width=this._nodes.length\r\n\t\tthis._connectivityMatrix=new Int8Array(width*width)\r\n\t}\r\n\taddConnectionData(i,j) {\r\n\t\tconst width=this._nodes.length\r\n\t\tthis._connectivityMatrix[i*width+j]=1\r\n\t\tfor (let k=0;k<width;k++) {\r\n\t\t\tthis._connectivityMatrix[i*width+k]|=this._connectivityMatrix[j*width+k]\r\n\t\t}\r\n\t}\r\n\tcanConnectNodes(i,j) {\r\n\t\tif (!super.canConnectNodes(i,j)) return false\r\n\t\tconst width=this._nodes.length\r\n\t\treturn i!=j && !this._connectivityMatrix[j*width+i]\r\n\t}\r\n}\r\n\r\n/*\r\nOption.TreeGraph = class extends Option.AcyclicGraph {\r\n\tcanConnectNodes(i,j) {\r\n\t\t// if there's a root node with no input port:\r\n\t\t// test for multiple inputs on any node\r\n\t}\r\n}\r\n*/\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\nconst GraphOptionOutput=require('./graph-option-output')\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters)\r\n\t\t/*\r\n\t\t// DON'T DELETE\r\n\t\t// TODO copy to crnx-base, here it's only for filter coefs\r\n\t\toptionClassWriters.set(Option.AnyFloat,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='number' id='\"+id+\"' step='any' required>\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\t*/\r\n\t\toptionClassWriters.set(Option.Graph,function(){\r\n\t\t\treturn new GraphOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nconst BaseOptions=require('crnx-base/options')\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['AcyclicGraph','graph',[\r\n\t\t\t\t['AudioGraphNode','audio',[\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t],{ inEdges:false }],\r\n\t\t\t\t['AudioGraphNode','video',[\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.mp4',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','width',[1,1920],320,{ unit:'pixel' }],\r\n\t\t\t\t\t['Int','height',[1,1080],240,{ unit:'pixel' }],\r\n\t\t\t\t],{ inEdges:false }],\r\n\t\t\t\t['AudioGraphNode','sample',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot2.mp3',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','repeat',[1,20]],\r\n\t\t\t\t\t['Float','interval',[0,1],0.1,{ unit:'second' }],\r\n\t\t\t\t\t['Float','randomShift',[0,1],{ unit:'second' }],\r\n\t\t\t\t\t['Float','pitch',[0,2],1],\r\n\t\t\t\t\t['Float','randomPitch',[0,1]],\r\n\t\t\t\t\t['Float','gain',[0,2],1],\r\n\t\t\t\t\t['Float','randomGain',[0,1]],\r\n\t\t\t\t],{ inEdges:false, enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','gain',[\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t\t['LiveFloat','gain',[0,10],1,{\r\n\t\t\t\t\t\tdefaultMax: 1,\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['AudioGraphNode','panner',[\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['BiquadFilter','biquad'],\r\n\t\t\t\t['IIRFilter','iir'],\r\n\t\t\t\t['WetAudioGraphNode','convolver',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['EqualizerFilter','equalizer'],\r\n\t\t\t\t['AudioGraphNode','compressor',[ // Firefox compresses automatically?\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t]],\r\n\t\t\t\t['AudioGraphNode','waveform',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t\t['Float','width',[0,10],1,{ unit:'pixel' }],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t]],\r\n\t\t\t\t],{ enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','frequencyBars',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t\t['Int','cutoff',[10,100],100,{ unit:'%' }],\r\n\t\t\t\t\t['Select','base',['bottom','middle']],\r\n\t\t\t\t\t['Select','coloring',['component','spectral']],\r\n\t\t\t\t\t['Select','coloringInput',['amplitude','frequency']],\r\n\t\t\t\t],{ enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','frequencyOutline',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t\t['Int','cutoff',[10,100],100,{ unit:'%' }],\r\n\t\t\t\t\t['Select','base',['bottom','middle']],\r\n\t\t\t\t\t['Float','width',[0,10],1,{ unit:'pixel' }],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],0,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t]],\r\n\t\t\t\t],{ enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','volume',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t],{ enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','stereoVolume',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t],{ outEdges:false, enableSwitch:false }],\r\n\t\t\t\t['AudioGraphNode','destination',[\r\n\t\t\t\t\t['Checkbox','enabled',true],\r\n\t\t\t\t],{ outEdges:false }],\r\n\t\t\t],'nodeType'],\r\n\t\t\t['Group','canvas',[\r\n\t\t\t\t['Int','width',[1,1920],300,{ unit:'pixel' }],\r\n\t\t\t\t['Int','height',[1,1080],100,{ unit:'pixel' }],\r\n\t\t\t\t['Group','background',[\r\n\t\t\t\t\t['Select','type',['clear','filled']],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit:'%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData:{'canvas.background.type':['filled']}\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t]/*,{\r\n\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true],'destination.frequencies.enabled':[true],'destination.volume.enabled':[true]},\r\n\t\t\t\tvisibilityDataLogic: 'or',\r\n\t\t\t}*/],\r\n\t\t\t['Group','loader',[\r\n\t\t\t\t['Select','errors',['none','network','http']],\r\n\t\t\t]], // TODO visibility depending on sources and filters\r\n\t\t\t['Group','api',[\r\n\t\t\t\t['Checkbox','noVendorPrefix'], // won't work on Safari\r\n\t\t\t\t['Checkbox','connectReturnValue'], // won't work on Safari as long as this is the interface:\r\n\t\t\t\t\t// https://trac.webkit.org/browser/trunk/Source/WebCore/Modules/webaudio/AudioNode.idl\r\n\t\t\t\t\t// https://trac.webkit.org/browser/trunk/Source/WebCore/Modules/webaudio/AudioNode.h\r\n\t\t\t\t\t// (github mirror) https://github.com/WebKit/webkit/blob/66e68cd8d7bf4ea1cf52f31ed9cb242f83ea5b57/Source/WebCore/Modules/webaudio/AudioNode.h\r\n\t\t\t]],\r\n\t\t]\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n"],"sourceRoot":"."}