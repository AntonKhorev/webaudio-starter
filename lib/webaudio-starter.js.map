{"version":3,"sources":["webaudio-starter.js","node_modules/browser-pack/_prelude.js","node_modules/crnx-base/array-option-output.js","node_modules/crnx-base/code-output-i18n.js","node_modules/crnx-base/code-output.js","node_modules/crnx-base/code-section.js","node_modules/crnx-base/details-polyfill.js","node_modules/crnx-base/fake-lodash/camelcase.js","node_modules/crnx-base/fake-lodash/capitalize.js","node_modules/crnx-base/fake-lodash/debounce.js","node_modules/crnx-base/fake-lodash/escape.js","node_modules/crnx-base/format-numbers.js","node_modules/crnx-base/group-option-output.js","node_modules/crnx-base/i18n-expand-curly.js","node_modules/crnx-base/i18n-link-wikipedia.js","node_modules/crnx-base/i18n.js","node_modules/crnx-base/interleave-lines.js","node_modules/crnx-base/js-lines.js","node_modules/crnx-base/lines.js","node_modules/crnx-base/nose-wrap-lines.js","node_modules/crnx-base/option-classes.js","node_modules/crnx-base/options-output-i18n.js","node_modules/crnx-base/options-output.js","node_modules/crnx-base/options.js","node_modules/crnx-base/ref-lines.js","node_modules/crnx-base/tip.js","node_modules/crnx-base/web-code.js","node_modules/crnx-base/wrap-lines.js","node_modules/crnx-build/babel-helpers/math-log10.es5","node_modules/crnx-build/babel-helpers/string-prototype-includes.es5","node_modules/crnx-build/babel-helpers/string-prototype-repeat.es5","src/audio-context.js","src/biquad-filter-option-output.js","src/canvas.js","src/code-output.js","src/code.js","src/collection-feature.js","src/destination.js","src/equalizer-filter-option-output.js","src/feature.js","src/filter-option-output.js","src/filter-sequence.js","src/i18n.js","src/iir-filter-option-output.js","src/loader.js","src/main.js","src/option-classes.js","src/options-output.js","src/options.js","src/source-set.js"],"names":["___babelHelper___createClass","Constructor","protoProps","staticProps","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","prototype","___babelHelper___classCallCheck","instance","TypeError","___babelHelper___possibleConstructorReturn","self","call","ReferenceError","___babelHelper___inherits","subClass","superClass","defaults","obj","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","constructor","___babelHelper___taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","ArrayOptionOutput","option","writeOption","i18n","generateId","_this","this","$dragged","$entries","$","append","entries","map","subOption","writeDraggableSubOption","$buttons","availableTypes","forEach","type","html","fullName","click","makeEntry","updateArrayEntries","$output","canDeleteEntry","$entry","children","data","get","_this2","moveUp","$moved","prev","before","moveDown","next","after","attemptDelete","remove","This","on","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","name","setDragImage","setTimeout","addClass","$sorted","h","height","offset","top","y","touches","pageY","$prev","$next","removeClass","keydown","$handle","keyCode","focus","preventDefault","dropEffect","$target","is","dh","nextAll","th","_dh","_y","prevAll",2,"lang","additionalStringsPrefix","additionalStrings","en","save","run","open.codepen","open.jsfiddle","open.plunker","section.html","section.css","section.js","embedded","mode.full","mode.body","mode.embed","mode.paste","mode.file","formatting","formatting.indent","formatting.indentNumber","formatting.jsSemicolons","warning.no-hljs","ru","id",3,"debounce","detailsPolyfill","getHtmlDataUri","encodeURIComponent","makeObjectWithSetters","values","setCallback","_loop","prop","set","v","CodeOutput","generateCode","defaultFormatting","update","flush","applyUpdatedCode","sectionModes","css","js","_code","initDomProps","writeFormattingControls","$indentCheckbox","$indentNumber","updateIndent","indent","checkValidity","Number","val","change","jsSemicolons","checked","each","writeSection","sectionName","writeSectionSummary","$sectionCode","writeButtons","window","hljs","$saveButtons","sections","extractSections","empty","$code","getHtml","join","highlightBlock","postData","url","$form","attr","appendTo","submit","navigator","msSaveOrOpenBlob","w","open","document","write","close","getSection","JSON","stringify","title","wrap","_postData","filename","$summary","mode","section","blob","Blob","mimeType","$a","URL","createObjectURL","29","5","8",4,"CodeSection","lines","detailsSupported","createElement","$details","toggleOpen","removeAttr","keyCodeEnter","keyCodeSpace","handleEvent","closest",6,"capitalize","split","7","charAt","toUpperCase","slice","func","wait","timeoutId","debounced","clearTimeout",9,"entityMap","&","<",">","\"","'","String","replace","m",10,"formatNumbersInternal","numbers","precision","keepDot","noPlus","maxPrecision","hasNegative","p","number","toFixed","match","ss","Array","isArray","_i","_number","_s","formatNumbers","glsl",11,"GroupOptionOutput",12,"inStrings","expandIdAndString","string","idMatch","expandRegexp","exec","idStart","idMidsStr","idEnd","idMids","stringMatch","stringStart","stringMidsStr","stringEnd","stringMids","idMid","stringMid",13,"p1","link","text","indexOf",14,"escape","langStrings","defaultLang","has","pluralSuffix","ns","nn","Math","abs","teen","plural","numberWithUnits","unit","abbrFn","abbr","expansion","test","28",15,"Lines","InterleaveLines","_Lines","apply","arguments","doGet","out","first","fp","push","_arr","item","subOut","17",16,"JsLines","processStringInGet","TO","isDataEmpty","isEmpty","addTo","_arr2","_i2","pop","shift","b","_arguments","makeLines","Function","bind","concat","ae","ba","_b","be","bae","_b2","count","_arguments2","reduce",18,"WrapLines","NoseWrapLines","_WrapLines","26",19,"Option","Base","_class","settings","visibilityManager","updateCallbacks","_$","isVisible","register","visibilityData","visibilityDataLogic","testName","options","declareAffectedBy","make","nScalars","nArrays","nObjects","scalarArg","arrayArg","objectArg","_len","rest","_key","arg","optionClass","collectArgs","updateVisibility","toggle","updateCallback","addUpdateCallback","shortenExport","dataKeys","shortenExportAssign","parentData","Input","_Option$Base","_class2","defaultValue","_value","Boolean","_Option$Input","_class3","fix","NonBoolean","_Option$Input2","_class4","valueOf","toString","Factor","_Option$NonBoolean","_class5","_this4","availableValues","_Option$NonBoolean2","_class6","_this5","availableMin","availableMax","fixed","Collection","_Option$Base2","_class7","_this6","descriptions","x","subName","subData","entry","fixedEntries","_i3","Void","_Option$Base3","_class8","Checkbox","_Option$Boolean","_class9","Select","_Option$Factor","_class10","Text","_Option$Factor2","_class11","Int","_Option$Number","_class12","Float","_Option$Number2","_class13","_this12","Root","_Option$Collection","_class14","Group","_Option$Collection2","_class15","_Option$Base4","_class16","_this15","availableConstructors","Map","enterArray","_arr3","_i4","ctor","exitArray","typePropertyName","_entries","subDatas","defaultType","_i5","subType","subCtor","_this16","_this17","subFixed","types","_",20,"reset","drag","drag.tip","delete","delete.tip",21,"writeTip","OptionsOutput","optionProto","getPrototypeOf","optionClassWriter","optionClassWriters","setOptionClassWriters","root","getLeadLabel","valueId","valueInfoId","$select","availableValue","some","$tip","handler","find","listId","setInputAttrs","$input","pow","setInputAttrsAndListeners","getOtherInput","$that","parseFloat","$sliderInput","$numberInput","fmt","min","max","infoId","24",22,"OptionVisibilityManager","affects","inArray","updateVisibilityAffectedBy","byFullName","Options","optionClasses","description","_Option$className","className","makeArgs","entriesDescription",23,"RefLines","ref","parse","re","substr","plainOut","href","refs","tipClass","tipContent","popupTimeoutId","popupLevel","handlePopup","dLevel","delay","mouseenter","focusin",25,"_templateObject","_templateObject2","_templateObject3","WebCode","getLines","stylePlaceLines","cachedStyleLines","styleExtractLines","getSectionPasteComment","basename","scriptPlaceLines","cachedScriptLines","scriptExtractLines","htmlExtractLines","getBodyHtmlSectionLines","getFullHtmlSectionLines","cachedHeadLines","cachedBodyLines","_styleLines","styleLines","_headLines","headLines","_bodyLines","bodyLines","_scriptLines","scriptLines","wrappers","pushWrapper",27,"log10","log","LN10","haystack","needle","start","includes","repeat",30,"Feature","AudioContext","_Feature","getJsInitLines","featureContext","prevNodeJsNames","audioContext","38",31,"FilterOptionOutput","BiquadFilterOptionOutput","_FilterOptionOutput","computeCoefs","sampleRate","frequency","detune","Q","gain","post20160415","F_s","f_0","G","A","omega_0","PI","alpha_Q","sin","Q_dB","alpha_B","sqrt","alpha_Q_dB","S","alpha_S","c","cos","aSA2","feedforward","feedback","$cloneUi","writeCloneButton","runIfCanCreateAudioContext","fixedOption","coefs","removeData","getFilterNodes","biquadNode","createBiquadFilter","39",32,"Canvas","getStyleLines","canvasContextProperty","colorOption","cs","color","isBlack","every","getHtmlLines","canvas","width","canvasVolumeGradient","getJsLoopPreLines","background",33,"BaseCodeOutput","_BaseCodeOutput","$warnings","isInteresting","$warning","$section","add","context","source","panner","biquad","iir","convolver","peaking","destination","compressor","analyser","splitter","buffer",34,"Loader","SourceSet","FilterSequence","Destination","BaseWebCode","Code","_BaseWebCode","features","loader","sources","filters","feature","requestFeatureContext","alignedInputs","_NoseWrapLines$b","_this3","getNodeJsNames","getJsLoopVisLines","36","40","43","48",35,"CollectionFeature","entryOptions","entryCounts","entryOption","entryClass","getEntryClass","entryCounts2","audioProcessing","enabled","waveform","frequencies","volume","connectSampleToJsNames","connectSampleToCompressor","useDirectAnalyser","useSplitAnalyser","getAnalyserNodeLines","jsName","connectArgs","prevNodeJsName","logFftSize","getCompressorLines","nextNodeJsName","getDirectAnalyserLines","comment","getSplitAnalyserLines","getDestinationLines","getEnterFunctionLines","pushContextForEach","getExitFunctionLines","getVisualizeVolumeLines","getVolumeMeterLines","analyserNodeJsName","xOffset","stereo","getVisualizeFrequenciesLines","nBars","cutoff","base","colorInput","coloringInput","fillStyle","coloring","outline","writeOutline","getVisualizeWaveformLines","conditionAndNameAndFn","condition","fn","pushContextForAll",37,"EqualizerFilterOptionOutput","EqualizerFilter","freq","45","pad","maxNGridLines","fontSize","fontOffset","minFrequencyInLogMode","linearFrequencyArray","logFrequencyArray","logFrequencyArrayLinearLimit0","logFrequencyArrayLinearLimit1","magnitudeArray","phaseArray","magnitudeArray0","phaseArray0","mix","_GroupOptionOutput","$freqResponseUi","isFreqResponseUiShown","magnitudeCanvasContext","phaseCanvasContext","magnitudeLogScale","frequencyLogScale","updatePlots","filterNodes","maxAbs","removeNans","array","interpolate","i0","i1","hasStartValue","hasEndValue","v0","v1","nanStart","isFinite","frequencyArray","filterNode","getFrequencyResponse","_i8","_i9","k","plotResponse","canvasContext","units","enforcedCenter","enforcedRange","enforcedFloor","majorGridLineTest","_Math","_Math2","setPlotRange","min0","max0","ph","minArr","maxArr","minArrCentered","maxArrCentered","calcY","getGridNumbers","numLogs","Infinity","tk","tp","ceil","dv","drawGrid","visibleNumbers","calcPosition","labelLimit","_Math3","translate","font","textAlign","getLabel","labelWidth","measureText","_i6","round","drawLine","beginPath","moveTo","lineTo","stroke","majorGridLine","strokeStyle","setLineDash","lineWidth","fillText","restore","drawYGrid","yGridNumbersAndPrecision","yVisibleGridNumbers","drawXGrid","yLabelWidth","rotate","calcX","xGridNumbersAndPrecision","xVisibleGridNumbers","drawGraph","_i7","clearRect","delayedUpdate","$frOption","$button","replaceWith","$magnitudeCanvas","$phaseCanvas","getContext","$ui","errorMessage","initAudioContext","webkitAudioContext","Float32Array","maxFrequency","log10minFrequency","log10maxFrequency","_templateObject4","_templateObject5","_templateObject6","camelCase","Filter","getPropertyOptionName","property","getPropertyInputHtmlName","propertyName","nSuffix","getPropertyInputJsName","hasRangeInputs","nodeProperties","input","getHtmlPropertyLines","skip","inputHtmlName","fmtAttrs","fmtLabels","minMax","_WrapLines$b","nodeJsName","ctxCreateMethodName","nodeJsNames","SinglePathFilter","_Filter","nodePropertyJsName","inputJsName","eventProp","PassiveByDefaultSinglePathFilter","_SinglePathFilter","_this8","filterClasses","_PassiveByDefaultSing","_PassiveByDefaultSing2","_SinglePathFilter2","BiquadFilter","typeUsesQ","typeUsesGain","_SinglePathFilter3","_this13","_Filter2","messageHtmlName","reverb","wetGainNodeJsName","dryGainNodeJsName","loaderOnError","equalizer","_Filter3","getFrequencyOption","allGainsConstant","singleFreq","affectedFreqsAndOptions","fo","noGainsConstant","getJsData","getJsDataItem","getJsLoopLines","inputHtmlNameExpr","setConnectSampleToJsNames","connectToNodeJsName","constLines","varLines","outerNodeJsName","_this18","filter","_CollectionFeature","skipNode","connectToNodeJsNames",41,"webaudioSpec","webaudioIssue","webaudioDetect","enColors","ruColors","options.sources","options.sources.{audio,video}","options.sources.{audio,video}.add","options.sources.sample","options.sources.sample.add","options.sources.sample.buffer.loading","options.sources.sample.buffer.error","options.sources.sample.repeat","options.sources.sample.interval","options.sources.sample.randomShift","options.sources.sample.pitch","options.sources.sample.randomPitch","options.sources.sample.gain","options.sources.sample.randomGain","options.sources.{audio,video,sample}.url","options.sources.video.{width,height}","options.filters","options.filters.gain","options.filters.gain.add","options.filters.gain.gain","options.filters.panner","options.filters.panner.add","options.filters.panner.pan","options.filters.biquad","options.filters.biquad.add","options.filters.biquad.type","options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}","options.filters.biquad.frequency","options.filters.biquad.detune","options.filters.biquad.Q","options.filters.biquad.gain","options.filters.iir","options.filters.iir.add","options.filters.iir.feedforward","options.filters.iir.feedforward.b","options.filters.iir.feedforward.b.add","options.filters.iir.feedback","options.filters.iir.feedback.a","options.filters.iir.feedback.a.add","options.filters.convolver","options.filters.convolver.add","options.filters.convolver.url","options.filters.convolver.reverb","options.filters.convolver.buffer.loading","options.filters.convolver.buffer.error","options.filters.equalizer","options.filters.equalizer.add","options.filters.equalizer.gain{60,170,350,1000,3500,10000}","options.destination","options.destination.compressor","options.destination.compressor.enabled","options.destination.{waveform,frequencies}","options.destination.{waveform,frequencies}.enabled","options.destination.waveform.width","options.destination.waveform.color","options.destination.waveform.color.{r,g,b,a}","options.destination.frequencies.cutoff","options.destination.frequencies.base","options.destination.frequencies.base.{bottom,middle}","options.destination.frequencies.coloring","options.destination.frequencies.coloring.component","options.destination.frequencies.coloring.spectral","options.destination.frequencies.coloringInput","options.destination.frequencies.coloringInput.{amplitude,frequency}","options.destination.frequencies.outline","options.destination.frequencies.outline.enabled","options.destination.frequencies.outline.width","options.destination.frequencies.outline.color","options.destination.frequencies.outline.color.{r,g,b,a}","options.destination.volume","options.destination.volume.enabled","options.destination.volume.stereo","options.destination.analyser","options.destination.analyser.logFftSize","options.canvas","options.canvas.{width,height}","options.canvas.background","options.canvas.background.type","options.canvas.background.type.{clear,filled}","options.canvas.background.color","options.canvas.background.color.{r,g,b,a}","options.loader","options.loader.errors","options.loader.errors.none","options.loader.errors.network","options.loader.errors.http","options-info.destination.analyser.logFftSize","options-info.canvas.background.color.a","options-output.input","options-output.range","options-output.filter.frequencyResponse","options-output.filter.magnitude","options-output.filter.phase","options-output.filter.logMagnitude","options-output.filter.logFrequency","options-output.filter.contextError","options-output.filter.nodeError","options-output.filter.biquad.clone","options-output.filter.biquad.clone.{pre,post}","options-output.filter.biquad.clone.info","options-output.show","options-output.hide","code-output.warning.jsfiddle-run","code-output.warning.interesting","code.title","label.sources.sample.play","label.destination.compressor","comment.context","comment.sources.audio","comment.sources.video","comment.sources.sample","comment.filters.gain","comment.filters.panner","comment.filters.biquad","comment.filters.iir","comment.filters.convolver","comment.filters.convolver.single","comment.filters.equalizer","comment.filters.equalizer.single","comment.destination","comment.destination.compressor","comment.destination.analyser","comment.destination.analyser.{waveform,frequencies,waveform+frequencies}","comment.destination.analyser.split","units.pixel.a","units.pixel.{1,2}","units.hertz.a","units.hertz.{1,2}","units.decibel.a","units.decibel.{1,2}","units.second.a","units.second.{1,2}","options.filters.biquad.type.lowpass","options.filters.biquad.type.highpass","options.filters.biquad.type.bandpass","options.filters.biquad.type.{lowshelf,highshelf,peaking}","options.filters.biquad.type.notch","options.filters.biquad.type.allpass","units.pixel.{1,2,5}","units.hertz.{1,2,5}","units.decibel.{1,2,5}","units.second.{1,2,5}",42,"IIRFilterOptionOutput","createIIRFilter","errors",44,"idCounter","i18ns","$container","codeOutput","optionsOutput","46","47","LiveNumber","dataValue","dataMin","dataMax","dataInput","defaultMin","defaultMax","_min","_max","_input","_$range","updateInternalVisibility","exportHelper","src","$range","LiveInt","_Option$LiveNumber","LiveFloat","_Option$LiveNumber2","FixedLiveSelect","LiveSelect","_Option$Select","AnyFloat","_Option$Group","lowpass","highpass","bandpass","notch","allpass","lowshelf","highshelf","IIRFilterCoefs","_Option$Array","_this7","IIRFilter","_Option$Group2","_Option$Group3","Filters","_Option$Array2","BaseOptionsOutput","FiltersOptionOutput","_ArrayOptionOutput","$subOutput","IIRFilterCoefsOptionOutput","_ArrayOptionOutput2","updateArrayEntryLabels","_BaseOptionsOutput","writeMinMaxInput","minOrMax","$inputCheckbox","$rangeMinInput","$rangeMaxInput","BaseOptions","_BaseOptions","destination.waveform.enabled","destination.frequencies.enabled","destination.frequencies.outline.enabled","destination.volume.enabled","canvas.background.type","Source","getElementHtmlLines","elementHtmlName","sourceClasses","audio","_Source","video","_Source2","sample","_Source3","fmtMul","fmtNum","getSampleLines","startOptions","randomValue","baseOption","randomOption","random","lastNodeName","pitch","randomPitch","randomGain","getOnClickLines","interval","randomShift","getOnDecodeLines","getOnErrorLines","leadLines","midLines","endLines"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    'use strict';\n    function ___babelHelper___typeof(obj) {\n        return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n    }\n    function ___babelHelper___createClass(Constructor, protoProps, staticProps) {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if ('value' in descriptor)\n                    descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n        if (protoProps)\n            defineProperties(Constructor.prototype, protoProps);\n        if (staticProps)\n            defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n    function ___babelHelper___classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n    function ___babelHelper___possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n        }\n        return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n    }\n    function ___babelHelper___inherits(subClass, superClass) {\n        function defaults(obj, defaults) {\n            var keys = Object.getOwnPropertyNames(defaults);\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = Object.getOwnPropertyDescriptor(defaults, key);\n                if (value && value.configurable && obj[key] === undefined) {\n                    Object.defineProperty(obj, key, value);\n                }\n            }\n            return obj;\n        }\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n        }\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass)\n            defaults(subClass, superClass);\n    }\n    function ___babelHelper___taggedTemplateLiteralLoose(strings, raw) {\n        strings.raw = raw;\n        return strings;\n    }\n    ;\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                var ArrayOptionOutput = function () {\n                    function ArrayOptionOutput(option, writeOption, i18n, generateId) {\n                        var _this = this;\n                        ___babelHelper___classCallCheck(this, ArrayOptionOutput);\n                        this.option = option;\n                        this.$dragged = null;\n                        this.$entries = $('<div>').append(option.entries.map(function (subOption) {\n                            return _this.writeDraggableSubOption(subOption, writeOption, i18n);\n                        }));\n                        var $buttons = $('<div class=\\'buttons\\'>');\n                        option.availableTypes.forEach(function (type, i) {\n                            if (i)\n                                $buttons.append(' ');\n                            $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                //option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\n                                _this.$entries.append(_this.writeDraggableSubOption(option.makeEntry(type), writeOption, i18n));\n                                _this.updateArrayEntries();\n                            }));\n                        });\n                        this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>', this.$entries, $buttons);\n                    }\n                    ArrayOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return true;\n                    };\n                    ArrayOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        this.option.entries = this.$entries.children().map(function () {\n                            return $(this).data('option');\n                        }).get();\n                    };\n                    ArrayOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var _this2 = this;\n                        // have to make drag handler 'draggable', not the whole item\n                        // because inputs and labels don't like to be inside 'draggable'\n                        // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                        var moveUp = function ($moved) {\n                            $moved.prev().before($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var moveDown = function ($moved) {\n                            $moved.next().after($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var attemptDelete = function ($entry) {\n                            if (_this2.canDeleteEntry($entry)) {\n                                $entry.remove();\n                                _this2.updateArrayEntries();\n                            }\n                        };\n                        var This = this;\n                        return $('<div class=\\'draggable-with-handle\\'>').data('option', subOption).append(writeOption(subOption), ' ', $('<span draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag.tip') + '\\'>').append('<span>' + i18n('options-output.drag') + '</span>').on('dragstart', function (ev) {\n                            This.$dragged = $(this).parent();\n                            ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                            ev.originalEvent.dataTransfer.setData('Text', name);\n                            if (ev.originalEvent.dataTransfer.setDragImage) {\n                                // doesn't work in IE\n                                ev.originalEvent.dataTransfer.setDragImage(This.$dragged[0], 0, 0);\n                            }\n                            setTimeout(function () {\n                                This.$dragged.addClass('ghost');\n                            }, 0);\n                        }).on('touchstart', function (ev) {\n                            var $sorted = $(this).parent();\n                            $sorted.addClass('ghost');\n                            return false;    // disable touch panning on Firefox\n                        }).on('touchmove', function (ev) {\n                            var $sorted = $(this).parent();\n                            var h = $sorted.height();\n                            var t = $sorted.offset().top;\n                            var y = ev.originalEvent.touches[0].pageY;\n                            // TODO test if length of touches is 1\n                            var $prev = $sorted.prev();\n                            if ($prev.length && y < t && y - $prev.offset().top < h) {\n                                moveUp($sorted);\n                            }\n                            var $next = $sorted.next();\n                            if ($next.length && y > t + h && y - $next.offset().top > $next.height() - h) {\n                                moveDown($sorted);\n                            }\n                            return false;    // disable touch panning\n                        }).on('touchend touchcancel', function (ev) {\n                            var $sorted = $(this).parent();\n                            $sorted.removeClass('ghost');\n                        }).keydown(function (ev) {\n                            var $handle = $(this);\n                            var $sorted = $handle.parent();\n                            if (ev.keyCode == 38) {\n                                moveUp($sorted);\n                                $handle.focus();\n                                return false;\n                            } else if (ev.keyCode == 40) {\n                                moveDown($sorted);\n                                $handle.focus();\n                                return false;\n                            }\n                        }), ' ', $('<button class=\\'delete\\' title=\\'' + i18n('options-output.delete.tip') + '\\'>').append('<span>' + i18n('options-output.delete') + '</span>').click(function () {\n                            attemptDelete($(this).parent());\n                        }).keydown(function (ev) {\n                            if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                attemptDelete($(this).parent());\n                                return false;\n                            }\n                        })).on('dragover', function (ev) {\n                            ev.preventDefault();\n                            ev.originalEvent.dataTransfer.dropEffect = 'move';\n                            var $target = $(this);\n                            if (This.$dragged) {\n                                if ($target.next().is(This.$dragged)) {\n                                    var dh = This.$dragged.height();\n                                    var y = ev.pageY - $target.offset().top;\n                                    if (y < dh) {\n                                        moveUp(This.$dragged);\n                                    }\n                                } else if ($target.nextAll().is(This.$dragged)) {\n                                    moveUp(This.$dragged);\n                                } else if ($target.prev().is(This.$dragged)) {\n                                    var th = $target.height();\n                                    var _dh = This.$dragged.height();\n                                    var _y = ev.pageY - $target.offset().top;\n                                    if (_y > th - _dh) {\n                                        moveDown(This.$dragged);\n                                    }\n                                } else if ($target.prevAll().is(This.$dragged)) {\n                                    moveDown(This.$dragged);\n                                }\n                            }\n                        }).on('drop', function (ev) {\n                            ev.preventDefault();\n                        }).on('dragend', function (ev) {\n                            ev.preventDefault();\n                            if (This.$dragged) {\n                                This.$dragged.removeClass('ghost');\n                                This.$dragged = null;\n                            }\n                        });\n                    };\n                    return ArrayOptionOutput;\n                }();\n                module.exports = ArrayOptionOutput;\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'code-output';\n                        var additionalStrings = {\n                            en: {\n                                'save': 'Save source code',\n                                'run': 'Run in new window',\n                                'open.codepen': 'Open in CodePen',\n                                'open.jsfiddle': 'Open in JSFiddle',\n                                'open.plunker': 'Open in Plunker',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': 'embedded in HTML source code',\n                                'mode.full': 'complete HTML',\n                                'mode.body': 'only HTML body',\n                                'mode.embed': 'embed in HTML',\n                                'mode.paste': 'extract to paste into HTML later',\n                                'mode.file': 'extract to load as external resource',\n                                'formatting': 'Formatting',\n                                'formatting.indent': 'indent with tabs',\n                                'formatting.indentNumber': 'spaces per indent',\n                                'formatting.jsSemicolons': 'JavaScript semicolons',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.'\n                            },\n                            ru: {\n                                'save': '  ',\n                                'run': '   ',\n                                'open.codepen': '  CodePen',\n                                'open.jsfiddle': '  JSFiddle',\n                                'open.plunker': '  Plunker',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': '   HTML',\n                                'mode.full': '',\n                                'mode.body': ' <code>body</code>',\n                                'mode.embed': '  HTML',\n                                'mode.paste': '     HTML',\n                                'mode.file': '      ',\n                                'formatting': '',\n                                'formatting.indent': '   tab',\n                                'formatting.indentNumber': '  ',\n                                'formatting.jsSemicolons': '<code>;</code>  JavaScript',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (  <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>)  .   .'\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        3: [\n            function (require, module, exports) {\n                var debounce = require(8);\n                var detailsPolyfill = require(5);\n                var getHtmlDataUri = function (html) {\n                    return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                };\n                var makeObjectWithSetters = function (values, setCallback) {\n                    var obj = {};\n                    var _loop = function (prop) {\n                        Object.defineProperty(obj, prop, {\n                            get: function () {\n                                return values[prop];\n                            },\n                            set: function (v) {\n                                values[prop] = v;\n                                setCallback();\n                            }\n                        });\n                    };\n                    for (var prop in values) {\n                        _loop(prop);\n                    }\n                    return obj;\n                };\n                var CodeOutput = function () {\n                    function CodeOutput(generateCode, i18n) {\n                        var _this = this;\n                        ___babelHelper___classCallCheck(this, CodeOutput);\n                        this.formatting = makeObjectWithSetters(this.defaultFormatting, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this.sectionModes = makeObjectWithSetters({\n                            html: 'full',\n                            css: 'embed',\n                            js: 'embed'\n                        }, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this._code = generateCode();\n                        this.update = debounce(function () {\n                            _this._code = generateCode();\n                            _this.applyUpdatedCode(i18n);\n                        }, 200);\n                        this.initDomProps();\n                        var writeFormattingControls = function () {\n                            var This = _this;\n                            var $indentCheckbox = undefined, $indentNumber = undefined;\n                            var updateIndent = function () {\n                                var indent = '\\t';\n                                if (!$indentCheckbox.prop('checked')) {\n                                    var n = 4;\n                                    if ($indentNumber[0].checkValidity()) {\n                                        n = Number($indentNumber.val());\n                                    }\n                                    indent = require(29)(' ')(n);\n                                }\n                                _this.formatting.indent = indent;\n                            };\n                            return $('<details>').append('<summary>' + i18n('code-output.formatting') + '</summary>', $('<div>').append($('<label>').append($indentCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.indent == '\\t').change(updateIndent), ' ' + i18n('code-output.formatting.indent'))), $('<div>').append($('<label>').append($indentNumber = $('<input type=\\'number\\' min=\\'0\\' max=\\'32\\' required>').val(_this.formatting.indent == '\\t' ? 4 : _this.formatting.indent.length).on('input change', updateIndent), ' ' + i18n('code-output.formatting.indentNumber'))), $('<div>').append($('<label>').append($('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.jsSemicolons).change(function () {\n                                This.formatting.jsSemicolons = this.checked;\n                            }), ' ' + i18n('code-output.formatting.jsSemicolons')))).each(detailsPolyfill);\n                        };\n                        var writeSection = function (sectionName) {\n                            return $('<details open>').append(_this.writeSectionSummary(sectionName, i18n), _this.$sectionCode[sectionName] = $('<div class=\\'code\\'>')).each(detailsPolyfill);\n                        };\n                        var $output = $('<div class=\\'code-output\\'>').append(this.writeButtons(i18n)).append(writeFormattingControls(), writeSection('html'), writeSection('css'), writeSection('js'));\n                        if (!window.hljs) {\n                            $output.append('<p>' + i18n('code-output.warning.no-hljs') + '</p>');\n                        }\n                        $output.append(this.writeButtons(i18n));\n                        this.applyUpdatedCode(i18n);\n                        // public interface:\n                        // this.update\n                        this.$output = $output;\n                    }\n                    // private interface:\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        this.$sectionCode = {};\n                        this.$saveButtons = {};\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\n                        var sections = this.code.extractSections(this.sectionModes);\n                        for (var sectionName in sections) {\n                            if (this.sectionModes[sectionName] == 'embed') {\n                                this.$sectionCode[sectionName].empty().append('<p>' + i18n('code-output.embedded') + '</p>');\n                            } else {\n                                var $code = undefined;\n                                this.$sectionCode[sectionName].empty().append($('<pre>').append($code = $('<code class=\\'' + sectionName + '\\'>')));\n                                $code.html(sections[sectionName].getHtml(this.formatting).join('\\n'));\n                                if (window.hljs) {\n                                    hljs.highlightBlock($code[0]);\n                                }\n                            }\n                            if (sectionName != 'html') {\n                                // extractable section\n                                this.$saveButtons[sectionName].prop('disabled', this.sectionModes[sectionName] == 'embed');\n                            }\n                        }\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        var This = this;\n                        var postData = function (url, target, data) {\n                            var $form = $('<form method=\\'post\\' action=\\'' + url + '\\' target=\\'' + target + '\\'>');\n                            for (var name in data) {\n                                $form.append($('<input type=\\'hidden\\'>').attr('name', name).val(data[name]));\n                            }\n                            $form.appendTo('body').submit().remove();\n                        };\n                        return $('<div>').append($('<button type=\\'button\\'>' + i18n('code-output.run') + '</button>').click(function () {\n                            var html = This.code.get(This.formatting).join('\\n');\n                            if (navigator.msSaveOrOpenBlob) {\n                                // has drawbacks:\n                                // * Firefox and Chrome have trouble showing the source\n                                // * weird bug in Firefox:\n                                //   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\n                                // * Firefox shows url of a generator page\n                                var w = window.open('', 'generatedCode');\n                                w.document.open();\n                                w.document.write(html);\n                                w.document.close();\n                            } else {\n                                // has drawbacks:\n                                // * doesn't work in IE b/c they decided it's security risk\n                                // * long url\n                                window.open(getHtmlDataUri(html), 'generatedCode');\n                            }\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.codepen') + '</button>').click(function () {\n                            // http://blog.codepen.io/documentation/api/prefill/\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://codepen.io/pen/define/', 'codepenGeneratedCode', {\n                                data: JSON.stringify({\n                                    html: getSection('html'),\n                                    css: getSection('css'),\n                                    js: getSection('js'),\n                                    title: This.code.title\n                                })\n                            });\n                        }), // doesn't work?\n                        ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.jsfiddle') + '</button>').click(function () {\n                            // http://doc.jsfiddle.net/api/post.html\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://jsfiddle.net/api/post/library/pure/', 'jsfiddleGeneratedCode', {\n                                html: getSection('html'),\n                                css: getSection('css'),\n                                js: getSection('js'),\n                                title: This.code.title,\n                                wrap: 'b'\n                            });\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.plunker') + '</button>').click(function () {\n                            var _postData;\n                            // https://github.com/angular/angular.js/blob/489835dd0b36a108bedd5ded439a186aca4fa739/docs/app/src/examples.js#L139-L157\n                            var sections = This.code.extractSections({\n                                html: 'full',\n                                css: 'file',\n                                js: 'file'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            postData('http://plnkr.co/edit/?p=preview', 'plunkerGeneratedCode', (_postData = {}, _postData['files[index.html]'] = getSection('html'), _postData['files[' + sections['css'].filename + ']'] = getSection('css'), _postData['files[' + sections['js'].filename + ']'] = getSection('js'), _postData['private'] = true, _postData));\n                        }));\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var This = this;\n                        var $summary = $('<summary>' + i18n('code-output.section.' + sectionName) + '</summary>');\n                        $summary.append(' ', $('<select>').append((sectionName == 'html' ? [\n                            'full',\n                            'body'\n                        ] : [\n                            'embed',\n                            'paste',\n                            'file'\n                        ]).map(function (mode) {\n                            return $('<option>').val(mode).html(i18n('code-output.mode.' + mode));\n                        })).val(this.sectionModes[sectionName]).change(function () {\n                            This.sectionModes[sectionName] = this.value;\n                        }), ' ', // doesn't work in IE\n                        //$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\n                        //\t// yes I want a button, but download attr is only available for links\n                        //\t$(this).attr('href',getHtmlDataUri(\n                        //\t\tsection.get(this.formatting).join(\"\\n\")\n                        //\t))\n                        //})\n                        this.$saveButtons[sectionName] = $('<button type=\\'button\\'>' + i18n('code-output.save') + '</button>').click(function () {\n                            var section = This.code.extractSections(This.sectionModes)[sectionName];\n                            // http://stackoverflow.com/a/24354303\n                            var blob = new Blob([section.get(This.formatting).join('\\n')], { type: section.mimeType });\n                            if (navigator.msSaveOrOpenBlob) {\n                                navigator.msSaveOrOpenBlob(blob, section.filename);\n                            } else {\n                                var $a = $('<a>').attr('download', section.filename).attr('href', URL.createObjectURL(blob)).appendTo('body');\n                                $a.get(0).click();\n                                $a.remove();\n                            }\n                        }));\n                        return $summary;\n                    };\n                    ___babelHelper___createClass(CodeOutput, [\n                        {\n                            key: 'code',\n                            get: function () {\n                                this.update.flush();\n                                return this._code;\n                            }    // extend/override fns:\n                        },\n                        {\n                            key: 'defaultFormatting',\n                            get: function () {\n                                return {\n                                    indent: '\\t',\n                                    jsSemicolons: false\n                                };\n                            }\n                        }\n                    ]);\n                    return CodeOutput;\n                }();\n                module.exports = CodeOutput;\n            },\n            {\n                '29': 29,\n                '5': 5,\n                '8': 8\n            }\n        ],\n        4: [\n            function (require, module, exports) {\n                var CodeSection = function () {\n                    function CodeSection(filename, mimeType, lines) {\n                        ___babelHelper___classCallCheck(this, CodeSection);\n                        this.filename = filename;\n                        this.mimeType = mimeType;\n                        this.lines = lines;\n                    }\n                    CodeSection.prototype.get = function get(formatting) {\n                        return this.lines.get(formatting);\n                    };\n                    CodeSection.prototype.getHtml = function getHtml(formatting) {\n                        return this.lines.getHtml(formatting);\n                    };\n                    return CodeSection;\n                }();\n                module.exports = CodeSection;\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                var detailsSupported = 'open' in document.createElement('details');\n                // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\n                module.exports = function () {\n                    // to be called in .each()\n                    if (detailsSupported)\n                        return;\n                    var $details = $(this);\n                    var toggleOpen = function () {\n                        if (!$details.attr('open')) {\n                            $details.attr('open', '');\n                        } else {\n                            $details.removeAttr('open');\n                        }\n                    };\n                    var keyCodeEnter = 13;\n                    var keyCodeSpace = 32;\n                    var handleEvent = function (ev) {\n                        return $(ev.target).closest('summary, :input, a[href]').is('summary');\n                    };\n                    // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\n                    $details.addClass('polyfill').children('summary').attr('tabindex', 0).click(function (ev) {\n                        if (handleEvent(ev)) {\n                            toggleOpen();\n                        }\n                    }).keydown(function (ev) {\n                        if (handleEvent(ev) && (ev.keyCode == keyCodeEnter || ev.keyCode == keyCodeSpace)) {\n                            toggleOpen();\n                            return false;\n                        }\n                    });\n                };\n            },\n            {}\n        ],\n        6: [\n            function (require, module, exports) {\n                // assumes string is dot-separated, like this: \"some.html.id\"\n                var capitalize = require(7);\n                module.exports = function (s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                };\n            },\n            { '7': 7 }\n        ],\n        7: [\n            function (require, module, exports) {\n                // assumes string is lowercase\n                module.exports = function (s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                };\n            },\n            {}\n        ],\n        8: [\n            function (require, module, exports) {\n                // no options\n                module.exports = function (func, wait) {\n                    var timeoutId = null;\n                    var debounced = function () {\n                        clearTimeout(timeoutId);\n                        timeoutId = setTimeout(function () {\n                            timeoutId = null;\n                            func();\n                        }, wait);\n                    };\n                    debounced.flush = function () {\n                        if (timeoutId) {\n                            timeoutId = null;\n                            func();\n                        }\n                    };\n                    return debounced;\n                };\n            },\n            {}\n        ],\n        9: [\n            function (require, module, exports) {\n                module.exports = function (s) {\n                    var entityMap = {\n                        '&': '&amp;',\n                        '<': '&lt;',\n                        '>': '&gt;',\n                        '\"': '&quot;',\n                        '\\'': '&#39;'\n                    };\n                    // lodash also escapes `\n                    return String(s).replace(/[&<>\"']/g, function (m) {\n                        return entityMap[m];\n                    });\n                };\n            },\n            {}\n        ],\n        10: [\n            function (require, module, exports) {\n                var formatNumbersInternal = function (numbers, precision, keepDot, noPlus) {\n                    var maxPrecision = 0;\n                    if (keepDot) {\n                        maxPrecision = 1;\n                    }\n                    var hasNegative = false;\n                    for (var i in numbers) {\n                        var p = undefined;\n                        if (precision !== undefined) {\n                            p = precision;\n                        } else if (numbers[i].precision !== undefined) {\n                            p = numbers[i].precision;\n                        } else {\n                            throw new Error('formatNumbers received no precision');\n                        }\n                        var number = Number(numbers[i]);\n                        var s = number.toFixed(p);\n                        if (Number(s) < 0) {\n                            // protects against negative zero\n                            hasNegative = true;\n                        }\n                        if (p > 0) {\n                            p -= s.match(/0*$/)[0].length;\n                        }\n                        if (p > maxPrecision) {\n                            maxPrecision = p;\n                        }\n                    }\n                    var ss = Array.isArray(numbers) ? [] : {};\n                    for (var _i in numbers) {\n                        var _number = Number(numbers[_i]);\n                        var _s = _number.toFixed(maxPrecision);\n                        if (Number(_s) >= 0 && _s.charAt(0) == '-') {\n                            // protects against negative zero\n                            _s = _s.slice(1);\n                        }\n                        if (!noPlus && hasNegative && _number > 0) {\n                            _s = '+' + _s;\n                        }\n                        ss[_i] = _s;\n                    }\n                    return ss;\n                };\n                var formatNumbers = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.html = function (number, precision) {\n                    return formatNumbersInternal(number, precision, false, true);\n                };\n                formatNumbers.js = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.glsl = function (number, precision) {\n                    return formatNumbersInternal(number, precision, true);\n                };\n                module.exports = formatNumbers;\n            },\n            {}\n        ],\n        11: [\n            function (require, module, exports) {\n                var GroupOptionOutput = function GroupOptionOutput(option, writeOption, i18n, generateId) {\n                    ___babelHelper___classCallCheck(this, GroupOptionOutput);\n                    this.option = option;\n                    this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append(option.entries.map(writeOption));\n                };\n                module.exports = GroupOptionOutput;\n            },\n            {}\n        ],\n        12: [\n            function (require, module, exports) {\n                module.exports = function (inStrings) {\n                    var strings = {};\n                    var expandRegexp = /^([^{]*)\\{([^}]*)\\}(.*)$/;\n                    function expandIdAndString(id, string) {\n                        var idMatch = expandRegexp.exec(id);\n                        if (idMatch) {\n                            (function () {\n                                var idStart = idMatch[1];\n                                var idMidsStr = idMatch[2];\n                                var idEnd = idMatch[3];\n                                var idMids = idMidsStr.split(',');\n                                var stringMatch = expandRegexp.exec(string);\n                                if (stringMatch) {\n                                    (function () {\n                                        var stringStart = stringMatch[1];\n                                        var stringMidsStr = stringMatch[2];\n                                        var stringEnd = stringMatch[3];\n                                        var stringMids = stringMidsStr.split(',');\n                                        idMids.forEach(function (idMid, i) {\n                                            if (stringMidsStr != '') {\n                                                var stringMid = stringMids[i];\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + stringMid + stringEnd);\n                                            } else {\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + idMid + stringEnd);\n                                            }\n                                        });\n                                    }());\n                                } else {\n                                    idMids.forEach(function (idMid) {\n                                        expandIdAndString(idStart + idMid + idEnd, string);\n                                    });\n                                }\n                            }());\n                        } else {\n                            strings[id] = string;\n                        }\n                    }\n                    for (var id in inStrings) {\n                        expandIdAndString(id, inStrings[id]);\n                    }\n                    return strings;\n                };\n            },\n            {}\n        ],\n        13: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        for (var id in strings) {\n                            strings[id] = strings[id].replace(/\\[\\[(.*?)\\]\\]/g, function (match, p1) {\n                                var link = undefined, text = undefined;\n                                var i = p1.indexOf('|');\n                                if (i < 0) {\n                                    link = p1;\n                                    text = p1;\n                                } else {\n                                    link = p1.slice(0, i);\n                                    text = p1.slice(i + 1);\n                                }\n                                return '<a href=\\'https://' + lang + '.wikipedia.org/wiki/' + link.replace(/ /g, '_') + '\\'>' + text + '</a>';\n                            });\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        14: [\n            function (require, module, exports) {\n                var escape = require(9);\n                module.exports = function (langStrings) {\n                    return function (lang) {\n                        var defaultLang = 'en';\n                        lang = lang || defaultLang;\n                        lang = lang.split('-')[0];\n                        // get primary language subtag\n                        var strings = langStrings[lang];\n                        if (strings === undefined) {\n                            lang = defaultLang;\n                            strings = langStrings[lang];\n                        }\n                        var i18n = function (id) {\n                            if (strings[id] !== undefined) {\n                                return strings[id];\n                            } else {\n                                throw new Error('undefined string ' + id);\n                            }\n                        };\n                        i18n.lang = lang;\n                        i18n.has = function (id) {\n                            return strings[id] !== undefined;\n                        };\n                        if (lang == 'en') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (require(28)(ns    /*:string*/)('.')) {\n                                    return '2';\n                                } else {\n                                    var nn = Number(n);\n                                    if (Math.abs(nn) == 1) {\n                                        return '1';\n                                    } else {\n                                        return '2';\n                                    }\n                                }\n                            };\n                        } else if (lang == 'ru') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212').replace('.', ',');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (require(28)(ns    /*:string*/)('.')) {\n                                    return '2';\n                                } else {\n                                    var teen = ns.slice(-2, -1) === '1';\n                                    if (ns.slice(-1) === '1' && !teen) {\n                                        return '1';\n                                    } else if (require(28)('234')(ns.slice(-1)) && !teen) {\n                                        return '2';\n                                    } else {\n                                        return '5';\n                                    }\n                                }\n                            };\n                        }\n                        i18n.plural = function (n, id) {\n                            return this(id + '.' + this.pluralSuffix(n));\n                        };\n                        i18n.numberWithUnits = function (n, unit, abbrFn) {\n                            if (abbrFn === undefined) {\n                                // codegen needs its own fn\n                                abbrFn = function (abbr, expansion) {\n                                    return '<abbr title=\\'' + escape(expansion) + '\\'>' + abbr + '</abbr>';\n                                };    // expansion is html for stuff like s^(-1)\n                            }\n                            var s = this.number(n);\n                            if (unit !== undefined) {\n                                if (unit.length == 1 && /^\\W/.test(unit)) {\n                                    s += unit;\n                                } else {\n                                    s += ' ';\n                                    // nbsp\n                                    var abbr = undefined;\n                                    if (unit == '1/second') {\n                                        abbr = i18n('units.second.a') + '<sup>\\u22121</sup>';\n                                    } else {\n                                        abbr = i18n('units.' + unit + '.a');\n                                    }\n                                    var expansion = this.plural(n, 'units.' + unit);\n                                    s += abbrFn(abbr, expansion);\n                                }\n                            }\n                            return s;\n                        };\n                        return i18n;\n                    };\n                };\n            },\n            {\n                '28': 28,\n                '9': 9\n            }\n        ],\n        15: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var InterleaveLines = function (_Lines) {\n                    ___babelHelper___inherits(InterleaveLines, _Lines);\n                    function InterleaveLines() {\n                        ___babelHelper___classCallCheck(this, InterleaveLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    InterleaveLines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var first = true;\n                        var fp = function () {\n                            if (first) {\n                                first = false;\n                            } else {\n                                out.push('');\n                            }\n                        };\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (subOut.length > 0) {\n                                    fp();\n                                    out.push.apply(out, subOut);\n                                }\n                            } else if (typeof item == 'string') {\n                                fp();\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                        }\n                        return out;\n                    };\n                    return InterleaveLines;\n                }(Lines);\n                module.exports = InterleaveLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        16: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var JsLines = function (_Lines) {\n                    ___babelHelper___inherits(JsLines, _Lines);\n                    function JsLines() {\n                        ___babelHelper___classCallCheck(this, JsLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    JsLines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        if (formatting.jsSemicolons) {\n                            return s.replace(/^;/, '');\n                        } else {\n                            return s.replace(/;$/, '');\n                        }\n                    };\n                    return JsLines;\n                }(Lines);\n                module.exports = JsLines;\n            },\n            { '17': 17 }\n        ],\n        17: [\n            function (require, module, exports) {\n                /*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\n                var escape = require(9);\n                var TO = {};\n                // TODO Symbol\n                var Lines = function () {\n                    // lines private interface:\n                    function Lines(data) {\n                        ___babelHelper___classCallCheck(this, Lines);\n                        if (!Array.isArray(data)) {\n                            throw new TypeError('attempted to construct Lines with non-array data argument');\n                        }\n                        this.data = data;\n                    }\n                    Lines.prototype.isDataEmpty = function isDataEmpty() {\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                if (!item.isEmpty()) {\n                                    return false;\n                                }\n                            } else if (typeof item == 'string') {\n                                return false;\n                            }\n                        }\n                        return true;\n                    };\n                    Lines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        return s;\n                    };\n                    Lines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var addTo = false;\n                        var _arr2 = this.data;\n                        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n                            var item = _arr2[_i2];\n                            if (item === TO) {\n                                addTo = true;\n                            } else if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (addTo && subOut.length > 0) {\n                                    out.push(out.pop() + subOut.shift());\n                                }\n                                out.push.apply(out, subOut);\n                                addTo = false;\n                            } else if (typeof item == 'string') {\n                                var s = this.processStringInGet(item, formatting);\n                                if (formatting.indent !== undefined && formatting.indent != '\\t') {\n                                    s = s.replace(/^(\\t)+/, function (match) {\n                                        return require(29)(formatting.indent)(match.length);\n                                    });\n                                }\n                                s = html ? escape(s) : s;\n                                if (addTo) {\n                                    out.push(out.pop() + s);\n                                } else {\n                                    out.push(s);\n                                }\n                                addTo = false;\n                            }\n                        }\n                        return out;\n                    };\n                    // lines public interface:\n                    Lines.b = function b() {\n                        var _this = this, _arguments = arguments;\n                        var data = [];\n                        var makeLines = function () {\n                            return new (Function.prototype.bind.apply(_this, [null].concat([data], Array.prototype.slice.call(_arguments))))();\n                        };\n                        var a = function () {\n                            return a.a.apply(a, arguments);\n                        };\n                        a.a = function () {\n                            data.push.apply(data, arguments);\n                            return this;\n                        };\n                        a.t = function () {\n                            data.push.apply(data, [TO].concat(Array.prototype.slice.call(arguments)));\n                            return this;\n                        };\n                        a.e = makeLines;\n                        a.ae = function () {\n                            return this.a.apply(this, arguments).e();\n                        };\n                        return a;\n                    };\n                    Lines.ba = function ba() {\n                        var _b;\n                        return (_b = this.b()).a.apply(_b, arguments);\n                    };\n                    Lines.be = function be() {\n                        return this.b().e();\n                    };\n                    Lines.bae = function bae() {\n                        var _b2;\n                        return (_b2 = this.b()).a.apply(_b2, arguments).e();\n                    };\n                    Lines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    Lines.prototype.get = function get(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, false);\n                    };\n                    Lines.prototype.getHtml = function getHtml(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, true);\n                    };\n                    Lines.prototype.count = function count() {\n                        return this.doGet({}, false).length;    // can be faster b/c don't need to output stuff\n                    };\n                    // TODO make HtmlLines\n                    Lines.html = function html(strings) {\n                        var _arguments2 = arguments;\n                        // html template tag\n                        // usage example for attributes: Lines.html`<input type=text value=${value}>`\n                        // usage example for elements: Lines.html`<option>${option}</option>`\n                        return strings.reduce(function (r, s, i) {\n                            var v = _arguments2[i];\n                            switch (r.slice(-1)) {\n                            case '=':\n                                if (v === false) {\n                                    return r.replace(/\\s+[a-zA-Z0-9-]+=$/, '') + s;    // TODO more permitting attr name regexp\n                                } else if (v === true) {\n                                    return r.replace(/=$/, '') + s;\n                                }\n                                v = String(v).replace(/&/g, '&amp;');\n                                if (v == '') {\n                                    return r.replace(/=$/, '') + s;\n                                } else if (!/[\\s\"'=<>`]/.test(v)) {\n                                    return r + v + s;\n                                } else if (!/'/.test(v)) {\n                                    return r + '\\'' + v + '\\'' + s;\n                                } else {\n                                    v = v.replace(/\"/g, '&quot;');\n                                    return r + '\"' + v + '\"' + s;\n                                }\n                            case '>':\n                                v = String(v).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n                                return r + v + s;\n                            }\n                            throw new Error('invalid character before substitution');\n                        });\n                    };\n                    return Lines;\n                }();\n                module.exports = Lines;\n            },\n            {\n                '29': 29,\n                '9': 9\n            }\n        ],\n        18: [\n            function (require, module, exports) {\n                var WrapLines = require(26);\n                var NoseWrapLines = function (_WrapLines) {\n                    ___babelHelper___inherits(NoseWrapLines, _WrapLines);\n                    function NoseWrapLines() {\n                        ___babelHelper___classCallCheck(this, NoseWrapLines);\n                        return ___babelHelper___possibleConstructorReturn(this, _WrapLines.apply(this, arguments));\n                    }\n                    NoseWrapLines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    NoseWrapLines.prototype.doGet = function doGet(formatting, html) {\n                        if (this.isEmpty()) {\n                            return [];\n                        } else {\n                            return _WrapLines.prototype.doGet.call(this, formatting, html);\n                        }\n                    };\n                    return NoseWrapLines;\n                }(WrapLines);\n                module.exports = NoseWrapLines;\n            },\n            { '26': 26 }\n        ],\n        19: [\n            function (require, module, exports) {\n                /*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    _class.make = function make(name) {\n                        var nScalars = 0, nArrays = 0, nObjects = 0;\n                        var scalarArg = undefined, arrayArg = [], objectArg = {};\n                        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                            rest[_key - 1] = arguments[_key];\n                        }\n                        for (var _i = 0; _i < rest.length; _i++) {\n                            var arg = rest[_i];\n                            if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                if (nScalars++ == 0)\n                                    scalarArg = arg;\n                            } else if (Array.isArray(arg)) {\n                                if (nArrays++ == 0)\n                                    arrayArg = arg;\n                            } else if (arg instanceof Object) {\n                                if (nObjects++ == 0)\n                                    objectArg = arg;\n                            }\n                        }\n                        var optionClass = this;\n                        var settings = this.collectArgs(scalarArg, arrayArg, objectArg);\n                        return function (data, parent, visibilityManager, makeEntry) {\n                            return new optionClass(name, settings, data, parent, visibilityManager, makeEntry);\n                        };\n                    };\n                    _class.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return settings;\n                    };\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class);\n                        this.parent = parent;\n                        this.name = name;\n                        this.fullName = name;\n                        if (parent && parent.fullName !== null) {\n                            this.fullName = parent.fullName + '.' + name;\n                        }\n                        this.updateCallbacks = [];\n                        this._$ = null;\n                        // visibility and callbacks\n                        this.isVisible = function () {\n                            return true;\n                        };\n                        if (visibilityManager) {\n                            visibilityManager.register(this);\n                            if (settings.visibilityData !== undefined) {\n                                if (settings.visibilityDataLogic != 'or') {\n                                    this.isVisible = function () {\n                                        for (var testName in settings.visibilityData) {\n                                            var value = visibilityManager.options[testName].value;\n                                            if (settings.visibilityData[testName].indexOf(value) < 0) {\n                                                return false;\n                                            }\n                                        }\n                                        return true;\n                                    };\n                                } else {\n                                    this.isVisible = function () {\n                                        for (var testName in settings.visibilityData) {\n                                            var value = visibilityManager.options[testName].value;\n                                            if (settings.visibilityData[testName].indexOf(value) >= 0) {\n                                                return true;\n                                            }\n                                        }\n                                        return false;\n                                    };\n                                }\n                                for (var testName in settings.visibilityData) {\n                                    visibilityManager.declareAffectedBy(this, testName);\n                                }\n                            }\n                        }\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.update = function update() {\n                        this.updateCallbacks.forEach(function (updateCallback) {\n                            updateCallback();\n                        });\n                        if (this.parent) {\n                            this.parent.update();\n                        }\n                    };\n                    _class.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.updateCallbacks.push(updateCallback);\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    ___babelHelper___createClass(_class, [{\n                            key: '$',\n                            get: function () {\n                                return this._$;\n                            },\n                            set: function ($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    ___babelHelper___inherits(_class2, _Option$Base);\n                    _class2.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.defaultValue === undefined)\n                            settings.defaultValue = scalarArg;\n                        return _Option$Base.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class2(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class2);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        _this.defaultValue = settings.defaultValue;\n                        if (typeof data == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    ___babelHelper___createClass(_class2, [{\n                            key: 'value',\n                            get: function () {\n                                return this._value;\n                            },\n                            set: function (value) {\n                                this._value = value;\n                                this.update();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.Boolean = function (_Option$Input) {\n                    ___babelHelper___inherits(_class3, _Option$Input);\n                    function _class3() {\n                        ___babelHelper___classCallCheck(this, _class3);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return _Option$Input.collectArgs.call(this, !!scalarArg, arrayArg, settings);\n                    };\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBoolean = function (_Option$Input2) {\n                    ___babelHelper___inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        ___babelHelper___classCallCheck(this, _class4);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function () {\n                                return value;\n                            },\n                            toString: function () {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.Factor = function (_Option$NonBoolean) {\n                    ___babelHelper___inherits(_class5, _Option$NonBoolean);\n                    _class5.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableValues === undefined)\n                            settings.availableValues = arrayArg;\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableValues[0];\n                        return _Option$NonBoolean.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class5(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class5);\n                        var _this4 = ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                        _this4.availableValues = settings.availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.Number = function (_Option$NonBoolean2) {\n                    ___babelHelper___inherits(_class6, _Option$NonBoolean2);\n                    // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableMin === undefined)\n                            settings.availableMin = arrayArg[0];\n                        if (settings.availableMax === undefined)\n                            settings.availableMax = arrayArg[1];\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableMin;\n                        return _Option$NonBoolean2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class6(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class6);\n                        var _this5 = ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean2.apply(this, arguments));\n                        _this5.availableMin = settings.availableMin;\n                        _this5.availableMax = settings.availableMax;\n                        _this5.unit = settings.unit;\n                        return _this5;\n                    }\n                    _class6.prototype.fix = function fix() {\n                        var fixed = _Option$NonBoolean2.prototype.fix.call(this);\n                        fixed.precision = this.precision;\n                        fixed.unit = this.unit;\n                        return fixed;\n                    };\n                    return _class6;\n                }(Option.NonBoolean);\n                Option.Collection = function (_Option$Base2) {\n                    ___babelHelper___inherits(_class7, _Option$Base2);\n                    _class7.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        return _Option$Base2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class7);\n                        var _this6 = ___babelHelper___possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = settings.descriptions.map(function (x) {\n                            var subName = x[1];\n                            var subData = undefined;\n                            if (typeof data == 'object')\n                                subData = data[subName];\n                            return makeEntry(x, subData, _this6, visibilityManager);    // nested option\n                        });\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        var _arr = this.entries;\n                        for (var _i2 = 0; _i2 < _arr.length; _i2++) {\n                            var entry = _arr[_i2];\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        }\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        var _arr2 = this.entries;\n                        for (var _i3 = 0; _i3 < _arr2.length; _i3++) {\n                            var entry = _arr2[_i3];\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        }\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    ___babelHelper___inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        ___babelHelper___classCallCheck(this, _class8);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$Boolean) {\n                    ___babelHelper___inherits(_class9, _Option$Boolean);\n                    function _class9() {\n                        ___babelHelper___classCallCheck(this, _class9);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Boolean.apply(this, arguments));\n                    }\n                    return _class9;\n                }(Option.Boolean);\n                Option.Select = function (_Option$Factor) {\n                    ___babelHelper___inherits(_class10, _Option$Factor);\n                    function _class10() {\n                        ___babelHelper___classCallCheck(this, _class10);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Factor.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.Factor);\n                Option.Text = function (_Option$Factor2) {\n                    ___babelHelper___inherits(_class11, _Option$Factor2);\n                    function _class11() {\n                        ___babelHelper___classCallCheck(this, _class11);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Factor2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.Factor);\n                Option.Int = function (_Option$Number) {\n                    ___babelHelper___inherits(_class12, _Option$Number);\n                    function _class12() {\n                        ___babelHelper___classCallCheck(this, _class12);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class12, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class12;\n                }(Option.Number);\n                Option.Float = function (_Option$Number2) {\n                    ___babelHelper___inherits(_class13, _Option$Number2);\n                    function _class13(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class13);\n                        var _this12 = ___babelHelper___possibleConstructorReturn(this, _Option$Number2.apply(this, arguments));\n                        if (settings.precision !== undefined) {\n                            _this12.precision = settings.precision;\n                        } else {\n                            if (_this12.availableMax >= 100) {\n                                _this12.precision = 1;\n                            } else if (_this12.availableMax >= 10) {\n                                _this12.precision = 2;\n                            } else {\n                                _this12.precision = 3;\n                            }\n                        }\n                        return _this12;\n                    }\n                    return _class13;\n                }(Option.Number);\n                Option.Root = function (_Option$Collection) {\n                    ___babelHelper___inherits(_class14, _Option$Collection);\n                    function _class14() {\n                        ___babelHelper___classCallCheck(this, _class14);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class14;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    ___babelHelper___inherits(_class15, _Option$Collection2);\n                    function _class15() {\n                        ___babelHelper___classCallCheck(this, _class15);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class15;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    ___babelHelper___inherits(_class16, _Option$Base4);\n                    // TODO consider extending Collection\n                    _class16.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        if (settings.typePropertyName === undefined)\n                            settings.typePropertyName = scalarArg;\n                        return _Option$Base4.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class16(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class16);\n                        var _this15 = ___babelHelper___possibleConstructorReturn(this, _Option$Base4.apply(this, arguments));\n                        _this15.availableConstructors = new Map();\n                        if (visibilityManager)\n                            visibilityManager.enterArray();\n                        var _arr3 = settings.descriptions;\n                        var _loop = function () {\n                            var x = _arr3[_i4];\n                            // TODO test array inside array\n                            var type = x[1];\n                            var ctor = function (subData) {\n                                return makeEntry(x, subData, _this15, visibilityManager);\n                            };\n                            _this15.availableConstructors.set(type, ctor);\n                        };\n                        for (var _i4 = 0; _i4 < _arr3.length; _i4++) {\n                            _loop();\n                        }\n                        if (visibilityManager)\n                            visibilityManager.exitArray();\n                        if (settings.typePropertyName !== undefined) {\n                            _this15.typePropertyName = settings.typePropertyName;\n                        } else {\n                            _this15.typePropertyName = 'type';\n                        }\n                        // populate array entries from data:\n                        _this15._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if (typeof data == 'object') {\n                            subDatas = data.value;\n                        }\n                        var defaultType = _this15.availableTypes[0];\n                        for (var _i5 = 0; _i5 < subDatas.length; _i5++) {\n                            var subData = subDatas[_i5];\n                            var subType = defaultType;\n                            if (typeof subData == 'object' && subData[_this15.typePropertyName] !== undefined) {\n                                subType = subData[_this15.typePropertyName];\n                            }\n                            var subCtor = _this15.availableConstructors.get(subType);\n                            if (subCtor) {\n                                _this15._entries.push(subCtor(subData));\n                            }\n                        }\n                        return _this15;\n                    }\n                    _class16.prototype.makeEntry = function makeEntry(type, data) {\n                        return this.availableConstructors.get(type)(data);\n                    };\n                    _class16.prototype.export = function _export() {\n                        var _this16 = this;\n                        var defaultType = this.availableTypes[0];\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != defaultType)\n                                    subData[_this16.typePropertyName] = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class16.prototype.fix = function fix() {\n                        var _this17 = this;\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if (typeof subFixed == 'object')\n                                    subFixed[_this17.typePropertyName] = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    ___babelHelper___createClass(_class16, [\n                        {\n                            key: 'availableTypes',\n                            get: function () {\n                                var types = [];\n                                this.availableConstructors.forEach(function (_, type) {\n                                    types.push(type);\n                                });\n                                return types;\n                            }\n                        },\n                        {\n                            key: 'entries',\n                            get: function () {\n                                return this._entries;\n                            },\n                            set: function (entries) {\n                                this._entries = entries;\n                                this.update();\n                            }\n                        }\n                    ]);\n                    return _class16;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        20: [\n            function (require, module, exports) {\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'options-output';\n                        var additionalStrings = {\n                            en: {\n                                'reset': 'Reset',\n                                'drag': 'Drag',\n                                'drag.tip': 'Drag or press \\u2191/\\u2193 while in focus to reorder items',\n                                'delete': 'Delete',\n                                'delete.tip': 'Delete item'\n                            },\n                            ru: {\n                                'reset': '',\n                                'drag': '',\n                                'drag.tip': '   \\u2191/\\u2193,    ,    ',\n                                'delete': '',\n                                'delete.tip': ' '\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        21: [\n            function (require, module, exports) {\n                var formatNumbers = require(10);\n                var writeTip = require(24);\n                var Option = require(19);\n                var ArrayOptionOutput = require(1);\n                var GroupOptionOutput = require(11);\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        ___babelHelper___classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = new Map();\n                        this.setOptionClassWriters(optionClassWriters);\n                        function writeOption(option) {\n                            var optionProto = option;\n                            while (optionProto = Object.getPrototypeOf(optionProto)) {\n                                var optionClassWriter = optionClassWriters.get(optionProto.constructor);\n                                if (optionClassWriter) {\n                                    return optionClassWriter(option, writeOption, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = writeOption(options.root);\n                    }\n                    OptionsOutput.prototype.getLeadLabel = function getLeadLabel(id, i18n, option) {\n                        return '<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label><span class=\\'space\\'> </span>';\n                    };\n                    // override this fn for custom writers\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        var _this = this;\n                        optionClassWriters.set(Option.Root, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Group, function () {\n                            return new (Function.prototype.bind.apply(GroupOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Void, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'option no-lead\\'>').html(i18n('options.' + option.fullName));\n                        });\n                        optionClassWriters.set(Option.Checkbox, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option no-lead\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').prop('checked', option.value).change(function () {\n                                option.value = $(this).prop('checked');\n                            }), ' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                        });\n                        optionClassWriters.set(Option.Select, function (option, writeOption, i18n, generateId) {\n                            var valueId = function (value) {\n                                return 'options.' + option.fullName + '.' + value;\n                            };\n                            var valueInfoId = function (value) {\n                                return 'options-info.' + option.fullName + '.' + value;\n                            };\n                            var id = generateId();\n                            var $select = undefined;\n                            option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n(valueId(availableValue)));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }));\n                            if (option.availableValues.some(function (availableValue) {\n                                    return i18n.has(valueInfoId(availableValue));\n                                })) {\n                                (function () {\n                                    var $tip = writeTip('info', '');\n                                    option.$.append(' ', $tip);\n                                    var handler = function () {\n                                        if (i18n.has(valueInfoId(this.value))) {\n                                            $tip.find('.tip-content').html(i18n(valueInfoId(this.value)));\n                                            $tip.css('display', '');    // $tip.show() won't work right with inline-block\n                                        } else {\n                                            $tip.css('display', 'none');\n                                            $tip.find('.tip-content').empty();\n                                        }\n                                    };\n                                    handler.call($select[0]);\n                                    $select.change(handler);\n                                }());\n                            }\n                            return option.$;\n                        });\n                        optionClassWriters.set(Option.Text, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var listId = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $('<input type=\\'text\\' id=\\'' + id + '\\' list=\\'' + listId + '\\' />').val(option.value).on('input change', function () {\n                                option.value = this.value;\n                            }), ' ', $('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').text(availableValue);\n                            })));\n                        });\n                        optionClassWriters.set(Option.Number, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var setInputAttrsAndListeners = function ($input, getOtherInput) {\n                                return setInputAttrs($input).val(option.value).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        var $that = getOtherInput();\n                                        $that.val(this.value);\n                                        option.value = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var id = generateId();\n                            var $sliderInput = undefined, $numberInput = undefined;\n                            var $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var fmt = formatNumbers({\n                                min: option.availableMin,\n                                max: option.availableMax\n                            }, option.precision);\n                            option.$ = $('<div class=\\'option\\'>').append(_this.getLeadLabel(id, i18n, option), $('<span class=\\'nowrap\\'>').append('<span class=\\'min\\'>' + i18n.numberWithUnits(fmt.min, option.unit) + '</span> ', $sliderInput = setInputAttrsAndListeners($('<input type=\\'range\\' id=\\'' + id + '\\'>'), function () {\n                                return $numberInput;\n                            }), ' <span class=\\'max\\'>' + i18n.numberWithUnits(fmt.max, option.unit) + '</span>'), ' ', $numberInput = setInputAttrsAndListeners($('<input type=\\'number\\' required>'), function () {\n                                return $sliderInput;\n                            }), ' ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $sliderInput.val(option.defaultValue).change();\n                            }));\n                            var infoId = 'options-info.' + option.fullName;\n                            if (i18n.has(infoId)) {\n                                option.$.append(' ', writeTip('info', i18n(infoId)));\n                            }\n                            return option.$;\n                        });\n                        optionClassWriters.set(Option.Array, function () {\n                            return new (Function.prototype.bind.apply(ArrayOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '10': 10,\n                '11': 11,\n                '19': 19,\n                '24': 24\n            }\n        ],\n        22: [\n            function (require, module, exports) {\n                var OptionVisibilityManager = function () {\n                    function OptionVisibilityManager() {\n                        ___babelHelper___classCallCheck(this, OptionVisibilityManager);\n                        this.options = {};\n                        this.affects = {};\n                        this.inArray = 0;\n                    }\n                    OptionVisibilityManager.prototype.register = function register(option) {\n                        var _this = this;\n                        if (!this.inArray) {\n                            this.options[option.fullName] = option;\n                            option.addUpdateCallback(function () {\n                                _this.updateVisibilityAffectedBy(option.fullName);\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.declareAffectedBy = function declareAffectedBy(option, byFullName) {\n                        if (this.affects[byFullName] === undefined) {\n                            this.affects[byFullName] = [];\n                        }\n                        this.affects[byFullName].push(option);\n                    };\n                    OptionVisibilityManager.prototype.updateVisibilityAffectedBy = function updateVisibilityAffectedBy(byFullName) {\n                        if (this.affects[byFullName] !== undefined) {\n                            this.affects[byFullName].forEach(function (option) {\n                                option.updateVisibility();\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.enterArray = function enterArray() {\n                        this.inArray += 1;\n                    };\n                    OptionVisibilityManager.prototype.exitArray = function exitArray() {\n                        this.inArray -= 1;\n                    };\n                    return OptionVisibilityManager;\n                }();\n                var Options = function () {\n                    function Options(data) {\n                        ___babelHelper___classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        var Option = this.optionClasses;\n                        var makeEntry = function (description, data, parent, visibilityManager) {\n                            var _Option$className;\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var makeArgs = description.slice(1);\n                            return (_Option$className = Option[className]).make.apply(_Option$className, makeArgs)(data, parent, visibilityManager, makeEntry);\n                        };\n                        this.root = Option.Root.make(null, this.entriesDescription)(data, null, new OptionVisibilityManager(), makeEntry);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.root.addUpdateCallback(updateCallback);\n                    };\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    ___babelHelper___createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(19);\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { '19': 19 }\n        ],\n        23: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var RefLines = function (_Lines) {\n                    ___babelHelper___inherits(RefLines, _Lines);\n                    function RefLines(data, ref) {\n                        ___babelHelper___classCallCheck(this, RefLines);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.ref = ref;\n                        return _this;\n                    }\n                    RefLines.parse = function parse(s) {\n                        var a = Lines.ba('');\n                        var re = /^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/;\n                        for (; s.length > 0;) {\n                            var match = re.exec(s);\n                            if (match) {\n                                a.t(match[1]);\n                                a.t(this.b(match[3]).ae(match[2]));\n                                s = s.substr(match[0].length);\n                            } else {\n                                a.t(s);\n                                break;\n                            }\n                        }\n                        return a.e();\n                    };\n                    RefLines.prototype.doGet = function doGet(formatting, html) {\n                        var plainOut = _Lines.prototype.doGet.call(this, formatting, html);\n                        var href = undefined;\n                        if (html && typeof formatting.refs == 'object') {\n                            href = formatting.refs[this.ref];\n                        }\n                        if (href !== undefined) {\n                            return plainOut.map(function (s) {\n                                return '<a href=\\'' + escape(href) + '\\'>' + s + '</a>';\n                            });\n                        } else {\n                            return plainOut;\n                        }\n                    };\n                    return RefLines;\n                }(Lines);\n                module.exports = RefLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        24: [\n            function (require, module, exports) {\n                module.exports = function (tipClass, tipContent) {\n                    var $tip = $('<span class=\\'tip-' + tipClass + '\\' tabindex=\\'0\\'><span class=\\'tip-content\\'>' + tipContent + '</span></span>');\n                    var popupTimeoutId = null;\n                    var popupLevel = 0;\n                    var handlePopup = function (dLevel, delay) {\n                        if (delay === undefined) {\n                            delay = 200;\n                        }\n                        if (dLevel == +1 && popupLevel == 0) {\n                            clearTimeout(popupTimeoutId);\n                            popupTimeoutId = setTimeout(function () {\n                                // sort of hoverintent, simple delay will do b/c tip icon is small\n                                $tip.addClass('open');\n                            }, delay);\n                        } else if (dLevel == -1 && popupLevel == 1) {\n                            clearTimeout(popupTimeoutId);\n                            popupTimeoutId = setTimeout(function () {\n                                $tip.removeClass('open');\n                            }, delay);\n                        }\n                        popupLevel += dLevel;\n                    };\n                    $tip.mouseenter(function () {\n                        handlePopup(+1);\n                    }).focusin(function () {\n                        handlePopup(+1, 0);    // need immediate popup on focusin\n                    }).on('mouseleave focusout', function () {\n                        handlePopup(-1);\n                    });\n                    return $tip;\n                };\n            },\n            {}\n        ],\n        25: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ], [\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<script src=',\n                        '></script>'\n                    ], [\n                        '<script src=',\n                        '></script>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<html lang=',\n                        '>'\n                    ], [\n                        '<html lang=',\n                        '>'\n                    ]);\n                var Lines = require(17);\n                var NoseWrapLines = require(18);\n                var CodeSection = require(4);\n                var WebCode = function () {\n                    function WebCode() {\n                        ___babelHelper___classCallCheck(this, WebCode);\n                    }\n                    WebCode.prototype.get = function get(formatting) {\n                        return this.getLines().get(formatting);\n                    };\n                    WebCode.prototype.getHtml = function getHtml(formatting) {\n                        return this.getLines().getHtml(formatting);\n                    };\n                    WebCode.prototype.extractSections = function extractSections(sectionModes) {\n                        if (sectionModes === undefined) {\n                            sectionModes = {};\n                        }\n                        var stylePlaceLines = NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines);\n                        var styleExtractLines = Lines.be();\n                        if (sectionModes.css == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                stylePlaceLines = Lines.be();\n                            } else {\n                                stylePlaceLines = Lines.bae('<!-- <style> ' + this.getSectionPasteComment('css') + ' </style> -->');\n                            }\n                            styleExtractLines = this.cachedStyleLines;\n                        } else if (sectionModes.css == 'file') {\n                            stylePlaceLines = Lines.bae(Lines.html(_templateObject, this.basename + '.css'));\n                            styleExtractLines = this.cachedStyleLines;\n                        }\n                        var scriptPlaceLines = NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines);\n                        var scriptExtractLines = Lines.be();\n                        if (sectionModes.js == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                scriptPlaceLines = Lines.be();\n                            } else {\n                                scriptPlaceLines = Lines.bae('<!-- <script> ' + this.getSectionPasteComment('js') + ' </script> -->');\n                            }\n                            scriptExtractLines = this.cachedScriptLines;\n                        } else if (sectionModes.js == 'file') {\n                            scriptPlaceLines = Lines.bae(Lines.html(_templateObject2, this.basename + '.js'));\n                            scriptExtractLines = this.cachedScriptLines;\n                        }\n                        var htmlExtractLines = undefined;\n                        if (sectionModes.html == 'body') {\n                            htmlExtractLines = this.getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        } else {\n                            htmlExtractLines = this.getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        }\n                        var type = function (sectionName) {\n                            return 'text/' + (sectionName == 'js' ? 'javascript' : sectionName);\n                        };\n                        return {\n                            html: new CodeSection(this.filename, type('html'), htmlExtractLines),\n                            css: new CodeSection(this.basename + '.css', type('css'), styleExtractLines),\n                            js: new CodeSection(this.basename + '.js', type('js'), scriptExtractLines)\n                        };\n                    };\n                    // get title()\n                    // private:\n                    WebCode.prototype.getLines = function getLines() {\n                        return this.getFullHtmlSectionLines(NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines), NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines));\n                    };\n                    WebCode.prototype.getFullHtmlSectionLines = function getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        var a = Lines.b();\n                        a('<!DOCTYPE html>');\n                        if (this.lang !== null) {\n                            a(Lines.html(_templateObject3, this.lang));\n                        } else {\n                            a('<html>');\n                        }\n                        a('<head>', '<meta charset=utf-8>');\n                        if (this.title !== null) {\n                            a('<title>' + this.title + '</title>');\n                        }\n                        a(stylePlaceLines, this.cachedHeadLines, '</head>', '<body>', this.cachedBodyLines, scriptPlaceLines, '</body>', '</html>');\n                        return a.e();\n                    };\n                    WebCode.prototype.getBodyHtmlSectionLines = function getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        return Lines.bae(stylePlaceLines, this.cachedHeadLines, this.cachedBodyLines, scriptPlaceLines);\n                    };\n                    WebCode.prototype.getSectionPasteComment = function getSectionPasteComment(sectionName) {\n                        // section placeholder comment in paste mode - likely to be overridden with i18n\n                        return sectionName + ' goes here';\n                    };\n                    ___babelHelper___createClass(WebCode, [\n                        {\n                            key: 'filename',\n                            // public:\n                            get: function () {\n                                return this.basename + '.html';\n                            }\n                        },\n                        {\n                            key: 'mimeType',\n                            get: function () {\n                                return 'text/html';\n                            }\n                        },\n                        {\n                            key: 'cachedStyleLines',\n                            get: function () {\n                                if (!this._styleLines)\n                                    this._styleLines = this.styleLines;\n                                return this._styleLines;\n                            }\n                        },\n                        {\n                            key: 'cachedHeadLines',\n                            get: function () {\n                                if (!this._headLines)\n                                    this._headLines = this.headLines;\n                                return this._headLines;\n                            }\n                        },\n                        {\n                            key: 'cachedBodyLines',\n                            get: function () {\n                                if (!this._bodyLines)\n                                    this._bodyLines = this.bodyLines;\n                                return this._bodyLines;\n                            }\n                        },\n                        {\n                            key: 'cachedScriptLines',\n                            get: function () {\n                                if (!this._scriptLines)\n                                    this._scriptLines = this.scriptLines;\n                                return this._scriptLines;\n                            }    // to be redefined in subclasses:\n                        },\n                        {\n                            key: 'basename',\n                            get: function () {\n                                // filename base\n                                return 'source';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                // language tag for <html lang=xx> or null to skip it - likely read from i18n\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                // page title or null to skip it\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                // contents of <style>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'headLines',\n                            get: function () {\n                                // contents of <head> following <style>, goes to <body> in html body mode\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                // contents of <body> preceding <script>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                // contents of <script>\n                                return Lines.be();\n                            }\n                        }\n                    ]);\n                    return WebCode;\n                }();\n                module.exports = WebCode;\n            },\n            {\n                '17': 17,\n                '18': 18,\n                '4': 4\n            }\n        ],\n        26: [\n            function (require, module, exports) {\n                var escape = require(9);\n                var Lines = require(17);\n                var WrapLines = function (_Lines) {\n                    ___babelHelper___inherits(WrapLines, _Lines);\n                    function WrapLines(data) {\n                        ___babelHelper___classCallCheck(this, WrapLines);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Lines.call(this, data));\n                        for (var _len = arguments.length, wrappers = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                            wrappers[_key - 1] = arguments[_key];\n                        }\n                        _this.wrappers = wrappers;\n                        return _this;\n                    }\n                    WrapLines.prototype.isEmpty = function isEmpty() {\n                        return false;\n                    };\n                    WrapLines.prototype.doGet = function doGet(formatting, html) {\n                        var _this2 = this;\n                        var indent = '\\t';\n                        if (formatting.indent !== undefined) {\n                            indent = formatting.indent;\n                        }\n                        var out = [];\n                        var i = 0;\n                        var pushWrapper = function () {\n                            var item = _this2.wrappers[i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut);\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                            i++;\n                        };\n                        pushWrapper();\n                        var _arr = this.data;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var item = _arr[_i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut.map(function (s) {\n                                    return indent + s;\n                                }));\n                                if (this.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(indent + s);\n                                if (this.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            }\n                        }\n                        if (this.wrappers.length == 2) {\n                            pushWrapper();\n                        }\n                        return out;\n                    };\n                    return WrapLines;\n                }(Lines);\n                module.exports = WrapLines;\n            },\n            {\n                '17': 17,\n                '9': 9\n            }\n        ],\n        27: [\n            function (require, module, exports) {\n                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\n                module.exports = Math.log10 || function (x) {\n                    return Math.log(x) / Math.LN10;\n                };\n            },\n            {}\n        ],\n        28: [\n            function (require, module, exports) {\n                module.exports = function (haystack) {\n                    return function (needle, start) {\n                        if (haystack != null && haystack.includes !== undefined || typeof haystack !== 'string') {\n                            return haystack.includes(needle, start);\n                        } else {\n                            return haystack.indexOf(needle, start) !== -1;\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        29: [\n            function (require, module, exports) {\n                module.exports = function (s) {\n                    return function (n) {\n                        if (s != null && s.repeat !== undefined || typeof s !== 'string') {\n                            return s.repeat(n);\n                        } else {\n                            return Array(n + 1).join(s);\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        30: [\n            function (require, module, exports) {\n                var JsLines = require(16);\n                var RefLines = require(23);\n                var Feature = require(38);\n                var AudioContext = function (_Feature) {\n                    ___babelHelper___inherits(AudioContext, _Feature);\n                    function AudioContext() {\n                        ___babelHelper___classCallCheck(this, AudioContext);\n                        return ___babelHelper___possibleConstructorReturn(this, _Feature.apply(this, arguments));\n                    }\n                    AudioContext.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.audioContext) {\n                            a(RefLines.parse('// ' + i18n('comment.context')), 'var ctx=new (AudioContext || webkitAudioContext);');\n                        }\n                        return a.e();\n                    };\n                    return AudioContext;\n                }(Feature);\n                module.exports = AudioContext;\n            },\n            {\n                '16': 16,\n                '23': 23,\n                '38': 38\n            }\n        ],\n        31: [\n            function (require, module, exports) {\n                var writeTip = require(24);\n                var FilterOptionOutput = require(39);\n                var BiquadFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(BiquadFilterOptionOutput, _FilterOptionOutput);\n                    function BiquadFilterOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, BiquadFilterOptionOutput);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var $cloneButton = undefined;\n                        var computeCoefs = function (sampleRate, type, frequency, detune, Q, gain, post20160415) {\n                            // constants defined in the spec\n                            var F_s = sampleRate;\n                            var f_0 = frequency * Math.pow(2, detune / 1200);\n                            var G = gain;\n                            var A = Math.pow(10, G / 40);\n                            var omega_0 = 2 * Math.PI * f_0 / F_s;\n                            var alpha_Q = Math.sin(omega_0) / (2 * Q);\n                            var Q_dB = Math.pow(10, Q / 20);\n                            // fix for incorrect alpha_B\n                            var alpha_B = Math.sin(omega_0) / 2 * Math.sqrt((4 - Math.sqrt(16 - 16 / (Q_dB * Q_dB))) / 2);\n                            // was incorrect in the spec\n                            var alpha_Q_dB = Math.sin(omega_0) / (2 * Q_dB);\n                            // introduced on 2016-04-15\n                            var S = 1;\n                            var alpha_S = Math.sin(omega_0) / 2 * Math.sqrt((A + 1 / A) * (1 / S - 1) + 2);\n                            // shortcuts\n                            var c = Math.cos(omega_0);\n                            var aSA2 = 2 * alpha_S * Math.sqrt(A);\n                            switch (type) {\n                            case 'lowpass':\n                                return {\n                                    feedforward: [\n                                        (1 - c) / 2,\n                                        1 - c,\n                                        (1 - c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'highpass':\n                                return {\n                                    feedforward: [\n                                        (1 + c) / 2,\n                                        -(1 + c),\n                                        (1 + c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'bandpass':\n                                return {\n                                    feedforward: [\n                                        alpha_Q,\n                                        0,\n                                        -alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'notch':\n                                return {\n                                    feedforward: [\n                                        1,\n                                        -2 * c,\n                                        1\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'allpass':\n                                return {\n                                    feedforward: [\n                                        1 - alpha_Q,\n                                        -2 * c,\n                                        1 + alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'peaking':\n                                return {\n                                    feedforward: [\n                                        1 + alpha_Q * A,\n                                        -2 * c,\n                                        1 - alpha_Q * A\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q / A,\n                                        -2 * c,\n                                        1 - alpha_Q / A\n                                    ]\n                                };\n                            case 'lowshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 - (A - 1) * c + aSA2),\n                                        2 * A * (A - 1 - (A + 1) * c),\n                                        A * (A + 1 - (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 + (A - 1) * c + aSA2,\n                                        -2 * (A - 1 + (A + 1) * c),\n                                        A + 1 + (A - 1) * c - aSA2\n                                    ]\n                                };\n                            case 'highshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 + (A - 1) * c + aSA2),\n                                        -2 * A * (A - 1 + (A + 1) * c),\n                                        A * (A + 1 + (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 - (A - 1) * c + aSA2,\n                                        2 * (A - 1 - (A + 1) * c),\n                                        A + 1 - (A - 1) * c - aSA2\n                                    ]\n                                };\n                            }\n                        };\n                        var This = _this;\n                        var $cloneUi = undefined;\n                        var writeCloneButton = function (post20160415) {\n                            return $('<button type=\\'button\\' class=\\'clone\\'>' + i18n('options-output.filter.biquad.clone.' + (post20160415 ? 'post' : 'pre')) + '</button>').click(function () {\n                                var _this2 = this;\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var fixedOption = option.fix();\n                                    var coefs = computeCoefs(audioContext.sampleRate, fixedOption.type.value, fixedOption.frequency.value, fixedOption.detune.value, Math.pow(10, fixedOption.Q.value), fixedOption.gain.value, post20160415);\n                                    if (coefs) {\n                                        $(_this2).data('coefs', coefs);\n                                    } else {\n                                        $(_this2).removeData('coefs');\n                                    }\n                                }, $cloneUi, i18n('options-output.filter.contextError'));\n                            });\n                        };\n                        _this.$output.append($('<div class=\\'option only-buttons\\'>').append('<label>' + i18n('options-output.filter.biquad.clone') + ':</label><span class=\\'space\\'> </span>', $cloneUi = $('<span>').append(writeCloneButton(false), ' ', writeCloneButton(true), ' ', writeTip('info', i18n('options-output.filter.biquad.clone.info')))));\n                        return _this;\n                    }\n                    BiquadFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        var biquadNode = audioContext.createBiquadFilter();\n                        var fixedOption = this.option.fix();\n                        biquadNode.type = fixedOption.type.value;\n                        biquadNode.frequency.value = fixedOption.frequency.value;\n                        biquadNode.detune.value = fixedOption.detune.value;\n                        biquadNode.Q.value = Math.pow(10, fixedOption.Q.value);\n                        biquadNode.gain.value = fixedOption.gain.value;\n                        return [biquadNode];\n                    };\n                    return BiquadFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = BiquadFilterOptionOutput;\n            },\n            {\n                '24': 24,\n                '39': 39\n            }\n        ],\n        32: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ], [\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ]);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var Feature = require(38);\n                var Canvas = function (_Feature) {\n                    ___babelHelper___inherits(Canvas, _Feature);\n                    function Canvas(options) {\n                        ___babelHelper___classCallCheck(this, Canvas);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Canvas.getStyleLines = function getStyleLines(canvasContextProperty, colorOption) {\n                        var a = JsLines.b();\n                        var cs = [\n                            'r',\n                            'g',\n                            'b'\n                        ];\n                        var color = cs.map(function (c) {\n                            return colorOption[c] + '%';\n                        }).join();\n                        var isBlack = cs.every(function (c) {\n                            return colorOption[c] == 0;\n                        });\n                        if (colorOption.a == 100) {\n                            if (!isBlack) {\n                                a('canvasContext.' + canvasContextProperty + '=\\'rgb(' + color + ')\\';');\n                            }\n                        } else {\n                            a('canvasContext.' + canvasContextProperty + '=\\'rgba(' + color + ',' + (colorOption.a / 100).toFixed(2) + ')\\';');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = Lines.b();\n                        if (featureContext.canvas) {\n                            a('<div>', Lines.html(_templateObject, this.options.width, this.options.height), '</div>');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            a('var canvas=document.getElementById(\\'my.canvas\\');', 'var canvasContext=canvas.getContext(\\'2d\\');');\n                        }\n                        if (featureContext.canvasVolumeGradient) {\n                            a('var canvasVolumeGradient=canvasContext.createLinearGradient(0,0,0,canvas.height);', 'canvasVolumeGradient.addColorStop(1.00,\\'#000\\');', 'canvasVolumeGradient.addColorStop(0.75,\\'#F00\\');', 'canvasVolumeGradient.addColorStop(0.25,\\'#FF0\\');', 'canvasVolumeGradient.addColorStop(0.00,\\'#FFF\\');');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            if (this.options.background.type == 'clear') {\n                                a('canvasContext.clearRect(0,0,canvas.width,canvas.height);');\n                            } else {\n                                a(Canvas.getStyleLines('fillStyle', this.options.background.color));\n                                a('canvasContext.fillRect(0,0,canvas.width,canvas.height);');\n                            }\n                        }\n                        return a.e();\n                    };\n                    return Canvas;\n                }(Feature);\n                module.exports = Canvas;\n            },\n            {\n                '16': 16,\n                '17': 17,\n                '38': 38\n            }\n        ],\n        33: [\n            function (require, module, exports) {\n                var writeTip = require(24);\n                var BaseCodeOutput = require(3);\n                var CodeOutput = function (_BaseCodeOutput) {\n                    ___babelHelper___inherits(CodeOutput, _BaseCodeOutput);\n                    function CodeOutput() {\n                        ___babelHelper___classCallCheck(this, CodeOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseCodeOutput.apply(this, arguments));\n                    }\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        _BaseCodeOutput.prototype.initDomProps.call(this);\n                        this.$warnings = $();\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        _BaseCodeOutput.prototype.applyUpdatedCode.call(this, i18n);\n                        this.$warnings.css('display', this.code.isInteresting ? 'none' : '');    // .toggle() won't work right with inline-block\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        var $warning = writeTip('warn', i18n('code-output.warning.jsfiddle-run'));\n                        return _BaseCodeOutput.prototype.writeButtons.call(this, i18n).append(' ', $warning);\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var $section = _BaseCodeOutput.prototype.writeSectionSummary.call(this, sectionName, i18n);\n                        if (sectionName == 'html' || sectionName == 'js') {\n                            var $warning = writeTip('warn', i18n('code-output.warning.interesting'));\n                            $section.append(' ', $warning);\n                            this.$warnings = this.$warnings.add($warning);\n                        }\n                        return $section;\n                    };\n                    ___babelHelper___createClass(CodeOutput, [{\n                            key: 'defaultFormatting',\n                            get: function () {\n                                var formatting = _BaseCodeOutput.prototype.defaultFormatting;\n                                formatting.refs = {\n                                    context: 'https://www.w3.org/TR/webaudio/#AudioContext',\n                                    source: 'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\n                                    gain: 'https://www.w3.org/TR/webaudio/#GainNode',\n                                    panner: 'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\n                                    biquad: 'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\n                                    iir: 'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\n                                    convolver: 'https://www.w3.org/TR/webaudio/#ConvolverNode',\n                                    peaking: 'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\n                                    destination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\n                                    compressor: 'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\n                                    analyser: 'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\n                                    splitter: 'https://www.w3.org/TR/webaudio/#the-channelsplitternode-interface',\n                                    buffer: 'https://www.w3.org/TR/webaudio/#AudioBufferSourceNode'\n                                };\n                                return formatting;\n                            }\n                        }]);\n                    return CodeOutput;\n                }(BaseCodeOutput);\n                module.exports = CodeOutput;\n            },\n            {\n                '24': 24,\n                '3': 3\n            }\n        ],\n        34: [\n            function (require, module, exports) {\n                var AudioContext = require(30);\n                var Loader = require(43);\n                var SourceSet = require(48);\n                var FilterSequence = require(40);\n                var Destination = require(36);\n                var Canvas = require(32);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var InterleaveLines = require(15);\n                var NoseWrapLines = require(18);\n                var BaseWebCode = require(25);\n                var Code = function (_BaseWebCode) {\n                    ___babelHelper___inherits(Code, _BaseWebCode);\n                    function Code(options, i18n) {\n                        ___babelHelper___classCallCheck(this, Code);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _BaseWebCode.call(this));\n                        _this.i18n = i18n;\n                        _this.featureContext = {};\n                        _this.features = [\n                            new AudioContext(),\n                            new Loader(options.loader),\n                            new SourceSet(options.sources),\n                            new FilterSequence(options.filters),\n                            new Destination(options.destination),\n                            new Canvas(options.canvas)\n                        ];\n                        // possible feature context flags:\n                        //\tloader = Loader has to provide loadSample() function\n                        //\tloaderOnError = loadSample() caller has to pass the error handler\n                        //\tsetConnectSampleToJsNames = have a node(s) to connect samples to (some filters like equaliser may not save a refernce to it otherwise)\n                        //\tconnectSampleToJsNames = this is a hack: array of strings to connect samples to\n                        //\tconnectSampleToCompressor = this is a hack\n                        //\tcanvasVolumeGradient = Canvas has to create canvasVolumeGradient\n                        //\tTODO the rest\n                        var _arr = _this.features;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var feature = _arr[_i];\n                            feature.requestFeatureContext(_this.featureContext);\n                        }\n                        _this.isInteresting = !!_this.featureContext.audioContext;\n                        return _this;\n                    }\n                    ___babelHelper___createClass(Code, [\n                        {\n                            key: 'basename',\n                            get: function () {\n                                return 'webaudio';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                return this.i18n.lang;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                return this.i18n('code.title');\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                var a = Lines.b();\n                                if (this.featureContext.alignedInputs) {\n                                    a('label {', '\\tdisplay: inline-block;', '\\twidth: 15em;', '\\ttext-align: right;', '\\tline-height: 0.8em;', '}', '.min {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: right;', '}', '.max {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: left;', '}');\n                                }\n                                if (this.featureContext.canvas) {\n                                    a('canvas {', '\\tborder: 1px solid;', '}');\n                                }\n                                return a.e();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                var _this2 = this;\n                                return Lines.bae.apply(Lines, this.features.map(function (feature) {\n                                    return feature.getHtmlLines(_this2.featureContext, _this2.i18n);\n                                }));\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                var _this3 = this, _NoseWrapLines$b;\n                                var prevNodeJsNames = [];\n                                return InterleaveLines.bae.apply(InterleaveLines, this.features.map(function (feature) {\n                                    var lines = feature.getJsInitLines(_this3.featureContext, _this3.i18n, prevNodeJsNames);\n                                    prevNodeJsNames = feature.getNodeJsNames(_this3.featureContext, prevNodeJsNames);\n                                    return lines;\n                                }).concat([(_NoseWrapLines$b = NoseWrapLines.b(JsLines.bae('function visualize() {'), JsLines.bae('\\trequestAnimationFrame(visualize);', '}', 'requestAnimationFrame(visualize);'))).ae.apply(_NoseWrapLines$b, this.features.map(function (feature) {\n                                        return feature.getJsLoopPreLines(_this3.featureContext, _this3.i18n);\n                                    }).concat(this.features.map(function (feature) {\n                                        return feature.getJsLoopVisLines(_this3.featureContext, _this3.i18n);\n                                    })))]));\n                            }\n                        }\n                    ]);\n                    return Code;\n                }(BaseWebCode);\n                module.exports = Code;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '25': 25,\n                '30': 30,\n                '32': 32,\n                '36': 36,\n                '40': 40,\n                '43': 43,\n                '48': 48\n            }\n        ],\n        35: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var Feature = require(38);\n                var CollectionFeature = function (_Feature) {\n                    ___babelHelper___inherits(CollectionFeature, _Feature);\n                    function CollectionFeature(entryOptions) {\n                        ___babelHelper___classCallCheck(this, CollectionFeature);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        var entryCounts = new Map();\n                        entryOptions.entries.forEach(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            entryCounts.set(entryClass, entryCounts.get(entryClass) + 1 || 1);\n                        });\n                        var entryCounts2 = new Map();\n                        _this.entries = entryOptions.entries.map(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            if (entryCounts.get(entryClass) > 1) {\n                                var n = entryCounts2.get(entryClass) || 0;\n                                entryCounts2.set(entryClass, n + 1);\n                                return new entryClass(entryOption, n);\n                            } else {\n                                return new entryClass(entryOption);\n                            }\n                        });\n                        return _this;\n                    }\n                    CollectionFeature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.bae.apply(Lines, this.entries.map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    // abstract:\n                    // getEntryClass(entryOption) {}\n                    return CollectionFeature;\n                }(Feature);\n                module.exports = CollectionFeature;\n            },\n            {\n                '17': 17,\n                '38': 38\n            }\n        ],\n        36: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                    '<label for=my.compressor>',\n                    '</label>'\n                ], [\n                    '<label for=my.compressor>',\n                    '</label>'\n                ]);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var NoseWrapLines = require(18);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var Feature = require(38);\n                var Canvas = require(32);\n                var Destination = function (_Feature) {\n                    ___babelHelper___inherits(Destination, _Feature);\n                    function Destination(options) {\n                        ___babelHelper___classCallCheck(this, Destination);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Destination.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        if (this.options.compressor.enabled || this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\n                            featureContext.audioContext = true;\n                        }\n                        if (this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\n                            featureContext.canvas = true;\n                        }\n                        if (this.options.volume.enabled) {\n                            featureContext.canvasVolumeGradient = true;\n                        }\n                        if (featureContext.connectSampleToJsNames === undefined) {\n                            if (this.options.compressor.enabled) {\n                                featureContext.connectSampleToCompressor = true;\n                            }\n                            featureContext.connectSampleToJsNames = [];\n                            if (this.useDirectAnalyser) {\n                                featureContext.connectSampleToJsNames.push('analyserNode');\n                            }\n                            if (this.useSplitAnalyser) {\n                                featureContext.connectSampleToJsNames.push('channelSplitterNode');\n                            }\n                            if (featureContext.connectSampleToJsNames.length == 0) {\n                                featureContext.connectSampleToJsNames = ['ctx.destination'];\n                            }\n                        }\n                    };\n                    Destination.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = NoseWrapLines.b('<div>', '</div>');\n                        if (featureContext.audioProcessing && this.options.compressor.enabled) {\n                            a('<input id=my.compressor type=checkbox checked>', Lines.html(_templateObject, i18n('label.destination.compressor')));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        var getAnalyserNodeLines = function (jsName, prevNodeJsNames, connectArgs) {\n                            if (connectArgs === undefined)\n                                connectArgs = '';\n                            var a = JsLines.b();\n                            a.apply(undefined, ['var ' + jsName + '=ctx.createAnalyser();'].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + jsName + connectArgs + ');';\n                            })));\n                            if (_this2.options.analyser.logFftSize != 11) {\n                                // default FFT size is 2048\n                                a(jsName + '.fftSize=' + Math.pow(2, _this2.options.analyser.logFftSize) + ';');\n                            }\n                            return a.e();\n                        };\n                        var getCompressorLines = function () {\n                            var a = JsLines.b();\n                            var nextNodeJsName = _this2.options.waveform.enabled || _this2.options.frequencies.enabled || _this2.options.volume.enabled ? 'analyserNode' : 'ctx.destination';\n                            a.apply(undefined, [\n                                RefLines.parse('// ' + i18n('comment.destination.compressor')),\n                                'var compressorNode=ctx.createDynamicsCompressor();'\n                            ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(compressorNode);';\n                            })));\n                            if (prevNodeJsNames.length > 0) {\n                                a.apply(undefined, [\n                                    'document.getElementById(\\'my.compressor\\').onchange=function(){',\n                                    '\\tif (this.checked) {'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(' + nextNodeJsName + ');';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(compressorNode);';\n                                }), ['\\t} else {'], prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.disconnect(compressorNode);';\n                                }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return '\\t\\t' + prevNodeJsName + '.connect(' + nextNodeJsName + ');';\n                                }), [\n                                    '\\t}',\n                                    '};'\n                                ]));\n                            }\n                            return a.e();\n                        };\n                        var getDirectAnalyserLines = function () {\n                            var a = JsLines.b();\n                            var comment = '';\n                            if (_this2.options.waveform.enabled && !_this2.options.frequencies.enabled) {\n                                comment = '.waveform';\n                            } else if (!_this2.options.waveform.enabled && _this2.options.frequencies.enabled) {\n                                comment = '.frequencies';\n                            } else if (_this2.options.waveform.enabled && _this2.options.frequencies.enabled) {\n                                comment = '.waveform+frequencies';\n                            }\n                            a(RefLines.parse('// ' + i18n('comment.destination.analyser' + comment)), getAnalyserNodeLines('analyserNode', prevNodeJsNames), 'var analyserData=new Uint8Array(analyserNode.frequencyBinCount);');\n                            return a.e();\n                        };\n                        var getSplitAnalyserLines = function () {\n                            var a = JsLines.b();\n                            a.apply(undefined, [\n                                RefLines.parse('// ' + i18n('comment.destination.analyser.split')),\n                                'var channelSplitterNode=ctx.createChannelSplitter();'\n                            ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(channelSplitterNode);';\n                            }), [\n                                getAnalyserNodeLines('leftAnalyserNode', ['channelSplitterNode'], ',0,0'),\n                                getAnalyserNodeLines('rightAnalyserNode', ['channelSplitterNode'], ',1,0')\n                            ]));\n                            if (!_this2.useDirectAnalyser) {\n                                // need to create analyserData once\n                                a('var analyserData=new Uint8Array(leftAnalyserNode.frequencyBinCount);');\n                            }\n                            return a.e();\n                        };\n                        var getDestinationLines = function () {\n                            var a = JsLines.b();\n                            if (prevNodeJsNames.length > 0) {\n                                a.apply(undefined, [RefLines.parse('// ' + i18n('comment.destination'))].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(ctx.destination);';\n                                })));\n                            }\n                            return a.e();\n                        };\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioProcessing && featureContext.audioContext) {\n                            if (this.options.compressor.enabled) {\n                                a(getCompressorLines());\n                                prevNodeJsNames = ['compressorNode'];\n                            }\n                            if (this.useDirectAnalyser || this.useSplitAnalyser) {\n                                if (this.useDirectAnalyser) {\n                                    a(getDirectAnalyserLines());\n                                }\n                                if (this.useSplitAnalyser) {\n                                    a(getSplitAnalyserLines());\n                                }\n                                if (this.useDirectAnalyser) {\n                                    prevNodeJsNames = ['analyserNode'];\n                                }    // split analyser doesn't change prevNodeJsNames b/c its output is not connected to anything\n                            }\n                            a(getDestinationLines());\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        var _this3 = this;\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        var getEnterFunctionLines = function () {\n                            if (_this3.pushContextForEach) {\n                                return JsLines.bae('canvasContext.save();');\n                            } else {\n                                return Lines.be();\n                            }\n                        };\n                        var getExitFunctionLines = function () {\n                            if (_this3.pushContextForEach) {\n                                return JsLines.bae('canvasContext.restore();');\n                            } else {\n                                return Lines.be();\n                            }\n                        };\n                        var getVisualizeVolumeLines = function () {\n                            var getVolumeMeterLines = function (analyserNodeJsName, xOffset) {\n                                return JsLines.bae(analyserNodeJsName + '.getByteFrequencyData(analyserData);', // TODO reuse in frequencies when in non-stereo mode\n                                'var sumAmplitudes=0;', 'for (var i=0;i<analyserData.length;i++) {', '\\tsumAmplitudes+=analyserData[i];', '}', 'var meanAmplitude=sumAmplitudes/analyserData.length;', 'var barHeight=meanAmplitude*canvas.height/256;', 'canvasContext.fillStyle=canvasVolumeGradient;', 'canvasContext.fillRect(' + xOffset + ',canvas.height-barHeight,25,barHeight);');\n                            };\n                            if (!_this3.options.volume.stereo) {\n                                return getVolumeMeterLines('analyserNode', '0');\n                            } else {\n                                return WrapLines.b(JsLines.bae(';[leftAnalyserNode,rightAnalyserNode].forEach(function(channelAnalyserNode,channelNumber){'), JsLines.bae('});')).ae(getVolumeMeterLines('channelAnalyserNode', 'channelNumber*26'));\n                            }\n                        };\n                        var getVisualizeFrequenciesLines = function () {\n                            var a = JsLines.b();\n                            var nBars = 'analyserData.length';\n                            if (_this3.options.frequencies.cutoff != 100) {\n                                a('var nBars=Math.floor(analyserData.length*' + (_this3.options.frequencies.cutoff / 100).toFixed(2) + ');');\n                                nBars = 'nBars';\n                            }\n                            var y = _this3.options.frequencies.base == 'bottom' ? 'canvas.height-barHeight' : '(canvas.height-barHeight)/2';\n                            var colorInput = _this3.options.frequencies.coloringInput == 'amplitude' ? 'analyserData[i]' : 'Math.round(i*255/' + nBars + ')';\n                            var fillStyle = _this3.options.frequencies.coloring == 'component' ? '\\'rgb(\\'+(' + colorInput + '+100)+\\',50,50)\\'' : '\\'hsl(\\'+(255-' + colorInput + ')+\\',100%,50%)\\'';\n                            a('var barWidth=canvas.width/' + nBars + '*0.8;', 'analyserNode.getByteFrequencyData(analyserData);', 'for (var i=0;i<' + nBars + ';i++) {', '\\tvar x=i*canvas.width/' + nBars + ';', '\\tcanvasContext.fillStyle=' + fillStyle + ';', '\\tvar barHeight=analyserData[i]*canvas.height/256;', '\\tvar y=' + y + ';', '\\tcanvasContext.fillRect(x,y,barWidth,barHeight);', '}');\n                            if (_this3.options.frequencies.outline.enabled) {\n                                var writeOutline = function (y) {\n                                    return JsLines.bae('for (var i=0;i<' + nBars + ';i++) {', '\\tvar x=i*canvas.width/' + nBars + ';', '\\tvar barHeight=analyserData[i]*canvas.height/256;', '\\tvar y=' + y + ';', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(0,y);', '\\t}', '\\tcanvasContext.lineTo(x+barWidth/2,y);', '\\tif (i==' + nBars + '-1) {', '\\t\\tcanvasContext.lineTo(canvas.width,y);', '\\t}', '}');\n                                };\n                                if (_this3.options.frequencies.outline.width != 1) {\n                                    a('canvasContext.lineWidth=' + _this3.options.frequencies.outline.width + ';');\n                                }\n                                a(Canvas.getStyleLines('strokeStyle', _this3.options.frequencies.outline.color));\n                                a('canvasContext.beginPath();');\n                                if (_this3.options.frequencies.base == 'bottom') {\n                                    a(writeOutline(y));\n                                } else {\n                                    a(WrapLines.b(JsLines.bae(';[-1,+1].forEach(function(aboveOrBelow){'), JsLines.bae('});')).ae(writeOutline('(canvas.height+aboveOrBelow*barHeight)/2')));\n                                }\n                                a('canvasContext.stroke();');\n                            }\n                            return a.e();\n                        };\n                        var getVisualizeWaveformLines = function () {\n                            var a = JsLines.b();\n                            if (_this3.options.waveform.width != 1) {\n                                a('canvasContext.lineWidth=' + _this3.options.waveform.width + ';');\n                            }\n                            a(Canvas.getStyleLines('strokeStyle', _this3.options.waveform.color), 'analyserNode.getByteTimeDomainData(analyserData);', 'canvasContext.beginPath();', 'for (var i=0;i<analyserData.length;i++) {', '\\tvar x=i*canvas.width/(analyserData.length-1);', '\\tvar y=analyserData[i]*canvas.height/256;', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(x,y);', '\\t} else {', '\\t\\tcanvasContext.lineTo(x,y);', '\\t}', '}', 'canvasContext.stroke();');\n                            return a.e();\n                        };\n                        return JsLines.bae.apply(JsLines, [\n                            [\n                                this.options.volume.enabled,\n                                'visualizeVolume',\n                                getVisualizeVolumeLines\n                            ],\n                            [\n                                this.options.frequencies.enabled,\n                                'visualizeFrequencies',\n                                getVisualizeFrequenciesLines\n                            ],\n                            [\n                                this.options.waveform.enabled,\n                                'visualizeWaveform',\n                                getVisualizeWaveformLines\n                            ]\n                        ].map(function (conditionAndNameAndFn) {\n                            var condition = conditionAndNameAndFn[0];\n                            var name = conditionAndNameAndFn[1];\n                            var fn = conditionAndNameAndFn[2];\n                            if (condition) {\n                                return WrapLines.b(JsLines.bae('function ' + name + '() {'), JsLines.bae('}')).ae(getEnterFunctionLines(), fn(), getExitFunctionLines());\n                            } else {\n                                return Lines.be();\n                            }\n                        }));\n                    };\n                    Destination.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        var a = JsLines.b();\n                        if (this.pushContextForAll) {\n                            a('canvasContext.save();');\n                        }\n                        if (this.options.volume.enabled) {\n                            a('visualizeVolume();');\n                        }\n                        if (this.options.frequencies.enabled) {\n                            a('visualizeFrequencies();');\n                        }\n                        if (this.options.waveform.enabled) {\n                            a('visualizeWaveform();');\n                        }\n                        if (this.pushContextForAll) {\n                            a('canvasContext.restore();');\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        if (featureContext.audioContext) {\n                            return ['ctx.destination'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    ___babelHelper___createClass(Destination, [\n                        {\n                            key: 'useDirectAnalyser',\n                            get: function () {\n                                return this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled && !this.options.volume.stereo;\n                            }\n                        },\n                        {\n                            key: 'useSplitAnalyser',\n                            get: function () {\n                                return this.options.volume.enabled && this.options.volume.stereo;\n                            }\n                        },\n                        {\n                            key: 'pushContextForEach',\n                            get: function () {\n                                // when stroke style is altered in two different places\n                                return this.options.frequencies.enabled && this.options.frequencies.outline.enabled && this.options.waveform.enabled;\n                            }\n                        },\n                        {\n                            key: 'pushContextForAll',\n                            get: function () {\n                                // when fill style is altered and not pushing for each\n                                return !this.pushContextForEach && (this.options.frequencies.enabled || this.options.volume.enabled);\n                            }\n                        }\n                    ]);\n                    return Destination;\n                }(Feature);\n                module.exports = Destination;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '23': 23,\n                '26': 26,\n                '32': 32,\n                '38': 38\n            }\n        ],\n        37: [\n            function (require, module, exports) {\n                var Option = require(45);\n                var FilterOptionOutput = require(39);\n                var EqualizerFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(EqualizerFilterOptionOutput, _FilterOptionOutput);\n                    function EqualizerFilterOptionOutput() {\n                        ___babelHelper___classCallCheck(this, EqualizerFilterOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.apply(this, arguments));\n                    }\n                    EqualizerFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        var fixedOption = this.option.fix();\n                        return Option.EqualizerFilter.frequencies.map(function (freq) {\n                            var biquadNode = audioContext.createBiquadFilter();\n                            biquadNode.type = 'peaking';\n                            biquadNode.frequency.value = freq;\n                            biquadNode.gain.value = fixedOption['gain' + freq].value;\n                            return biquadNode;\n                        });\n                    };\n                    return EqualizerFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = EqualizerFilterOptionOutput;\n            },\n            {\n                '39': 39,\n                '45': 45\n            }\n        ],\n        38: [\n            function (require, module, exports) {\n                var Lines = require(17);\n                var Feature = function () {\n                    function Feature() {\n                        ___babelHelper___classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        return prevNodeJsNames;\n                    };\n                    return Feature;\n                }();\n                module.exports = Feature;\n            },\n            { '17': 17 }\n        ],\n        39: [\n            function (require, module, exports) {\n                var debounce = require(8);\n                var formatNumbers = require(10);\n                var GroupOptionOutput = require(11);\n                var width = 300;\n                var height = 300;\n                var pad = 30;\n                var maxNGridLines = 10;\n                var fontSize = 10;\n                var fontOffset = 3;\n                var minFrequencyInLogMode = 10;\n                var audioContext = undefined;\n                var linearFrequencyArray = undefined, logFrequencyArray = undefined;\n                var logFrequencyArrayLinearLimit0 = undefined, logFrequencyArrayLinearLimit1 = undefined;\n                var magnitudeArray = undefined, phaseArray = undefined;\n                var magnitudeArray0 = undefined, phaseArray0 = undefined;\n                var mix = function (a, b, x) {\n                    return a * (1 - x) + b * x;\n                };\n                var FilterOptionOutput = function (_GroupOptionOutput) {\n                    ___babelHelper___inherits(FilterOptionOutput, _GroupOptionOutput);\n                    function FilterOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, FilterOptionOutput);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _GroupOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var $freqResponseUi = $();\n                        var isFreqResponseUiShown = function () {\n                            return $freqResponseUi.length > 0;\n                        };\n                        var magnitudeCanvasContext = undefined, phaseCanvasContext = undefined;\n                        // TODO remove loitering on hide - but have to cancel update\n                        var magnitudeLogScale = true, frequencyLogScale = false;\n                        var updatePlots = function (filterNodes) {\n                            var removeNans = function (array) {\n                                var interpolate = function (i0, i1) {\n                                    var hasStartValue = i0 >= 0;\n                                    var hasEndValue = i1 < array.length;\n                                    var v0 = undefined, v1 = undefined;\n                                    if (!hasStartValue && !hasEndValue) {\n                                        v0 = v1 = 0;\n                                    } else {\n                                        if (hasStartValue) {\n                                            v0 = array[i0];\n                                        } else {\n                                            v0 = array[i1];\n                                        }\n                                        if (hasEndValue) {\n                                            v1 = array[i1];\n                                        } else {\n                                            v1 = array[i0];\n                                        }\n                                    }\n                                    for (var i = i0 + 1; i < i1; i++) {\n                                        var x = (i - i0) / (i1 - i0);\n                                        array[i] = mix(v0, v1, x);\n                                    }\n                                };\n                                var nanStart = -1;\n                                for (var i = 0; i < array.length; i++) {\n                                    if (!isFinite(array[i])) {\n                                        if (nanStart < 0) {\n                                            nanStart = i;\n                                        }\n                                    } else {\n                                        if (nanStart >= 0) {\n                                            interpolate(nanStart - 1, i);\n                                            nanStart = -1;\n                                        }\n                                    }\n                                }\n                                if (nanStart >= 0) {\n                                    interpolate(nanStart - 1, array.length);\n                                }\n                            };\n                            var frequencyArray = frequencyLogScale ? logFrequencyArray : linearFrequencyArray;\n                            for (var i = 0; i < magnitudeArray.length; i++) {\n                                magnitudeArray[i] = 1;\n                            }\n                            for (var _i = 0; _i < phaseArray.length; _i++) {\n                                phaseArray[_i] = 0;\n                            }\n                            for (var _i2 = 0; _i2 < filterNodes.length; _i2++) {\n                                var filterNode = filterNodes[_i2];\n                                filterNode.getFrequencyResponse(frequencyArray, magnitudeArray0, phaseArray0);\n                                removeNans(magnitudeArray0);\n                                removeNans(phaseArray0);\n                                for (var _i8 = 0; _i8 < magnitudeArray.length; _i8++) {\n                                    magnitudeArray[_i8] *= magnitudeArray0[_i8];\n                                }\n                                for (var _i9 = 0; _i9 < phaseArray.length; _i9++) {\n                                    phaseArray[_i9] += phaseArray0[_i9];\n                                }\n                            }\n                            if (magnitudeLogScale) {\n                                for (var _i3 = 0; _i3 < width; _i3++) {\n                                    // convert to decibels\n                                    magnitudeArray[_i3] = 20 * require(27)(magnitudeArray[_i3]);\n                                }\n                            }\n                            function wrap(v, maxAbs) {\n                                v %= maxAbs * 2;\n                                if (Math.abs(v) <= maxAbs)\n                                    return v;\n                                return v - (v > 0 ? 1 : -1) * maxAbs * 2;\n                            }\n                            var k = 0;\n                            var v0 = 0;\n                            for (var _i4 = 0; _i4 < width; _i4++) {\n                                // unwrap phase\n                                var v1 = wrap(phaseArray[_i4] / Math.PI, 1);\n                                k += v1 < v0 && v0 - v1 > v1 + 2 - v0;\n                                k -= v1 > v0 && v1 - v0 > v0 - (v1 - 2);\n                                v0 = v1;\n                                phaseArray[_i4] = v0 + 2 * k;\n                            }\n                            var plotResponse = function (canvasContext, array, units, enforcedCenter, enforcedRange, enforcedFloor, majorGridLineTest) {\n                                var _Math, _Math2;\n                                var min = undefined, max = undefined;\n                                var setPlotRange = function (min0, max0) {\n                                    var ph = pad / height;\n                                    min = ((min0 + max0) * ph - min0) / (2 * ph - 1);\n                                    max = ((min0 + max0) * ph - max0) / (2 * ph - 1);\n                                };\n                                var minArr = (_Math = Math).min.apply(_Math, array);\n                                var maxArr = (_Math2 = Math).max.apply(_Math2, array);\n                                var minArrCentered = Math.max(minArr, enforcedFloor) - enforcedCenter;\n                                var maxArrCentered = Math.max(maxArr, enforcedFloor) - enforcedCenter;\n                                setPlotRange(enforcedCenter + Math.min(0, -enforcedRange + Math.max(0, maxArrCentered - enforcedRange), minArrCentered), enforcedCenter + Math.max(0, enforcedRange - Math.max(0, -enforcedRange - minArrCentered), maxArrCentered));\n                                var calcY = function (v) {\n                                    return height * (1 - (v - min) / (max - min));\n                                };\n                                var getGridNumbers = function (min, max) {\n                                    var numLogs = require(27)(max - min) - require(27)(maxNGridLines);\n                                    var k = undefined;\n                                    var p = Infinity;\n                                    var _arr = [\n                                        1,\n                                        2,\n                                        5\n                                    ];\n                                    for (var _i5 = 0; _i5 < _arr.length; _i5++) {\n                                        var tk = _arr[_i5];\n                                        var tp = Math.ceil(numLogs - require(27)(tk));\n                                        if (tp < p) {\n                                            p = tp;\n                                            k = tk;\n                                        }\n                                    }\n                                    var dv = k * Math.pow(10, p);\n                                    var v0 = Math.ceil(min / dv) * dv;\n                                    var numbers = [];\n                                    for (var v = v0; v < max; v += dv) {\n                                        numbers.push(v);\n                                    }\n                                    return [\n                                        numbers,\n                                        p < 0 ? -p : 0\n                                    ];\n                                };\n                                var drawGrid = function (numbers, visibleNumbers, calcPosition, labelLimit, units, majorGridLineTest) {\n                                    var _Math3;\n                                    canvasContext.save();\n                                    canvasContext.translate(0, 0.5);\n                                    // don't translate along x to keep dashes sharp\n                                    canvasContext.fillStyle = '#444';\n                                    canvasContext.font = fontSize + 'px';\n                                    canvasContext.textAlign = 'right';\n                                    var getLabel = function (n) {\n                                        return '' + i18n.number(n) + units;\n                                    };\n                                    var labelWidth = (_Math3 = Math).max.apply(_Math3, visibleNumbers.map(function (n) {\n                                        return canvasContext.measureText(getLabel(n)).width;\n                                    }));\n                                    var _loop = function (_i6) {\n                                        var y = Math.round(calcPosition(numbers[_i6]));\n                                        var drawLine = function () {\n                                            canvasContext.beginPath();\n                                            canvasContext.moveTo(0, y);\n                                            canvasContext.lineTo(width, y);\n                                            canvasContext.stroke();\n                                        };\n                                        var majorGridLine = majorGridLineTest(Number(visibleNumbers[_i6]));\n                                        if (majorGridLine) {\n                                            canvasContext.strokeStyle = 'rgba(70%,70%,100%,0.3)';\n                                            canvasContext.setLineDash([]);\n                                            canvasContext.lineWidth = 3;\n                                            drawLine();\n                                        }\n                                        canvasContext.strokeStyle = majorGridLine ? '#000' : '#888';\n                                        canvasContext.setLineDash([1]);\n                                        canvasContext.lineWidth = 1;\n                                        drawLine();\n                                        if (y - fontOffset - fontSize > labelLimit) {\n                                            canvasContext.fillText(getLabel(visibleNumbers[_i6]), fontOffset + labelWidth, y - fontOffset);\n                                        }\n                                    };\n                                    for (var _i6 = 0; _i6 < numbers.length; _i6++) {\n                                        _loop(_i6);\n                                    }\n                                    canvasContext.restore();\n                                    return labelWidth;\n                                };\n                                var drawYGrid = function () {\n                                    var yGridNumbersAndPrecision = getGridNumbers(min, max);\n                                    var yVisibleGridNumbers = formatNumbers.apply(undefined, yGridNumbersAndPrecision);\n                                    return drawGrid(yGridNumbersAndPrecision[0], yVisibleGridNumbers, calcY, 0, units, majorGridLineTest);\n                                };\n                                var drawXGrid = function (yLabelWidth) {\n                                    canvasContext.save();\n                                    canvasContext.rotate(-Math.PI / 2);\n                                    canvasContext.translate(-height, 0);\n                                    var calcX = undefined, xGridNumbersAndPrecision = undefined, xVisibleGridNumbers = undefined;\n                                    if (frequencyLogScale) {\n                                        calcX = function (v) {\n                                            return width * (v - logFrequencyArrayLinearLimit0) / (logFrequencyArrayLinearLimit1 - logFrequencyArrayLinearLimit0);\n                                        };\n                                        xGridNumbersAndPrecision = getGridNumbers(logFrequencyArrayLinearLimit0, logFrequencyArrayLinearLimit1);\n                                        xVisibleGridNumbers = formatNumbers(xGridNumbersAndPrecision[0].map(function (n) {\n                                            return Math.pow(10, n);\n                                        }), 0);\n                                    } else {\n                                        calcX = function (v) {\n                                            return width * (v - frequencyArray[0]) / (frequencyArray[width - 1] - frequencyArray[0]);\n                                        };\n                                        xGridNumbersAndPrecision = getGridNumbers(frequencyArray[0], frequencyArray[width - 1]);\n                                        xVisibleGridNumbers = formatNumbers.apply(undefined, xGridNumbersAndPrecision);\n                                    }\n                                    drawGrid(xGridNumbersAndPrecision[0], xVisibleGridNumbers, calcX, fontOffset + yLabelWidth, ' ' + i18n('units.hertz.a'), function (v) {\n                                        return false;\n                                    });\n                                    canvasContext.restore();\n                                };\n                                var drawGraph = function () {\n                                    canvasContext.save();\n                                    canvasContext.translate(0.5, 0.5);\n                                    // aim at centers of pixels\n                                    canvasContext.strokeStyle = '#F00';\n                                    canvasContext.beginPath();\n                                    for (var _i7 = 0; _i7 < width; _i7++) {\n                                        var x = _i7;\n                                        var _y = calcY(array[_i7]);\n                                        if (_i7 == 0) {\n                                            canvasContext.moveTo(x, _y);\n                                        } else {\n                                            canvasContext.lineTo(x, _y);\n                                        }\n                                    }\n                                    canvasContext.stroke();\n                                    canvasContext.restore();\n                                };\n                                canvasContext.clearRect(0, 0, width, height);\n                                var yLabelWidth = drawYGrid();\n                                drawXGrid(yLabelWidth);\n                                drawGraph();\n                            };\n                            if (magnitudeLogScale) {\n                                plotResponse(magnitudeCanvasContext, magnitudeArray, ' ' + i18n('units.decibel.a'), 0, 1, -100, function (v) {\n                                    return v == 0;\n                                });\n                            } else {\n                                plotResponse(magnitudeCanvasContext, magnitudeArray, '', 1, 0.1, 0, function (v) {\n                                    return v == 0 || v == 1;\n                                });\n                            }\n                            plotResponse(phaseCanvasContext, phaseArray, '', 0, 0.1, -Infinity, function (v) {\n                                return v % 2 == 0;\n                            });\n                        };\n                        var delayedUpdate = debounce(function () {\n                            try {\n                                updatePlots(_this.getFilterNodes(audioContext));\n                            } catch (e) {\n                            }\n                        }, 50);\n                        var $frOption = undefined;\n                        var This = _this;\n                        _this.$output.append($frOption = $('<div class=\\'option only-buttons\\'>').append('<label>' + i18n('options-output.filter.frequencyResponse') + ':</label><span class=\\'space\\'> </span>', $('<button type=\\'button\\'>' + i18n('options-output.show') + '</button>').click(function () {\n                            var $button = $(this);\n                            if (!isFreqResponseUiShown()) {\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var filterNodes = undefined;\n                                    try {\n                                        filterNodes = This.getFilterNodes(audioContext);\n                                    } catch (e) {\n                                        $button.replaceWith(i18n('options-output.filter.nodeError'));\n                                        return;\n                                    }\n                                    var $magnitudeCanvas = undefined, $phaseCanvas = undefined;\n                                    $freqResponseUi = $freqResponseUi.add($('<span>').append(' ', $('<label class=\\'nowrap\\'>').append($('<input type=\\'checkbox\\'>').prop('checked', magnitudeLogScale).change(function () {\n                                        magnitudeLogScale = $(this).prop('checked');\n                                        delayedUpdate();\n                                    }), ' ' + i18n('options-output.filter.logMagnitude')), ' ', $('<label class=\\'nowrap\\'>').append($('<input type=\\'checkbox\\'>').prop('checked', frequencyLogScale).change(function () {\n                                        frequencyLogScale = $(this).prop('checked');\n                                        delayedUpdate();\n                                    }), ' ' + i18n('options-output.filter.logFrequency')), ' ')).add($('<div>').append($('<figure>').append('<figcaption>' + i18n('options-output.filter.magnitude') + '</figcaption>', $magnitudeCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>')), $('<figure>').append('<figcaption>' + i18n('options-output.filter.phase') + '</figcaption>', $phaseCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>'))));\n                                    $button.after($freqResponseUi).text(i18n('options-output.hide'));\n                                    magnitudeCanvasContext = $magnitudeCanvas[0].getContext('2d');\n                                    phaseCanvasContext = $phaseCanvas[0].getContext('2d');\n                                    updatePlots(filterNodes);\n                                    $frOption.removeClass('only-buttons');\n                                }, $button, i18n('options-output.filter.contextError'));\n                            } else {\n                                // TODO cancel scheduled update\n                                $freqResponseUi.remove();\n                                $freqResponseUi = $();\n                                $button.text(i18n('options-output.show'));\n                                $frOption.addClass('only-buttons');\n                            }\n                        })));\n                        option.addUpdateCallback(function () {\n                            if (isFreqResponseUiShown()) {\n                                delayedUpdate();\n                            }\n                        });\n                        return _this;\n                    }\n                    FilterOptionOutput.prototype.runIfCanCreateAudioContext = function runIfCanCreateAudioContext(fn, $ui, errorMessage) {\n                        var initAudioContext = function () {\n                            audioContext = new (AudioContext || webkitAudioContext)();\n                            linearFrequencyArray = new Float32Array(width);\n                            logFrequencyArray = new Float32Array(width);\n                            magnitudeArray = new Float32Array(width);\n                            phaseArray = new Float32Array(width);\n                            magnitudeArray0 = new Float32Array(width);\n                            phaseArray0 = new Float32Array(width);\n                            var maxFrequency = audioContext.sampleRate / 2;\n                            var log10minFrequency = require(27)(minFrequencyInLogMode);\n                            var log10maxFrequency = require(27)(maxFrequency);\n                            for (var i = 0; i < width; i++) {\n                                var x = (i + 0.5) / width;\n                                linearFrequencyArray[i] = maxFrequency * x;\n                                logFrequencyArray[i] = Math.pow(10, mix(log10minFrequency, log10maxFrequency, x));\n                            }\n                            logFrequencyArrayLinearLimit0 = mix(log10minFrequency, log10maxFrequency, 0.5 / width);\n                            logFrequencyArrayLinearLimit1 = mix(log10minFrequency, log10maxFrequency, 1 - 0.5 / width);\n                        };\n                        if (!audioContext) {\n                            try {\n                                initAudioContext();\n                            } catch (e) {\n                                $ui.replaceWith(errorMessage);\n                                return;\n                            }\n                        }\n                        fn(audioContext);\n                    };\n                    // abstract\n                    // getFilterNodes(audioContext)\n                    return FilterOptionOutput;\n                }(GroupOptionOutput);\n                module.exports = FilterOptionOutput;\n            },\n            {\n                '10': 10,\n                '11': 11,\n                '27': 27,\n                '8': 8\n            }\n        ],\n        40: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<abbr title=',\n                        '>'\n                    ], [\n                        '<abbr title=',\n                        '>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ], [\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ], [\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ]), _templateObject4 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<select id=',\n                        '>'\n                    ], [\n                        '<select id=',\n                        '>'\n                    ]), _templateObject5 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ], [\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ]), _templateObject6 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var camelCase = require(6);\n                var formatNumbers = require(10);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var NoseWrapLines = require(18);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var Option = require(45);\n                var CollectionFeature = require(35);\n                var Filter = function () {\n                    function Filter(options, n) {\n                        ___babelHelper___classCallCheck(this, Filter);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(property) {\n                        return 'options.filters.' + this.type + '.' + property.name;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputJsName = function getPropertyInputJsName(propertyName) {\n                        return camelCase(this.type + this.nSuffix + '.' + propertyName + '.input');\n                    };\n                    Filter.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        var _this = this;\n                        var hasRangeInputs = this.nodeProperties.some(function (property) {\n                            if (property.type == 'range') {\n                                var option = _this.options[property.name];\n                                return option.input;\n                            } else {\n                                return false;\n                            }\n                        });\n                        if (hasRangeInputs) {\n                            featureContext.alignedInputs = true;\n                        }\n                    };\n                    Filter.prototype.getHtmlPropertyLines = function getHtmlPropertyLines(i18n, property) {\n                        var _this2 = this;\n                        if (property.skip) {\n                            return Lines.be();\n                        }\n                        var option = this.options[property.name];\n                        var inputHtmlName = this.getPropertyInputHtmlName(property.name);\n                        var a = Lines.b();\n                        if (property.type == 'range' && option.input) {\n                            var p = option.precision;\n                            var fmtAttrs = formatNumbers.html({\n                                min: option.min,\n                                max: option.max,\n                                value: option.value\n                            }, p);\n                            var fmtLabels = formatNumbers({\n                                min: option.min,\n                                max: option.max\n                            }, p);\n                            var minMax = function (n) {\n                                return i18n.numberWithUnits(n, option.unit, function (a, e) {\n                                    return Lines.html(_templateObject, e) + a + '</abbr>';\n                                });\n                            };\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), '<span class=min>' + minMax(fmtLabels.min) + '</span>', Lines.html(_templateObject3, inputHtmlName, fmtAttrs.value, fmtAttrs.min, fmtAttrs.max, p ? Math.pow(0.1, p).toFixed(p) : false), '<span class=max>' + minMax(fmtLabels.max) + '</span>');\n                        } else if (property.type == 'select' && option.input) {\n                            var _WrapLines$b;\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), (_WrapLines$b = WrapLines.b(Lines.html(_templateObject4, inputHtmlName), '</select>')).ae.apply(_WrapLines$b, option.availableValues.map(function (value) {\n                                var title = i18n(_this2.getPropertyOptionName(property) + '.' + value);\n                                return Lines.html(_templateObject5, option.value == value, value != title && value, title);\n                            })));\n                        } else if (property.type == 'xhr') {\n                            a(Lines.html(_templateObject6, inputHtmlName, i18n(this.getPropertyOptionName(property) + '.loading')));\n                        }\n                        return a.e();\n                    };\n                    // { not called if skipNode is set\n                    Filter.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var _this3 = this;\n                        return Lines.bae.apply(Lines, this.nodeProperties.map(function (property) {\n                            return NoseWrapLines.b('<div>', '</div>').ae(_this3.getHtmlPropertyLines(i18n, property));\n                        }));\n                    };\n                    Filter.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this4 = this;\n                        return JsLines.bae.apply(JsLines, [\n                            RefLines.parse('// ' + i18n('comment.filters.' + this.type)),\n                            'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'\n                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                            return prevNodeJsName + '.connect(' + _this4.nodeJsName + ');';\n                        })));\n                    };\n                    ___babelHelper___createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        },\n                        {\n                            key: 'skipNode',\n                            get: function () {\n                                return false;\n                            }\n                        },\n                        {\n                            key: 'nodeJsNames',\n                            get: function () {\n                                return [this.nodeJsName];\n                            }\n                        },\n                        {\n                            key: 'connectToNodeJsNames',\n                            get: function () {\n                                return this.nodeJsNames;\n                            }    // }\n                                 // abstract:\n                                 // get type()\n                                 // get ctxCreateMethodName()\n                                 // get nodeProperties()\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var SinglePathFilter = function (_Filter) {\n                    ___babelHelper___inherits(SinglePathFilter, _Filter);\n                    function SinglePathFilter() {\n                        ___babelHelper___classCallCheck(this, SinglePathFilter);\n                        return ___babelHelper___possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                    }\n                    SinglePathFilter.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this6 = this;\n                        return Lines.bae.apply(Lines, [_Filter.prototype.getJsInitLines.call(this, featureContext, i18n, prevNodeJsNames)].concat(this.nodeProperties.map(function (property) {\n                            if (property.skip) {\n                                return Lines.be();\n                            }\n                            var option = _this6.options[property.name];\n                            var nodePropertyJsName = _this6.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '');\n                            var a = JsLines.b();\n                            if (option.input) {\n                                var inputJsName = _this6.getPropertyInputJsName(property.name);\n                                var inputHtmlName = _this6.getPropertyInputHtmlName(property.name);\n                                var value = inputJsName + '.value';\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                var eventProp = property.type == 'range' ? 'oninput' : 'onchange';\n                                a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', // was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\n                                ';(' + inputJsName + '.' + eventProp + '=function(){', '\\t' + nodePropertyJsName + '=' + value + ';', '})();');\n                            } else if (option.value != option.defaultValue) {\n                                var _value = option.value;\n                                if (property.type == 'select') {\n                                    _value = '\\'' + _value + '\\'';\n                                }\n                                if (property.fn) {\n                                    _value = property.fn(_value);\n                                }\n                                a(nodePropertyJsName + '=' + _value + ';');\n                            }\n                            return a.e();\n                        })));\n                    };\n                    return SinglePathFilter;\n                }(Filter);\n                var PassiveByDefaultSinglePathFilter = function (_SinglePathFilter) {\n                    ___babelHelper___inherits(PassiveByDefaultSinglePathFilter, _SinglePathFilter);\n                    function PassiveByDefaultSinglePathFilter() {\n                        ___babelHelper___classCallCheck(this, PassiveByDefaultSinglePathFilter);\n                        return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(PassiveByDefaultSinglePathFilter, [{\n                            key: 'skipNode',\n                            get: function () {\n                                var _this8 = this;\n                                return this.nodeProperties.every(function (property) {\n                                    var option = _this8.options[property.name];\n                                    return option.value == option.defaultValue && !option.input;\n                                });\n                            }\n                        }]);\n                    return PassiveByDefaultSinglePathFilter;\n                }(SinglePathFilter);\n                var filterClasses = {\n                    gain: function (_PassiveByDefaultSing) {\n                        ___babelHelper___inherits(gain, _PassiveByDefaultSing);\n                        function gain() {\n                            ___babelHelper___classCallCheck(this, gain);\n                            return ___babelHelper___possibleConstructorReturn(this, _PassiveByDefaultSing.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(PassiveByDefaultSinglePathFilter),\n                    panner: function (_PassiveByDefaultSing2) {\n                        ___babelHelper___inherits(panner, _PassiveByDefaultSing2);\n                        function panner() {\n                            ___babelHelper___classCallCheck(this, panner);\n                            return ___babelHelper___possibleConstructorReturn(this, _PassiveByDefaultSing2.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(PassiveByDefaultSinglePathFilter),\n                    biquad: function (_SinglePathFilter2) {\n                        ___babelHelper___inherits(biquad, _SinglePathFilter2);\n                        function biquad() {\n                            ___babelHelper___classCallCheck(this, biquad);\n                            return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter2.apply(this, arguments));\n                        }\n                        ___babelHelper___createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            type: 'select'\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            fn: function (x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            },\n                                            skip: !this.options.type.input && !Option.BiquadFilter.typeUsesQ(this.options.type.value)\n                                        },\n                                        {\n                                            name: 'gain',\n                                            type: 'range',\n                                            skip: !this.options.type.input && !Option.BiquadFilter.typeUsesGain(this.options.type.value)\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    // lowshelf, highshelf and peaking are passive when gain==0\n                                    return !this.options.type.input && [\n                                        'lowshelf',\n                                        'highshelf',\n                                        'peaking'\n                                    ].indexOf(this.options.type.value) >= 0 && !this.options.gain.input && this.options.gain == 0;\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(SinglePathFilter),\n                    iir: function (_SinglePathFilter3) {\n                        ___babelHelper___inherits(iir, _SinglePathFilter3);\n                        function iir() {\n                            ___babelHelper___classCallCheck(this, iir);\n                            return ___babelHelper___possibleConstructorReturn(this, _SinglePathFilter3.apply(this, arguments));\n                        }\n                        iir.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            var _this13 = this;\n                            return JsLines.bae.apply(JsLines, [\n                                RefLines.parse('// ' + i18n('comment.filters.' + this.type)),\n                                'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '([' + this.options.feedforward.entries + '],[' + this.options.feedback.entries + ']);'\n                            ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this13.nodeJsName + ');';\n                            })));\n                        };\n                        ___babelHelper___createClass(iir, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'iir';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createIIRFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [];\n                                }\n                            }\n                        ]);\n                        return iir;\n                    }(SinglePathFilter),\n                    convolver: function (_Filter2) {\n                        ___babelHelper___inherits(convolver, _Filter2);\n                        function convolver() {\n                            ___babelHelper___classCallCheck(this, convolver);\n                            return ___babelHelper___possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        convolver.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            _Filter2.prototype.requestFeatureContext.call(this, featureContext);\n                            featureContext.loader = true;\n                        };\n                        convolver.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            var _this15 = this;\n                            var messageHtmlName = this.getPropertyInputHtmlName('buffer');\n                            var a = JsLines.b();\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                            } else {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')));\n                            }\n                            a.apply(undefined, ['var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this15.nodeJsName + ');';\n                            })));\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a.apply(undefined, [\n                                    'var ' + this.wetGainNodeJsName + '=ctx.createGain();',\n                                    this.nodeJsName + '.connect(' + this.wetGainNodeJsName + ');',\n                                    'var ' + this.dryGainNodeJsName + '=ctx.createGain();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(' + _this15.dryGainNodeJsName + ');';\n                                })));\n                                if (this.options.reverb.input) {\n                                    var inputHtmlName = this.getPropertyInputHtmlName('reverb');\n                                    var inputJsName = this.getPropertyInputJsName('reverb');\n                                    a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', ';(' + inputJsName + '.oninput=function(){', '\\t' + this.wetGainNodeJsName + '.gain.value=' + inputJsName + '.value;', '\\t' + this.dryGainNodeJsName + '.gain.value=1-' + inputJsName + '.value;', '})();');\n                                }\n                            }\n                            a('loadSample(\\'' + this.options.url + '\\',function(buffer){', // TODO html escape\n                            '\\t' + this.nodeJsName + '.buffer=buffer;', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';', '}');\n                            if (featureContext.loaderOnError) {\n                                a.t(',function(){', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.filters.convolver.buffer.error') + '\\';', '}');\n                            }\n                            a.t(');');\n                            return a.e();\n                        };\n                        ___babelHelper___createClass(convolver, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'convolver';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createConvolver';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'reverb',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'buffer',\n                                            type: 'xhr'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'dryGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.dry.gain.node');\n                                }\n                            },\n                            {\n                                key: 'wetGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.wet.gain.node');\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.options.reverb == 0 && !this.options.reverb.input;\n                                }\n                            },\n                            {\n                                key: 'nodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.wetGainNodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.nodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            }\n                        ]);\n                        return convolver;\n                    }(Filter),\n                    equalizer: function (_Filter3) {\n                        ___babelHelper___inherits(equalizer, _Filter3);\n                        function equalizer() {\n                            ___babelHelper___classCallCheck(this, equalizer);\n                            return ___babelHelper___possibleConstructorReturn(this, _Filter3.apply(this, arguments));\n                        }\n                        equalizer.prototype.getFrequencyOption = function getFrequencyOption(i) {\n                            return this.options[this.nodeProperties[i].name];\n                        };\n                        equalizer.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            if (!this.allGainsConstant) {\n                                // TODO this check is likely not needed, this.allGainsConstant is not set\n                                featureContext.alignedInputs = true;\n                            }\n                        };\n                        equalizer.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                            var _this17 = this;\n                            var singleFreq = this.affectedFreqsAndOptions.length == 1;\n                            var allGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == false;\n                            });\n                            var noGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == true;\n                            });\n                            var getJsData = function () {\n                                return _this17.affectedFreqsAndOptions.map(function (fo) {\n                                    if (noGainsConstant) {\n                                        return fo.freq;\n                                    } else {\n                                        return '[' + fo.freq + ',' + (fo.option.input ? 'null' : fo.option.value) + ']';\n                                    }\n                                }).join();\n                            };\n                            var getJsDataItem = function () {\n                                if (noGainsConstant) {\n                                    return 'freq';\n                                } else {\n                                    return 'freqData';\n                                }\n                            };\n                            var getJsLoopLines = function () {\n                                var freq = singleFreq ? _this17.affectedFreqsAndOptions[0].freq : 'freq';\n                                var gain = singleFreq ? _this17.affectedFreqsAndOptions[0].option.value : 'gain';\n                                var nodeJsName = allGainsConstant || singleFreq ? _this17.nodeJsName : 'node';\n                                var inputJsName = singleFreq ? _this17.getPropertyInputJsName('gain' + freq) : 'input';\n                                var inputHtmlNameExpr = singleFreq ? '\\'' + _this17.getPropertyInputHtmlName('gain' + freq) + '\\'' : '\\'' + _this17.getPropertyInputHtmlName('gain') + '\\'+freq';\n                                var a = JsLines.b();\n                                if (!(noGainsConstant || singleFreq)) {\n                                    a('var freq=freqData[0], gain=freqData[1];');\n                                }\n                                if (allGainsConstant && !singleFreq) {\n                                    a('');\n                                } else {\n                                    a('var ');\n                                }\n                                a.t(nodeJsName + '=ctx.' + _this17.ctxCreateMethodName + '();');\n                                if (featureContext.setConnectSampleToJsNames && !singleFreq) {\n                                    a('if (' + _this17.connectToNodeJsName + '===undefined) {', '\\t' + _this17.connectToNodeJsName + '=' + nodeJsName + ';', '}');\n                                }\n                                if (singleFreq) {\n                                    a.apply(undefined, prevNodeJsNames.map(function (prevNodeJsName) {\n                                        return prevNodeJsName + '.connect(' + nodeJsName + ');';\n                                    }));\n                                } else {\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode.connect(' + nodeJsName + ');');\n                                    } else {\n                                        a('prevNodes.forEach(function(prevNode){', '\\tprevNode.connect(' + nodeJsName + ');', '});');\n                                    }\n                                }\n                                a(nodeJsName + '.type=\\'peaking\\';', nodeJsName + '.frequency.value=' + freq + ';');\n                                var constLines = JsLines.bae(nodeJsName + '.gain.value=' + gain + ';');\n                                var varLines = JsLines.bae('var ' + inputJsName + '=document.getElementById(' + inputHtmlNameExpr + ');', ';(' + inputJsName + '.oninput=function(){', '\\t' + nodeJsName + '.gain.value=' + inputJsName + '.value;', '})();');\n                                if (!noGainsConstant && allGainsConstant) {\n                                    a(constLines);\n                                } else if (noGainsConstant && !allGainsConstant) {\n                                    a(varLines);\n                                } else if (!noGainsConstant && !allGainsConstant) {\n                                    a(WrapLines.b('if (gain!==null) {', '} else {', '}').ae(constLines, varLines));\n                                }\n                                if (!singleFreq) {\n                                    var outerNodeJsName = allGainsConstant ? nodeJsName : _this17.nodeJsName + '=' + nodeJsName;\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode=' + outerNodeJsName + ';');\n                                    } else {\n                                        a('prevNodes=[' + outerNodeJsName + '];');\n                                    }\n                                }\n                                return a.e();\n                            };\n                            if (singleFreq) {\n                                return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')), getJsLoopLines());\n                            } else {\n                                var a = JsLines.b();\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                                if (prevNodeJsNames.length == 1) {\n                                    a('var prevNode=' + prevNodeJsNames[0] + ';');\n                                } else {\n                                    a('var prevNodes=[' + prevNodeJsNames.join() + '];');\n                                }\n                                if (featureContext.setConnectSampleToJsNames) {\n                                    a('var ' + this.connectToNodeJsName + ';');\n                                }\n                                a('var ' + this.nodeJsName + ';', WrapLines.b(JsLines.bae(';[' + getJsData() + '].forEach(function(' + getJsDataItem() + '){'), JsLines.bae('});')).ae(getJsLoopLines()));\n                                return a.e();\n                            }\n                        };\n                        ___babelHelper___createClass(equalizer, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'equalizer';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'frequencies',\n                                get: function () {\n                                    return Option.EqualizerFilter.frequencies;\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return this.frequencies.map(function (freq) {\n                                        return {\n                                            name: 'gain' + freq,\n                                            type: 'range'\n                                        };\n                                    });\n                                }\n                            },\n                            {\n                                key: 'affectedFreqsAndOptions',\n                                get: function () {\n                                    var _this18 = this;\n                                    return this.frequencies.map(function (freq, i) {\n                                        var option = _this18.getFrequencyOption(i);\n                                        return {\n                                            freq: freq,\n                                            option: option\n                                        };\n                                    }).filter(function (fo) {\n                                        return fo.option.input != false || fo.option.value != 0;\n                                    });\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.affectedFreqsAndOptions.length == 0;\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsName',\n                                get: function () {\n                                    if (this.affectedFreqsAndOptions.length == 1) {\n                                        return this.nodeJsName;\n                                    } else {\n                                        return camelCase('connect.to.' + this.type + this.nSuffix + '.node');\n                                    }\n                                }\n                            },\n                            {\n                                key: 'connectToNodeJsNames',\n                                get: function () {\n                                    return [this.connectToNodeJsName];\n                                }\n                            }\n                        ]);\n                        return equalizer;\n                    }(Filter)\n                };\n                var FilterSequence = function (_CollectionFeature) {\n                    ___babelHelper___inherits(FilterSequence, _CollectionFeature);\n                    function FilterSequence() {\n                        ___babelHelper___classCallCheck(this, FilterSequence);\n                        return ___babelHelper___possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    FilterSequence.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return filterClasses[entryOption.filter];\n                    };\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        var _arr = this.entries;\n                        for (var _i = 0; _i < _arr.length; _i++) {\n                            var entry = _arr[_i];\n                            if (!entry.skipNode) {\n                                featureContext.audioContext = true;\n                                entry.requestFeatureContext(featureContext);\n                                if (featureContext.connectSampleToJsNames === undefined) {\n                                    featureContext.connectSampleToJsNames = entry.connectToNodeJsNames;\n                                }\n                            }\n                        }\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return Lines.bae.apply(Lines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    FilterSequence.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return InterleaveLines.bae.apply(InterleaveLines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            var lines = entry.getJsInitLines(featureContext, i18n, prevNodeJsNames);\n                            prevNodeJsNames = entry.nodeJsNames;\n                            return lines;\n                        }));\n                    };\n                    FilterSequence.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        var _arr2 = this.entries;\n                        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n                            var entry = _arr2[_i2];\n                            if (!entry.skipNode) {\n                                prevNodeJsNames = entry.nodeJsNames;\n                            }\n                        }\n                        return prevNodeJsNames;\n                    };\n                    return FilterSequence;\n                }(CollectionFeature);\n                module.exports = FilterSequence;\n            },\n            {\n                '10': 10,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '18': 18,\n                '23': 23,\n                '26': 26,\n                '35': 35,\n                '45': 45,\n                '6': 6\n            }\n        ],\n        41: [\n            function (require, module, exports) {\n                var webaudioSpec = 'https://webaudio.github.io/web-audio-api/';\n                var webaudioIssue = function (n) {\n                    return '<a href=\\'https://github.com/WebAudio/web-audio-api/issues/' + n + '\\'>' + n + '</a>';\n                };\n                var webaudioDetect = 'https://github.com/GoogleChrome/web-audio-samples/wiki/Detection-of-lowpass-BiquadFilter-implementation';\n                var enColors = '{<span style=\\'color:#800\\'>red</span>,<span style=\\'color:#080\\'>green</span>,<span style=\\'color:#008\\'>blue</span>,opacity}';\n                var ruColors = '{<span style=\\'color:#800\\'></span> ,<span style=\\'color:#080\\'></span> ,<span style=\\'color:#008\\'></span> ,-}';\n                var langStrings = {\n                    en: {\n                        'options.sources': 'Sources',\n                        'options.sources.{audio,video}': '{Audio,Video} element',\n                        'options.sources.{audio,video}.add': 'Add {} element',\n                        'options.sources.sample': 'Sample',\n                        'options.sources.sample.add': 'Add sample',\n                        'options.sources.sample.buffer.loading': 'Loading and decoding the sample',\n                        'options.sources.sample.buffer.error': 'Error while loading the sample',\n                        'options.sources.sample.repeat': 'Repeat sample',\n                        'options.sources.sample.interval': 'Interval between repeats',\n                        'options.sources.sample.randomShift': 'Random shift of a start time',\n                        'options.sources.sample.pitch': 'Pitch',\n                        'options.sources.sample.randomPitch': 'Random pitch',\n                        'options.sources.sample.gain': 'Gain',\n                        'options.sources.sample.randomGain': 'Random gain',\n                        'options.sources.{audio,video,sample}.url': 'Source URL',\n                        'options.sources.video.{width,height}': 'Player {}',\n                        'options.filters': 'Filters',\n                        'options.filters.gain': 'Gain',\n                        'options.filters.gain.add': 'Add gain',\n                        'options.filters.gain.gain': 'Gain',\n                        'options.filters.panner': 'Stereo panner',\n                        'options.filters.panner.add': 'Add stereo panner',\n                        'options.filters.panner.pan': 'Pan',\n                        'options.filters.biquad': 'Biquad filter',\n                        // [[Digital biquad filter]]\n                        'options.filters.biquad.add': 'Add biquad filter',\n                        'options.filters.biquad.type': 'Filter type',\n                        'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': '{}',\n                        'options.filters.biquad.frequency': 'Frequency',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': 'log(Q)',\n                        'options.filters.biquad.gain': 'Gain',\n                        'options.filters.iir': 'IIR filter',\n                        'options.filters.iir.add': 'Add IIR filter',\n                        'options.filters.iir.feedforward': 'Feedforward coefficients',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': 'Add coefficient',\n                        'options.filters.iir.feedback': 'Feedback coefficients',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': 'Add coefficient',\n                        'options.filters.convolver': 'Convolver',\n                        'options.filters.convolver.add': 'Add convolver',\n                        'options.filters.convolver.url': 'Impulse responce URL',\n                        'options.filters.convolver.reverb': 'Reverb (dry/wet)',\n                        'options.filters.convolver.buffer.loading': 'Loading and decoding the impulse response',\n                        'options.filters.convolver.buffer.error': 'Error while loading the impulse response',\n                        'options.filters.equalizer': 'Equalizer',\n                        'options.filters.equalizer.add': 'Add equalizer',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': '{} Hz gain',\n                        'options.destination': 'Destination',\n                        'options.destination.compressor': 'Dynamics compressor',\n                        'options.destination.compressor.enabled': 'Add dynamics compressor before the destination',\n                        'options.destination.{waveform,frequencies}': '{Waveform,Frequencies} visualization',\n                        'options.destination.{waveform,frequencies}.enabled': 'Enable {} visualization',\n                        'options.destination.waveform.width': 'Waveform line width',\n                        'options.destination.waveform.color': 'Waveform line color',\n                        'options.destination.waveform.color.{r,g,b,a}': 'Waveform line ' + enColors,\n                        'options.destination.frequencies.cutoff': 'Limit plot to a fraction of low frequences',\n                        'options.destination.frequencies.base': 'Frequency bars extend from',\n                        'options.destination.frequencies.base.{bottom,middle}': '{} of canvas',\n                        'options.destination.frequencies.coloring': 'Frequency bars coloring',\n                        'options.destination.frequencies.coloring.component': 'with single color component',\n                        'options.destination.frequencies.coloring.spectral': 'spectral',\n                        'options.destination.frequencies.coloringInput': 'Frequency bars color depends on',\n                        'options.destination.frequencies.coloringInput.{amplitude,frequency}': '{}',\n                        'options.destination.frequencies.outline': 'Frequency bars outline',\n                        'options.destination.frequencies.outline.enabled': 'Enable frequency bars outline',\n                        'options.destination.frequencies.outline.width': 'Frequency bars outline width',\n                        'options.destination.frequencies.outline.color': 'Frequency bars outline color',\n                        'options.destination.frequencies.outline.color.{r,g,b,a}': 'Frequency bars outline ' + enColors,\n                        'options.destination.volume': 'Volume meter',\n                        'options.destination.volume.enabled': 'Enable volume meter',\n                        'options.destination.volume.stereo': 'Meters for left and right stereo channels',\n                        'options.destination.analyser': 'Analyser',\n                        'options.destination.analyser.logFftSize': 'FFT size (power of 2)',\n                        'options.canvas': 'Canvas',\n                        'options.canvas.{width,height}': 'Canvas {}',\n                        'options.canvas.background': 'Background',\n                        'options.canvas.background.type': 'Background type',\n                        'options.canvas.background.type.{clear,filled}': '{}',\n                        'options.canvas.background.color': 'Background fill color',\n                        'options.canvas.background.color.{r,g,b,a}': 'Background fill ' + enColors,\n                        'options.loader': 'Sample loader',\n                        'options.loader.errors': 'Error handling',\n                        'options.loader.errors.none': 'disabled',\n                        'options.loader.errors.network': 'network errors',\n                        'options.loader.errors.http': 'network and HTTP errors',\n                        'options-info.destination.analyser.logFftSize': '[[Fast Fourier transform]] size for the waveform/frequency visualization. Use a larger size to get a wider time window for the waveform and thinner frequency bars.',\n                        'options-info.canvas.background.color.a': 'Lower opacity values lead to a blur effect.',\n                        'options-output.input': 'Editable',\n                        'options-output.range': 'with range',\n                        'options-output.filter.frequencyResponse': 'Frequency response',\n                        'options-output.filter.magnitude': 'Magnitude',\n                        'options-output.filter.phase': 'Phase',\n                        'options-output.filter.logMagnitude': 'log magnitude scale',\n                        'options-output.filter.logFrequency': 'log frequency scale',\n                        'options-output.filter.contextError': 'Error creating audio context. Your browser likely doesn\\'t support Web Audio API.',\n                        'options-output.filter.nodeError': 'Error creating filter node. Your browser likely doesn\\'t support this filter type.',\n                        'options-output.filter.biquad.clone': 'Clone as IIR filter',\n                        'options-output.filter.biquad.clone.{pre,post}': 'Clone with {}-2016-04-15 coefficients',\n                        'options-output.filter.biquad.clone.info': '<a href=\\'' + webaudioSpec + '\\'>The API specification</a> was self-contradictory and implementations weren\\'t following it. Additionally, it was discovered that filter coefficient formulas need to be changed to accomodate a wider range of lowpass and highpass filters. See Web Audio API issues ' + webaudioIssue(769) + ', ' + webaudioIssue(771) + ' and ' + webaudioIssue(791) + ' for details. A possible method to check if an implementation has switched to the updated formulas is offered <a href=\\'' + webaudioDetect + '\\'>here</a>.',\n                        'options-output.show': 'Show',\n                        'options-output.hide': 'Hide',\n                        'code-output.warning.jsfiddle-run': 'You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working',\n                        'code-output.warning.interesting': 'You need at least one source and some processing enabled to get interesting JavaScript code',\n                        'code.title': 'Web Audio API example \\u2014 generated code',\n                        'label.sources.sample.play': 'Play sample',\n                        'label.destination.compressor': 'Enable dynamics compressor',\n                        'comment.context': 'create [audio context][context]',\n                        'comment.sources.audio': 'create [audio source node][source]',\n                        'comment.sources.video': 'create [video source node][source]',\n                        'comment.sources.sample': 'load [sample][buffer]',\n                        'comment.filters.gain': 'create [gain node][gain]',\n                        'comment.filters.panner': 'create [stereo panner node][panner]',\n                        'comment.filters.biquad': 'create [biquad filter node][biquad]',\n                        'comment.filters.iir': 'create [IIR filter node][iir]',\n                        'comment.filters.convolver': 'create dry and wet routes with [convolver node][convolver]',\n                        'comment.filters.convolver.single': 'create [convolver node][convolver]',\n                        'comment.filters.equalizer': 'create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]',\n                        'comment.filters.equalizer.single': 'create equalizer as a [peaking][peaking] [biquad filter node][biquad]',\n                        'comment.destination': 'connect last node to [destination][destination]',\n                        'comment.destination.compressor': 'create [dynamics compressor node][compressor]',\n                        'comment.destination.analyser': 'create [analyser node][analyser]',\n                        'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': 'create [analyser node][analyser] for {waveform,frequencies,waveform and frequencies} visualization',\n                        'comment.destination.analyser.split': 'create [channel splitter node][splitter] connected to two [analyser nodes][analyser]',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2}': 'pixel{,s}',\n                        'units.hertz.a': 'Hz',\n                        'units.hertz.{1,2}': 'Hertz',\n                        'units.decibel.a': 'dB',\n                        'units.decibel.{1,2}': 'decibel{,s}',\n                        'units.second.a': 's',\n                        'units.second.{1,2}': 'second{,s}'\n                    },\n                    ru: {\n                        'options.sources': '',\n                        'options.sources.{audio,video}': ' <code>{}</code>',\n                        'options.sources.{audio,video}.add': '  <code>{}</code>',\n                        'options.sources.sample': '',\n                        'options.sources.sample.add': ' ',\n                        'options.sources.sample.buffer.loading': '    ',\n                        'options.sources.sample.buffer.error': '  ',\n                        'options.sources.sample.repeat': ' ',\n                        'options.sources.sample.interval': '  ',\n                        'options.sources.sample.randomShift': '   ',\n                        'options.sources.sample.pitch': '',\n                        'options.sources.sample.randomPitch': ' ',\n                        'options.sources.sample.gain': '',\n                        'options.sources.sample.randomGain': ' ',\n                        'options.sources.{audio,video,sample}.url': 'URL ',\n                        'options.sources.video.{width,height}': '{,} ',\n                        'options.filters': '',\n                        'options.filters.gain': '',\n                        'options.filters.gain.add': ' ',\n                        'options.filters.gain.gain': ' ',\n                        'options.filters.panner': '',\n                        'options.filters.panner.add': ' ',\n                        'options.filters.panner.pan': '',\n                        'options.filters.biquad': ' ',\n                        'options.filters.biquad.add': '  ',\n                        'options.filters.biquad.type': ' ',\n                        'options.filters.biquad.type.lowpass': ' ',\n                        'options.filters.biquad.type.highpass': ' ',\n                        'options.filters.biquad.type.bandpass': '',\n                        'options.filters.biquad.type.{lowshelf,highshelf,peaking}': '{}',\n                        // TODO\n                        'options.filters.biquad.type.notch': '-',\n                        'options.filters.biquad.type.allpass': '',\n                        // http://www.dsplib.ru/content/allpass/allpass.html\n                        'options.filters.biquad.frequency': '',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': ' ',\n                        'options.filters.biquad.gain': '',\n                        'options.filters.iir': '-',\n                        'options.filters.iir.add': ' -',\n                        'options.filters.iir.feedforward': '  ',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': ' ',\n                        'options.filters.iir.feedback': '  ',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': ' ',\n                        'options.filters.convolver': '',\n                        'options.filters.convolver.add': ' ',\n                        'options.filters.convolver.url': 'URL  ',\n                        'options.filters.convolver.reverb': ' / ',\n                        // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\n                        'options.filters.convolver.buffer.loading': '     ',\n                        'options.filters.convolver.buffer.error': '   ',\n                        'options.filters.equalizer': '',\n                        'options.filters.equalizer.add': ' ',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': '  {} ',\n                        'options.destination': '',\n                        'options.destination.compressor': '',\n                        'options.destination.compressor.enabled': '   ',\n                        'options.destination.{waveform,frequencies}': ' { ,}',\n                        'options.destination.{waveform,frequencies}.enabled': '  { ,}',\n                        'options.destination.waveform.width': '  ',\n                        'options.destination.waveform.color': '  ',\n                        'options.destination.waveform.color.{r,g,b,a}': ruColors + '  ',\n                        'options.destination.frequencies.cutoff': '    ',\n                        'options.destination.frequencies.base': '   ',\n                        'options.destination.frequencies.base.{bottom,middle}': '{,}  <code>canvas</code>',\n                        'options.destination.frequencies.coloring': '  ',\n                        'options.destination.frequencies.coloring.component': '  ',\n                        'options.destination.frequencies.coloring.spectral': '',\n                        'options.destination.frequencies.coloringInput': '   ',\n                        'options.destination.frequencies.coloringInput.{amplitude,frequency}': '{,}',\n                        'options.destination.frequencies.outline': '  ',\n                        'options.destination.frequencies.outline.enabled': '   ',\n                        'options.destination.frequencies.outline.width': '  ',\n                        'options.destination.frequencies.outline.color': '  ',\n                        'options.destination.frequencies.outline.color.{r,g,b,a}': ruColors + '  ',\n                        'options.destination.volume': ' ',\n                        'options.destination.volume.enabled': '  ',\n                        'options.destination.volume.stereo': '      ',\n                        'options.destination.analyser': '',\n                        'options.destination.analyser.logFftSize': '  ( 2)',\n                        'options.canvas': ' <code>canvas</code>',\n                        'options.canvas.{width,height}': '{,}  <code>canvas</code>',\n                        'options.canvas.background': '',\n                        'options.canvas.background.type': ' ',\n                        'options.canvas.background.type.{clear,filled}': '{,}',\n                        'options.canvas.background.color': ' ',\n                        'options.canvas.background.color.{r,g,b,a}': ruColors + ' ',\n                        'options.loader': ' ',\n                        'options.loader.errors': '  ',\n                        'options.loader.errors.none': '',\n                        'options.loader.errors.network': '  ',\n                        'options.loader.errors.http': '     HTTP',\n                        'options-info.destination.analyser.logFftSize': ' [[  |  ]]      .              .',\n                        'options-info.canvas.background.color.a': '  -    .',\n                        'options-output.input': ' ',\n                        'options-output.range': ' ',\n                        'options-output.filter.frequencyResponse': ' ',\n                        'options-output.filter.magnitude': '',\n                        'options-output.filter.phase': '',\n                        'options-output.filter.logMagnitude': '  ',\n                        'options-output.filter.logFrequency': '  ',\n                        'options-output.filter.contextError': '  -. ,    Web Audio API.',\n                        'options-output.filter.nodeError': '   . ,      .',\n                        'options-output.filter.biquad.clone': '   -',\n                        'options-output.filter.biquad.clone.{pre,post}': '     {,} 2016-04-15',\n                        'options-output.filter.biquad.clone.info': '<a href=\\'' + webaudioSpec + '\\'> API</a>       .   ,        ,          ,     .     Web Audio API issues ' + webaudioIssue(769) + ', ' + webaudioIssue(771) + '  ' + webaudioIssue(791) + '.   ,      ,  <a href=\\'' + webaudioDetect + '\\'></a>.',\n                        'options-output.show': '',\n                        'options-output.hide': '',\n                        'code-output.warning.jsfiddle-run': '     JSFiddle     <kbd>Run</kbd>',\n                        'code-output.warning.interesting': '  JavaScript-           ',\n                        'code.title': '  Web Audio API \\u2014  ',\n                        'label.sources.sample.play': ' ',\n                        'label.destination.compressor': ' ',\n                        'comment.context': ' [-][context]',\n                        'comment.sources.audio': ' [  ][source]',\n                        'comment.sources.video': ' [  ][source]',\n                        'comment.sources.sample': ' [][buffer]',\n                        'comment.filters.gain': ' [ ][gain]',\n                        'comment.filters.panner': ' [ ][panner]',\n                        'comment.filters.biquad': ' [  ][biquad]',\n                        'comment.filters.iir': ' [ -][iir]',\n                        'comment.filters.convolver': '      [ ][convolver]',\n                        'comment.filters.convolver.single': ' [ ][convolver]',\n                        'comment.filters.equalizer': '     [peaking][peaking] [ ][biquad]',\n                        'comment.filters.equalizer.single': '    [peaking][peaking] [ ][biquad]',\n                        'comment.destination': '    [][destination]',\n                        'comment.destination.compressor': ' [ ][compressor]',\n                        'comment.destination.analyser': ' [ ][analyser]',\n                        'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': ' [ ][analyser]   { ,,   }',\n                        'comment.destination.analyser.split': ' [  ][splitter],    [ ][analyser]',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2,5}': '{,,}',\n                        'units.hertz.a': '',\n                        'units.hertz.{1,2,5}': '{,,}',\n                        'units.decibel.a': '',\n                        'units.decibel.{1,2,5}': '{,,}',\n                        'units.second.a': '',\n                        'units.second.{1,2,5}': '{,,}'\n                    }\n                };\n                /*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\n                for (var lang in langStrings) {\n                    var strings = langStrings[lang];\n                    strings = require(12)(strings);\n                    strings = require(13)(lang)(strings);\n                    strings = require(20)(lang)(strings);\n                    strings = require(2)(lang)(strings);\n                    langStrings[lang] = strings;\n                }\n                module.exports = require(14)(langStrings);\n            },\n            {\n                '12': 12,\n                '13': 13,\n                '14': 14,\n                '2': 2,\n                '20': 20\n            }\n        ],\n        42: [\n            function (require, module, exports) {\n                var FilterOptionOutput = require(39);\n                var IIRFilterOptionOutput = function (_FilterOptionOutput) {\n                    ___babelHelper___inherits(IIRFilterOptionOutput, _FilterOptionOutput);\n                    function IIRFilterOptionOutput() {\n                        ___babelHelper___classCallCheck(this, IIRFilterOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _FilterOptionOutput.apply(this, arguments));\n                    }\n                    IIRFilterOptionOutput.prototype.getFilterNodes = function getFilterNodes(audioContext) {\n                        return [audioContext.createIIRFilter(this.option.entries[0].entries.map(function (entry) {\n                                return entry.value;\n                            }), this.option.entries[1].entries.map(function (entry) {\n                                return entry.value;\n                            }))];\n                    };\n                    return IIRFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = IIRFilterOptionOutput;\n            },\n            { '39': 39 }\n        ],\n        43: [\n            function (require, module, exports) {\n                var WrapLines = require(26);\n                var JsLines = require(16);\n                var Feature = require(38);\n                var Loader = function (_Feature) {\n                    ___babelHelper___inherits(Loader, _Feature);\n                    function Loader(options) {\n                        ___babelHelper___classCallCheck(this, Loader);\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Loader.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.options.errors != 'none') {\n                            featureContext.loaderOnError = true;\n                        }\n                    };\n                    Loader.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.loader)\n                            return JsLines.be();\n                        var a = JsLines.b();\n                        a('var xhr=new XMLHttpRequest();', 'xhr.open(\\'GET\\',url);', // TODO html escape\n                        'xhr.responseType=\\'arraybuffer\\';', 'xhr.onload=function(){');\n                        if (this.options.errors == 'http') {\n                            a('\\tif (this.status==200) {', '\\t\\tctx.decodeAudioData(this.response,onDecode);', // TODO decoding error handling\n                            '\\t} else {', '\\t\\tthis.onerror();', '\\t}');\n                        } else {\n                            a('\\tctx.decodeAudioData(this.response,onDecode);');\n                        }\n                        a('};');\n                        if (this.options.errors != 'none') {\n                            a('xhr.onerror=onError;');\n                        }\n                        a('xhr.send();');\n                        return WrapLines.b(JsLines.bae('function loadSample(url,onDecode' + (this.options.errors != 'none' ? ',onError' : '') + ') {'), JsLines.bae('}')).ae(a.e());\n                    };\n                    return Loader;\n                }(Feature);\n                module.exports = Loader;\n            },\n            {\n                '16': 16,\n                '26': 26,\n                '38': 38\n            }\n        ],\n        44: [\n            function (require, module, exports) {\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18ns = require(41);\n                var Options = require(47);\n                var Code = require(34);\n                var OptionsOutput = require(46);\n                var CodeOutput = require(33);\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var lang = $container.closest('[lang]').attr('lang');\n                        var i18n = i18ns(lang);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return new Code(options.fix(), i18n);\n                        }, i18n);\n                        options.addUpdateCallback(codeOutput.update);\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output, codeOutput.$output);\n                    });\n                });\n            },\n            {\n                '33': 33,\n                '34': 34,\n                '41': 41,\n                '46': 46,\n                '47': 47\n            }\n        ],\n        45: [\n            function (require, module, exports) {\n                var Option = Object.create(require(19));\n                // differs from webgl-starter:\n                //\tinput is a boolean\n                // \tfloat subclasses have a fixed precision of 2\n                //\tno speed\n                //\tcan specify defaultMin, defaultMax\n                //\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\n                Option.LiveNumber = function (_Option$Number) {\n                    ___babelHelper___inherits(_class, _Option$Number);\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class);\n                        var dataValue = undefined, dataMin = undefined, dataMax = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataMin = data.min;\n                            dataMax = data.max;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this = ___babelHelper___possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                        if (settings.defaultMin !== undefined) {\n                            _this.defaultMin = settings.defaultMin;\n                        } else {\n                            _this.defaultMin = _this.availableMin;\n                        }\n                        if (settings.defaultMax !== undefined) {\n                            _this.defaultMax = settings.defaultMax;\n                        } else {\n                            _this.defaultMax = _this.availableMax;\n                        }\n                        _this._min = dataMin !== undefined ? dataMin : _this.defaultMin;\n                        _this._max = dataMax !== undefined ? dataMax : _this.defaultMax;\n                        _this._input = !!dataInput;\n                        _this._$range = null;\n                        return _this;\n                    }\n                    _class.prototype.updateInternalVisibility = function updateInternalVisibility() {\n                        if (this._$range)\n                            this._$range.toggle(this._input);\n                    };\n                    _class.prototype.exportHelper = function exportHelper(src) {\n                        var data = {};\n                        if (src.value != src.defaultValue)\n                            data.value = src.value;\n                        if (src.min != src.availableMin)\n                            data.min = src.min;\n                        if (src.max != src.availableMax)\n                            data.max = src.max;\n                        if (src.input)\n                            data.input = src.input;\n                        return data;\n                    };\n                    _class.prototype.export = function _export() {\n                        return this.exportHelper(this);\n                    };\n                    _class.prototype.fix = function fix() {\n                        var fixed = _Option$Number.prototype.fix.call(this);\n                        fixed.min = this.min;\n                        fixed.max = this.max;\n                        fixed.input = this.input;\n                        fixed.defaultValue = this.defaultValue;\n                        return fixed;\n                    };\n                    ___babelHelper___createClass(_class, [\n                        {\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.updateInternalVisibility();\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'min',\n                            get: function () {\n                                return this._min;\n                            },\n                            set: function (min) {\n                                this._min = min;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'max',\n                            get: function () {\n                                return this._max;\n                            },\n                            set: function (max) {\n                                this._max = max;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: '$range',\n                            get: function () {\n                                return this._$range;\n                            },\n                            set: function ($range) {\n                                this._$range = $range;\n                                this.updateInternalVisibility();\n                            }\n                        }\n                    ]);\n                    return _class;\n                }(Option.Number);\n                Option.LiveInt = function (_Option$LiveNumber) {\n                    ___babelHelper___inherits(_class2, _Option$LiveNumber);\n                    function _class2() {\n                        ___babelHelper___classCallCheck(this, _class2);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$LiveNumber.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class2, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class2;\n                }(Option.LiveNumber);\n                Option.LiveFloat = function (_Option$LiveNumber2) {\n                    ___babelHelper___inherits(_class3, _Option$LiveNumber2);\n                    function _class3() {\n                        ___babelHelper___classCallCheck(this, _class3);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$LiveNumber2.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(_class3, [{\n                            key: 'precision',\n                            get: function () {\n                                return 2;\n                            }\n                        }]);\n                    return _class3;\n                }(Option.LiveNumber);\n                var FixedLiveSelect = function () {\n                    function FixedLiveSelect(src) {\n                        ___babelHelper___classCallCheck(this, FixedLiveSelect);\n                        this.value = src.value;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableValues = src.availableValues;\n                        this.name = src.name;\n                    }\n                    FixedLiveSelect.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveSelect.prototype.toString = function toString() {\n                        return this.value;\n                    };\n                    return FixedLiveSelect;\n                }();\n                Option.LiveSelect = function (_Option$Select) {\n                    ___babelHelper___inherits(_class4, _Option$Select);\n                    function _class4(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class4);\n                        var dataValue = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this4 = ___babelHelper___possibleConstructorReturn(this, _Option$Select.apply(this, arguments));\n                        _this4._input = !!dataInput;\n                        return _this4;\n                    }\n                    _class4.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        if (this.input)\n                            data.input = this.input;\n                        return data;\n                    };\n                    _class4.prototype.fix = function fix() {\n                        return new FixedLiveSelect(this);\n                    };\n                    ___babelHelper___createClass(_class4, [{\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.update();\n                            }\n                        }]);\n                    return _class4;\n                }(Option.Select);\n                Option.AnyFloat = function (_Option$NonBoolean) {\n                    ___babelHelper___inherits(_class5, _Option$NonBoolean);\n                    function _class5() {\n                        ___babelHelper___classCallCheck(this, _class5);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.BiquadFilter = function (_Option$Group) {\n                    ___babelHelper___inherits(_class6, _Option$Group);\n                    _class6.typeUsesQ = function typeUsesQ(type) {\n                        return !!{\n                            'lowpass': true,\n                            'highpass': true,\n                            'bandpass': true,\n                            'peaking': true,\n                            'notch': true,\n                            'allpass': true\n                        }[type];\n                    };\n                    _class6.typeUsesGain = function typeUsesGain(type) {\n                        return !!{\n                            'lowshelf': true,\n                            'highshelf': true,\n                            'peaking': true\n                        }[type];\n                    };\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'LiveSelect',\n                                'type',\n                                [\n                                    'lowpass',\n                                    'highpass',\n                                    'bandpass',\n                                    'lowshelf',\n                                    'highshelf',\n                                    'peaking',\n                                    'notch',\n                                    'allpass'\n                                ]\n                            ],\n                            [\n                                'LiveInt',\n                                'frequency',\n                                [\n                                    0,\n                                    22050\n                                ],\n                                350,\n                                { unit: 'hertz' }\n                            ],\n                            [\n                                'LiveInt',\n                                'detune',\n                                [\n                                    0,\n                                    100\n                                ],\n                                { unit: '\\xA2' }\n                            ],\n                            [\n                                'LiveFloat',\n                                'Q',\n                                [\n                                    -4,\n                                    4\n                                ],\n                                0\n                            ],\n                            // log Q\n                            [\n                                'LiveInt',\n                                'gain',\n                                [\n                                    -30,\n                                    30\n                                ],\n                                0,\n                                { unit: 'decibel' }\n                            ]\n                        ];\n                        return _Option$Group.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class6(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class6);\n                        var _this6 = ___babelHelper___possibleConstructorReturn(this, _Option$Group.apply(this, arguments));\n                        var type = _this6.entries[0];\n                        var Q = _this6.entries[3];\n                        var gain = _this6.entries[4];\n                        Q.isVisible = function () {\n                            return type.input || Option.BiquadFilter.typeUsesQ(type.value);\n                        };\n                        gain.isVisible = function () {\n                            return type.input || Option.BiquadFilter.typeUsesGain(type.value);\n                        };\n                        type.addUpdateCallback(function () {\n                            Q.updateVisibility();\n                            gain.updateVisibility();\n                        });\n                        return _this6;\n                    }\n                    return _class6;\n                }(Option.Group);\n                Option.IIRFilterCoefs = function (_Option$Array) {\n                    ___babelHelper___inherits(_class7, _Option$Array);\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        ___babelHelper___classCallCheck(this, _class7);\n                        var _this7 = ___babelHelper___possibleConstructorReturn(this, _Option$Array.apply(this, arguments));\n                        if (_this7._entries.length == 0) {\n                            var type = _this7.availableTypes[0];\n                            _this7._entries.push(_this7.makeEntry(type));\n                        }\n                        return _this7;\n                    }\n                    return _class7;\n                }(Option.Array);\n                Option.IIRFilter = function (_Option$Group2) {\n                    ___babelHelper___inherits(_class8, _Option$Group2);\n                    function _class8() {\n                        ___babelHelper___classCallCheck(this, _class8);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Group2.apply(this, arguments));\n                    }\n                    _class8.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'IIRFilterCoefs',\n                                'feedforward',\n                                [[\n                                        'AnyFloat',\n                                        'b',\n                                        1\n                                    ]]\n                            ],\n                            [\n                                'IIRFilterCoefs',\n                                'feedback',\n                                [[\n                                        'AnyFloat',\n                                        'a',\n                                        1\n                                    ]]\n                            ]\n                        ];\n                        return _Option$Group2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    return _class8;\n                }(Option.Group);\n                Option.EqualizerFilter = function (_Option$Group3) {\n                    ___babelHelper___inherits(_class9, _Option$Group3);\n                    function _class9() {\n                        ___babelHelper___classCallCheck(this, _class9);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Group3.apply(this, arguments));\n                    }\n                    _class9.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = Option.EqualizerFilter.frequencies.map(function (freq) {\n                            return [\n                                'LiveInt',\n                                'gain' + freq,\n                                [\n                                    -30,\n                                    30\n                                ],\n                                0,\n                                { unit: 'decibel' }\n                            ];\n                        });\n                        return _Option$Group3.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    ___babelHelper___createClass(_class9, null, [{\n                            key: 'frequencies',\n                            get: function () {\n                                return [\n                                    60,\n                                    170,\n                                    350,\n                                    1000,\n                                    3500,\n                                    10000\n                                ];\n                            }\n                        }]);\n                    return _class9;\n                }(Option.Group);\n                Option.Filters = function (_Option$Array2) {\n                    ___babelHelper___inherits(_class10, _Option$Array2);\n                    function _class10() {\n                        ___babelHelper___classCallCheck(this, _class10);\n                        return ___babelHelper___possibleConstructorReturn(this, _Option$Array2.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.Array);\n                module.exports = Option;\n            },\n            { '19': 19 }\n        ],\n        46: [\n            function (require, module, exports) {\n                var Option = require(45);\n                var BaseOptionsOutput = require(21);\n                var ArrayOptionOutput = require(1);\n                var BiquadFilterOptionOutput = require(31);\n                var IIRFilterOptionOutput = require(42);\n                var EqualizerFilterOptionOutput = require(37);\n                var FiltersOptionOutput = function (_ArrayOptionOutput) {\n                    ___babelHelper___inherits(FiltersOptionOutput, _ArrayOptionOutput);\n                    function FiltersOptionOutput() {\n                        ___babelHelper___classCallCheck(this, FiltersOptionOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _ArrayOptionOutput.apply(this, arguments));\n                    }\n                    FiltersOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var $subOutput = _ArrayOptionOutput.prototype.writeDraggableSubOption.call(this, subOption, writeOption, i18n);\n                        var This = this;\n                        if (subOption instanceof Option.BiquadFilter) {\n                            $subOutput.find('button.clone').click(function () {\n                                var $button = $(this);\n                                var coefs = $button.data('coefs');\n                                if (coefs) {\n                                    var entry = This.option.makeEntry('iir', coefs);\n                                    This.$entries.append(This.writeDraggableSubOption(entry, writeOption, i18n));\n                                    This.updateArrayEntries();\n                                }\n                            });\n                        }\n                        return $subOutput;\n                    };\n                    return FiltersOptionOutput;\n                }(ArrayOptionOutput);\n                var IIRFilterCoefsOptionOutput = function (_ArrayOptionOutput2) {\n                    ___babelHelper___inherits(IIRFilterCoefsOptionOutput, _ArrayOptionOutput2);\n                    function IIRFilterCoefsOptionOutput(option, writeOption, i18n, generateId) {\n                        ___babelHelper___classCallCheck(this, IIRFilterCoefsOptionOutput);\n                        var _this2 = ___babelHelper___possibleConstructorReturn(this, _ArrayOptionOutput2.call(this, option, writeOption, i18n, generateId));\n                        _this2.updateArrayEntryLabels();\n                        return _this2;\n                    }\n                    IIRFilterCoefsOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return this.option.entries.length > 1;\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        _ArrayOptionOutput2.prototype.updateArrayEntries.call(this);\n                        this.updateArrayEntryLabels();\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntryLabels = function updateArrayEntryLabels() {\n                        this.$entries.children().each(function (i) {\n                            var c = $(this).data('option').name;\n                            $(this).find('label').addClass('short').html(c + '<sub>' + i + '</sub>:');\n                        });\n                    };\n                    return IIRFilterCoefsOptionOutput;\n                }(ArrayOptionOutput);\n                var OptionsOutput = function (_BaseOptionsOutput) {\n                    ___babelHelper___inherits(OptionsOutput, _BaseOptionsOutput);\n                    function OptionsOutput() {\n                        ___babelHelper___classCallCheck(this, OptionsOutput);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseOptionsOutput.apply(this, arguments));\n                    }\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        var _this4 = this;\n                        _BaseOptionsOutput.prototype.setOptionClassWriters.call(this, optionClassWriters);\n                        optionClassWriters.set(Option.LiveNumber, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var writeMinMaxInput = function (minOrMax) {\n                                return setInputAttrs($('<input type=\\'number\\' required>')).val(option[minOrMax]).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        option[minOrMax] = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var $inputCheckbox = undefined, $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var $output = optionClassWriters.get(Option.Number)(option, writeOption, i18n, generateId);\n                            $output.find('button').before($('<label class=\\'nowrap\\'>').append($inputCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' ' + i18n('options-output.input')), ' ', option.$range = $('<span class=\\'range\\'>').append(i18n('options-output.range') + ' ', $('<span class=\\'nowrap\\'>').append($rangeMinInput = writeMinMaxInput('min'), ' .. ', $rangeMaxInput = writeMinMaxInput('max'))), ' ').click(function () {\n                                $inputCheckbox.prop('checked', false).change();\n                                $rangeMinInput.val(option.defaultMin).change();\n                                $rangeMaxInput.val(option.defaultMax).change();\n                            });\n                            return $output;\n                        });\n                        optionClassWriters.set(Option.LiveSelect, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var $select = undefined, $inputCheckbox = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append(// not inheriting Option.Select b/c don't know how to handle reset button\n                            _this4.getLeadLabel(id, i18n, option), $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }), ' ', $('<label class=\\'nowrap\\'>').append($inputCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' ' + i18n('options-output.input')), ' ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $select.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.AnyFloat, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append(_this4.getLeadLabel(id, i18n, option), $('<input type=\\'number\\' id=\\'' + id + '\\' step=\\'any\\' required>').val(option.value).on('input change', function () {\n                                if (this.checkValidity()) {\n                                    option.value = parseFloat(this.value);\n                                }\n                            }));\n                        });\n                        optionClassWriters.set(Option.IIRFilterCoefs, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterCoefsOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.BiquadFilter, function () {\n                            return new (Function.prototype.bind.apply(BiquadFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.IIRFilter, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.EqualizerFilter, function () {\n                            return new (Function.prototype.bind.apply(EqualizerFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Filters, function () {\n                            return new (Function.prototype.bind.apply(FiltersOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }(BaseOptionsOutput);\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '21': 21,\n                '31': 31,\n                '37': 37,\n                '42': 42,\n                '45': 45\n            }\n        ],\n        47: [\n            function (require, module, exports) {\n                var BaseOptions = require(22);\n                var Options = function (_BaseOptions) {\n                    ___babelHelper___inherits(Options, _BaseOptions);\n                    function Options() {\n                        ___babelHelper___classCallCheck(this, Options);\n                        return ___babelHelper___possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    ___babelHelper___createClass(Options, [\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [\n                                    [\n                                        'Array',\n                                        'sources',\n                                        [\n                                            [\n                                                'Group',\n                                                'audio',\n                                                [[\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            // original w3c mooc\n                                                            'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/drums.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg'\n                                                        ]\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'video',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.mp4'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'width',\n                                                        [\n                                                            1,\n                                                            1920\n                                                        ],\n                                                        320,\n                                                        { unit: 'pixel' }\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'height',\n                                                        [\n                                                            1,\n                                                            1080\n                                                        ],\n                                                        240,\n                                                        { unit: 'pixel' }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'sample',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/shoot1.mp3',\n                                                            'http://mainline.i3s.unice.fr/mooc/shoot2.mp3'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'repeat',\n                                                        [\n                                                            1,\n                                                            20\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'interval',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ],\n                                                        0.1,\n                                                        { unit: 'second' }\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomShift',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ],\n                                                        { unit: 'second' }\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'pitch',\n                                                        [\n                                                            0,\n                                                            2\n                                                        ],\n                                                        1\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomPitch',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            2\n                                                        ],\n                                                        1\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'randomGain',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        'source'\n                                    ],\n                                    [\n                                        'Filters',\n                                        'filters',\n                                        [\n                                            [\n                                                'Group',\n                                                'gain',\n                                                [[\n                                                        'LiveFloat',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        { defaultMax: 1 }\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'panner',\n                                                [[\n                                                        'LiveFloat',\n                                                        'pan',\n                                                        [\n                                                            -1,\n                                                            1\n                                                        ],\n                                                        0\n                                                    ]]\n                                            ],\n                                            [\n                                                'BiquadFilter',\n                                                'biquad'\n                                            ],\n                                            [\n                                                'IIRFilter',\n                                                'iir'\n                                            ],\n                                            [\n                                                'Group',\n                                                'convolver',\n                                                [\n                                                    [\n                                                        'LiveFloat',\n                                                        'reverb',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            // original w3c mooc\n                                                            'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg'\n                                                        ]\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'EqualizerFilter',\n                                                'equalizer'\n                                            ]\n                                        ],\n                                        'filter'\n                                    ],\n                                    [\n                                        'Group',\n                                        'destination',\n                                        [\n                                            [\n                                                'Group',\n                                                'compressor',\n                                                [[\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ]]\n                                            ],\n                                            // Firefox compresses automatically?\n                                            [\n                                                'Group',\n                                                'waveform',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Float',\n                                                        'width',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        {\n                                                            unit: 'pixel',\n                                                            visibilityData: { 'destination.waveform.enabled': [true] }\n                                                        }\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'destination.waveform.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'frequencies',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'cutoff',\n                                                        [\n                                                            10,\n                                                            100\n                                                        ],\n                                                        100,\n                                                        {\n                                                            unit: '%',\n                                                            visibilityData: { 'destination.frequencies.enabled': [true] }\n                                                        }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'base',\n                                                        [\n                                                            'bottom',\n                                                            'middle'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'coloring',\n                                                        [\n                                                            'component',\n                                                            'spectral'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Select',\n                                                        'coloringInput',\n                                                        [\n                                                            'amplitude',\n                                                            'frequency'\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'outline',\n                                                        [\n                                                            [\n                                                                'Checkbox',\n                                                                'enabled'\n                                                            ],\n                                                            [\n                                                                'Float',\n                                                                'width',\n                                                                [\n                                                                    0,\n                                                                    10\n                                                                ],\n                                                                1,\n                                                                {\n                                                                    unit: 'pixel',\n                                                                    visibilityData: { 'destination.frequencies.outline.enabled': [true] }\n                                                                }\n                                                            ],\n                                                            [\n                                                                'Group',\n                                                                'color',\n                                                                [\n                                                                    [\n                                                                        'Int',\n                                                                        'r',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'g',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'b',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        0,\n                                                                        { unit: '%' }\n                                                                    ],\n                                                                    [\n                                                                        'Int',\n                                                                        'a',\n                                                                        [\n                                                                            0,\n                                                                            100\n                                                                        ],\n                                                                        100,\n                                                                        { unit: '%' }\n                                                                    ]\n                                                                ],\n                                                                { visibilityData: { 'destination.frequencies.outline.enabled': [true] } }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'destination.frequencies.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'volume',\n                                                [\n                                                    [\n                                                        'Checkbox',\n                                                        'enabled'\n                                                    ],\n                                                    [\n                                                        'Checkbox',\n                                                        'stereo',\n                                                        { visibilityData: { 'destination.volume.enabled': [true] } }\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'analyser',\n                                                [[\n                                                        'Int',\n                                                        'logFftSize',\n                                                        [\n                                                            5,\n                                                            12\n                                                        ],\n                                                        8\n                                                    ]],\n                                                {\n                                                    visibilityData: {\n                                                        'destination.waveform.enabled': [true],\n                                                        'destination.frequencies.enabled': [true],\n                                                        'destination.volume.enabled': [true]\n                                                    },\n                                                    visibilityDataLogic: 'or'\n                                                }\n                                            ]\n                                        ]\n                                    ],\n                                    [\n                                        'Group',\n                                        'canvas',\n                                        [\n                                            [\n                                                'Int',\n                                                'width',\n                                                [\n                                                    1,\n                                                    1920\n                                                ],\n                                                300,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Int',\n                                                'height',\n                                                [\n                                                    1,\n                                                    1080\n                                                ],\n                                                100,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Group',\n                                                'background',\n                                                [\n                                                    [\n                                                        'Select',\n                                                        'type',\n                                                        [\n                                                            'clear',\n                                                            'filled'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'canvas.background.type': ['filled'] } }\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        {\n                                            visibilityData: {\n                                                'destination.waveform.enabled': [true],\n                                                'destination.frequencies.enabled': [true],\n                                                'destination.volume.enabled': [true]\n                                            },\n                                            visibilityDataLogic: 'or'\n                                        }\n                                    ],\n                                    [\n                                        'Group',\n                                        'loader',\n                                        [[\n                                                'Select',\n                                                'errors',\n                                                [\n                                                    'none',\n                                                    'network',\n                                                    'http'\n                                                ]\n                                            ]]\n                                    ]\n                                ];\n                            }\n                        },\n                        {\n                            key: 'optionClasses',\n                            // TODO visibility depending on sources and filters\n                            get: function () {\n                                return require(45);\n                            }\n                        }\n                    ]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            {\n                '22': 22,\n                '45': 45\n            }\n        ],\n        48: [\n            function (require, module, exports) {\n                var _templateObject = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ], [\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ]), _templateObject2 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ], [\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ]), _templateObject3 = ___babelHelper___taggedTemplateLiteralLoose([\n                        '<button id=',\n                        ' disabled>',\n                        '</button> <span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<button id=',\n                        ' disabled>',\n                        '</button> <span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var camelCase = require(6);\n                var formatNumbers = require(10);\n                var Lines = require(17);\n                var JsLines = require(16);\n                var WrapLines = require(26);\n                var InterleaveLines = require(15);\n                var RefLines = require(23);\n                var CollectionFeature = require(35);\n                var Source = function () {\n                    function Source(options, n) {\n                        ___babelHelper___classCallCheck(this, Source);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Source.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return WrapLines.b('<div>', '</div>').ae(this.getElementHtmlLines(featureContext, i18n));\n                    };\n                    Source.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n) {\n                        return JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'var ' + this.nodeJsName + '=ctx.createMediaElementSource(document.getElementById(\\'' + this.elementHtmlName + '\\'));');\n                    };\n                    // abstract:\n                    // get type()\n                    // getElementHtmlLines(featureContext,i18n)\n                    ___babelHelper___createClass(Source, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'elementHtmlName',\n                            get: function () {\n                                return 'my.' + this.type + this.nSuffix;\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Source;\n                }();\n                var sourceClasses = {\n                    audio: function (_Source) {\n                        ___babelHelper___inherits(audio, _Source);\n                        function audio() {\n                            ___babelHelper___classCallCheck(this, audio);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source.apply(this, arguments));\n                        }\n                        audio.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject, this.options.url, this.elementHtmlName, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        ___babelHelper___createClass(audio, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'audio';\n                                }\n                            }]);\n                        return audio;\n                    }(Source),\n                    video: function (_Source2) {\n                        ___babelHelper___inherits(video, _Source2);\n                        function video() {\n                            ___babelHelper___classCallCheck(this, video);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source2.apply(this, arguments));\n                        }\n                        video.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject2, this.options.url, this.elementHtmlName, this.options.width, this.options.height, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        ___babelHelper___createClass(video, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'video';\n                                }\n                            }]);\n                        return video;\n                    }(Source),\n                    sample: function (_Source3) {\n                        ___babelHelper___inherits(sample, _Source3);\n                        function sample() {\n                            ___babelHelper___classCallCheck(this, sample);\n                            return ___babelHelper___possibleConstructorReturn(this, _Source3.apply(this, arguments));\n                        }\n                        sample.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            var messageHtmlName = this.elementHtmlName + '.buffer';\n                            return Lines.bae(Lines.html(_templateObject3, this.elementHtmlName, i18n('label.sources.sample.play'), messageHtmlName, i18n('options.sources.sample.buffer.loading')));\n                        };\n                        sample.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n) {\n                            var _this4 = this;\n                            var messageHtmlName = this.elementHtmlName + '.buffer';\n                            var fmtMul = function (fmtNum) {\n                                if (fmtNum == 1) {\n                                    return '';\n                                } else {\n                                    return '*' + fmtNum;\n                                }\n                            };\n                            var getSampleLines = function (startOptions) {\n                                var randomValue = function (baseOption, randomOption) {\n                                    var numbers = {};\n                                    numbers.base = baseOption;\n                                    if (randomOption > 0) {\n                                        numbers.random = randomOption;\n                                    }\n                                    var fmt = formatNumbers.js(numbers);\n                                    var value = fmt.base;\n                                    if (randomOption > 0) {\n                                        value += '+Math.random()' + fmtMul(fmt.random);\n                                    }\n                                    return value;\n                                };\n                                var a = JsLines.b();\n                                var lastNodeName = 'bufferSourceNode';\n                                a('var bufferSourceNode=ctx.createBufferSource();', 'bufferSourceNode.buffer=buffer;');\n                                if (_this4.options.pitch != 1 || _this4.options.randomPitch > 0) {\n                                    a('bufferSourceNode.playbackRate.value=' + randomValue(_this4.options.pitch, _this4.options.randomPitch) + ';');\n                                }\n                                if (_this4.options.gain != 1 || _this4.options.randomGain > 0) {\n                                    lastNodeName = 'bufferSourceGainNode';\n                                    a('var bufferSourceGainNode=ctx.createGain();', 'bufferSourceNode.connect(bufferSourceGainNode);', 'bufferSourceGainNode.gain.value=' + randomValue(_this4.options.gain, _this4.options.randomGain) + ';');\n                                }\n                                if (featureContext.connectSampleToCompressor) {\n                                    a.apply(undefined, [\n                                        'if (document.getElementById(\\'my.compressor\\').checked) {',\n                                        '\\t' + lastNodeName + '.connect(compressorNode);',\n                                        '} else {'\n                                    ].concat(featureContext.connectSampleToJsNames.map(function (nodeJsName) {\n                                        return '\\t' + lastNodeName + '.connect(' + nodeJsName + ');';\n                                    }), ['}']));\n                                } else {\n                                    a.apply(undefined, featureContext.connectSampleToJsNames.map(function (nodeJsName) {\n                                        return lastNodeName + '.connect(' + nodeJsName + ');';\n                                    }));\n                                }\n                                a('bufferSourceNode.start(' + startOptions + ');');\n                                return a.e();\n                            };\n                            var getOnClickLines = function () {\n                                var startOptions = '';\n                                var numbers = {};\n                                if (_this4.options.repeat != 1) {\n                                    numbers.interval = _this4.options.interval;\n                                }\n                                if (_this4.options.randomShift > 0) {\n                                    numbers.randomShift = _this4.options.randomShift;\n                                }\n                                var fmt = formatNumbers.js(numbers);\n                                if (_this4.options.repeat != 1) {\n                                    startOptions += '+i' + fmtMul(fmt.interval);\n                                }\n                                if (_this4.options.randomShift > 0) {\n                                    startOptions += '+Math.random()' + fmtMul(fmt.randomShift);\n                                }\n                                if (startOptions.length > 0) {\n                                    startOptions = 'ctx.currentTime' + startOptions;\n                                }\n                                if (_this4.options.repeat == 1) {\n                                    return getSampleLines(startOptions);\n                                } else {\n                                    return WrapLines.b(JsLines.bae('for (var i=0;i<' + _this4.options.repeat + ';i++) {'), JsLines.bae('}')).ae(getSampleLines(startOptions));\n                                }\n                            };\n                            var getOnDecodeLines = function () {\n                                var a = JsLines.b();\n                                a('var button=document.getElementById(\\'' + _this4.elementHtmlName + '\\');');\n                                a(WrapLines.b(JsLines.bae('button.onclick=function(){'), JsLines.bae('};')).ae(getOnClickLines()));\n                                a('button.disabled=false;', 'document.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';');\n                                return a.e();\n                            };\n                            var getOnErrorLines = function () {\n                                return JsLines.bae('document.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.sources.sample.buffer.error') + '\\';');\n                            };\n                            var leadLines = JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'loadSample(\\'' + this.options.url + '\\',function(buffer){');\n                            var midLines = JsLines.bae('},function(){');\n                            var endLines = JsLines.bae('});');\n                            if (!featureContext.loaderOnError) {\n                                return WrapLines.b(leadLines, endLines).ae(getOnDecodeLines());\n                            } else {\n                                return WrapLines.b(leadLines, midLines, endLines).ae(getOnDecodeLines(), getOnErrorLines());\n                            }\n                        };\n                        ___babelHelper___createClass(sample, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'sample';\n                                }\n                            }]);\n                        return sample;\n                    }(Source)\n                };\n                var SourceSet = function (_CollectionFeature) {\n                    ___babelHelper___inherits(SourceSet, _CollectionFeature);\n                    function SourceSet() {\n                        ___babelHelper___classCallCheck(this, SourceSet);\n                        return ___babelHelper___possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    SourceSet.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return sourceClasses[entryOption.source];\n                    };\n                    SourceSet.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.entries.length > 0) {\n                            featureContext.audioProcessing = true;\n                        }\n                        if (this.entries.some(function (entry) {\n                                return entry.type == 'sample';\n                            })) {\n                            featureContext.audioContext = true;\n                            featureContext.loader = true;\n                            featureContext.setConnectSampleToJsNames = true;\n                        }\n                    };\n                    SourceSet.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioContext) {\n                            a.apply(undefined, this.entries.map(function (entry) {\n                                return entry.getJsInitLines(featureContext, i18n);\n                            }));\n                        }\n                        return a.e();\n                    };\n                    SourceSet.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        var nodeJsNames = [];\n                        if (featureContext.audioContext) {\n                            nodeJsNames = this.entries.filter(function (entry) {\n                                return entry.type != 'sample';\n                            }).map(function (entry) {\n                                return entry.nodeJsName;\n                            });\n                        }\n                        if (nodeJsNames.length > 0) {\n                            return nodeJsNames;\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return SourceSet;\n                }(CollectionFeature);\n                module.exports = SourceSet;\n            },\n            {\n                '10': 10,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '23': 23,\n                '26': 26,\n                '35': 35,\n                '6': 6\n            }\n        ]\n    }, {}, [44]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nclass ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$dragged=null\r\n\t\tthis.$entries=$(\"<div>\").append(\r\n\t\t\toption.entries.map(subOption=>this.writeDraggableSubOption(subOption,writeOption,i18n))\r\n\t\t)\r\n\t\tconst $buttons=$(\"<div class='buttons'>\")\r\n\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\tif (i) $buttons.append(\" \")\r\n\t\t\t$buttons.append(\r\n\t\t\t\t$(\"<button type='button'>\").html(\r\n\t\t\t\t\ti18n('options.'+option.fullName+'.'+type+'.add')\r\n\t\t\t\t).click(()=>{\r\n\t\t\t\t\t//option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\r\n\t\t\t\t\tthis.$entries.append(\r\n\t\t\t\t\t\tthis.writeDraggableSubOption(option.makeEntry(type),writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\r\n\t\t\t\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\",\r\n\t\t\tthis.$entries,\r\n\t\t\t$buttons\r\n\t\t)\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn true\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tthis.option.entries=this.$entries.children().map(function(){\r\n\t\t\treturn $(this).data('option')\r\n\t\t}).get()\r\n\t}\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\tconst moveUp=$moved=>{\r\n\t\t\t$moved.prev().before($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst moveDown=$moved=>{\r\n\t\t\t$moved.next().after($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst attemptDelete=$entry=>{\r\n\t\t\tif (this.canDeleteEntry($entry)) {\r\n\t\t\t\t$entry.remove()\r\n\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\treturn $(\"<div class='draggable-with-handle'>\").data('option',subOption).append(\r\n\t\t\twriteOption(subOption),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<span draggable='true' tabindex='0' title='\"+i18n('options-output.drag.tip')+\"'>\").append(\r\n\t\t\t\t\"<span>\"+i18n('options-output.drag')+\"</span>\"\r\n\t\t\t).on('dragstart',function(ev){\r\n\t\t\t\tThis.$dragged=$(this).parent()\r\n\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move'\r\n\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name)\r\n\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage(This.$dragged[0],0,0)\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tThis.$dragged.addClass('ghost')\r\n\t\t\t\t},0)\r\n\t\t\t}).on('touchstart',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\t$sorted.addClass('ghost')\r\n\t\t\t\treturn false // disable touch panning on Firefox\r\n\t\t\t}).on('touchmove',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\tconst h=$sorted.height()\r\n\t\t\t\tconst t=$sorted.offset().top\r\n\t\t\t\tconst y=ev.originalEvent.touches[0].pageY // TODO test if length of touches is 1\r\n\t\t\t\tconst $prev=$sorted.prev()\r\n\t\t\t\tif ($prev.length && y<t && y-$prev.offset().top<h) {\r\n\t\t\t\t\tmoveUp($sorted)\r\n\t\t\t\t}\r\n\t\t\t\tconst $next=$sorted.next()\r\n\t\t\t\tif ($next.length && y>t+h && y-$next.offset().top>$next.height()-h) {\r\n\t\t\t\t\tmoveDown($sorted)\r\n\t\t\t\t}\r\n\t\t\t\treturn false // disable touch panning\r\n\t\t\t}).on('touchend touchcancel',function(ev){\r\n\t\t\t\tconst $sorted=$(this).parent()\r\n\t\t\t\t$sorted.removeClass('ghost')\r\n\t\t\t}).keydown(function(ev){\r\n\t\t\t\tconst $handle=$(this)\r\n\t\t\t\tconst $sorted=$handle.parent()\r\n\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\tmoveUp($sorted)\r\n\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\tmoveDown($sorted)\r\n\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button class='delete' title='\"+i18n('options-output.delete.tip')+\"'>\").append(\r\n\t\t\t\t\"<span>\"+i18n('options-output.delete')+\"</span>\"\r\n\t\t\t).click(function(){\r\n\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t}).keydown(function(ev){\r\n\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t).on('dragover',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tev.originalEvent.dataTransfer.dropEffect='move'\r\n\t\t\tconst $target=$(this)\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tif ($target.next().is(This.$dragged)) {\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y<dh) {\r\n\t\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.nextAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t} else if ($target.prev().is(This.$dragged)) {\r\n\t\t\t\t\tconst th=$target.height()\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y>th-dh) {\r\n\t\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.prevAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).on('drop',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t}).on('dragend',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tThis.$dragged.removeClass('ghost')\r\n\t\t\t\tThis.$dragged=null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=ArrayOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='code-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'save': \"Save source code\",\r\n\t\t\t'run': \"Run in new window\",\r\n\t\t\t'open.codepen': \"Open in CodePen\",\r\n\t\t\t'open.jsfiddle': \"Open in JSFiddle\",\r\n\t\t\t'open.plunker': \"Open in Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"embedded in HTML source code\",\r\n\t\t\t'mode.full': \"complete HTML\",\r\n\t\t\t'mode.body': \"only HTML body\",\r\n\t\t\t'mode.embed': \"embed in HTML\",\r\n\t\t\t'mode.paste': \"extract to paste into HTML later\",\r\n\t\t\t'mode.file': \"extract to load as external resource\",\r\n\t\t\t'formatting': \"Formatting\",\r\n\t\t\t'formatting.indent': \"indent with tabs\",\r\n\t\t\t'formatting.indentNumber': \"spaces per indent\",\r\n\t\t\t'formatting.jsSemicolons': \"JavaScript semicolons\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'save': \"  \",\r\n\t\t\t'run': \"   \",\r\n\t\t\t'open.codepen': \"  CodePen\",\r\n\t\t\t'open.jsfiddle': \"  JSFiddle\",\r\n\t\t\t'open.plunker': \"  Plunker\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"   HTML\",\r\n\t\t\t'mode.full': \"\",\r\n\t\t\t'mode.body': \" <code>body</code>\",\r\n\t\t\t'mode.embed': \"  HTML\",\r\n\t\t\t'mode.paste': \"     HTML\",\r\n\t\t\t'mode.file': \"      \",\r\n\t\t\t'formatting': \"\",\r\n\t\t\t'formatting.indent': \"   tab\",\r\n\t\t\t'formatting.indentNumber': \"  \",\r\n\t\t\t'formatting.jsSemicolons': \"<code>;</code>  JavaScript\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (  <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>)  .   .\",\r\n\t\t},\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst debounce=require('./fake-lodash/debounce')\r\nconst detailsPolyfill=require('./details-polyfill')\r\n\r\nconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html)\r\n\r\nconst makeObjectWithSetters=(values,setCallback)=>{\r\n\tconst obj={}\r\n\tfor (let prop in values) {\r\n\t\tObject.defineProperty(obj,prop,{\r\n\t\t\tget: ()=>values[prop],\r\n\t\t\tset: v=>{\r\n\t\t\t\tvalues[prop]=v\r\n\t\t\t\tsetCallback()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn obj\r\n}\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCode,i18n) {\r\n\t\tthis.formatting=makeObjectWithSetters(\r\n\t\t\tthis.defaultFormatting,\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.sectionModes=makeObjectWithSetters(\r\n\t\t\t{html:'full',css:'embed',js:'embed'},\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis._code=generateCode()\r\n\t\tthis.update=debounce(()=>{\r\n\t\t\tthis._code=generateCode()\r\n\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t},200)\r\n\r\n\t\tthis.initDomProps()\r\n\t\tconst writeFormattingControls=()=>{\r\n\t\t\tconst This=this\r\n\t\t\tlet $indentCheckbox,$indentNumber\r\n\t\t\tconst updateIndent=()=>{\r\n\t\t\t\tlet indent='\\t'\r\n\t\t\t\tif (!$indentCheckbox.prop('checked')) {\r\n\t\t\t\t\tlet n=4\r\n\t\t\t\t\tif ($indentNumber[0].checkValidity()) {\r\n\t\t\t\t\t\tn=Number($indentNumber.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindent=' '.repeat(n)\r\n\t\t\t\t}\r\n\t\t\t\tthis.formatting.indent=indent\r\n\t\t\t}\r\n\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\"<summary>\"+i18n('code-output.formatting')+\"</summary>\",\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.indent=='\\t')\r\n\t\t\t\t\t\t\t.change(updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indent')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentNumber=$(\"<input type='number' min='0' max='32' required>\")\r\n\t\t\t\t\t\t\t.val(this.formatting.indent=='\\t'?4:this.formatting.indent.length)\r\n\t\t\t\t\t\t\t.on('input change',updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indentNumber')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.jsSemicolons)\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\tThis.formatting.jsSemicolons=this.checked\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.jsSemicolons')\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst writeSection=(sectionName)=>{\r\n\t\t\treturn $(\"<details open>\").append(\r\n\t\t\t\tthis.writeSectionSummary(sectionName,i18n),\r\n\t\t\t\tthis.$sectionCode[sectionName]=$(\"<div class='code'>\")\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t}\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(this.writeButtons(i18n)).append(\r\n\t\t\twriteFormattingControls(),\r\n\t\t\twriteSection('html'),\r\n\t\t\twriteSection('css'),\r\n\t\t\twriteSection('js')\r\n\t\t)\r\n\t\tif (!window.hljs) {\r\n\t\t\t$output.append(\"<p>\"+i18n('code-output.warning.no-hljs')+\"</p>\")\r\n\t\t}\r\n\t\t$output.append(this.writeButtons(i18n))\r\n\t\tthis.applyUpdatedCode(i18n)\r\n\r\n\t\t// public interface:\r\n\t\t// this.update\r\n\t\tthis.$output=$output\r\n\t}\r\n\r\n\t// private interface:\r\n\tget code() {\r\n\t\tthis.update.flush()\r\n\t\treturn this._code\r\n\t}\r\n\r\n\t// extend/override fns:\r\n\tget defaultFormatting() {\r\n\t\treturn {\r\n\t\t\tindent: '\\t',\r\n\t\t\tjsSemicolons: false,\r\n\t\t}\r\n\t}\r\n\tinitDomProps() {\r\n\t\tthis.$sectionCode={}\r\n\t\tthis.$saveButtons={}\r\n\t}\r\n\tapplyUpdatedCode(i18n) { // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\r\n\t\tconst sections=this.code.extractSections(this.sectionModes)\r\n\t\tfor (let sectionName in sections) {\r\n\t\t\tif (this.sectionModes[sectionName]=='embed') {\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\"<p>\"+i18n('code-output.embedded')+\"</p>\"\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tlet $code\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t$(\"<pre>\").append(\r\n\t\t\t\t\t\t$code=$(\"<code class='\"+sectionName+\"'>\")\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t$code.html(\r\n\t\t\t\t\tsections[sectionName].getHtml(this.formatting).join(\"\\n\")\r\n\t\t\t\t)\r\n\t\t\t\tif (window.hljs) {\r\n\t\t\t\t\thljs.highlightBlock($code[0])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sectionName!='html') { // extractable section\r\n\t\t\t\tthis.$saveButtons[sectionName].prop('disabled',this.sectionModes[sectionName]=='embed')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst This=this\r\n\t\tconst postData=(url,target,data)=>{\r\n\t\t\tconst $form=$(`<form method='post' action='${url}' target='${target}'>`)\r\n\t\t\tfor (let name in data) {\r\n\t\t\t\t$form.append(\r\n\t\t\t\t\t$(\"<input type='hidden'>\").attr('name',name).val(data[name])\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$form.appendTo('body').submit().remove()\r\n\t\t}\r\n\t\treturn $(\"<div>\").append(\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.run')+\"</button>\").click(function(){\r\n\t\t\t\tconst html=This.code.get(This.formatting).join(\"\\n\")\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * Firefox and Chrome have trouble showing the source\r\n\t\t\t\t\t// * weird bug in Firefox:\r\n\t\t\t\t\t//   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\r\n\t\t\t\t\t// * Firefox shows url of a generator page\r\n\t\t\t\t\tconst w=window.open(\"\",\"generatedCode\")\r\n\t\t\t\t\tw.document.open()\r\n\t\t\t\t\tw.document.write(html)\r\n\t\t\t\t\tw.document.close()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * doesn't work in IE b/c they decided it's security risk\r\n\t\t\t\t\t// * long url\r\n\t\t\t\t\twindow.open(getHtmlDataUri(html),\"generatedCode\")\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.codepen')+\"</button>\").click(function(){\r\n\t\t\t\t// http://blog.codepen.io/documentation/api/prefill/\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://codepen.io/pen/define/','codepenGeneratedCode',{\r\n\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\t\ttitle: This.code.title, // doesn't work?\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.jsfiddle')+\"</button>\").click(function(){\r\n\t\t\t\t// http://doc.jsfiddle.net/api/post.html\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://jsfiddle.net/api/post/library/pure/','jsfiddleGeneratedCode',{\r\n\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\ttitle: This.code.title,\r\n\t\t\t\t\twrap: 'b',\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.plunker')+\"</button>\").click(function(){\r\n\t\t\t\t// https://github.com/angular/angular.js/blob/489835dd0b36a108bedd5ded439a186aca4fa739/docs/app/src/examples.js#L139-L157\r\n\t\t\t\tconst sections=This.code.extractSections({html:'full',css:'file',js:'file'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tpostData('http://plnkr.co/edit/?p=preview','plunkerGeneratedCode',{\r\n\t\t\t\t\t//['files['+sections['html'].filename+']']: getSection('html'), // wants index.html\r\n\t\t\t\t\t['files[index.html]']: getSection('html'),\r\n\t\t\t\t\t['files['+sections['css'].filename+']']: getSection('css'),\r\n\t\t\t\t\t['files['+sections['js'].filename+']']: getSection('js'),\r\n\t\t\t\t\t'private': true,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst This=this\r\n\t\tconst $summary=$(\"<summary>\"+i18n('code-output.section.'+sectionName)+\"</summary>\")\r\n\t\t$summary.append(\r\n\t\t\t\" \",\r\n\t\t\t$(\"<select>\").append(\r\n\t\t\t\t(sectionName=='html'\r\n\t\t\t\t\t? ['full','body']\r\n\t\t\t\t\t: ['embed','paste','file']\r\n\t\t\t\t).map(mode=>\r\n\t\t\t\t\t$(\"<option>\").val(mode).html(i18n('code-output.mode.'+mode))\r\n\t\t\t\t)\r\n\t\t\t).val(this.sectionModes[sectionName]).change(function(){\r\n\t\t\t\tThis.sectionModes[sectionName]=this.value\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t// doesn't work in IE\r\n\t\t\t//$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n\t\t\t//\t// yes I want a button, but download attr is only available for links\r\n\t\t\t//\t$(this).attr('href',getHtmlDataUri(\r\n\t\t\t//\t\tsection.get(this.formatting).join(\"\\n\")\r\n\t\t\t//\t))\r\n\t\t\t//})\r\n\t\t\tthis.$saveButtons[sectionName]=$(\"<button type='button'>\"+i18n('code-output.save')+\"</button>\").click(function(){\r\n\t\t\t\tconst section=This.code.extractSections(This.sectionModes)[sectionName]\r\n\t\t\t\t// http://stackoverflow.com/a/24354303\r\n\t\t\t\tconst blob=new Blob(\r\n\t\t\t\t\t[section.get(This.formatting).join(\"\\n\")],\r\n\t\t\t\t\t{type:section.mimeType}\r\n\t\t\t\t)\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob,section.filename)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst $a=$(\"<a>\")\r\n\t\t\t\t\t\t.attr('download',section.filename)\r\n\t\t\t\t\t\t.attr('href',URL.createObjectURL(blob))\r\n\t\t\t\t\t\t.appendTo('body')\r\n\t\t\t\t\t$a.get(0).click()\r\n\t\t\t\t\t$a.remove()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\treturn $summary\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nclass CodeSection {\r\n\tconstructor(filename,mimeType,lines) {\r\n\t\tthis.filename=filename\r\n\t\tthis.mimeType=mimeType\r\n\t\tthis.lines=lines\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.lines.get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.lines.getHtml(formatting)\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeSection\r\n","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tif (detailsSupported) return\r\n\tconst $details=$(this)\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n","// assumes string is dot-separated, like this: \"some.html.id\"\r\nvar capitalize=require('./capitalize')\r\nmodule.exports=function(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n","// assumes string is lowercase\r\nmodule.exports=function(s){\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\n","// no options\r\nmodule.exports=function(func,wait){\r\n\tvar timeoutId=null\r\n\tvar debounced=function(){\r\n\t\tclearTimeout(timeoutId)\r\n\t\ttimeoutId=setTimeout(function(){\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t},wait)\r\n\t}\r\n\tdebounced.flush=function(){\r\n\t\tif (timeoutId) {\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t}\r\n\t}\r\n\treturn debounced\r\n}\r\n","module.exports=function(s){\r\n\tvar entityMap={\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#39;',\r\n\t\t// lodash also escapes `\r\n\t}\r\n\treturn String(s).replace(/[&<>\"']/g,m=>entityMap[m])\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbersInternal=(numbers,precision,keepDot,noPlus)=>{\r\n\tlet maxPrecision=0\r\n\tif (keepDot) {\r\n\t\tmaxPrecision=1\r\n\t}\r\n\tlet hasNegative=false\r\n\tfor (let i in numbers) {\r\n\t\tlet p\r\n\t\tif (precision!==undefined) {\r\n\t\t\tp=precision\r\n\t\t} else if (numbers[i].precision!==undefined) {\r\n\t\t\tp=numbers[i].precision\r\n\t\t} else {\r\n\t\t\tthrow new Error('formatNumbers received no precision')\r\n\t\t}\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(p)\r\n\t\tif (Number(s)<0) { // protects against negative zero\r\n\t\t\thasNegative=true\r\n\t\t}\r\n\t\tif (p>0) {\r\n\t\t\tp-=s.match(/0*$/)[0].length\r\n\t\t}\r\n\t\tif (p>maxPrecision) {\r\n\t\t\tmaxPrecision=p\r\n\t\t}\r\n\t}\r\n\tconst ss=Array.isArray(numbers)?[]:{}\r\n\tfor (let i in numbers) {\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(maxPrecision)\r\n\t\tif (Number(s)>=0 && s.charAt(0)=='-') {  // protects against negative zero\r\n\t\t\ts=s.slice(1)\r\n\t\t}\r\n\t\tif (!noPlus && hasNegative && number>0) {\r\n\t\t\ts='+'+s\r\n\t\t}\r\n\t\tss[i]=s\r\n\t}\r\n\treturn ss\r\n}\r\n\r\nconst formatNumbers=(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.html =(number,precision)=>formatNumbersInternal(number,precision,false,true)\r\nformatNumbers.js   =(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.glsl =(number,precision)=>formatNumbersInternal(number,precision,true)\r\n\r\nmodule.exports=formatNumbers\r\n","'use strict'\r\n\r\nclass GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\").append(\r\n\t\t\toption.entries.map(writeOption)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GroupOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=function(inStrings){\r\n\tconst strings={}\r\n\tconst expandRegexp=/^([^{]*)\\{([^}]*)\\}(.*)$/\r\n\tfunction expandIdAndString(id,string) {\r\n\t\tconst idMatch=expandRegexp.exec(id)\r\n\t\tif (idMatch) {\r\n\t\t\tconst [,idStart,idMidsStr,idEnd]=idMatch\r\n\t\t\tconst idMids=idMidsStr.split(',')\r\n\t\t\tconst stringMatch=expandRegexp.exec(string)\r\n\t\t\tif (stringMatch) {\r\n\t\t\t\tconst [,stringStart,stringMidsStr,stringEnd]=stringMatch\r\n\t\t\t\tconst stringMids=stringMidsStr.split(',')\r\n\t\t\t\tidMids.forEach((idMid,i)=>{\r\n\t\t\t\t\tif (stringMidsStr!='') {\r\n\t\t\t\t\t\tconst stringMid=stringMids[i]\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+stringMid+stringEnd)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+idMid+stringEnd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tidMids.forEach(idMid=>{\r\n\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,string)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrings[id]=string\r\n\t\t}\r\n\t}\r\n\tfor (let id in inStrings) {\r\n\t\texpandIdAndString(id,inStrings[id])\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tfor (let id in strings) {\r\n\t\tstrings[id]=strings[id].replace(/\\[\\[(.*?)\\]\\]/g,(match,p1)=>{\r\n\t\t\tlet link,text;\r\n\t\t\tconst i=p1.indexOf('|');\r\n\t\t\tif (i<0) {\r\n\t\t\t\tlink=p1;\r\n\t\t\t\ttext=p1;\r\n\t\t\t} else {\r\n\t\t\t\tlink=p1.slice(0,i);\r\n\t\t\t\ttext=p1.slice(i+1);\r\n\t\t\t}\r\n\t\t\treturn \"<a href='https://\"+lang+\".wikipedia.org/wiki/\"+link.replace(/ /g,'_')+\"'>\"+text+\"</a>\";\r\n\t\t});\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nmodule.exports=langStrings=>lang=>{\r\n\tconst defaultLang='en'\r\n\tlang=lang||defaultLang\r\n\tlang=lang.split('-')[0]  // get primary language subtag\r\n\tlet strings=langStrings[lang]\r\n\tif (strings===undefined) {\r\n\t\tlang=defaultLang\r\n\t\tstrings=langStrings[lang]\r\n\t}\r\n\tconst i18n=function(id){\r\n\t\tif (strings[id]!==undefined) {\r\n\t\t\treturn strings[id]\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"undefined string \"+id)\r\n\t\t}\r\n\t}\r\n\ti18n.lang=lang\r\n\ti18n.has=id=>strings[id]!==undefined\r\n\tif (lang=='en') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst nn=Number(n)\r\n\t\t\t\tif (Math.abs(nn)==1) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (lang=='ru') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','').replace('.',',')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns/*:string*/.includes('.')) {\r\n\t\t\t\treturn '2'\r\n\t\t\t} else {\r\n\t\t\t\tconst teen=ns.slice(-2,-1)==='1'\r\n\t\t\t\tif (ns.slice(-1)==='1' && !teen) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else if ('234'.includes(ns.slice(-1)) && !teen) {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '5'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ti18n.plural=function(n,id){\r\n\t\treturn this(id+'.'+this.pluralSuffix(n))\r\n\t}\r\n\ti18n.numberWithUnits=function(n,unit,abbrFn){\r\n\t\tif (abbrFn===undefined) { // codegen needs its own fn\r\n\t\t\tabbrFn=(abbr,expansion)=>\"<abbr title='\"+escape(expansion)+\"'>\"+abbr+\"</abbr>\" // expansion is html for stuff like s^(-1)\r\n\t\t}\r\n\t\tlet s=this.number(n)\r\n\t\tif (unit!==undefined) {\r\n\t\t\tif (unit.length==1 && /^\\W/.test(unit)) {\r\n\t\t\t\ts+=unit\r\n\t\t\t} else {\r\n\t\t\t\ts+=' ' // nbsp\r\n\t\t\t\tlet abbr\r\n\t\t\t\tif (unit=='1/second') {\r\n\t\t\t\t\tabbr=i18n('units.second.a')+\"<sup>1</sup>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tabbr=i18n('units.'+unit+'.a')\r\n\t\t\t\t}\r\n\t\t\t\tconst expansion=this.plural(n,'units.'+unit)\r\n\t\t\t\ts+=abbrFn(abbr,expansion)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn s\r\n\t}\r\n\treturn i18n\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass InterleaveLines extends Lines {\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet first=true\r\n\t\tconst fp=()=>{\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false\r\n\t\t\t} else {\r\n\t\t\t\tout.push('')\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (subOut.length>0) {\r\n\t\t\t\t\tfp()\r\n\t\t\t\t\tout.push(...subOut)\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tfp()\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=InterleaveLines\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\n\r\nclass JsLines extends Lines {\r\n\tprocessStringInGet(s,formatting) {\r\n\t\tif (formatting.jsSemicolons) {\r\n\t\t\treturn s.replace(/^;/,'')\r\n\t\t} else {\r\n\t\t\treturn s.replace(/;$/,'')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=JsLines\r\n","'use strict'\r\n\r\n/*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nconst TO={} // TODO Symbol\r\n\r\nclass Lines {\r\n\t// lines private interface:\r\n\tconstructor(data) {\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\tthrow new TypeError(\"attempted to construct Lines with non-array data argument\")\r\n\t\t}\r\n\t\tthis.data=data\r\n\t}\r\n\tisDataEmpty() {\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tif (!item.isEmpty()) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tprocessStringInGet(s,formatting) {\r\n\t\treturn s\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet addTo=false\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item===TO) {\r\n\t\t\t\taddTo=true\r\n\t\t\t} else if (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (addTo && subOut.length>0) {\r\n\t\t\t\t\tout.push(out.pop()+subOut.shift())\r\n\t\t\t\t}\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t\taddTo=false\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tlet s=this.processStringInGet(item,formatting)\r\n\t\t\t\tif (formatting.indent!==undefined && formatting.indent!='\\t') {\r\n\t\t\t\t\ts=s.replace(/^(\\t)+/,match=>formatting.indent/*:string*/.repeat(match.length))\r\n\t\t\t\t}\r\n\t\t\t\ts=(html ? escape(s) : s)\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+s)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout.push(s)\r\n\t\t\t\t}\r\n\t\t\t\taddTo=false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n\r\n\t// lines public interface:\r\n\tstatic b() {\r\n\t\tconst data=[]\r\n\t\tconst makeLines=()=>new this(data,...arguments)\r\n\t\tconst a=function(){\r\n\t\t\treturn a.a(...arguments)\r\n\t\t}\r\n\t\ta.a=function(){\r\n\t\t\tdata.push(...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.t=function(){\r\n\t\t\tdata.push(TO,...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.e=makeLines\r\n\t\ta.ae=function(){\r\n\t\t\treturn this.a(...arguments).e()\r\n\t\t}\r\n\t\treturn a\r\n\t}\r\n\tstatic ba() {\r\n\t\treturn this.b().a(...arguments)\r\n\t}\r\n\tstatic be() {\r\n\t\treturn this.b().e()\r\n\t}\r\n\tstatic bae() {\r\n\t\treturn this.b().a(...arguments).e()\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tget(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,false)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,true)\r\n\t}\r\n\tcount() {\r\n\t\treturn this.doGet({},false).length // can be faster b/c don't need to output stuff\r\n\t}\r\n\r\n\t// TODO make HtmlLines\r\n\tstatic html(strings/*,...values*/) {\r\n\t\t// html template tag\r\n\t\t// usage example for attributes: Lines.html`<input type=text value=${value}>`\r\n\t\t// usage example for elements: Lines.html`<option>${option}</option>`\r\n\t\treturn strings.reduce((r,s,i)=>{\r\n\t\t\tlet v=arguments[i]\r\n\t\t\tswitch (r.slice(-1)) {\r\n\t\t\tcase '=':\r\n\t\t\t\tif (v===false) {\r\n\t\t\t\t\treturn r.replace(/\\s+[a-zA-Z0-9-]+=$/,'')+s // TODO more permitting attr name regexp\r\n\t\t\t\t} else if (v===true) {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t}\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;')\r\n\t\t\t\tif (v=='') {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t} else if (!/[\\s\"'=<>`]/.test(v)) {\r\n\t\t\t\t\treturn r+v+s\r\n\t\t\t\t} else if (!/'/.test(v)) {\r\n\t\t\t\t\treturn r+\"'\"+v+\"'\"+s\r\n\t\t\t\t} else {\r\n\t\t\t\t\tv=v.replace(/\"/g,'&quot;')\r\n\t\t\t\t\treturn r+'\"'+v+'\"'+s\r\n\t\t\t\t}\r\n\t\t\tcase '>':\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;')\r\n\t\t\t\treturn r+v+s\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"invalid character before substitution\")\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=Lines\r\n","'use strict'\r\n\r\nconst WrapLines=require('./wrap-lines')\r\n\r\nclass NoseWrapLines extends WrapLines {\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn []\r\n\t\t} else {\r\n\t\t\treturn super.doGet(formatting,html)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=NoseWrapLines\r\n","'use strict'\r\n\r\n/*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={}\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tstatic make(name,...rest) {\r\n\t\tlet nScalars=0, nArrays=0, nObjects=0\r\n\t\tlet scalarArg, arrayArg=[], objectArg={}\r\n\t\tfor (const arg of rest) {\r\n\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\tif (nScalars++==0) scalarArg=arg\r\n\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\tif (nArrays++==0) arrayArg=arg\r\n\t\t\t} else if (arg instanceof Object) {\r\n\t\t\t\tif (nObjects++==0) objectArg=arg\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst optionClass=this\r\n\t\tconst settings=this.collectArgs(scalarArg,arrayArg,objectArg)\r\n\t\treturn function(data,parent,visibilityManager,makeEntry){\r\n\t\t\treturn new optionClass(name,settings,data,parent,visibilityManager,makeEntry)\r\n\t\t}\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn settings\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tthis.parent=parent\r\n\t\tthis.name=name\r\n\t\tthis.fullName=name\r\n\t\tif (parent && parent.fullName!==null) {\r\n\t\t\tthis.fullName=parent.fullName+'.'+name\r\n\t\t}\r\n\t\tthis.updateCallbacks=[]\r\n\t\tthis._$=null\r\n\t\t// visibility and callbacks\r\n\t\tthis.isVisible=()=>true\r\n\t\tif (visibilityManager) {\r\n\t\t\tvisibilityManager.register(this)\r\n\t\t\tif (settings.visibilityData!==undefined) {\r\n\t\t\t\tif (settings.visibilityDataLogic!='or') {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)>=0) {\r\n\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\tvisibilityManager.declareAffectedBy(this,testName)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$\r\n\t\tthis.updateVisibility()\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible())\r\n\t}\r\n\tupdate() {\r\n\t\tthis.updateCallbacks.forEach(updateCallback=>{\r\n\t\t\tupdateCallback()\r\n\t\t})\r\n\t\tif (this.parent) {\r\n\t\t\tthis.parent.update()\r\n\t\t}\r\n\t}\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.updateCallbacks.push(updateCallback)\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value\r\n\t\t} else {\r\n\t\t\treturn data\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Input = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.defaultValue===undefined) settings.defaultValue=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.defaultValue=settings.defaultValue\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\treturn data\r\n\t}\r\n}\r\n\r\nOption.Boolean = class extends Option.Input {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn super.collectArgs(!!scalarArg,arrayArg,settings)\r\n\t}\r\n\tfix() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.NonBoolean = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value },\r\n\t\t\ttoString() { return String(value) },\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Factor = class extends Option.NonBoolean {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableValues===undefined) settings.availableValues=arrayArg\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableValues[0]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableValues=settings.availableValues\r\n\t}\r\n}\r\n\r\nOption.Number = class extends Option.NonBoolean { // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableMin===undefined) settings.availableMin=arrayArg[0]\r\n\t\tif (settings.availableMax===undefined) settings.availableMax=arrayArg[1]\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableMin\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableMin=settings.availableMin\r\n\t\tthis.availableMax=settings.availableMax\r\n\t\tthis.unit=settings.unit\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.precision=this.precision\r\n\t\tfixed.unit=this.unit\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.entries=settings.descriptions.map(x=>{\r\n\t\t\tconst subName=x[1]\r\n\t\t\tlet subData\r\n\t\t\tif (typeof data == 'object') subData=data[subName]\r\n\t\t\treturn makeEntry(x,subData,this,visibilityManager) // nested option\r\n\t\t})\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name)\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[]\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t}\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix())\r\n\t\t}\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.Boolean {}\r\n\r\nOption.Select = class extends Option.Factor {}\r\n\r\nOption.Text = class extends Option.Factor {}\r\n\r\nOption.Int = class extends Option.Number {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.Float = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.precision!==undefined) {\r\n\t\t\tthis.precision=settings.precision\r\n\t\t} else {\r\n\t\t\tif (this.availableMax>=100) {\r\n\t\t\t\tthis.precision=1\r\n\t\t\t} else if (this.availableMax>=10) {\r\n\t\t\t\tthis.precision=2\r\n\t\t\t} else {\r\n\t\t\t\tthis.precision=3\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Root = class extends Option.Collection {}\r\n\r\nOption.Group = class extends Option.Collection {}\r\n\r\nOption.Array = class extends Option.Base { // TODO consider extending Collection\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\tif (settings.typePropertyName===undefined) settings.typePropertyName=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableConstructors=new Map\r\n\t\tif (visibilityManager) visibilityManager.enterArray()\r\n\t\tfor (const x of settings.descriptions) { // TODO test array inside array\r\n\t\t\tconst type=x[1]\r\n\t\t\tconst ctor=subData=>makeEntry(x,subData,this,visibilityManager)\r\n\t\t\tthis.availableConstructors.set(type,ctor)\r\n\t\t}\r\n\t\tif (visibilityManager) visibilityManager.exitArray()\r\n\t\tif (settings.typePropertyName!==undefined) {\r\n\t\t\tthis.typePropertyName=settings.typePropertyName\r\n\t\t} else {\r\n\t\t\tthis.typePropertyName='type'\r\n\t\t}\r\n\t\t// populate array entries from data:\r\n\t\tthis._entries=[]\r\n\t\tlet subDatas=[]\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value\r\n\t\t}\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\tfor (const subData of subDatas) {\r\n\t\t\tlet subType=defaultType\r\n\t\t\tif (typeof subData == 'object' && subData[this.typePropertyName]!==undefined) {\r\n\t\t\t\tsubType=subData[this.typePropertyName]\r\n\t\t\t}\r\n\t\t\tlet subCtor=this.availableConstructors.get(subType)\r\n\t\t\tif (subCtor) {\r\n\t\t\t\tthis._entries.push(subCtor(subData))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget availableTypes() {\r\n\t\tconst types=[]\r\n\t\tthis.availableConstructors.forEach((_,type)=>{\r\n\t\t\ttypes.push(type)\r\n\t\t})\r\n\t\treturn types\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries\r\n\t\tthis.update()\r\n\t}\r\n\tmakeEntry(type,data) {\r\n\t\treturn this.availableConstructors.get(type)(data)\r\n\t}\r\n\texport() {\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export()\r\n\t\t\t\tconst subType=entry.name\r\n\t\t\t\tif (subType!=defaultType) subData[this.typePropertyName]=subType\r\n\t\t\t\treturn entry.shortenExport(subData)\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix()\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed[this.typePropertyName]=entry.name\r\n\t\t\t\treturn subFixed\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='options-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'reset': \"Reset\",\r\n\t\t\t'drag': \"Drag\",\r\n\t\t\t'drag.tip': \"Drag or press / while in focus to reorder items\",\r\n\t\t\t'delete': \"Delete\",\r\n\t\t\t'delete.tip': \"Delete item\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'reset': \"\",\r\n\t\t\t'drag': \"\",\r\n\t\t\t'drag.tip': \"   /,    ,    \",\r\n\t\t\t'delete': \"\",\r\n\t\t\t'delete.tip': \" \",\r\n\t\t}\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbers=require('./format-numbers')\r\nconst writeTip=require('./tip')\r\nconst Option=require('./option-classes')\r\nconst ArrayOptionOutput=require('./array-option-output')\r\nconst GroupOptionOutput=require('./group-option-output')\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map\r\n\t\tthis.setOptionClassWriters(optionClassWriters)\r\n\t\tfunction writeOption(option) {\r\n\t\t\tlet optionProto=option\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor)\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,writeOption,i18n,generateId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=writeOption(options.root)\r\n\t}\r\n\tgetLeadLabel(id,i18n,option) {\r\n\t\treturn \"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label><span class='space'> </span>\"\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Group,function(){\r\n\t\t\treturn new GroupOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\").append(\r\n\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.value=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\"\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst valueId=value=>'options.'+option.fullName+'.'+value\r\n\t\t\tconst valueInfoId=value=>'options-info.'+option.fullName+'.'+value\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n(valueId(availableValue)))\r\n\t\t\t\t\t)\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tif (option.availableValues.some(availableValue=>i18n.has(valueInfoId(availableValue)))) {\r\n\t\t\t\tconst $tip=writeTip('info',\"\")\r\n\t\t\t\toption.$.append(\" \",$tip)\r\n\t\t\t\tconst handler=function(){\r\n\t\t\t\t\tif (i18n.has(valueInfoId(this.value))) {\r\n\t\t\t\t\t\t$tip.find('.tip-content').html(i18n(valueInfoId(this.value)))\r\n\t\t\t\t\t\t$tip.css('display','') // $tip.show() won't work right with inline-block\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$tip.css('display','none')\r\n\t\t\t\t\t\t$tip.find('.tip-content').empty()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thandler.call($select[0])\r\n\t\t\t\t$select.change(handler)\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst listId=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"' />\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<datalist id='\"+listId+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Number,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst setInputAttrsAndListeners=($input,getOtherInput)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst $that=getOtherInput()\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $sliderInput,$numberInput\r\n\t\t\tlet $rangeMinInput,$rangeMaxInput\r\n\t\t\tconst fmt=formatNumbers({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax\r\n\t\t\t},option.precision)\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<span class='nowrap'>\").append(\r\n\t\t\t\t\t\"<span class='min'>\"+i18n.numberWithUnits(fmt.min,option.unit)+\"</span> \",\r\n\t\t\t\t\t$sliderInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t\t$(\"<input type='range' id='\"+id+\"'>\"),\r\n\t\t\t\t\t\t()=>$numberInput\r\n\t\t\t\t\t),\r\n\t\t\t\t\t\" <span class='max'>\"+i18n.numberWithUnits(fmt.max,option.unit)+\"</span>\"\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$numberInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='number' required>\"),\r\n\t\t\t\t\t()=>$sliderInput\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tconst infoId='options-info.'+option.fullName\r\n\t\t\tif (i18n.has(infoId)) {\r\n\t\t\t\toption.$.append(\" \",writeTip('info',i18n(infoId)))\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Array,function(){\r\n\t\t\treturn new ArrayOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nclass OptionVisibilityManager {\r\n\tconstructor() {\r\n\t\tthis.options={}\r\n\t\tthis.affects={}\r\n\t\tthis.inArray=0\r\n\t}\r\n\tregister(option) {\r\n\t\tif (!this.inArray) {\r\n\t\t\tthis.options[option.fullName]=option\r\n\t\t\toption.addUpdateCallback(()=>{\r\n\t\t\t\tthis.updateVisibilityAffectedBy(option.fullName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tdeclareAffectedBy(option,byFullName) {\r\n\t\tif (this.affects[byFullName]===undefined) {\r\n\t\t\tthis.affects[byFullName]=[]\r\n\t\t}\r\n\t\tthis.affects[byFullName].push(option)\r\n\t}\r\n\tupdateVisibilityAffectedBy(byFullName) {\r\n\t\tif (this.affects[byFullName]!==undefined) {\r\n\t\t\tthis.affects[byFullName].forEach(option=>{\r\n\t\t\t\toption.updateVisibility()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tenterArray() {\r\n\t\tthis.inArray+=1\r\n\t}\r\n\texitArray() {\r\n\t\tthis.inArray-=1\r\n\t}\r\n}\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tconst Option=this.optionClasses\r\n\t\tconst makeEntry=(description,data,parent,visibilityManager)=>{\r\n\t\t\tconst className=description[0]\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`)\r\n\t\t\t}\r\n\t\t\tconst makeArgs=description.slice(1)\r\n\t\t\treturn Option[className].make(...makeArgs)(\r\n\t\t\t\tdata,parent,visibilityManager,makeEntry\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.root=Option.Root.make(null,this.entriesDescription)(\r\n\t\t\tdata,null,new OptionVisibilityManager,makeEntry\r\n\t\t)\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn []\r\n\t}\r\n\t// public methods\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.root.addUpdateCallback(updateCallback)\r\n\t}\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export())\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix()\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass RefLines extends Lines {\r\n\tconstructor(data,ref) {\r\n\t\tsuper(data)\r\n\t\tthis.ref=ref\r\n\t}\r\n\tstatic parse(s) {\r\n\t\tconst a=Lines.ba(\"\")\r\n\t\tconst re=/^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/\r\n\t\tfor (;s.length>0;) {\r\n\t\t\tconst match=re.exec(s)\r\n\t\t\tif (match) {\r\n\t\t\t\ta.t(match[1])\r\n\t\t\t\ta.t(this.b(match[3]).ae(match[2]))\r\n\t\t\t\ts=s.substr(match[0].length)\r\n\t\t\t} else {\r\n\t\t\t\ta.t(s)\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst plainOut=super.doGet(formatting,html)\r\n\t\tlet href\r\n\t\tif (html && typeof formatting.refs == 'object') {\r\n\t\t\thref=formatting.refs[this.ref]\r\n\t\t}\r\n\t\tif (href!==undefined) {\r\n\t\t\treturn plainOut.map(s=>\"<a href='\"+escape(href)+\"'>\"+s+\"</a>\")\r\n\t\t} else {\r\n\t\t\treturn plainOut\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=RefLines\r\n","'use strict'\r\n\r\nmodule.exports=(tipClass,tipContent)=>{\r\n\tconst $tip=$(`<span class='tip-${tipClass}' tabindex='0'><span class='tip-content'>${tipContent}</span></span>`)\r\n\tlet popupTimeoutId=null\r\n\tlet popupLevel=0\r\n\tconst handlePopup=(dLevel,delay)=>{\r\n\t\tif (delay===undefined) {\r\n\t\t\tdelay=200\r\n\t\t}\r\n\t\tif (dLevel==+1 && popupLevel==0) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{ // sort of hoverintent, simple delay will do b/c tip icon is small\r\n\t\t\t\t$tip.addClass('open')\r\n\t\t\t},delay)\r\n\t\t} else if (dLevel==-1 && popupLevel==1) {\r\n\t\t\tclearTimeout(popupTimeoutId)\r\n\t\t\tpopupTimeoutId=setTimeout(()=>{\r\n\t\t\t\t$tip.removeClass('open')\r\n\t\t\t},delay)\r\n\t\t}\r\n\t\tpopupLevel+=dLevel\r\n\t}\r\n\t$tip.mouseenter(function(){\r\n\t\thandlePopup(+1)\r\n\t}).focusin(function(){\r\n\t\thandlePopup(+1,0) // need immediate popup on focusin\r\n\t}).on('mouseleave focusout',function(){\r\n\t\thandlePopup(-1)\r\n\t})\r\n\treturn $tip\r\n}\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\nconst NoseWrapLines=require('./nose-wrap-lines')\r\nconst CodeSection=require('./code-section')\r\n\r\nclass WebCode {\r\n\t// public:\r\n\tget filename() {\r\n\t\treturn this.basename+'.html'\r\n\t}\r\n\tget mimeType() {\r\n\t\treturn 'text/html'\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.getLines().get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.getLines().getHtml(formatting)\r\n\t}\r\n\textractSections(sectionModes) {\r\n\t\tif (sectionModes===undefined) {\r\n\t\t\tsectionModes={}\r\n\t\t}\r\n\t\tlet stylePlaceLines=NoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines)\r\n\t\tlet styleExtractLines=Lines.be()\r\n\t\tif (sectionModes.css=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tstylePlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tstylePlaceLines=Lines.bae(\"<!-- <style> \"+this.getSectionPasteComment('css')+\" </style> -->\")\r\n\t\t\t}\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t} else if (sectionModes.css=='file') {\r\n\t\t\tstylePlaceLines=Lines.bae(Lines.html`<link rel=stylesheet href=${this.basename+'.css'}>`)\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t}\r\n\t\tlet scriptPlaceLines=NoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\tlet scriptExtractLines=Lines.be()\r\n\t\tif (sectionModes.js=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tscriptPlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tscriptPlaceLines=Lines.bae(\"<!-- <script> \"+this.getSectionPasteComment('js')+\" </script> -->\")\r\n\t\t\t}\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t} else if (sectionModes.js=='file') {\r\n\t\t\tscriptPlaceLines=Lines.bae(Lines.html`<script src=${this.basename+'.js'}></script>`)\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t}\r\n\t\tlet htmlExtractLines\r\n\t\tif (sectionModes.html=='body') {\r\n\t\t\thtmlExtractLines=this.getBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t} else {\r\n\t\t\thtmlExtractLines=this.getFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t}\r\n\t\tconst type=sectionName=>'text/'+(sectionName=='js'?'javascript':sectionName)\r\n\t\treturn {\r\n\t\t\thtml: new CodeSection(this.filename,type('html'),htmlExtractLines),\r\n\t\t\tcss:  new CodeSection(this.basename+'.css',type('css'),styleExtractLines),\r\n\t\t\tjs:   new CodeSection(this.basename+'.js',type('js'),scriptExtractLines),\r\n\t\t}\r\n\t}\r\n\t// get title()\r\n\r\n\t// private:\r\n\tgetLines() {\r\n\t\treturn this.getFullHtmlSectionLines(\r\n\t\t\tNoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines),\r\n\t\t\tNoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\t)\r\n\t}\r\n\tgetFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\tconst a=Lines.b()\r\n\t\ta(\"<!DOCTYPE html>\")\r\n\t\tif (this.lang!==null) {\r\n\t\t\ta(Lines.html`<html lang=${this.lang}>`)\r\n\t\t} else {\r\n\t\t\ta(\"<html>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"<head>\",\r\n\t\t\t\"<meta charset=utf-8>\"\r\n\t\t)\r\n\t\tif (this.title!==null) {\r\n\t\t\ta(\"<title>\"+this.title+\"</title>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\t\"</head>\",\r\n\t\t\t\"<body>\",\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines,\r\n\t\t\t\"</body>\",\r\n\t\t\t\"</html>\"\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n\tgetBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\treturn Lines.bae(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines\r\n\t\t)\r\n\t}\r\n\tget cachedStyleLines()  { if (!this._styleLines)  this._styleLines =this.styleLines;  return this._styleLines  }\r\n\tget cachedHeadLines()   { if (!this._headLines)   this._headLines  =this.headLines;   return this._headLines   }\r\n\tget cachedBodyLines()   { if (!this._bodyLines)   this._bodyLines  =this.bodyLines;   return this._bodyLines   }\r\n\tget cachedScriptLines() { if (!this._scriptLines) this._scriptLines=this.scriptLines; return this._scriptLines }\r\n\r\n\t// to be redefined in subclasses:\r\n\tget basename() { // filename base\r\n\t\treturn 'source'\r\n\t}\r\n\tget lang() { // language tag for <html lang=xx> or null to skip it - likely read from i18n\r\n\t\treturn null\r\n\t}\r\n\tget title() { // page title or null to skip it\r\n\t\treturn null\r\n\t}\r\n\tget styleLines() { // contents of <style>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget headLines() { // contents of <head> following <style>, goes to <body> in html body mode\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget bodyLines() { // contents of <body> preceding <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget scriptLines() { // contents of <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetSectionPasteComment(sectionName) { // section placeholder comment in paste mode - likely to be overridden with i18n\r\n\t\treturn sectionName+\" goes here\"\r\n\t}\r\n}\r\n\r\nmodule.exports=WebCode\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass WrapLines extends Lines {\r\n\tconstructor(data,...wrappers) {\r\n\t\tsuper(data)\r\n\t\tthis.wrappers=wrappers\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn false\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tlet indent='\\t'\r\n\t\tif (formatting.indent!==undefined) {\r\n\t\t\tindent=formatting.indent\r\n\t\t}\r\n\t\tconst out=[]\r\n\t\tlet i=0\r\n\t\tconst pushWrapper=()=>{\r\n\t\t\tconst item=this.wrappers[i]\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\tpushWrapper()\r\n\t\tfor (const item of this.data) {\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut.map(s=>indent+s))\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(indent+s)\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.wrappers.length==2) {\r\n\t\t\tpushWrapper()\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=WrapLines\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\r\nmodule.exports = Math.log10 || function(x){\r\n\treturn Math.log(x) / Math.LN10\r\n}\r\n","module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t(typeof haystack !== 'string')\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","module.exports = function(s){\r\n\treturn function(n){\r\n\t\tif (\r\n\t\t\t(s!=null && s.repeat!==undefined) ||\r\n\t\t\t(typeof s !== 'string')\r\n\t\t) {\r\n\t\t\treturn s.repeat(n)\r\n\t\t} else {\r\n\t\t\treturn Array(n+1).join(s)\r\n\t\t}\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass AudioContext extends Feature {\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.context')),\r\n\t\t\t\t\"var ctx=new (AudioContext || webkitAudioContext);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioContext\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass BiquadFilterOptionOutput extends FilterOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet $cloneButton\r\n\t\tconst computeCoefs=(sampleRate,type,frequency,detune,Q,gain,post20160415)=>{\r\n\t\t\t// constants defined in the spec\r\n\t\t\tconst F_s=sampleRate\r\n\t\t\tconst f_0=frequency*Math.pow(2,detune/1200)\r\n\t\t\tconst G=gain\r\n\t\t\tconst A=Math.pow(10,G/40)\r\n\t\t\tconst omega_0=2*Math.PI*f_0/F_s\r\n\t\t\tconst alpha_Q=Math.sin(omega_0)/(2*Q)\r\n\t\t\tconst Q_dB=Math.pow(10,Q/20) // fix for incorrect alpha_B\r\n\t\t\tconst alpha_B=Math.sin(omega_0)/2*Math.sqrt((4-Math.sqrt(16-16/(Q_dB*Q_dB)))/2) // was incorrect in the spec\r\n\t\t\tconst alpha_Q_dB=Math.sin(omega_0)/(2*Q_dB) // introduced on 2016-04-15\r\n\t\t\tconst S=1\r\n\t\t\tconst alpha_S=Math.sin(omega_0)/2*Math.sqrt((A+1/A)*(1/S-1)+2)\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst c=Math.cos(omega_0)\r\n\t\t\tconst aSA2=2*alpha_S*Math.sqrt(A)\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\tcase 'lowpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1-c)/2,   1-c, (1-c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'highpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1+c)/2, -(1+c), (1+c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'bandpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [alpha_Q, 0, -alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'notch':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1, -2*c, 1],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'allpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1-alpha_Q, -2*c, 1+alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'peaking':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1+alpha_Q*A, -2*c, 1-alpha_Q*A],\r\n\t\t\t\t\tfeedback: [1+alpha_Q/A, -2*c, 1-alpha_Q/A],\r\n\t\t\t\t}\r\n\t\t\tcase 'lowshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t 2*A*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c + aSA2,\r\n\t\t\t\t\t\t  -2*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\tcase 'highshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t-2*A*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c + aSA2,\r\n\t\t\t\t\t\t   2*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\tlet $cloneUi\r\n\t\tconst writeCloneButton=(post20160415)=>{\r\n\t\t\treturn $(\"<button type='button' class='clone'>\"+i18n(\r\n\t\t\t\t'options-output.filter.biquad.clone.'+(post20160415?'post':'pre')\r\n\t\t\t)+\"</button>\").click(function(){\r\n\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\tconst fixedOption=option.fix()\r\n\t\t\t\t\tconst coefs=computeCoefs(\r\n\t\t\t\t\t\taudioContext.sampleRate,\r\n\t\t\t\t\t\tfixedOption.type.value,\r\n\t\t\t\t\t\tfixedOption.frequency.value,\r\n\t\t\t\t\t\tfixedOption.detune.value,\r\n\t\t\t\t\t\tMath.pow(10,fixedOption.Q.value),\r\n\t\t\t\t\t\tfixedOption.gain.value,\r\n\t\t\t\t\t\tpost20160415\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (coefs) {\r\n\t\t\t\t\t\t$(this).data('coefs',coefs)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).removeData('coefs')\r\n\t\t\t\t\t}\r\n\t\t\t\t},$cloneUi,i18n('options-output.filter.contextError'))\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.$output.append(\r\n\t\t\t$(\"<div class='option only-buttons'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.biquad.clone')+\":</label><span class='space'> </span>\",\r\n\t\t\t\t$cloneUi=$(\"<span>\").append(\r\n\t\t\t\t\twriteCloneButton(false),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\twriteCloneButton(true),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\twriteTip('info',i18n('options-output.filter.biquad.clone.info'))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\tbiquadNode.type=fixedOption.type.value\r\n\t\tbiquadNode.frequency.value=fixedOption.frequency.value\r\n\t\tbiquadNode.detune.value=fixedOption.detune.value\r\n\t\tbiquadNode.Q.value=Math.pow(10,fixedOption.Q.value)\r\n\t\tbiquadNode.gain.value=fixedOption.gain.value\r\n\t\treturn [biquadNode]\r\n\t}\r\n}\r\n\r\nmodule.exports=BiquadFilterOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Canvas extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tstatic getStyleLines(canvasContextProperty,colorOption) {\r\n\t\tconst a=JsLines.b()\r\n\t\tconst cs=['r','g','b']\r\n\t\tconst color=cs.map(c=>colorOption[c]+\"%\").join()\r\n\t\tconst isBlack=cs.every(c=>colorOption[c]==0)\r\n\t\tif (colorOption.a==100) {\r\n\t\t\tif (!isBlack) {\r\n\t\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgb(\"+color+\")';\")\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgba(\"+color+\",\"+(colorOption.a/100).toFixed(2)+\")';\")\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=Lines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"<div>\",\r\n\t\t\t\tLines.html`\t<canvas id=my.canvas width=${this.options.width} height=${this.options.height}></canvas>`,\r\n\t\t\t\t\"</div>\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvas=document.getElementById('my.canvas');\",\r\n\t\t\t\t\"var canvasContext=canvas.getContext('2d');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (featureContext.canvasVolumeGradient) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvasVolumeGradient=canvasContext.createLinearGradient(0,0,0,canvas.height);\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(1.00,'#000');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.75,'#F00');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.25,'#FF0');\",\r\n\t\t\t\t\"canvasVolumeGradient.addColorStop(0.00,'#FFF');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\tif (this.options.background.type=='clear') {\r\n\t\t\t\ta(\"canvasContext.clearRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t} else {\r\n\t\t\t\ta(Canvas.getStyleLines('fillStyle',this.options.background.color))\r\n\t\t\t\ta(\"canvasContext.fillRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\nconst writeTip=require('crnx-base/tip')\r\nconst BaseCodeOutput=require('crnx-base/code-output')\r\n\r\nclass CodeOutput extends BaseCodeOutput {\r\n\tget defaultFormatting() {\r\n\t\tconst formatting=super.defaultFormatting\r\n\t\tformatting.refs={\r\n\t\t\tcontext:     'https://www.w3.org/TR/webaudio/#AudioContext',\r\n\t\t\tsource:      'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\r\n\t\t\tgain:        'https://www.w3.org/TR/webaudio/#GainNode',\r\n\t\t\tpanner:      'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\r\n\t\t\tbiquad:      'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\r\n\t\t\tiir:         'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\r\n\t\t\tconvolver:   'https://www.w3.org/TR/webaudio/#ConvolverNode',\r\n\t\t\tpeaking:     'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\r\n\t\t\tdestination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\r\n\t\t\tcompressor:  'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\r\n\t\t\tanalyser:    'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\r\n\t\t\tsplitter:    'https://www.w3.org/TR/webaudio/#the-channelsplitternode-interface',\r\n\t\t\tbuffer:      'https://www.w3.org/TR/webaudio/#AudioBufferSourceNode',\r\n\t\t}\r\n\t\treturn formatting\r\n\t}\r\n\tinitDomProps() {\r\n\t\tsuper.initDomProps()\r\n\t\tthis.$warnings=$()\r\n\t}\r\n\tapplyUpdatedCode(i18n) {\r\n\t\tsuper.applyUpdatedCode(i18n)\r\n\t\tthis.$warnings.css('display',this.code.isInteresting?'none':'') // .toggle() won't work right with inline-block\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst $warning=writeTip('warn',i18n('code-output.warning.jsfiddle-run'))\r\n\t\treturn super.writeButtons(i18n).append(\" \",$warning)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst $section=super.writeSectionSummary(sectionName,i18n)\r\n\t\tif (sectionName=='html' || sectionName=='js') {\r\n\t\t\tconst $warning=writeTip('warn',i18n('code-output.warning.interesting'))\r\n\t\t\t$section.append(\" \",$warning)\r\n\t\t\tthis.$warnings=this.$warnings.add($warning)\r\n\t\t}\r\n\t\treturn $section\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nconst AudioContext=require('./audio-context')\r\nconst Loader=require('./loader')\r\nconst SourceSet=require('./source-set')\r\nconst FilterSequence=require('./filter-sequence')\r\nconst Destination=require('./destination')\r\nconst Canvas=require('./canvas')\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst BaseWebCode=require('crnx-base/web-code')\r\n\r\nclass Code extends BaseWebCode {\r\n\tconstructor(options,i18n) {\r\n\t\tsuper()\r\n\t\tthis.i18n=i18n\r\n\t\tthis.featureContext={}\r\n\t\tthis.features=[\r\n\t\t\tnew AudioContext,\r\n\t\t\tnew Loader(options.loader),\r\n\t\t\tnew SourceSet(options.sources),\r\n\t\t\tnew FilterSequence(options.filters),\r\n\t\t\tnew Destination(options.destination),\r\n\t\t\tnew Canvas(options.canvas),\r\n\t\t]\r\n\t\t// possible feature context flags:\r\n\t\t//\tloader = Loader has to provide loadSample() function\r\n\t\t//\tloaderOnError = loadSample() caller has to pass the error handler\r\n\t\t//\tsetConnectSampleToJsNames = have a node(s) to connect samples to (some filters like equaliser may not save a refernce to it otherwise)\r\n\t\t//\tconnectSampleToJsNames = this is a hack: array of strings to connect samples to\r\n\t\t//\tconnectSampleToCompressor = this is a hack\r\n\t\t//\tcanvasVolumeGradient = Canvas has to create canvasVolumeGradient\r\n\t\t//\tTODO the rest\r\n\t\tfor (const feature of this.features) {\r\n\t\t\tfeature.requestFeatureContext(this.featureContext)\r\n\t\t}\r\n\t\tthis.isInteresting=!!this.featureContext.audioContext\r\n\t}\r\n\tget basename() {\r\n\t\treturn 'webaudio'\r\n\t}\r\n\tget lang() {\r\n\t\treturn this.i18n.lang\r\n\t}\r\n\tget title() {\r\n\t\treturn this.i18n('code.title')\r\n\t}\r\n\tget styleLines() {\r\n\t\tconst a=Lines.b()\r\n\t\tif (this.featureContext.alignedInputs) {\r\n\t\t\ta(\r\n\t\t\t\t\"label {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 15em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"\tline-height: 0.8em;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".min {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".max {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: left;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"canvas {\",\r\n\t\t\t\t\"\tborder: 1px solid;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget bodyLines() {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getHtmlLines(this.featureContext,this.i18n))\r\n\t\t)\r\n\t}\r\n\tget scriptLines() {\r\n\t\tlet prevNodeJsNames=[]\r\n\t\treturn InterleaveLines.bae(\r\n\t\t\t...this.features.map(feature=>{\r\n\t\t\t\tconst lines=feature.getJsInitLines(this.featureContext,this.i18n,prevNodeJsNames)\r\n\t\t\t\tprevNodeJsNames=feature.getNodeJsNames(this.featureContext,prevNodeJsNames)\r\n\t\t\t\treturn lines\r\n\t\t\t}),\r\n\t\t\tNoseWrapLines.b(\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"function visualize() {\"\r\n\t\t\t\t),\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"\trequestAnimationFrame(visualize);\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"requestAnimationFrame(visualize);\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopPreLines(this.featureContext,this.i18n)),\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopVisLines(this.featureContext,this.i18n))\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=Code\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst Feature=require('./feature')\r\n\r\nclass CollectionFeature extends Feature {\r\n\tconstructor(entryOptions) {\r\n\t\tsuper()\r\n\t\tconst entryCounts=new Map\r\n\t\tentryOptions.entries.forEach(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tentryCounts.set(entryClass,entryCounts.get(entryClass)+1||1)\r\n\t\t})\r\n\t\tconst entryCounts2=new Map\r\n\t\tthis.entries=entryOptions.entries.map(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tif (entryCounts.get(entryClass)>1) {\r\n\t\t\t\tconst n=entryCounts2.get(entryClass)||0\r\n\t\t\t\tentryCounts2.set(entryClass,n+1)\r\n\t\t\t\treturn new entryClass(entryOption,n)\r\n\t\t\t} else {\r\n\t\t\t\treturn new entryClass(entryOption)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(...this.entries.map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\t// abstract:\r\n\t// getEntryClass(entryOption) {}\r\n}\r\n\r\nmodule.exports=CollectionFeature\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\nconst Canvas=require('./canvas')\r\n\r\nclass Destination extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tget useDirectAnalyser() {\r\n\t\treturn this.options.waveform.enabled || this.options.frequencies.enabled || (this.options.volume.enabled && !this.options.volume.stereo)\r\n\t}\r\n\tget useSplitAnalyser() {\r\n\t\treturn this.options.volume.enabled && this.options.volume.stereo\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tif (this.options.compressor.enabled || this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t}\r\n\t\tif (this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) {\r\n\t\t\tfeatureContext.canvas=true\r\n\t\t}\r\n\t\tif (this.options.volume.enabled) {\r\n\t\t\tfeatureContext.canvasVolumeGradient=true\r\n\t\t}\r\n\t\tif (featureContext.connectSampleToJsNames===undefined) {\r\n\t\t\tif (this.options.compressor.enabled) {\r\n\t\t\t\tfeatureContext.connectSampleToCompressor=true\r\n\t\t\t}\r\n\t\t\tfeatureContext.connectSampleToJsNames=[]\r\n\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames.push(\"analyserNode\")\r\n\t\t\t}\r\n\t\t\tif (this.useSplitAnalyser) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames.push(\"channelSplitterNode\")\r\n\t\t\t}\r\n\t\t\tif (featureContext.connectSampleToJsNames.length==0) {\r\n\t\t\t\tfeatureContext.connectSampleToJsNames=[\"ctx.destination\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=NoseWrapLines.b(\"<div>\",\"</div>\")\r\n\t\tif (featureContext.audioProcessing && this.options.compressor.enabled) {\r\n\t\t\ta(\r\n\t\t\t\t\"<input id=my.compressor type=checkbox checked>\",\r\n\t\t\t\tLines.html`<label for=my.compressor>${i18n('label.destination.compressor')}</label>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst getAnalyserNodeLines=(jsName,prevNodeJsNames,connectArgs)=>{\r\n\t\t\tif (connectArgs===undefined) connectArgs=\"\"\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+jsName+\"=ctx.createAnalyser();\",\r\n\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(\"+jsName+connectArgs+\");\")\r\n\t\t\t)\r\n\t\t\tif (this.options.analyser.logFftSize!=11) { // default FFT size is 2048\r\n\t\t\t\ta(jsName+\".fftSize=\"+(Math.pow(2,this.options.analyser.logFftSize))+\";\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getCompressorLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet nextNodeJsName=((this.options.waveform.enabled || this.options.frequencies.enabled || this.options.volume.enabled) ? 'analyserNode' : 'ctx.destination')\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.compressor')),\r\n\t\t\t\t\"var compressorNode=ctx.createDynamicsCompressor();\",\r\n\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(compressorNode);\")\r\n\t\t\t)\r\n\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"document.getElementById('my.compressor').onchange=function(){\",\r\n\t\t\t\t\t\"\tif (this.checked) {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(compressorNode);\"),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"};\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getDirectAnalyserLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet comment=''\r\n\t\t\tif (this.options.waveform.enabled && !this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.waveform'\r\n\t\t\t} else if (!this.options.waveform.enabled && this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.frequencies'\r\n\t\t\t} else if (this.options.waveform.enabled && this.options.frequencies.enabled) {\r\n\t\t\t\tcomment='.waveform+frequencies'\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.analyser'+comment)),\r\n\t\t\t\tgetAnalyserNodeLines(\"analyserNode\",prevNodeJsNames),\r\n\t\t\t\t\"var analyserData=new Uint8Array(analyserNode.frequencyBinCount);\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getSplitAnalyserLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.analyser.split')),\r\n\t\t\t\t\"var channelSplitterNode=ctx.createChannelSplitter();\",\r\n\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(channelSplitterNode);\"),\r\n\t\t\t\tgetAnalyserNodeLines(\"leftAnalyserNode\",[\"channelSplitterNode\"],\",0,0\"),\r\n\t\t\t\tgetAnalyserNodeLines(\"rightAnalyserNode\",[\"channelSplitterNode\"],\",1,0\")\r\n\t\t\t)\r\n\t\t\tif (!this.useDirectAnalyser) { // need to create analyserData once\r\n\t\t\t\ta(\"var analyserData=new Uint8Array(leftAnalyserNode.frequencyBinCount);\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getDestinationLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination')),\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(ctx.destination);\")\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioProcessing && featureContext.audioContext) {\r\n\t\t\tif (this.options.compressor.enabled) {\r\n\t\t\t\ta(getCompressorLines())\r\n\t\t\t\tprevNodeJsNames=['compressorNode']\r\n\t\t\t}\r\n\t\t\tif (this.useDirectAnalyser || this.useSplitAnalyser) {\r\n\t\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\t\ta(getDirectAnalyserLines())\r\n\t\t\t\t}\r\n\t\t\t\tif (this.useSplitAnalyser) {\r\n\t\t\t\t\ta(getSplitAnalyserLines())\r\n\t\t\t\t}\r\n\t\t\t\tif (this.useDirectAnalyser) {\r\n\t\t\t\t\tprevNodeJsNames=['analyserNode']\r\n\t\t\t\t}\r\n\t\t\t\t// split analyser doesn't change prevNodeJsNames b/c its output is not connected to anything\r\n\t\t\t}\r\n\t\t\ta(getDestinationLines())\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget pushContextForEach() { // when stroke style is altered in two different places\r\n\t\treturn this.options.frequencies.enabled && this.options.frequencies.outline.enabled && this.options.waveform.enabled\r\n\t}\r\n\tget pushContextForAll() { // when fill style is altered and not pushing for each\r\n\t\treturn !this.pushContextForEach && (this.options.frequencies.enabled || this.options.volume.enabled)\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\tconst getEnterFunctionLines=()=>{\r\n\t\t\tif (this.pushContextForEach) {\r\n\t\t\t\treturn JsLines.bae(\"canvasContext.save();\")\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getExitFunctionLines=()=>{\r\n\t\t\tif (this.pushContextForEach) {\r\n\t\t\t\treturn JsLines.bae(\"canvasContext.restore();\")\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getVisualizeVolumeLines=()=>{\r\n\t\t\tconst getVolumeMeterLines=(analyserNodeJsName,xOffset)=>{\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tanalyserNodeJsName+\".getByteFrequencyData(analyserData);\", // TODO reuse in frequencies when in non-stereo mode\r\n\t\t\t\t\t\"var sumAmplitudes=0;\",\r\n\t\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\t\"\tsumAmplitudes+=analyserData[i];\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"var meanAmplitude=sumAmplitudes/analyserData.length;\",\r\n\t\t\t\t\t\"var barHeight=meanAmplitude*canvas.height/256;\",\r\n\t\t\t\t\t\"canvasContext.fillStyle=canvasVolumeGradient;\",\r\n\t\t\t\t\t\"canvasContext.fillRect(\"+xOffset+\",canvas.height-barHeight,25,barHeight);\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (!this.options.volume.stereo) {\r\n\t\t\t\treturn getVolumeMeterLines(\"analyserNode\",\"0\")\r\n\t\t\t} else {\r\n\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\";[leftAnalyserNode,rightAnalyserNode].forEach(function(channelAnalyserNode,channelNumber){\"),\r\n\t\t\t\t\tJsLines.bae(\"});\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetVolumeMeterLines(\"channelAnalyserNode\",\"channelNumber*26\")\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getVisualizeFrequenciesLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tlet nBars=\"analyserData.length\"\r\n\t\t\tif (this.options.frequencies.cutoff!=100) {\r\n\t\t\t\ta(\"var nBars=Math.floor(analyserData.length*\"+(this.options.frequencies.cutoff/100).toFixed(2)+\");\")\r\n\t\t\t\tnBars=\"nBars\"\r\n\t\t\t}\r\n\t\t\tconst y=(this.options.frequencies.base=='bottom'\r\n\t\t\t\t? \"canvas.height-barHeight\"\r\n\t\t\t\t: \"(canvas.height-barHeight)/2\"\r\n\t\t\t)\r\n\t\t\tconst colorInput=(this.options.frequencies.coloringInput=='amplitude'\r\n\t\t\t\t? \"analyserData[i]\"\r\n\t\t\t\t: \"Math.round(i*255/\"+nBars+\")\"\r\n\t\t\t)\r\n\t\t\tconst fillStyle=(this.options.frequencies.coloring=='component'\r\n\t\t\t\t? \"'rgb('+(\"+colorInput+\"+100)+',50,50)'\"\r\n\t\t\t\t: \"'hsl('+(255-\"+colorInput+\")+',100%,50%)'\"\r\n\t\t\t)\r\n\t\t\ta(\r\n\t\t\t\t\"var barWidth=canvas.width/\"+nBars+\"*0.8;\",\r\n\t\t\t\t\"analyserNode.getByteFrequencyData(analyserData);\",\r\n\t\t\t\t\"for (var i=0;i<\"+nBars+\";i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/\"+nBars+\";\",\r\n\t\t\t\t\"\tcanvasContext.fillStyle=\"+fillStyle+\";\",\r\n\t\t\t\t\"\tvar barHeight=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\"\tvar y=\"+y+\";\",\r\n\t\t\t\t\"\tcanvasContext.fillRect(x,y,barWidth,barHeight);\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t\tif (this.options.frequencies.outline.enabled) {\r\n\t\t\t\tconst writeOutline=y=>JsLines.bae(\r\n\t\t\t\t\t\"for (var i=0;i<\"+nBars+\";i++) {\",\r\n\t\t\t\t\t\"\tvar x=i*canvas.width/\"+nBars+\";\",\r\n\t\t\t\t\t\"\tvar barHeight=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\t\"\tvar y=\"+y+\";\",\r\n\t\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\t\"\t\tcanvasContext.moveTo(0,y);\",\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"\tcanvasContext.lineTo(x+barWidth/2,y);\",\r\n\t\t\t\t\t\"\tif (i==\"+nBars+\"-1) {\",\r\n\t\t\t\t\t\"\t\tcanvasContext.lineTo(canvas.width,y);\",\r\n\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.frequencies.outline.width!=1.0) {\r\n\t\t\t\t\ta(\"canvasContext.lineWidth=\"+this.options.frequencies.outline.width+\";\")\r\n\t\t\t\t}\r\n\t\t\t\ta(Canvas.getStyleLines('strokeStyle',this.options.frequencies.outline.color))\r\n\t\t\t\ta(\"canvasContext.beginPath();\")\r\n\t\t\t\tif (this.options.frequencies.base=='bottom') {\r\n\t\t\t\t\ta(writeOutline(y))\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(WrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[-1,+1].forEach(function(aboveOrBelow){\"),\r\n\t\t\t\t\t\tJsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\twriteOutline(\"(canvas.height+aboveOrBelow*barHeight)/2\")\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\ta(\"canvasContext.stroke();\")\r\n\t\t\t}\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tconst getVisualizeWaveformLines=()=>{\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.waveform.width!=1.0) {\r\n\t\t\t\ta(\"canvasContext.lineWidth=\"+this.options.waveform.width+\";\")\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tCanvas.getStyleLines('strokeStyle',this.options.waveform.color),\r\n\t\t\t\t\"analyserNode.getByteTimeDomainData(analyserData);\",\r\n\t\t\t\t\"canvasContext.beginPath();\",\r\n\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/(analyserData.length-1);\",\r\n\t\t\t\t\"\tvar y=analyserData[i]*canvas.height/256;\",\r\n\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\"\t\tcanvasContext.moveTo(x,y);\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tcanvasContext.lineTo(x,y);\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"canvasContext.stroke();\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\treturn JsLines.bae(...[\r\n\t\t\t[this.options.volume.enabled,'visualizeVolume',getVisualizeVolumeLines],\r\n\t\t\t[this.options.frequencies.enabled,'visualizeFrequencies',getVisualizeFrequenciesLines],\r\n\t\t\t[this.options.waveform.enabled,'visualizeWaveform',getVisualizeWaveformLines],\r\n\t\t].map(conditionAndNameAndFn=>{\r\n\t\t\tconst condition=conditionAndNameAndFn[0]\r\n\t\t\tconst name=conditionAndNameAndFn[1]\r\n\t\t\tconst fn=conditionAndNameAndFn[2]\r\n\t\t\tif (condition) {\r\n\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"function \"+name+\"() {\"),\r\n\t\t\t\t\tJsLines.bae(\"}\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetEnterFunctionLines(),\r\n\t\t\t\t\tfn(),\r\n\t\t\t\t\tgetExitFunctionLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\treturn Lines.be()\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\tconst a=JsLines.b()\r\n\t\tif (this.pushContextForAll) {\r\n\t\t\ta(\"canvasContext.save();\")\r\n\t\t}\r\n\t\tif (this.options.volume.enabled) {\r\n\t\t\ta(\"visualizeVolume();\")\r\n\t\t}\r\n\t\tif (this.options.frequencies.enabled) {\r\n\t\t\ta(\"visualizeFrequencies();\")\r\n\t\t}\r\n\t\tif (this.options.waveform.enabled) {\r\n\t\t\ta(\"visualizeWaveform();\")\r\n\t\t}\r\n\t\tif (this.pushContextForAll) {\r\n\t\t\ta(\"canvasContext.restore();\")\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"ctx.destination\"]\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Destination\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass EqualizerFilterOptionOutput extends FilterOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\treturn Option.EqualizerFilter.frequencies.map(freq=>{\r\n\t\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\t\tbiquadNode.type='peaking'\r\n\t\t\tbiquadNode.frequency.value=freq\r\n\t\t\tbiquadNode.gain.value=fixedOption['gain'+freq].value\r\n\t\t\treturn biquadNode\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=EqualizerFilterOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature\r\n","'use strict'\r\n\r\nconst debounce=require('crnx-base/fake-lodash/debounce')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst GroupOptionOutput=require('crnx-base/group-option-output')\r\n\r\nconst width=300\r\nconst height=300\r\nconst pad=30\r\nconst maxNGridLines=10\r\nconst fontSize=10\r\nconst fontOffset=3\r\nconst minFrequencyInLogMode=10\r\nlet audioContext\r\nlet linearFrequencyArray,logFrequencyArray\r\nlet logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1\r\nlet magnitudeArray,phaseArray\r\nlet magnitudeArray0,phaseArray0\r\n\r\nconst mix=(a,b,x)=>a*(1-x)+b*x\r\n\r\nclass FilterOptionOutput extends GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet $freqResponseUi=$()\r\n\t\tconst isFreqResponseUiShown=()=>$freqResponseUi.length>0\r\n\t\tlet magnitudeCanvasContext, phaseCanvasContext // TODO remove loitering on hide - but have to cancel update\r\n\t\tlet magnitudeLogScale=true, frequencyLogScale=false\r\n\t\tconst updatePlots=(filterNodes)=>{\r\n\t\t\tconst removeNans=array=>{\r\n\t\t\t\tconst interpolate=(i0,i1)=>{\r\n\t\t\t\t\tconst hasStartValue=i0>=0\r\n\t\t\t\t\tconst hasEndValue=i1<array.length\r\n\t\t\t\t\tlet v0,v1\r\n\t\t\t\t\tif (!hasStartValue && !hasEndValue) {\r\n\t\t\t\t\t\tv0=v1=0\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (hasStartValue) {\r\n\t\t\t\t\t\t\tv0=array[i0]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv0=array[i1]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (hasEndValue) {\r\n\t\t\t\t\t\t\tv1=array[i1]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv1=array[i0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i=i0+1;i<i1;i++) {\r\n\t\t\t\t\t\tconst x=(i-i0)/(i1-i0)\r\n\t\t\t\t\t\tarray[i]=mix(v0,v1,x)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet nanStart=-1\r\n\t\t\t\tfor (let i=0;i<array.length;i++) {\r\n\t\t\t\t\tif (!isFinite(array[i])) {\r\n\t\t\t\t\t\tif (nanStart<0) {\r\n\t\t\t\t\t\t\tnanStart=i\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\t\t\tinterpolate(nanStart-1,i)\r\n\t\t\t\t\t\t\tnanStart=-1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (nanStart>=0) {\r\n\t\t\t\t\tinterpolate(nanStart-1,array.length)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst frequencyArray=(frequencyLogScale\r\n\t\t\t\t? logFrequencyArray\r\n\t\t\t\t: linearFrequencyArray\r\n\t\t\t)\r\n\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\tmagnitudeArray[i]=1\r\n\t\t\t}\r\n\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\tphaseArray[i]=0\r\n\t\t\t}\r\n\t\t\tfor (const filterNode of filterNodes) {\r\n\t\t\t\tfilterNode.getFrequencyResponse(frequencyArray,magnitudeArray0,phaseArray0)\r\n\t\t\t\tremoveNans(magnitudeArray0)\r\n\t\t\t\tremoveNans(phaseArray0)\r\n\t\t\t\tfor (let i=0;i<magnitudeArray.length;i++) {\r\n\t\t\t\t\tmagnitudeArray[i]*=magnitudeArray0[i]\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i=0;i<phaseArray.length;i++) {\r\n\t\t\t\t\tphaseArray[i]+=phaseArray0[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tfor (let i=0;i<width;i++) { // convert to decibels\r\n\t\t\t\t\tmagnitudeArray[i]=20*Math.log10(magnitudeArray[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction wrap(v,maxAbs) {\r\n\t\t\t\tv%=maxAbs*2\r\n\t\t\t\tif (Math.abs(v)<=maxAbs) return v\r\n\t\t\t\treturn v-(v>0?1:-1)*maxAbs*2\r\n\t\t\t}\r\n\t\t\tlet k=0\r\n\t\t\tlet v0=0\r\n\t\t\tfor (let i=0;i<width;i++) { // unwrap phase\r\n\t\t\t\tlet v1=wrap(phaseArray[i]/Math.PI,1)\r\n\t\t\t\tk+=(v1<v0 && (v0-v1)>((v1+2)-v0))\r\n\t\t\t\tk-=(v1>v0 && (v1-v0)>(v0-(v1-2)))\r\n\t\t\t\tv0=v1\r\n\t\t\t\tphaseArray[i]=v0+2*k\r\n\t\t\t}\r\n\t\t\tconst plotResponse=(canvasContext,array,units,enforcedCenter,enforcedRange,enforcedFloor,majorGridLineTest)=>{\r\n\t\t\t\tlet min,max\r\n\t\t\t\tconst setPlotRange=(min0,max0)=>{\r\n\t\t\t\t\tconst ph=pad/height\r\n\t\t\t\t\tmin=((min0+max0)*ph-min0)/(2*ph-1)\r\n\t\t\t\t\tmax=((min0+max0)*ph-max0)/(2*ph-1)\r\n\t\t\t\t}\r\n\t\t\t\tconst minArr=Math.min(...array)\r\n\t\t\t\tconst maxArr=Math.max(...array)\r\n\t\t\t\tconst minArrCentered=Math.max(minArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tconst maxArrCentered=Math.max(maxArr,enforcedFloor)-enforcedCenter\r\n\t\t\t\tsetPlotRange(\r\n\t\t\t\t\tenforcedCenter+Math.min(0,-enforcedRange+Math.max(0,maxArrCentered-enforcedRange),minArrCentered),\r\n\t\t\t\t\tenforcedCenter+Math.max(0,enforcedRange-Math.max(0,-enforcedRange-minArrCentered),maxArrCentered)\r\n\t\t\t\t)\r\n\t\t\t\tconst calcY=v=>height*(1-(v-min)/(max-min))\r\n\t\t\t\tconst getGridNumbers=(min,max)=>{\r\n\t\t\t\t\tconst numLogs=Math.log10(max-min)-Math.log10(maxNGridLines)\r\n\t\t\t\t\tlet k\r\n\t\t\t\t\tlet p=Infinity\r\n\t\t\t\t\tfor (const tk of [1,2,5]) {\r\n\t\t\t\t\t\tconst tp=Math.ceil(numLogs-Math.log10(tk))\r\n\t\t\t\t\t\tif (tp<p) {\r\n\t\t\t\t\t\t\tp=tp\r\n\t\t\t\t\t\t\tk=tk\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst dv=k*Math.pow(10,p)\r\n\t\t\t\t\tconst v0=Math.ceil(min/dv)*dv\r\n\t\t\t\t\tconst numbers=[]\r\n\t\t\t\t\tfor (let v=v0;v<max;v+=dv) {\r\n\t\t\t\t\t\tnumbers.push(v)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [numbers,p<0?-p:0]\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGrid=(numbers,visibleNumbers,calcPosition,labelLimit,units,majorGridLineTest)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0,0.5) // don't translate along x to keep dashes sharp\r\n\t\t\t\t\tcanvasContext.fillStyle='#444'\r\n\t\t\t\t\tcanvasContext.font=`${fontSize}px`\r\n\t\t\t\t\tcanvasContext.textAlign='right'\r\n\t\t\t\t\tconst getLabel=n=>`${i18n.number(n)}${units}`\r\n\t\t\t\t\tconst labelWidth=Math.max(...visibleNumbers.map(n=>canvasContext.measureText(getLabel(n)).width))\r\n\t\t\t\t\tfor (let i=0;i<numbers.length;i++) {\r\n\t\t\t\t\t\tconst y=Math.round(calcPosition(numbers[i]))\r\n\t\t\t\t\t\tconst drawLine=()=>{\r\n\t\t\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(0,y)\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(width,y)\r\n\t\t\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst majorGridLine=majorGridLineTest(Number(visibleNumbers[i]))\r\n\t\t\t\t\t\tif (majorGridLine) {\r\n\t\t\t\t\t\t\tcanvasContext.strokeStyle='rgba(70%,70%,100%,0.3)'\r\n\t\t\t\t\t\t\tcanvasContext.setLineDash([])\r\n\t\t\t\t\t\t\tcanvasContext.lineWidth=3\r\n\t\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcanvasContext.strokeStyle=(majorGridLine ? '#000' : '#888')\r\n\t\t\t\t\t\tcanvasContext.setLineDash([1])\r\n\t\t\t\t\t\tcanvasContext.lineWidth=1\r\n\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\tif (y-fontOffset-fontSize>labelLimit) {\r\n\t\t\t\t\t\t\tcanvasContext.fillText(getLabel(visibleNumbers[i]),fontOffset+labelWidth,y-fontOffset)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t\treturn labelWidth\r\n\t\t\t\t}\r\n\t\t\t\tconst drawYGrid=()=>{\r\n\t\t\t\t\tconst yGridNumbersAndPrecision=getGridNumbers(min,max)\r\n\t\t\t\t\tconst yVisibleGridNumbers=formatNumbers(...yGridNumbersAndPrecision)\r\n\t\t\t\t\treturn drawGrid(yGridNumbersAndPrecision[0],yVisibleGridNumbers,calcY,0,units,majorGridLineTest)\r\n\t\t\t\t}\r\n\t\t\t\tconst drawXGrid=(yLabelWidth)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.rotate(-Math.PI/2)\r\n\t\t\t\t\tcanvasContext.translate(-height,0)\r\n\t\t\t\t\tlet calcX,xGridNumbersAndPrecision,xVisibleGridNumbers\r\n\t\t\t\t\tif (frequencyLogScale) {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-logFrequencyArrayLinearLimit0)/(logFrequencyArrayLinearLimit1-logFrequencyArrayLinearLimit0)\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(logFrequencyArrayLinearLimit0,logFrequencyArrayLinearLimit1)\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(xGridNumbersAndPrecision[0].map(n=>Math.pow(10,n)),0)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcalcX=v=>width*(v-frequencyArray[0])/(frequencyArray[width-1]-frequencyArray[0])\r\n\t\t\t\t\t\txGridNumbersAndPrecision=getGridNumbers(frequencyArray[0],frequencyArray[width-1])\r\n\t\t\t\t\t\txVisibleGridNumbers=formatNumbers(...xGridNumbersAndPrecision)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdrawGrid(xGridNumbersAndPrecision[0],xVisibleGridNumbers,calcX,fontOffset+yLabelWidth,' '+i18n('units.hertz.a'),v=>false)\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tconst drawGraph=()=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0.5,0.5) // aim at centers of pixels\r\n\t\t\t\t\tcanvasContext.strokeStyle='#F00'\r\n\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\t\t\tconst x=i\r\n\t\t\t\t\t\tconst y=calcY(array[i])\r\n\t\t\t\t\t\tif (i==0) {\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(x,y)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(x,y)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t}\r\n\t\t\t\tcanvasContext.clearRect(0,0,width,height)\r\n\t\t\t\tconst yLabelWidth=drawYGrid()\r\n\t\t\t\tdrawXGrid(yLabelWidth)\r\n\t\t\t\tdrawGraph()\r\n\t\t\t}\r\n\t\t\tif (magnitudeLogScale) {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,' '+i18n('units.decibel.a'),0,1,-100,v=>v==0)\r\n\t\t\t} else {\r\n\t\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,'',1,0.1,0,v=>(v==0 || v==1))\r\n\t\t\t}\r\n\t\t\tplotResponse(phaseCanvasContext,phaseArray,'',0,0.1,-Infinity,v=>v%2==0)\r\n\t\t}\r\n\t\tconst delayedUpdate=debounce(()=>{\r\n\t\t\ttry {\r\n\t\t\t\tupdatePlots(this.getFilterNodes(audioContext))\r\n\t\t\t} catch (e) {}\r\n\t\t},50)\r\n\t\tlet $frOption\r\n\t\tconst This=this\r\n\t\tthis.$output.append(\r\n\t\t\t$frOption=$(\"<div class='option only-buttons'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.frequencyResponse')+\":</label><span class='space'> </span>\",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.show')+\"</button>\").click(function(){\r\n\t\t\t\t\tconst $button=$(this)\r\n\t\t\t\t\tif (!isFreqResponseUiShown()) {\r\n\t\t\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\t\t\tlet filterNodes\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tfilterNodes=This.getFilterNodes(audioContext)\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t$button.replaceWith(i18n('options-output.filter.nodeError'))\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet $magnitudeCanvas, $phaseCanvas\r\n\t\t\t\t\t\t\t$freqResponseUi=$freqResponseUi.add(\r\n\t\t\t\t\t\t\t\t$(\"<span>\").append(\r\n\t\t\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<input type='checkbox'>\").prop('checked',magnitudeLogScale).change(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tmagnitudeLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\" \"+i18n('options-output.filter.logMagnitude')\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<input type='checkbox'>\").prop('checked',frequencyLogScale).change(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tfrequencyLogScale=$(this).prop('checked')\r\n\t\t\t\t\t\t\t\t\t\t\tdelayedUpdate()\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\" \"+i18n('options-output.filter.logFrequency')\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\" \"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t).add(\r\n\t\t\t\t\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.magnitude')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t\t$magnitudeCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.phase')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t\t$phaseCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t$button.after($freqResponseUi).text(i18n('options-output.hide'))\r\n\t\t\t\t\t\t\tmagnitudeCanvasContext=$magnitudeCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tphaseCanvasContext=$phaseCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tupdatePlots(filterNodes)\r\n\t\t\t\t\t\t\t$frOption.removeClass('only-buttons')\r\n\t\t\t\t\t\t},$button,i18n('options-output.filter.contextError'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO cancel scheduled update\r\n\t\t\t\t\t\t$freqResponseUi.remove()\r\n\t\t\t\t\t\t$freqResponseUi=$()\r\n\t\t\t\t\t\t$button.text(i18n('options-output.show'))\r\n\t\t\t\t\t\t$frOption.addClass('only-buttons')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t\toption.addUpdateCallback(()=>{\r\n\t\t\tif (isFreqResponseUiShown()) {\r\n\t\t\t\tdelayedUpdate()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\trunIfCanCreateAudioContext(fn,$ui,errorMessage) {\r\n\t\tconst initAudioContext=()=>{\r\n\t\t\taudioContext=new (AudioContext || webkitAudioContext)\r\n\t\t\tlinearFrequencyArray=new Float32Array(width)\r\n\t\t\tlogFrequencyArray=new Float32Array(width)\r\n\t\t\tmagnitudeArray=new Float32Array(width)\r\n\t\t\tphaseArray=new Float32Array(width)\r\n\t\t\tmagnitudeArray0=new Float32Array(width)\r\n\t\t\tphaseArray0=new Float32Array(width)\r\n\t\t\tconst maxFrequency=audioContext.sampleRate/2\r\n\t\t\tconst log10minFrequency=Math.log10(minFrequencyInLogMode)\r\n\t\t\tconst log10maxFrequency=Math.log10(maxFrequency)\r\n\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\tconst x=(i+0.5)/width\r\n\t\t\t\tlinearFrequencyArray[i]=maxFrequency*x\r\n\t\t\t\tlogFrequencyArray[i]=Math.pow(10,mix(log10minFrequency,log10maxFrequency,x))\r\n\t\t\t}\r\n\t\t\tlogFrequencyArrayLinearLimit0=mix(log10minFrequency,log10maxFrequency,0.5/width)\r\n\t\t\tlogFrequencyArrayLinearLimit1=mix(log10minFrequency,log10maxFrequency,1-0.5/width)\r\n\t\t}\r\n\t\tif (!audioContext) {\r\n\t\t\ttry {\r\n\t\t\t\tinitAudioContext()\r\n\t\t\t} catch (e) {\r\n\t\t\t\t$ui.replaceWith(errorMessage)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tfn(audioContext)\r\n\t}\r\n\t// abstract\r\n\t// getFilterNodes(audioContext)\r\n}\r\n\r\nmodule.exports=FilterOptionOutput\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Option=require('./option-classes')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Filter {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tgetPropertyOptionName(property) {\r\n\t\treturn 'options.filters.'+this.type+'.'+property.name\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.'+propertyName+'.input')\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tconst hasRangeInputs=this.nodeProperties.some(property=>{\r\n\t\t\tif (property.type=='range') {\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\treturn option.input\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (hasRangeInputs) {\r\n\t\t\tfeatureContext.alignedInputs=true\r\n\t\t}\r\n\t}\r\n\tgetHtmlPropertyLines(i18n,property) {\r\n\t\tif (property.skip) {\r\n\t\t\treturn Lines.be()\r\n\t\t}\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tconst a=Lines.b()\r\n\t\tif (property.type=='range' && option.input) {\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst fmtAttrs=formatNumbers.html({ min:option.min, max:option.max, value:option.value },p)\r\n\t\t\tconst fmtLabels=formatNumbers({ min:option.min, max:option.max },p)\r\n\t\t\tconst minMax=n=>i18n.numberWithUnits(n,option.unit,(a,e)=>Lines.html`<abbr title=${e}>`+a+`</abbr>`)\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\t\"<span class=min>\"+minMax(fmtLabels.min)+\"</span>\",\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=range value=${fmtAttrs.value} min=${fmtAttrs.min} max=${fmtAttrs.max} step=${p?Math.pow(0.1,p).toFixed(p):false}>`,\r\n\t\t\t\t\"<span class=max>\"+minMax(fmtLabels.max)+\"</span>\"\r\n\t\t\t)\r\n\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tLines.html`<select id=${inputHtmlName}>`,`</select>`\r\n\t\t\t\t).ae(\r\n\t\t\t\t\t...option.availableValues.map(value=>{\r\n\t\t\t\t\t\tconst title=i18n(this.getPropertyOptionName(property)+'.'+value)\r\n\t\t\t\t\t\treturn Lines.html`<option selected=${option.value==value} value=${value!=title && value}>${title}</option>`\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<span id=${inputHtmlName}>${i18n(this.getPropertyOptionName(property)+'.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget skipNode() {\r\n\t\treturn false\r\n\t}\r\n\t// { not called if skipNode is set\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.nodeProperties.map(\r\n\t\t\t\tproperty=>NoseWrapLines.b(\r\n\t\t\t\t\t\"<div>\",\"</div>\"\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tthis.getHtmlPropertyLines(i18n,property)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tget nodeJsNames() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\tget connectToNodeJsNames() {\r\n\t\treturn this.nodeJsNames\r\n\t}\r\n\t// }\r\n\t// abstract:\r\n\t// get type()\r\n\t// get ctxCreateMethodName()\r\n\t// get nodeProperties()\r\n}\r\n\r\nclass SinglePathFilter extends Filter {\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.bae(\r\n\t\t\tsuper.getJsInitLines(featureContext,i18n,prevNodeJsNames),\r\n\t\t\t...this.nodeProperties.map(property=>{\r\n\t\t\t\tif (property.skip) {\r\n\t\t\t\t\treturn Lines.be()\r\n\t\t\t\t}\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\tconst nodePropertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (option.input) {\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName(property.name)\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\t\t\t\tlet value=inputJsName+\".value\"\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t// was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".\"+eventProp+\"=function(){\",\r\n\t\t\t\t\t\t\"\t\"+nodePropertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (option.value!=option.defaultValue) {\r\n\t\t\t\t\tlet value=option.value\r\n\t\t\t\t\tif (property.type=='select') {\r\n\t\t\t\t\t\tvalue=\"'\"+value+\"'\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tnodePropertyJsName+\"=\"+value+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass PassiveByDefaultSinglePathFilter extends SinglePathFilter {\r\n\tget skipNode() {\r\n\t\treturn this.nodeProperties.every(property=>{\r\n\t\t\tconst option=this.options[property.name]\r\n\t\t\treturn option.value==option.defaultValue && !option.input\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'gain' }\r\n\t\tget ctxCreateMethodName() { return 'createGain' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tpanner: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'panner' }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends SinglePathFilter {\r\n\t\tget type()                { return 'biquad' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesQ(this.options.type.value)),\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tskip:(!this.options.type.input && !Option.BiquadFilter.typeUsesGain(this.options.type.value)),\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\t// lowshelf, highshelf and peaking are passive when gain==0\r\n\t\t\treturn (\r\n\t\t\t\t!this.options.type.input && ['lowshelf','highshelf','peaking'].indexOf(this.options.type.value)>=0 &&\r\n\t\t\t\t!this.options.gain.input && this.options.gain==0\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tiir: class extends SinglePathFilter {\r\n\t\tget type()                { return 'iir' }\r\n\t\tget ctxCreateMethodName() { return 'createIIRFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn []\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"([\"+this.options.feedforward.entries+\"],[\"+this.options.feedback.entries+\"]);\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tconvolver: class extends Filter {\r\n\t\tget type()                { return 'convolver' }\r\n\t\tget ctxCreateMethodName() { return 'createConvolver' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'reverb',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'buffer',\r\n\t\t\t\t\ttype:'xhr',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tsuper.requestFeatureContext(featureContext)\r\n\t\t\tfeatureContext.loader=true\r\n\t\t}\r\n\t\tget dryGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.dry.gain.node')\r\n\t\t}\r\n\t\tget wetGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.wet.gain.node')\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.options.reverb==0 && !this.options.reverb.input\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\tconst messageHtmlName=this.getPropertyInputHtmlName('buffer')\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type)))\r\n\t\t\t} else {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')))\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.wetGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\tthis.nodeJsName+\".connect(\"+this.wetGainNodeJsName+\");\",\r\n\t\t\t\t\t\"var \"+this.dryGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.dryGainNodeJsName+\");\"\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.reverb.input) {\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('reverb')\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName('reverb')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"loadSample('\"+this.options.url+\"',function(buffer){\", // TODO html escape\r\n\t\t\t\t\"\t\"+this.nodeJsName+\".buffer=buffer;\",\r\n\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='';\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t\tif (featureContext.loaderOnError) {\r\n\t\t\t\ta.t(\r\n\t\t\t\t\t\",function(){\",\r\n\t\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.filters.convolver.buffer.error')+\"';\",\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\ta.t(\r\n\t\t\t\t\");\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tget nodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.wetGainNodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t\tget connectToNodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.nodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tequalizer: class extends Filter {\r\n\t\tget type()                { return 'equalizer' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget frequencies()         { return Option.EqualizerFilter.frequencies }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn this.frequencies.map(freq=>({\r\n\t\t\t\tname:'gain'+freq,\r\n\t\t\t\ttype:'range',\r\n\t\t\t}))\r\n\t\t}\r\n\t\tgetFrequencyOption(i) {\r\n\t\t\treturn this.options[this.nodeProperties[i].name]\r\n\t\t}\r\n\t\tget affectedFreqsAndOptions() {\r\n\t\t\treturn this.frequencies.map((freq,i)=>{\r\n\t\t\t\tconst option=this.getFrequencyOption(i)\r\n\t\t\t\treturn {freq,option}\r\n\t\t\t}).filter(fo=>(fo.option.input!=false || fo.option.value!=0))\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tif (!this.allGainsConstant) { // TODO this check is likely not needed, this.allGainsConstant is not set\r\n\t\t\t\tfeatureContext.alignedInputs=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.affectedFreqsAndOptions.length==0\r\n\t\t}\r\n\t\tget connectToNodeJsName() {\r\n\t\t\tif (this.affectedFreqsAndOptions.length==1) {\r\n\t\t\t\treturn this.nodeJsName\r\n\t\t\t} else {\r\n\t\t\t\treturn camelCase('connect.to.'+this.type+this.nSuffix+'.node')\r\n\t\t\t}\r\n\t\t}\r\n\t\tget connectToNodeJsNames() {\r\n\t\t\treturn [this.connectToNodeJsName]\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\t\tconst singleFreq=this.affectedFreqsAndOptions.length==1\r\n\t\t\tconst allGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==false)\r\n\t\t\tconst noGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==true)\r\n\t\t\tconst getJsData=()=>{\r\n\t\t\t\treturn this.affectedFreqsAndOptions.map(fo=>{\r\n\t\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\t\treturn fo.freq\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"[\"+fo.freq+\",\"+(fo.option.input ? 'null' : fo.option.value)+\"]\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).join()\r\n\t\t\t}\r\n\t\t\tconst getJsDataItem=()=>{\r\n\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\treturn \"freq\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"freqData\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getJsLoopLines=()=>{\r\n\t\t\t\tconst freq=(singleFreq ? this.affectedFreqsAndOptions[0].freq : 'freq')\r\n\t\t\t\tconst gain=(singleFreq ? this.affectedFreqsAndOptions[0].option.value : 'gain')\r\n\t\t\t\tconst nodeJsName=((allGainsConstant || singleFreq) ? this.nodeJsName : 'node')\r\n\t\t\t\tconst inputJsName=(singleFreq\r\n\t\t\t\t\t? this.getPropertyInputJsName('gain'+freq)\r\n\t\t\t\t\t: 'input'\r\n\t\t\t\t)\r\n\t\t\t\tconst inputHtmlNameExpr=(singleFreq\r\n\t\t\t\t\t? \"'\"+this.getPropertyInputHtmlName('gain'+freq)+\"'\"\r\n\t\t\t\t\t: \"'\"+this.getPropertyInputHtmlName('gain')+\"'+freq\"\r\n\t\t\t\t)\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (!(noGainsConstant || singleFreq)) {\r\n\t\t\t\t\ta(\"var freq=freqData[0], gain=freqData[1];\")\r\n\t\t\t\t}\r\n\t\t\t\tif (allGainsConstant && !singleFreq) {\r\n\t\t\t\t\ta(\"\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var \")\r\n\t\t\t\t}\r\n\t\t\t\ta.t(nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\")\r\n\t\t\t\tif (featureContext.setConnectSampleToJsNames && !singleFreq) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"if (\"+this.connectToNodeJsName+\"===undefined) {\",\r\n\t\t\t\t\t\t\"\t\"+this.connectToNodeJsName+\"=\"+nodeJsName+\";\",\r\n\t\t\t\t\t\t\"}\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (singleFreq) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode.connect(\"+nodeJsName+\");\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\r\n\t\t\t\t\t\t\t\"prevNodes.forEach(function(prevNode){\",\r\n\t\t\t\t\t\t\t\"\tprevNode.connect(\"+nodeJsName+\");\",\r\n\t\t\t\t\t\t\t\"});\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\tnodeJsName+\".type='peaking';\",\r\n\t\t\t\t\tnodeJsName+\".frequency.value=\"+freq+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst constLines=JsLines.bae(\r\n\t\t\t\t\tnodeJsName+\".gain.value=\"+gain+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst varLines=JsLines.bae(\r\n\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById(\"+inputHtmlNameExpr+\");\",\r\n\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\"\t\"+nodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\"})();\"\r\n\t\t\t\t)\r\n\t\t\t\tif (!noGainsConstant && allGainsConstant) {\r\n\t\t\t\t\ta(constLines)\r\n\t\t\t\t} else if (noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(varLines)\r\n\t\t\t\t} else if (!noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(WrapLines.b(\"if (gain!==null) {\",\"} else {\",\"}\").ae(constLines,varLines))\r\n\t\t\t\t}\r\n\t\t\t\tif (!singleFreq) {\r\n\t\t\t\t\tconst outerNodeJsName=(allGainsConstant ? nodeJsName : this.nodeJsName+\"=\"+nodeJsName)\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode=\"+outerNodeJsName+\";\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\"prevNodes=[\"+outerNodeJsName+\"];\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')),\r\n\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type))\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\ta(\"var prevNode=\"+prevNodeJsNames[0]+\";\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var prevNodes=[\"+prevNodeJsNames.join()+\"];\")\r\n\t\t\t\t}\r\n\t\t\t\tif (featureContext.setConnectSampleToJsNames) {\r\n\t\t\t\t\ta(\"var \"+this.connectToNodeJsName+\";\")\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.nodeJsName+\";\",\r\n\t\t\t\t\tWrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[\"+getJsData()+\"].forEach(function(\"+getJsDataItem()+\"){\"),JsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass FilterSequence extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn filterClasses[entryOption.filter]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tfeatureContext.audioContext=true\r\n\t\t\t\tentry.requestFeatureContext(featureContext)\r\n\t\t\t\tif (featureContext.connectSampleToJsNames===undefined) {\r\n\t\t\t\t\tfeatureContext.connectSampleToJsNames=entry.connectToNodeJsNames\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn Lines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn InterleaveLines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>{\r\n\t\t\tconst lines=entry.getJsInitLines(featureContext,i18n,prevNodeJsNames)\r\n\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\treturn lines\r\n\t\t}))\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tfor (const entry of this.entries) {\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=FilterSequence\r\n","'use strict'\r\n\r\nconst webaudioSpec='https://webaudio.github.io/web-audio-api/'\r\nconst webaudioIssue=n=>`<a href='https://github.com/WebAudio/web-audio-api/issues/${n}'>${n}</a>`\r\nconst webaudioDetect='https://github.com/GoogleChrome/web-audio-samples/wiki/Detection-of-lowpass-BiquadFilter-implementation'\r\n\r\nconst enColors=\"{<span style='color:#800'>red</span>,<span style='color:#080'>green</span>,<span style='color:#008'>blue</span>,opacity}\"\r\nconst ruColors=\"{<span style='color:#800'></span> ,<span style='color:#080'></span> ,<span style='color:#008'></span> ,-}\"\r\n\r\nconst langStrings={\r\n\ten:{\r\n\t\t'options.sources': \"Sources\",\r\n\t\t'options.sources.{audio,video}': \"{Audio,Video} element\",\r\n\t\t'options.sources.{audio,video}.add': \"Add {} element\",\r\n\t\t'options.sources.sample': \"Sample\",\r\n\t\t'options.sources.sample.add': \"Add sample\",\r\n\t\t'options.sources.sample.buffer.loading': \"Loading and decoding the sample\",\r\n\t\t'options.sources.sample.buffer.error': \"Error while loading the sample\",\r\n\t\t'options.sources.sample.repeat': \"Repeat sample\",\r\n\t\t'options.sources.sample.interval': \"Interval between repeats\",\r\n\t\t'options.sources.sample.randomShift': \"Random shift of a start time\",\r\n\t\t'options.sources.sample.pitch': \"Pitch\",\r\n\t\t'options.sources.sample.randomPitch': \"Random pitch\",\r\n\t\t'options.sources.sample.gain': \"Gain\",\r\n\t\t'options.sources.sample.randomGain': \"Random gain\",\r\n\t\t'options.sources.{audio,video,sample}.url': \"Source URL\",\r\n\t\t'options.sources.video.{width,height}': \"Player {}\",\r\n\r\n\t\t'options.filters': \"Filters\",\r\n\t\t'options.filters.gain': \"Gain\",\r\n\t\t'options.filters.gain.add': \"Add gain\",\r\n\t\t'options.filters.gain.gain': \"Gain\",\r\n\t\t'options.filters.panner': \"Stereo panner\",\r\n\t\t'options.filters.panner.add': \"Add stereo panner\",\r\n\t\t'options.filters.panner.pan': \"Pan\",\r\n\t\t'options.filters.biquad': \"Biquad filter\", // [[Digital biquad filter]]\r\n\t\t'options.filters.biquad.add': \"Add biquad filter\",\r\n\t\t'options.filters.biquad.type': \"Filter type\",\r\n\t\t'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': \"{}\",\r\n\t\t'options.filters.biquad.frequency': \"Frequency\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \"log(Q)\",\r\n\t\t'options.filters.biquad.gain': \"Gain\",\r\n\t\t'options.filters.iir': \"IIR filter\",\r\n\t\t'options.filters.iir.add': \"Add IIR filter\",\r\n\t\t'options.filters.iir.feedforward': \"Feedforward coefficients\", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \"Add coefficient\",\r\n\t\t'options.filters.iir.feedback': \"Feedback coefficients\", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \"Add coefficient\",\r\n\t\t'options.filters.convolver': \"Convolver\",\r\n\t\t'options.filters.convolver.add': \"Add convolver\",\r\n\t\t'options.filters.convolver.url': \"Impulse responce URL\",\r\n\t\t'options.filters.convolver.reverb': \"Reverb (dry/wet)\",\r\n\t\t'options.filters.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t\t'options.filters.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\t\t'options.filters.equalizer': \"Equalizer\",\r\n\t\t'options.filters.equalizer.add': \"Add equalizer\",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"{} Hz gain\",\r\n\r\n\t\t'options.destination': \"Destination\",\r\n\t\t'options.destination.compressor': \"Dynamics compressor\",\r\n\t\t'options.destination.compressor.enabled': \"Add dynamics compressor before the destination\",\r\n\t\t'options.destination.{waveform,frequencies}': \"{Waveform,Frequencies} visualization\",\r\n\t\t'options.destination.{waveform,frequencies}.enabled': \"Enable {} visualization\",\r\n\t\t'options.destination.waveform.width': \"Waveform line width\",\r\n\t\t'options.destination.waveform.color': \"Waveform line color\",\r\n\t\t'options.destination.waveform.color.{r,g,b,a}': `Waveform line ${enColors}`,\r\n\t\t'options.destination.frequencies.cutoff': \"Limit plot to a fraction of low frequences\",\r\n\t\t'options.destination.frequencies.base': \"Frequency bars extend from\",\r\n\t\t'options.destination.frequencies.base.{bottom,middle}': \"{} of canvas\",\r\n\t\t'options.destination.frequencies.coloring': \"Frequency bars coloring\",\r\n\t\t'options.destination.frequencies.coloring.component': \"with single color component\",\r\n\t\t'options.destination.frequencies.coloring.spectral': \"spectral\",\r\n\t\t'options.destination.frequencies.coloringInput': \"Frequency bars color depends on\",\r\n\t\t'options.destination.frequencies.coloringInput.{amplitude,frequency}': \"{}\",\r\n\t\t'options.destination.frequencies.outline': \"Frequency bars outline\",\r\n\t\t'options.destination.frequencies.outline.enabled': \"Enable frequency bars outline\",\r\n\t\t'options.destination.frequencies.outline.width': \"Frequency bars outline width\",\r\n\t\t'options.destination.frequencies.outline.color': \"Frequency bars outline color\",\r\n\t\t'options.destination.frequencies.outline.color.{r,g,b,a}': `Frequency bars outline ${enColors}`,\r\n\t\t'options.destination.volume': \"Volume meter\",\r\n\t\t'options.destination.volume.enabled': \"Enable volume meter\",\r\n\t\t'options.destination.volume.stereo': \"Meters for left and right stereo channels\",\r\n\t\t'options.destination.analyser': \"Analyser\",\r\n\t\t'options.destination.analyser.logFftSize': \"FFT size (power of 2)\",\r\n\r\n\t\t'options.canvas': \"Canvas\",\r\n\t\t'options.canvas.{width,height}': \"Canvas {}\",\r\n\t\t'options.canvas.background': \"Background\",\r\n\t\t'options.canvas.background.type': \"Background type\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{}\",\r\n\t\t'options.canvas.background.color': \"Background fill color\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `Background fill ${enColors}`,\r\n\r\n\t\t'options.loader': \"Sample loader\",\r\n\t\t'options.loader.errors': \"Error handling\",\r\n\t\t'options.loader.errors.none': \"disabled\",\r\n\t\t'options.loader.errors.network': \"network errors\",\r\n\t\t'options.loader.errors.http': \"network and HTTP errors\",\r\n\r\n\t\t'options-info.destination.analyser.logFftSize': \"[[Fast Fourier transform]] size for the waveform/frequency visualization. Use a larger size to get a wider time window for the waveform and thinner frequency bars.\",\r\n\t\t'options-info.canvas.background.color.a': \"Lower opacity values lead to a blur effect.\",\r\n\r\n\t\t'options-output.input': \"Editable\",\r\n\t\t'options-output.range': \"with range\",\r\n\t\t'options-output.filter.frequencyResponse': \"Frequency response\",\r\n\t\t'options-output.filter.magnitude': \"Magnitude\",\r\n\t\t'options-output.filter.phase': \"Phase\",\r\n\t\t'options-output.filter.logMagnitude': \"log magnitude scale\",\r\n\t\t'options-output.filter.logFrequency': \"log frequency scale\",\r\n\t\t'options-output.filter.contextError': \"Error creating audio context. Your browser likely doesn't support Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Error creating filter node. Your browser likely doesn't support this filter type.\",\r\n\t\t'options-output.filter.biquad.clone': \"Clone as IIR filter\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"Clone with {}-2016-04-15 coefficients\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'>The API specification</a> was self-contradictory and implementations weren't following it. Additionally, it was discovered that filter coefficient formulas need to be changed to accomodate a wider range of lowpass and highpass filters. See Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)} and ${webaudioIssue(791)} for details. A possible method to check if an implementation has switched to the updated formulas is offered <a href='${webaudioDetect}'>here</a>.`,\r\n\t\t'options-output.show': \"Show\",\r\n\t\t'options-output.hide': \"Hide\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working\",\r\n\t\t'code-output.warning.interesting': \"You need at least one source and some processing enabled to get interesting JavaScript code\",\r\n\r\n\t\t'code.title': \"Web Audio API example  generated code\",\r\n\r\n\t\t'label.sources.sample.play': \"Play sample\",\r\n\t\t'label.destination.compressor': \"Enable dynamics compressor\",\r\n\r\n\t\t'comment.context': \"create [audio context][context]\",\r\n\t\t'comment.sources.audio': \"create [audio source node][source]\",\r\n\t\t'comment.sources.video': \"create [video source node][source]\",\r\n\t\t'comment.sources.sample': \"load [sample][buffer]\",\r\n\t\t'comment.filters.gain': \"create [gain node][gain]\",\r\n\t\t'comment.filters.panner': \"create [stereo panner node][panner]\",\r\n\t\t'comment.filters.biquad': \"create [biquad filter node][biquad]\",\r\n\t\t'comment.filters.iir': \"create [IIR filter node][iir]\",\r\n\t\t'comment.filters.convolver': \"create dry and wet routes with [convolver node][convolver]\",\r\n\t\t'comment.filters.convolver.single': \"create [convolver node][convolver]\",\r\n\t\t'comment.filters.equalizer': \"create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"create equalizer as a [peaking][peaking] [biquad filter node][biquad]\",\r\n\t\t'comment.destination': \"connect last node to [destination][destination]\",\r\n\t\t'comment.destination.compressor': \"create [dynamics compressor node][compressor]\",\r\n\t\t'comment.destination.analyser': \"create [analyser node][analyser]\",\r\n\t\t'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': \"create [analyser node][analyser] for {waveform,frequencies,waveform and frequencies} visualization\",\r\n\t\t'comment.destination.analyser.split': \"create [channel splitter node][splitter] connected to two [analyser nodes][analyser]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2}': \"pixel{,s}\",\r\n\t\t'units.hertz.a': \"Hz\",\r\n\t\t'units.hertz.{1,2}': \"Hertz\",\r\n\t\t'units.decibel.a': \"dB\",\r\n\t\t'units.decibel.{1,2}': \"decibel{,s}\",\r\n\t\t'units.second.a': \"s\",\r\n\t\t'units.second.{1,2}': \"second{,s}\",\r\n\t},\r\n\tru:{\r\n\t\t'options.sources': \"\",\r\n\t\t'options.sources.{audio,video}': \" <code>{}</code>\",\r\n\t\t'options.sources.{audio,video}.add': \"  <code>{}</code>\",\r\n\t\t'options.sources.sample': \"\",\r\n\t\t'options.sources.sample.add': \" \",\r\n\t\t'options.sources.sample.buffer.loading': \"    \",\r\n\t\t'options.sources.sample.buffer.error': \"  \",\r\n\t\t'options.sources.sample.repeat': \" \",\r\n\t\t'options.sources.sample.interval': \"  \",\r\n\t\t'options.sources.sample.randomShift': \"   \",\r\n\t\t'options.sources.sample.pitch': \"\",\r\n\t\t'options.sources.sample.randomPitch': \" \",\r\n\t\t'options.sources.sample.gain': \"\",\r\n\t\t'options.sources.sample.randomGain': \" \",\r\n\t\t'options.sources.{audio,video,sample}.url': \"URL \",\r\n\t\t'options.sources.video.{width,height}': \"{,} \",\r\n\r\n\t\t'options.filters': \"\",\r\n\t\t'options.filters.gain': \"\",\r\n\t\t'options.filters.gain.add': \" \",\r\n\t\t'options.filters.gain.gain': \" \",\r\n\t\t'options.filters.panner': \"\",\r\n\t\t'options.filters.panner.add': \" \",\r\n\t\t'options.filters.panner.pan': \"\",\r\n\t\t'options.filters.biquad': \" \",\r\n\t\t'options.filters.biquad.add': \"  \",\r\n\t\t'options.filters.biquad.type': \" \",\r\n\t\t'options.filters.biquad.type.lowpass': \" \",\r\n\t\t'options.filters.biquad.type.highpass': \" \",\r\n\t\t'options.filters.biquad.type.bandpass': \"\",\r\n\t\t'options.filters.biquad.type.{lowshelf,highshelf,peaking}': \"{}\", // TODO\r\n\t\t'options.filters.biquad.type.notch': \"-\",\r\n\t\t'options.filters.biquad.type.allpass': \"\", // http://www.dsplib.ru/content/allpass/allpass.html\r\n\t\t'options.filters.biquad.frequency': \"\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \" \",\r\n\t\t'options.filters.biquad.gain': \"\",\r\n\t\t'options.filters.iir': \"-\",\r\n\t\t'options.filters.iir.add': \" -\",\r\n\t\t'options.filters.iir.feedforward': \"  \", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \" \",\r\n\t\t'options.filters.iir.feedback': \"  \", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \" \",\r\n\t\t'options.filters.convolver': \"\",\r\n\t\t'options.filters.convolver.add': \" \",\r\n\t\t'options.filters.convolver.url': \"URL  \",\r\n\t\t'options.filters.convolver.reverb': \" / \", // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\r\n\t\t'options.filters.convolver.buffer.loading': \"     \",\r\n\t\t'options.filters.convolver.buffer.error': \"   \",\r\n\t\t'options.filters.equalizer': \"\",\r\n\t\t'options.filters.equalizer.add': \" \",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"  {} \",\r\n\r\n\t\t'options.destination': \"\",\r\n\t\t'options.destination.compressor': \"\",\r\n\t\t'options.destination.compressor.enabled': \"   \",\r\n\t\t'options.destination.{waveform,frequencies}': \" { ,}\",\r\n\t\t'options.destination.{waveform,frequencies}.enabled': \"  { ,}\",\r\n\t\t'options.destination.waveform.width': \"  \",\r\n\t\t'options.destination.waveform.color': \"  \",\r\n\t\t'options.destination.waveform.color.{r,g,b,a}': `${ruColors}  `,\r\n\t\t'options.destination.frequencies.cutoff': \"    \",\r\n\t\t'options.destination.frequencies.base': \"   \",\r\n\t\t'options.destination.frequencies.base.{bottom,middle}': \"{,}  <code>canvas</code>\",\r\n\t\t'options.destination.frequencies.coloring': \"  \",\r\n\t\t'options.destination.frequencies.coloring.component': \"  \",\r\n\t\t'options.destination.frequencies.coloring.spectral': \"\",\r\n\t\t'options.destination.frequencies.coloringInput': \"   \",\r\n\t\t'options.destination.frequencies.coloringInput.{amplitude,frequency}': \"{,}\",\r\n\t\t'options.destination.frequencies.outline': \"  \",\r\n\t\t'options.destination.frequencies.outline.enabled': \"   \",\r\n\t\t'options.destination.frequencies.outline.width': \"  \",\r\n\t\t'options.destination.frequencies.outline.color': \"  \",\r\n\t\t'options.destination.frequencies.outline.color.{r,g,b,a}': `${ruColors}  `,\r\n\t\t'options.destination.volume': \" \",\r\n\t\t'options.destination.volume.enabled': \"  \",\r\n\t\t'options.destination.volume.stereo': \"      \",\r\n\t\t'options.destination.analyser': \"\",\r\n\t\t'options.destination.analyser.logFftSize': \"  ( 2)\",\r\n\r\n\t\t'options.canvas': \" <code>canvas</code>\",\r\n\t\t'options.canvas.{width,height}': \"{,}  <code>canvas</code>\",\r\n\t\t'options.canvas.background': \"\",\r\n\t\t'options.canvas.background.type': \" \",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{,}\",\r\n\t\t'options.canvas.background.color': \" \",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': `${ruColors} `,\r\n\r\n\t\t'options.loader': \" \",\r\n\t\t'options.loader.errors': \"  \",\r\n\t\t'options.loader.errors.none': \"\",\r\n\t\t'options.loader.errors.network': \"  \",\r\n\t\t'options.loader.errors.http': \"     HTTP\",\r\n\r\n\t\t'options-info.destination.analyser.logFftSize': \" [[  |  ]]      .              .\",\r\n\t\t'options-info.canvas.background.color.a': \"  -    .\",\r\n\r\n\t\t'options-output.input': \" \",\r\n\t\t'options-output.range': \" \",\r\n\t\t'options-output.filter.frequencyResponse': \" \",\r\n\t\t'options-output.filter.magnitude': \"\",\r\n\t\t'options-output.filter.phase': \"\",\r\n\t\t'options-output.filter.logMagnitude': \"  \",\r\n\t\t'options-output.filter.logFrequency': \"  \",\r\n\t\t'options-output.filter.contextError': \"  -. ,    Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"   . ,      .\",\r\n\t\t'options-output.filter.biquad.clone': \"   -\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"     {,} 2016-04-15\",\r\n\t\t'options-output.filter.biquad.clone.info': `<a href='${webaudioSpec}'> API</a>       .   ,        ,          ,     .     Web Audio API issues ${webaudioIssue(769)}, ${webaudioIssue(771)}  ${webaudioIssue(791)}.   ,      ,  <a href='${webaudioDetect}'></a>.`,\r\n\t\t'options-output.show': \"\",\r\n\t\t'options-output.hide': \"\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"     JSFiddle     <kbd>Run</kbd>\",\r\n\t\t'code-output.warning.interesting': \"  JavaScript-           \",\r\n\r\n\t\t'code.title': \"  Web Audio API   \",\r\n\r\n\t\t'label.sources.sample.play': \" \",\r\n\t\t'label.destination.compressor': \" \",\r\n\r\n\t\t'comment.context': \" [-][context]\",\r\n\t\t'comment.sources.audio': \" [  ][source]\",\r\n\t\t'comment.sources.video': \" [  ][source]\",\r\n\t\t'comment.sources.sample': \" [][buffer]\",\r\n\t\t'comment.filters.gain': \" [ ][gain]\",\r\n\t\t'comment.filters.panner': \" [ ][panner]\",\r\n\t\t'comment.filters.biquad': \" [  ][biquad]\",\r\n\t\t'comment.filters.iir': \" [ -][iir]\",\r\n\t\t'comment.filters.convolver': \"      [ ][convolver]\",\r\n\t\t'comment.filters.convolver.single': \" [ ][convolver]\",\r\n\t\t'comment.filters.equalizer': \"     [peaking][peaking] [ ][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"    [peaking][peaking] [ ][biquad]\",\r\n\t\t'comment.destination': \"    [][destination]\",\r\n\t\t'comment.destination.compressor': \" [ ][compressor]\",\r\n\t\t'comment.destination.analyser': \" [ ][analyser]\",\r\n\t\t'comment.destination.analyser.{waveform,frequencies,waveform+frequencies}': \" [ ][analyser]   { ,,   }\",\r\n\t\t'comment.destination.analyser.split': \" [  ][splitter],    [ ][analyser]\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2,5}': \"{,,}\",\r\n\t\t'units.hertz.a': \"\",\r\n\t\t'units.hertz.{1,2,5}': \"{,,}\",\r\n\t\t'units.decibel.a': \"\",\r\n\t\t'units.decibel.{1,2,5}': \"{,,}\",\r\n\t\t'units.second.a': \"\",\r\n\t\t'units.second.{1,2,5}': \"{,,}\",\r\n\t},\r\n}\r\n\r\n/*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\r\n\r\nfor (let lang in langStrings) {\r\n\tlet strings=langStrings[lang]\r\n\tstrings=require('crnx-base/i18n-expand-curly')(strings)\r\n\tstrings=require('crnx-base/i18n-link-wikipedia')(lang)(strings)\r\n\tstrings=require('crnx-base/options-output-i18n')(lang)(strings)\r\n\tstrings=require('crnx-base/code-output-i18n')(lang)(strings)\r\n\tlangStrings[lang]=strings\r\n}\r\n\r\nmodule.exports=require('crnx-base/i18n')(langStrings)\r\n","'use strict'\r\n\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass IIRFilterOptionOutput extends FilterOptionOutput {\r\n\tgetFilterNodes(audioContext) {\r\n\t\treturn [audioContext.createIIRFilter(\r\n\t\t\tthis.option.entries[0].entries.map(entry=>entry.value),\r\n\t\t\tthis.option.entries[1].entries.map(entry=>entry.value)\r\n\t\t)]\r\n\t}\r\n}\r\n\r\nmodule.exports=IIRFilterOptionOutput\r\n","'use strict'\r\n\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Loader extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\tfeatureContext.loaderOnError=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.loader) return JsLines.be()\r\n\t\tconst a=JsLines.b()\r\n\t\ta(\r\n\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\"xhr.open('GET',url);\", // TODO html escape\r\n\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\"xhr.onload=function(){\"\r\n\t\t)\r\n\t\tif (this.options.errors=='http') {\r\n\t\t\ta(\r\n\t\t\t\t\"\tif (this.status==200) {\",\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,onDecode);\", // TODO decoding error handling\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\"\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\ta(\r\n\t\t\t\t\"\tctx.decodeAudioData(this.response,onDecode);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"};\"\r\n\t\t)\r\n\t\tif (this.options.errors!='none') {\r\n\t\t\ta(\r\n\t\t\t\t\"xhr.onerror=onError;\"\r\n\t\t\t)\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"xhr.send();\"\r\n\t\t)\r\n\t\treturn WrapLines.b(\r\n\t\t\tJsLines.bae(\"function loadSample(url,onDecode\"+(this.options.errors!='none' ? \",onError\" : \"\")+\") {\"),\r\n\t\t\tJsLines.bae(\"}\")\r\n\t\t).ae(a.e())\r\n\t}\r\n}\r\n\r\nmodule.exports=Loader\r\n","'use strict'\r\n\r\nlet idCounter=0\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++)\r\n}\r\n\r\nconst i18ns=require('./i18n')\r\nconst Options=require('./options')\r\nconst Code=require('./code')\r\nconst OptionsOutput=require('./options-output')\r\nconst CodeOutput=require('./code-output')\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst lang=$container.closest('[lang]').attr('lang')\r\n\t\tconst i18n=i18ns(lang)\r\n\t\tconst options=new Options()\r\n\t\tconst codeOutput=new CodeOutput(()=>new Code(options.fix(),i18n),i18n)\r\n\t\toptions.addUpdateCallback(codeOutput.update)\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n)\r\n\t\t$container.empty().append(\r\n\t\t\toptionsOutput.$output,\r\n\t\t\tcodeOutput.$output\r\n\t\t)\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst Option=Object.create(require('crnx-base/option-classes'))\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed precision of 2\r\n//\tno speed\r\n//\tcan specify defaultMin, defaultMax\r\n//\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\nOption.LiveNumber = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataMin  =data.min\r\n\t\t\tdataMax  =data.max\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.defaultMin!==undefined) {\r\n\t\t\tthis.defaultMin=settings.defaultMin\r\n\t\t} else {\r\n\t\t\tthis.defaultMin=this.availableMin\r\n\t\t}\r\n\t\tif (settings.defaultMax!==undefined) {\r\n\t\t\tthis.defaultMax=settings.defaultMax\r\n\t\t} else {\r\n\t\t\tthis.defaultMax=this.availableMax\r\n\t\t}\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:this.defaultMin\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:this.defaultMax\r\n\t\tthis._input=!!dataInput\r\n\t\tthis._$range=null\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input)\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateInternalVisibility()\r\n\t\tthis.update()\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min\r\n\t\tthis.update()\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max\r\n\t\tthis.update()\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range\r\n\t\tthis.updateInternalVisibility()\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={}\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value\r\n\t\tif (src.min!=src.availableMin) data.min=src.min\r\n\t\tif (src.max!=src.availableMax) data.max=src.max\r\n\t\tif (src.input) data.input=src.input\r\n\t\treturn data\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this)\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.min=this.min\r\n\t\tfixed.max=this.max\r\n\t\tfixed.input=this.input\r\n\t\tfixed.defaultValue=this.defaultValue\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 2\r\n\t}\r\n}\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableValues=src.availableValues\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tthis._input=!!dataInput\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\tif (this.input) data.input=this.input\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this)\r\n\t}\r\n}\r\n\r\nOption.AnyFloat = class extends Option.NonBoolean {\r\n}\r\n\r\nOption.BiquadFilter = class extends Option.Group {\r\n\tstatic typeUsesQ(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowpass': true,\r\n\t\t\t'highpass': true,\r\n\t\t\t'bandpass': true,\r\n\t\t\t'peaking': true,\r\n\t\t\t'notch': true,\r\n\t\t\t'allpass': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic typeUsesGain(type) {\r\n\t\treturn !!{\r\n\t\t\t'lowshelf': true,\r\n\t\t\t'highshelf': true,\r\n\t\t\t'peaking': true,\r\n\t\t}[type]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['LiveSelect','type',[\r\n\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t]],\r\n\t\t\t['LiveInt','frequency',[0,22050],350,{ unit: 'hertz' }],\r\n\t\t\t['LiveInt','detune',[0,100],{ unit: '' }],\r\n\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t['LiveInt','gain',[-30,30],0,{ unit: 'decibel' }],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tconst type=this.entries[0]\r\n\t\tconst Q=this.entries[3]\r\n\t\tconst gain=this.entries[4]\r\n\t\tQ.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesQ(type.value))\r\n\t\tgain.isVisible=()=>(type.input || Option.BiquadFilter.typeUsesGain(type.value))\r\n\t\ttype.addUpdateCallback(()=>{\r\n\t\t\tQ.updateVisibility()\r\n\t\t\tgain.updateVisibility()\r\n\t\t})\r\n\t}\r\n}\r\n\r\nOption.IIRFilterCoefs = class extends Option.Array {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (this._entries.length==0) {\r\n\t\t\tconst type=this.availableTypes[0]\r\n\t\t\tthis._entries.push(this.makeEntry(type))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.IIRFilter = class extends Option.Group {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['IIRFilterCoefs','feedforward',[\r\n\t\t\t\t['AnyFloat','b',1],\r\n\t\t\t]],\r\n\t\t\t['IIRFilterCoefs','feedback',[\r\n\t\t\t\t['AnyFloat','a',1],\r\n\t\t\t]],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.EqualizerFilter = class extends Option.Group {\r\n\tstatic get frequencies() {\r\n\t\treturn [60,170,350,1000,3500,10000]\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=Option.EqualizerFilter.frequencies.map(\r\n\t\t\tfreq=>['LiveInt','gain'+freq,[-30,30],0,{ unit: 'decibel' }]\r\n\t\t)\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.Filters = class extends Option.Array {\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\nconst ArrayOptionOutput=require('crnx-base/array-option-output')\r\nconst BiquadFilterOptionOutput=require('./biquad-filter-option-output')\r\nconst IIRFilterOptionOutput=require('./iir-filter-option-output')\r\nconst EqualizerFilterOptionOutput=require('./equalizer-filter-option-output')\r\n\r\nclass FiltersOptionOutput extends ArrayOptionOutput {\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\tconst $subOutput=super.writeDraggableSubOption(subOption,writeOption,i18n)\r\n\t\tconst This=this\r\n\t\tif (subOption instanceof Option.BiquadFilter) {\r\n\t\t\t$subOutput.find('button.clone').click(function(){\r\n\t\t\t\tconst $button=$(this)\r\n\t\t\t\tconst coefs=$button.data('coefs')\r\n\t\t\t\tif (coefs) {\r\n\t\t\t\t\tconst entry=This.option.makeEntry('iir',coefs)\r\n\t\t\t\t\tThis.$entries.append(\r\n\t\t\t\t\t\tThis.writeDraggableSubOption(entry,writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tThis.updateArrayEntries()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn $subOutput\r\n\t}\r\n}\r\n\r\nclass IIRFilterCoefsOptionOutput extends ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn this.option.entries.length>1\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tsuper.updateArrayEntries()\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tupdateArrayEntryLabels() {\r\n\t\tthis.$entries.children().each(function(i){\r\n\t\t\tconst c=$(this).data('option').name\r\n\t\t\t$(this).find('label').addClass('short').html(`${c}<sub>${i}</sub>:`)\r\n\t\t})\r\n\t}\r\n}\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters)\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst writeMinMaxInput=minOrMax=>setInputAttrs($(\"<input type='number' required>\"))\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tlet $inputCheckbox,$rangeMinInput,$rangeMaxInput\r\n\t\t\tconst $output=optionClassWriters.get(Option.Number)(option,writeOption,i18n,generateId)\r\n\t\t\t$output.find('button').before(\r\n\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\" \"+i18n('options-output.input')\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\toption.$range=$(\"<span class='range'>\").append(\r\n\t\t\t\t\ti18n('options-output.range')+\" \",\r\n\t\t\t\t\t$(\"<span class='nowrap'>\").append(\r\n\t\t\t\t\t\t$rangeMinInput=writeMinMaxInput('min'),\r\n\t\t\t\t\t\t\" .. \",\r\n\t\t\t\t\t\t$rangeMaxInput=writeMinMaxInput('max')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t\" \"\r\n\t\t\t).click(function(){\r\n\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t$rangeMinInput.val(option.defaultMin).change()\r\n\t\t\t\t$rangeMaxInput.val(option.defaultMax).change()\r\n\t\t\t})\r\n\t\t\treturn $output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select,$inputCheckbox\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append( // not inheriting Option.Select b/c don't know how to handle reset button\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(function(availableValue){\r\n\t\t\t\t\t\treturn $(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t})\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<label class='nowrap'>\").append(\r\n\t\t\t\t\t$inputCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\" \"+i18n('options-output.input')\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$select.val(option.defaultValue).change()\r\n\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.AnyFloat,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\tthis.getLeadLabel(id,i18n,option),\r\n\t\t\t\t$(\"<input type='number' id='\"+id+\"' step='any' required>\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilterCoefs,function(){\r\n\t\t\treturn new IIRFilterCoefsOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.BiquadFilter,function(){\r\n\t\t\treturn new BiquadFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilter,function(){\r\n\t\t\treturn new IIRFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.EqualizerFilter,function(){\r\n\t\t\treturn new EqualizerFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Filters,function(){\r\n\t\t\treturn new FiltersOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nconst BaseOptions=require('crnx-base/options')\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Array','sources',[\r\n\t\t\t\t['Group','audio',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','video',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.mp4',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','width',[1,1920],320,{ unit: 'pixel' }],\r\n\t\t\t\t\t['Int','height',[1,1080],240,{ unit: 'pixel' }],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','sample',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/shoot2.mp3',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','repeat',[1,20]],\r\n\t\t\t\t\t['Float','interval',[0,1],0.1,{ unit: 'second' }],\r\n\t\t\t\t\t['Float','randomShift',[0,1],{ unit: 'second' }],\r\n\t\t\t\t\t['Float','pitch',[0,2],1],\r\n\t\t\t\t\t['Float','randomPitch',[0,1]],\r\n\t\t\t\t\t['Float','gain',[0,2],1],\r\n\t\t\t\t\t['Float','randomGain',[0,1]],\r\n\t\t\t\t]],\r\n\t\t\t],'source'],\r\n\t\t\t['Filters','filters',[\r\n\t\t\t\t['Group','gain',[\r\n\t\t\t\t\t['LiveFloat','gain',[0,10],1,{\r\n\t\t\t\t\t\tdefaultMax: 1,\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','panner',[\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['BiquadFilter','biquad'],\r\n\t\t\t\t['IIRFilter','iir'],\r\n\t\t\t\t['Group','convolver',[\r\n\t\t\t\t\t['LiveFloat','reverb',[0,1]],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['EqualizerFilter','equalizer'],\r\n\t\t\t],'filter'],\r\n\t\t\t['Group','destination',[\r\n\t\t\t\t['Group','compressor',[\r\n\t\t\t\t\t['Checkbox','enabled'], // Firefox compresses automatically?\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','waveform',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Float','width',[0,10],1,{\r\n\t\t\t\t\t\tunit: 'pixel',\r\n\t\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','frequencies',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Int','cutoff',[10,100],100,{\r\n\t\t\t\t\t\tunit: '%',\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','base',['bottom','middle'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','coloring',['component','spectral'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Select','coloringInput',['amplitude','frequency'],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t['Group','outline',[\r\n\t\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t\t['Float','width',[0,10],1,{\r\n\t\t\t\t\t\t\tunit: 'pixel',\r\n\t\t\t\t\t\t\tvisibilityData: {'destination.frequencies.outline.enabled':[true]},\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t\t['Int','r',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','g',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','b',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t],{\r\n\t\t\t\t\t\t\tvisibilityData: {'destination.frequencies.outline.enabled':[true]},\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'destination.frequencies.enabled':[true]},\r\n\t\t\t\t\t}]\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','volume',[\r\n\t\t\t\t\t['Checkbox','enabled'],\r\n\t\t\t\t\t['Checkbox','stereo',{\r\n\t\t\t\t\t\tvisibilityData: {'destination.volume.enabled':[true]},\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','analyser',[\r\n\t\t\t\t\t['Int','logFftSize',[5,12],8],\r\n\t\t\t\t],{\r\n\t\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true],'destination.frequencies.enabled':[true],'destination.volume.enabled':[true]},\r\n\t\t\t\t\tvisibilityDataLogic: 'or',\r\n\t\t\t\t}],\r\n\t\t\t]],\r\n\t\t\t['Group','canvas',[\r\n\t\t\t\t['Int','width',[1,1920],300,{ unit: 'pixel' }],\r\n\t\t\t\t['Int','height',[1,1080],100,{ unit: 'pixel' }],\r\n\t\t\t\t['Group','background',[\r\n\t\t\t\t\t['Select','type',['clear','filled']],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'canvas.background.type':['filled']}\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t],{\r\n\t\t\t\tvisibilityData: {'destination.waveform.enabled':[true],'destination.frequencies.enabled':[true],'destination.volume.enabled':[true]},\r\n\t\t\t\tvisibilityDataLogic: 'or',\r\n\t\t\t}],\r\n\t\t\t['Group','loader',[\r\n\t\t\t\t['Select','errors',['none','network','http']],\r\n\t\t\t]], // TODO visibility depending on sources and filters\r\n\t\t]\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Source {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tget elementHtmlName() {\r\n\t\treturn 'my.'+this.type+this.nSuffix\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn WrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tthis.getElementHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.createMediaElementSource(document.getElementById('\"+this.elementHtmlName+\"'));\"\r\n\t\t)\r\n\t}\r\n\t// abstract:\r\n\t// get type()\r\n\t// getElementHtmlLines(featureContext,i18n)\r\n}\r\n\r\nconst sourceClasses={\r\n\taudio: class extends Source {\r\n\t\tget type() { return 'audio' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<audio src=${this.options.url} id=${this.elementHtmlName} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></audio>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tvideo: class extends Source {\r\n\t\tget type() { return 'video' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<video src=${this.options.url} id=${this.elementHtmlName} width=${this.options.width} height=${this.options.height} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></video>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tsample: class extends Source {\r\n\t\tget type() { return 'sample' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\tconst messageHtmlName=this.elementHtmlName+'.buffer'\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<button id=${this.elementHtmlName} disabled>${i18n('label.sources.sample.play')}</button> <span id=${messageHtmlName}>${i18n('options.sources.sample.buffer.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\tgetJsInitLines(featureContext,i18n) {\r\n\t\t\tconst messageHtmlName=this.elementHtmlName+'.buffer'\r\n\t\t\tconst fmtMul=(fmtNum)=>{\r\n\t\t\t\tif (fmtNum==1) {\r\n\t\t\t\t\treturn \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"*\"+fmtNum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getSampleLines=(startOptions)=>{\r\n\t\t\t\tconst randomValue=(baseOption,randomOption)=>{\r\n\t\t\t\t\tconst numbers={}\r\n\t\t\t\t\tnumbers.base=baseOption\r\n\t\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\t\tnumbers.random=randomOption\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\t\t\tlet value=fmt.base\r\n\t\t\t\t\tif (randomOption>0) {\r\n\t\t\t\t\t\tvalue+=\"+Math.random()\"+fmtMul(fmt.random)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value\r\n\t\t\t\t}\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tlet lastNodeName=\"bufferSourceNode\"\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var bufferSourceNode=ctx.createBufferSource();\",\r\n\t\t\t\t\t\"bufferSourceNode.buffer=buffer;\"\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.pitch!=1 || this.options.randomPitch>0) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"bufferSourceNode.playbackRate.value=\"+randomValue(this.options.pitch,this.options.randomPitch)+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.gain!=1 || this.options.randomGain>0) {\r\n\t\t\t\t\tlastNodeName=\"bufferSourceGainNode\"\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var bufferSourceGainNode=ctx.createGain();\",\r\n\t\t\t\t\t\t\"bufferSourceNode.connect(bufferSourceGainNode);\",\r\n\t\t\t\t\t\t\"bufferSourceGainNode.gain.value=\"+randomValue(this.options.gain,this.options.randomGain)+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (featureContext.connectSampleToCompressor) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"if (document.getElementById('my.compressor').checked) {\",\r\n\t\t\t\t\t\t\"\t\"+lastNodeName+\".connect(compressorNode);\",\r\n\t\t\t\t\t\t\"} else {\",\r\n\t\t\t\t\t\t...featureContext.connectSampleToJsNames.map(\r\n\t\t\t\t\t\t\tnodeJsName=>\"\t\"+lastNodeName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\"}\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t...featureContext.connectSampleToJsNames.map(\r\n\t\t\t\t\t\t\tnodeJsName=>lastNodeName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"bufferSourceNode.start(\"+startOptions+\");\"\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tconst getOnClickLines=()=>{\r\n\t\t\t\tlet startOptions=\"\"\r\n\t\t\t\tconst numbers={}\r\n\t\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\t\tnumbers.interval=this.options.interval\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\t\tnumbers.randomShift=this.options.randomShift\r\n\t\t\t\t}\r\n\t\t\t\tconst fmt=formatNumbers.js(numbers)\r\n\t\t\t\tif (this.options.repeat!=1) {\r\n\t\t\t\t\tstartOptions+=\"+i\"+fmtMul(fmt.interval)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.randomShift>0) {\r\n\t\t\t\t\tstartOptions+=\"+Math.random()\"+fmtMul(fmt.randomShift)\r\n\t\t\t\t}\r\n\t\t\t\tif (startOptions.length>0) {\r\n\t\t\t\t\tstartOptions=\"ctx.currentTime\"+startOptions\r\n\t\t\t\t}\r\n\t\t\t\tif (this.options.repeat==1) {\r\n\t\t\t\t\treturn getSampleLines(startOptions)\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn WrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\"for (var i=0;i<\"+this.options.repeat+\";i++) {\"),\r\n\t\t\t\t\t\tJsLines.bae(\"}\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetSampleLines(startOptions)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getOnDecodeLines=()=>{\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var button=document.getElementById('\"+this.elementHtmlName+\"');\"\r\n\t\t\t\t)\r\n\t\t\t\ta(WrapLines.b(\r\n\t\t\t\t\tJsLines.bae(\"button.onclick=function(){\"),\r\n\t\t\t\t\tJsLines.bae(\"};\")\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tgetOnClickLines()\r\n\t\t\t\t))\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"button.disabled=false;\",\r\n\t\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='';\"\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tconst getOnErrorLines=()=>{\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\t\"document.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.sources.sample.buffer.error')+\"';\"\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst leadLines=JsLines.bae(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\t\"loadSample('\"+this.options.url+\"',function(buffer){\"\r\n\t\t\t)\r\n\t\t\tconst midLines=JsLines.bae(\r\n\t\t\t\t\"},function(){\"\r\n\t\t\t)\r\n\t\t\tconst endLines=JsLines.bae(\r\n\t\t\t\t\"});\"\r\n\t\t\t)\r\n\t\t\tif (!featureContext.loaderOnError) {\r\n\t\t\t\treturn WrapLines.b(leadLines,endLines).ae(\r\n\t\t\t\t\tgetOnDecodeLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\treturn WrapLines.b(leadLines,midLines,endLines).ae(\r\n\t\t\t\t\tgetOnDecodeLines(),\r\n\t\t\t\t\tgetOnErrorLines()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass SourceSet extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn sourceClasses[entryOption.source]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.entries.length>0) {\r\n\t\t\tfeatureContext.audioProcessing=true\r\n\t\t}\r\n\t\tif (this.entries.some(entry=>entry.type=='sample')) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t\tfeatureContext.loader=true\r\n\t\t\tfeatureContext.setConnectSampleToJsNames=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(...this.entries.map(entry=>entry.getJsInitLines(featureContext,i18n)))\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tlet nodeJsNames=[]\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\tnodeJsNames=this.entries.filter(entry=>entry.type!='sample').map(entry=>entry.nodeJsName)\r\n\t\t}\r\n\t\tif (nodeJsNames.length>0) {\r\n\t\t\treturn nodeJsNames\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=SourceSet\r\n"],"sourceRoot":"."}