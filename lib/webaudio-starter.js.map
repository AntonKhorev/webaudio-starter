{"version":3,"sources":["webaudio-starter.js","node_modules/browserify/node_modules/browser-pack/_prelude.js","base/lines.js","base/option-classes.js","base/options.js","src/code-output.js","src/code.js","src/i18n.js","src/main.js","src/options-output.js","src/options.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","Lines","this","data","addFlattenedArgs","flattenArgs","arguments","push","Array","isArray","apply","lastLine","pop","indent","level","map","line","join","isEmpty","interleave","first","wrap","begin","end","unshift","wrapIfNotEmpty","replace","match",2,"Option","Base","_class","name","_1","_2","_3","fullName","isVisible","updateCallback","_$","updateVisibility","$","toggle","shortenExport","dataKeys","shortenExportAssign","parentData","get","set","Input","_Option$Base","_class2","availableValues","defaultValue","_this","_value","BooleanInput","_Option$Input","_class3","fix","NonBooleanInput","_Option$Input2","_class4","valueOf","toString","String","FactorInput","_Option$NonBooleanInp","_class5","_this4","RangeInput","_Option$NonBooleanInp2","_class6","availableRange","_this5","availableMin","availableMax","Collection","_Option$Base2","_class7","entries","_this6","forEach","entry","fixedEntries","fixed","Void","_Option$Base3","_class8","Checkbox","_Option$BooleanInput","_class9","_","Select","_Option$FactorInput","_class10","Text","_Option$FactorInput2","_class11","Root","_Option$Collection","_class12","Group","_Option$Collection2","_class13","_Option$Base4","_class14","availableTypes","availableConstructors","_this13","_entries","subDatas","subData","subType","type","addEntry","_this14","subFixed",3,"Options","simpleUpdateCallback","optionClasses","optionByFullName","optionsWithVisibilityAffectedByFullName","simpleMakeEntry","description","fullNamePath","className","ctorArgsDescription","slice","contents","nScalars","nArrays","arg","makeEntry","defaultValueOrConstructors","visibilityData","nObjects","x","subName","testName","indexOf","option","root","entriesDescription","./option-classes.js",4,"CodeOutput","generateCodeFn","$code","getHtmlDataUri","html","encodeURIComponent","writeControls","append","click","attr","text","window","open","$output","hljs","highlightBlock","delay","timeoutId","update","clearTimeout","setTimeout",5,"capitalize","charAt","toUpperCase","toCamelCase","split","w","Feature","requestFeatureContext","featureContext","getHtmlLines","i18n","getJsLines","Audio","_Feature","source","lines","audioContext","Filter","getPropertyOptionName","propertyName","getPropertyInputHtmlName","nSuffix","getPropertyInputJsName","_this2","nodeProperties","property","inputHtmlName","min","max","step","Function","bind","concat","options","prevNodeJsName","_this3","nodeJsName","ctxCreateMethodName","inputJsName","fn","filterClasses","gain","_Filter","panner","_Filter2","biquad","_Filter3","FilterSequence","_Feature2","filterOptions","_this7","filterCounts","filterCounts2","filters","filterClass","filter","features","feature","../base/lines.js",6,"strings","options.source","options.filters","options.filters.gain","options.filters.gain.add","options.filters.gain.properties.gain","options.filters.panner","options.filters.panner.add","options.filters.panner.properties.pan","options.filters.biquad","options.filters.biquad.add","options.filters.biquad.properties.type","options.filters.biquad.properties.frequency","options.filters.biquad.properties.detune","options.filters.biquad.properties.Q","options-output.drag","options-output.delete","lang","id",7,"generateId","idCounter","generateCode","OptionsOutput","each","$container","codeOutput","optionsOutput","empty","./code-output","./code.js","./i18n.js","./options-output","./options.js",8,"write","optionClassWriters","optionClass","optionClassWriter","writeOption","change","prop","listId","val","availableValue","$dragged","$entries","updateArrayEntries","children","writeDraggableOption","on","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","setDragImage","addClass","keydown","$handle","$sorted","keyCode","prev","before","focus","next","after","remove","preventDefault","dropEffect","$target","nextAll","is","prevAll","removeClass","$buttons","../base/option-classes.js",9,"BaseOptions","_BaseOptions","../base/options.js"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                /*\r\n.a = add AFTER last line\r\n.t = add TO last line\r\n*/\n                var Lines = function Lines() {\n                    this.data = [];\n                    this.addFlattenedArgs(this.flattenArgs(arguments));\n                };\n                // private\n                Lines.prototype.flattenArgs = function (s) {\n                    var r = [];\n                    for (var i = 0; i < s.length; i++) {\n                        if (typeof s[i] == 'string') {\n                            r.push(s[i]);\n                        } else if (Array.isArray(s[i])) {\n                            Array.prototype.push.apply(r, s[i]);\n                        } else if (s[i] instanceof Lines) {\n                            Array.prototype.push.apply(r, s[i].data);\n                        }\n                    }\n                    return r;\n                };\n                Lines.prototype.addFlattenedArgs = function (s) {\n                    Array.prototype.push.apply(this.data, s);\n                };\n                // public\n                Lines.prototype.a = function () {\n                    this.addFlattenedArgs(this.flattenArgs(arguments));\n                    return this;\n                };\n                Lines.prototype.t = function () {\n                    var lastLine = this.data.pop();\n                    var s = this.flattenArgs(arguments);\n                    s[0] = lastLine + s[0];\n                    this.addFlattenedArgs(s);\n                    return this;\n                };\n                Lines.prototype.indent = function (level) {\n                    if (level === undefined) {\n                        level = 1;\n                    }\n                    this.data = this.data.map(function (line) {\n                        return Array(level + 1).join('\\t') + line;\n                    });\n                    return this;\n                };\n                Lines.prototype.isEmpty = function () {\n                    return this.data.length <= 0;\n                };\n                Lines.prototype.interleave = function () {\n                    var first = true;\n                    for (var i = 0; i < arguments.length; i++) {\n                        var r = this.flattenArgs([arguments[i]]);\n                        if (r.length > 0) {\n                            if (first) {\n                                first = false;\n                            } else {\n                                this.data.push('');\n                            }\n                            this.addFlattenedArgs(r);\n                        }\n                    }\n                    return this;\n                };\n                Lines.prototype.wrap = function (begin, end) {\n                    this.indent();\n                    this.data.unshift(begin);\n                    this.data.push(end);\n                    return this;\n                };\n                Lines.prototype.wrapIfNotEmpty = function (begin, end) {\n                    if (!this.isEmpty()) {\n                        this.wrap(begin, end);\n                    }\n                    return this;\n                };\n                /*\r\nLines.prototype.wrapEachLine=function(begin,end){\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn begin+line+end;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.map=function(fn){\r\n\tthis.data=this.data.map(fn);\r\n\treturn this;\r\n};\r\n*/\n                Lines.prototype.join = function (indent) {\n                    return this.data.map(function (line) {\n                        return line.replace(/^(\\t)+/, function (match) {\n                            return Array(match.length + 1).join(indent);\n                        });\n                    }).join('\\n');\n                };\n                module.exports = Lines;\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                // constructors typically called from Options class\n                // to call them manually, use the following args:\n                //\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\n                // the rest of arguments' order is not settled, don't use them\n                // \t+ TODO not sure about data\n                /*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\t'type' if option is an array member\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    function _class(name, _1, _2, _3, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class);\n                        this.name = name;\n                        this.isVisible = isVisible;\n                        this.updateCallback = updateCallback;\n                        this.fullName = fullName;\n                        this._$ = null;\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    babelHelpers.createClass(_class, [{\n                            key: '$',\n                            get: function get() {\n                                return this._$;\n                            },\n                            set: function set($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    babelHelpers.inherits(_class2, _Option$Base);\n                    function _class2(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class2);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        if (defaultValue !== undefined) {\n                            _this.defaultValue = defaultValue;\n                        } else {\n                            _this.defaultValue = availableValues[0];\n                        }\n                        if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    babelHelpers.createClass(_class2, [{\n                            key: 'value',\n                            get: function get() {\n                                return this._value;\n                            },\n                            set: function set(value) {\n                                this._value = value;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.BooleanInput = function (_Option$Input) {\n                    babelHelpers.inherits(_class3, _Option$Input);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBooleanInput = function (_Option$Input2) {\n                    babelHelpers.inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        babelHelpers.classCallCheck(this, _class4);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function valueOf() {\n                                return value;\n                            },\n                            toString: function toString() {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.FactorInput = function (_Option$NonBooleanInp) {\n                    babelHelpers.inherits(_class5, _Option$NonBooleanInp);\n                    function _class5(name, availableValues, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class5);\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp.apply(this, arguments));\n                        _this4.availableValues = availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBooleanInput);\n                Option.RangeInput = function (_Option$NonBooleanInp2) {\n                    babelHelpers.inherits(_class6, _Option$NonBooleanInp2);\n                    function _class6(name, availableRange, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class6);\n                        var _this5 = babelHelpers.possibleConstructorReturn(this, _Option$NonBooleanInp2.apply(this, arguments));\n                        _this5.availableMin = availableRange[0];\n                        _this5.availableMax = availableRange[1];\n                        return _this5;\n                    }\n                    return _class6;\n                }(Option.NonBooleanInput);\n                Option.Collection = function (_Option$Base2) {\n                    babelHelpers.inherits(_class7, _Option$Base2);\n                    function _class7(name, entries, _1, _2, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class7);\n                        var _this6 = babelHelpers.possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = entries;\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        this.entries.forEach(function (entry) {\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        });\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        this.entries.forEach(function (entry) {\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        });\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    babelHelpers.inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        babelHelpers.classCallCheck(this, _class8);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$BooleanInput) {\n                    babelHelpers.inherits(_class9, _Option$BooleanInput);\n                    function _class9(name, _, defaultValue, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class9);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$BooleanInput.call(this, name, undefined, !!defaultValue, data, fullName, isVisible, updateCallback));\n                    }\n                    return _class9;\n                }(Option.BooleanInput);\n                Option.Select = function (_Option$FactorInput) {\n                    babelHelpers.inherits(_class10, _Option$FactorInput);\n                    function _class10() {\n                        babelHelpers.classCallCheck(this, _class10);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.FactorInput);\n                Option.Text = function (_Option$FactorInput2) {\n                    babelHelpers.inherits(_class11, _Option$FactorInput2);\n                    function _class11() {\n                        babelHelpers.classCallCheck(this, _class11);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$FactorInput2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.FactorInput);\n                Option.Root = function (_Option$Collection) {\n                    babelHelpers.inherits(_class12, _Option$Collection);\n                    function _class12() {\n                        babelHelpers.classCallCheck(this, _class12);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class12;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    babelHelpers.inherits(_class13, _Option$Collection2);\n                    function _class13() {\n                        babelHelpers.classCallCheck(this, _class13);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class13;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    babelHelpers.inherits(_class14, _Option$Base4);\n                    function _class14(name, availableTypes, availableConstructors, data, fullName, isVisible, updateCallback) {\n                        babelHelpers.classCallCheck(this, _class14);\n                        var _this13 = babelHelpers.possibleConstructorReturn(this, _Option$Base4.call(this, name, undefined, undefined, undefined, fullName, isVisible, updateCallback));\n                        _this13.availableTypes = availableTypes;\n                        _this13.availableConstructors = availableConstructors;\n                        _this13._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object') {\n                            subDatas = data.value;\n                        }\n                        for (var i = 0; i < subDatas.length; i++) {\n                            var subData = subDatas[i];\n                            var subType = availableTypes[0];\n                            if ((typeof subData === 'undefined' ? 'undefined' : babelHelpers.typeof(subData)) == 'object' && subData.type !== undefined) {\n                                subType = subData.type;\n                            }\n                            if (availableConstructors[subType]) {\n                                _this13._entries.push(availableConstructors[subType](subData));\n                            }\n                        }\n                        return _this13;\n                    }\n                    _class14.prototype.addEntry = function addEntry(type) {\n                        var entry = this.availableConstructors[type]();\n                        this._entries.push(entry);\n                        this.updateCallback();\n                        return entry;\n                    };\n                    _class14.prototype.export = function _export() {\n                        var _this14 = this;\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != _this14.availableTypes[0])\n                                    subData.type = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class14.prototype.fix = function fix() {\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if ((typeof subFixed === 'undefined' ? 'undefined' : babelHelpers.typeof(subFixed)) == 'object')\n                                    subFixed.type = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    babelHelpers.createClass(_class14, [{\n                            key: 'entries',\n                            get: function get() {\n                                return this._entries;\n                            },\n                            set: function set(entries) {\n                                this._entries = entries;\n                                this.updateCallback();\n                            }\n                        }]);\n                    return _class14;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var Options = function () {\n                    function Options(data) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        this.updateCallback = undefined;\n                        // general update callback for stuff like regenerating the code\n                        var simpleUpdateCallback = function simpleUpdateCallback() {\n                            if (_this.updateCallback)\n                                _this.updateCallback();\n                        };\n                        var Option = this.optionClasses;\n                        var optionByFullName = {};\n                        var optionsWithVisibilityAffectedByFullName = {};\n                        var simpleMakeEntry = function simpleMakeEntry(description, fullNamePath, data) {\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var name = description[1];\n                            var fullName = fullNamePath + name;\n                            var ctorArgsDescription = description.slice(2);\n                            var contents = [];\n                            var defaultValue = undefined;\n                            var nScalars = 0;\n                            var nArrays = 0;\n                            for (var i = 0; i < ctorArgsDescription.length; i++) {\n                                var arg = ctorArgsDescription[i];\n                                if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                    if (nScalars == 0) {\n                                        defaultValue = arg;\n                                    } else {\n                                        throw new Error('too many scalar arguments');\n                                    }\n                                    nScalars++;\n                                } else if (Array.isArray(arg)) {\n                                    if (nArrays == 0) {\n                                        contents = arg;\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nArrays++;\n                                } else {\n                                    throw new Error('unknown argument type');\n                                }\n                            }\n                            return new Option[className](name, contents, defaultValue, data, fullName, function () {\n                                return true;\n                            }, simpleUpdateCallback);\n                        };\n                        var makeEntry = function makeEntry(description, fullNamePath, data) {\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var name = description[1];\n                            var fullName = fullNamePath + name;\n                            var ctorArgsDescription = description.slice(2);\n                            var contents = [];\n                            var defaultValueOrConstructors = undefined;\n                            var visibilityData = {};\n                            var nScalars = 0;\n                            var nArrays = 0;\n                            var nObjects = 0;\n                            for (var i = 0; i < ctorArgsDescription.length; i++) {\n                                var arg = ctorArgsDescription[i];\n                                if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                    if (nScalars == 0) {\n                                        defaultValueOrConstructors = arg;\n                                    } else {\n                                        throw new Error('too many scalar arguments');\n                                    }\n                                    nScalars++;\n                                } else if (Array.isArray(arg)) {\n                                    if (nArrays == 0) {\n                                        if (className == 'Array') {\n                                            defaultValueOrConstructors = {};\n                                            arg.forEach(function (x) {\n                                                var type = x[1];\n                                                contents.push(type);\n                                                defaultValueOrConstructors[type] = function (subData) {\n                                                    return simpleMakeEntry(x, fullName + '.', subData);\n                                                };\n                                            });\n                                        } else {\n                                            contents = arg.map(function (x) {\n                                                if (Array.isArray(x)) {\n                                                    var subName = x[1];\n                                                    var subData = undefined;\n                                                    if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object')\n                                                        subData = data[subName];\n                                                    return makeEntry(x, fullName + '.', subData);    // nested option\n                                                } else {\n                                                    return x;    // available value / value range boundary\n                                                }\n                                            });\n                                        }\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nArrays++;\n                                } else if (arg instanceof Object) {\n                                    if (nObjects == 0) {\n                                        visibilityData = arg;\n                                    } else {\n                                        throw new Error('too many array arguments');\n                                    }\n                                    nObjects++;\n                                } else {\n                                    throw new Error('unknown argument type');\n                                }\n                            }\n                            var isVisible = function isVisible() {\n                                for (var testName in visibilityData) {\n                                    var value = optionByFullName[testName].value;\n                                    if (visibilityData[testName].indexOf(value) < 0) {\n                                        return false;\n                                    }\n                                }\n                                return true;\n                            };\n                            var updateCallback = function updateCallback() {\n                                if (optionsWithVisibilityAffectedByFullName[fullName] !== undefined) {\n                                    optionsWithVisibilityAffectedByFullName[fullName].forEach(function (option) {\n                                        option.updateVisibility();\n                                    });\n                                }\n                                if (_this.updateCallback)\n                                    _this.updateCallback();\n                            };\n                            var option = new Option[className](name, contents, defaultValueOrConstructors, data, fullName, isVisible, updateCallback);\n                            optionByFullName[fullName] = option;\n                            for (var testName in visibilityData) {\n                                if (optionsWithVisibilityAffectedByFullName[testName] === undefined) {\n                                    optionsWithVisibilityAffectedByFullName[testName] = [];\n                                }\n                                optionsWithVisibilityAffectedByFullName[testName].push(option);\n                            }\n                            return option;\n                        };\n                        this.root = new Option.Root(null, this.entriesDescription.map(function (description) {\n                            var subName = description[1];\n                            var subData = undefined;\n                            if ((typeof data === 'undefined' ? 'undefined' : babelHelpers.typeof(data)) == 'object')\n                                subData = data[subName];\n                            return makeEntry(description, '', subData);\n                        }), undefined, data, null, function () {\n                            return true;\n                        }, simpleUpdateCallback);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function get() {\n                                return require('./option-classes.js');\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function get() {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { './option-classes.js': 2 }\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                var CodeOutput = function CodeOutput(generateCodeFn) {\n                    babelHelpers.classCallCheck(this, CodeOutput);\n                    var $code = undefined;\n                    var getHtmlDataUri = function getHtmlDataUri(html) {\n                        return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                    };\n                    var writeControls = function writeControls() {\n                        return $('<div>').append($('<a download=\\'source.html\\'><button type=\\'button\\'>Save source code</button></a>').click(function () {\n                            // yes I want a button, but download attr is only available for links\n                            $(this).attr('href', getHtmlDataUri($code.text()));\n                        })).append(' ').append($('<button type=\\'button\\'>Run in new window</button>').click(function () {\n                            window.open(getHtmlDataUri($code.text()), 'generatedCode');\n                        })).append(' these buttons don\\'t work in Internet Explorer, copy-paste the code manually');\n                    };\n                    var $output = $('<div class=\\'code-output\\'>').append(writeControls()).append($('<pre>').append($code = $('<code>').text(generateCodeFn())));\n                    if (window.hljs) {\n                        hljs.highlightBlock($code[0]);\n                    } else {\n                    }\n                    $output.append(writeControls());\n                    var delay = 200;\n                    var timeoutId = null;\n                    var update = function update() {\n                        clearTimeout(timeoutId);\n                        timeoutId = setTimeout(function () {\n                            $code.text(generateCodeFn());\n                            if (window.hljs)\n                                hljs.highlightBlock($code[0]);\n                        }, delay);\n                    };\n                    // public props:\n                    this.$output = $output;\n                    this.update = update;\n                };\n                module.exports = CodeOutput;\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require('../base/lines.js');\n                function capitalize(s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                }\n                function toCamelCase(s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                }\n                var Feature = function () {\n                    function Feature() {\n                        babelHelpers.classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new Lines();\n                    };\n                    Feature.prototype.getJsLines = function getJsLines(featureContext, i18n) {\n                        return new Lines();\n                    };\n                    return Feature;\n                }();\n                var Audio = function (_Feature) {\n                    babelHelpers.inherits(Audio, _Feature);\n                    function Audio(source) {\n                        babelHelpers.classCallCheck(this, Audio);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.source = source;\n                        return _this;\n                    }\n                    Audio.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new Lines('<audio src=\\'' + this.source + '\\' id=\\'my.source\\' controls loop crossorigin=\\'anonymous\\'></audio>'    // TODO html escape\n).wrap('<div>', '</div>');\n                    };\n                    Audio.prototype.getJsLines = function getJsLines(featureContext, i18n) {\n                        var lines = _Feature.prototype.getJsLines.call(this, featureContext, i18n);\n                        if (featureContext.audioContext) {\n                            lines.a('var ctx=new (AudioContext || webkitAudioContext);', 'var sourceElement=document.getElementById(\\'my.source\\');', 'var sourceNode=ctx.createMediaElementSource(sourceElement);');\n                        }\n                        return lines;\n                    };\n                    return Audio;\n                }(Feature);\n                var Filter = function () {\n                    function Filter(n) {\n                        babelHelpers.classCallCheck(this, Filter);\n                        this.n = n;\n                    }\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(propertyName) {\n                        return 'options.filters.' + this.type + '.properties.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputJsName = function getPropertyInputJsName(propertyName) {\n                        return toCamelCase(this.type + this.nSuffix + '.' + propertyName + '.input');\n                    };\n                    Filter.prototype.getHtmlLines = function getHtmlLines(i18n) {\n                        var _this2 = this;\n                        var lines = new Lines();\n                        this.nodeProperties.forEach(function (property) {\n                            var inputHtmlName = _this2.getPropertyInputHtmlName(property.name);\n                            lines.a('<label for=\\'' + inputHtmlName + '\\'>' + i18n(_this2.getPropertyOptionName(property.name)) + '</label>');\n                            if (property.type == 'range') {\n                                lines.a('<input id=\\'' + inputHtmlName + '\\' type=\\'range\\' value=\\'' + property.value + '\\' min=\\'' + property.min + '\\' max=\\'' + property.max + '\\'' + (property.step ? ' step=\\'' + property.step + '\\'' : '') + ' />');\n                            } else if (property.type == 'select') {\n                                lines.a(new (Function.prototype.bind.apply(Lines, [null].concat(property.options.map(function (option) {\n                                    return '<option>' + option + '</option>';\n                                }))))().wrap('<select id=\\'' + inputHtmlName + '\\'>', '</select>'));\n                            }\n                        });\n                        return lines.wrap('<div>', '</div>');\n                    };\n                    Filter.prototype.getJsLines = function getJsLines(prevNodeJsName) {\n                        var _this3 = this;\n                        var lines = new Lines();\n                        lines.a('var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();', prevNodeJsName + '.connect(' + this.nodeJsName + ')');\n                        this.nodeProperties.forEach(function (property) {\n                            var inputJsName = _this3.getPropertyInputJsName(property.name);\n                            var inputHtmlName = _this3.getPropertyInputHtmlName(property.name);\n                            var value = 'this.value';\n                            if (property.fn) {\n                                value = property.fn(value);\n                            }\n                            lines.a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', (property.type == 'range' ? inputJsName + '.oninput=' : '') + inputJsName + '.onchange=function(){', '\\t' + _this3.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '') + '=' + value + ';', '};');\n                        });\n                        return lines;\n                    };\n                    babelHelpers.createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function get() {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function get() {\n                                return toCamelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var filterClasses = {\n                    gain: function (_Filter) {\n                        babelHelpers.inherits(gain, _Filter);\n                        function gain() {\n                            babelHelpers.classCallCheck(this, gain);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range',\n                                            value: '1',\n                                            min: '0',\n                                            max: '1',\n                                            step: '0.01'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(Filter),\n                    panner: function (_Filter2) {\n                        babelHelpers.inherits(panner, _Filter2);\n                        function panner() {\n                            babelHelpers.classCallCheck(this, panner);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range',\n                                            value: '0',\n                                            min: '-1',\n                                            max: '1',\n                                            step: '0.01'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(Filter),\n                    biquad: function (_Filter3) {\n                        babelHelpers.inherits(biquad, _Filter3);\n                        function biquad() {\n                            babelHelpers.classCallCheck(this, biquad);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter3.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function get() {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function get() {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function get() {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            type: 'select',\n                                            options: [\n                                                'lowpass',\n                                                'highpass',\n                                                'bandpass',\n                                                'lowshelf',\n                                                'highshelf',\n                                                'peaking',\n                                                'notch',\n                                                'allpass'\n                                            ]\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range',\n                                            value: '350',\n                                            min: '0',\n                                            max: '22050'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range',\n                                            value: '0',\n                                            min: '0',\n                                            max: '100'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            value: '0',\n                                            min: '-4',\n                                            max: '4',\n                                            step: '0.01',\n                                            fn: function fn(x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            }\n                                        }\n                                    ];\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(Filter)\n                };\n                var FilterSequence = function (_Feature2) {\n                    babelHelpers.inherits(FilterSequence, _Feature2);\n                    function FilterSequence(filterOptions) {\n                        babelHelpers.classCallCheck(this, FilterSequence);\n                        var _this7 = babelHelpers.possibleConstructorReturn(this, _Feature2.call(this));\n                        var filterCounts = {};\n                        filterOptions.entries.forEach(function (entry) {\n                            if (!filterCounts[entry.type]) {\n                                filterCounts[entry.type] = 0;\n                            }\n                            filterCounts[entry.type]++;\n                        });\n                        var filterCounts2 = {};\n                        _this7.filters = filterOptions.entries.map(function (entry) {\n                            var filterClass = filterClasses[entry.type];\n                            if (filterCounts[entry.type] > 1) {\n                                if (!filterCounts2[entry.type]) {\n                                    filterCounts2[entry.type] = 0;\n                                }\n                                return new filterClass(filterCounts2[entry.type]++);\n                            } else {\n                                return new filterClass();\n                            }\n                        });\n                        return _this7;\n                    }\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.filters.length > 0) {\n                            featureContext.audioContext = true;\n                        }\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return new (Function.prototype.bind.apply(Lines, [null].concat(this.filters.map(function (filter) {\n                            return filter.getHtmlLines(i18n);\n                        }))))();\n                    };\n                    FilterSequence.prototype.getJsLines = function getJsLines(featureContext, i18n) {\n                        var lines = _Feature2.prototype.getJsLines.call(this, featureContext, i18n);\n                        if (this.filters.length == 0) {\n                            return lines;\n                        }\n                        var prevNodeJsName = 'sourceNode';\n                        this.filters.forEach(function (filter) {\n                            lines.a(filter.getJsLines(prevNodeJsName));\n                            prevNodeJsName = filter.nodeJsName;\n                        });\n                        lines.a(prevNodeJsName + '.connect(ctx.destination);');\n                        return lines;\n                    };\n                    return FilterSequence;\n                }(Feature);\n                module.exports = function (options, i18n) {\n                    var featureContext = {};\n                    var features = [];\n                    features.push(new Audio(options.source));\n                    features.push(new FilterSequence(options.filters));\n                    features.forEach(function (feature) {\n                        feature.requestFeatureContext(featureContext);\n                    });\n                    var lines = new Lines('<!DOCTYPE html>', '<html lang=\\'en\\'>', '<head>', '<meta charset=\\'utf-8\\' />', '<title>WebAudio example - Generated code</title>', '</head>', '<body>', function () {\n                        var lines = new Lines();\n                        lines.a.apply(lines, features.map(function (feature) {\n                            return feature.getHtmlLines(featureContext, i18n);\n                        }));\n                        return lines;\n                    }(), function () {\n                        var lines = new Lines();\n                        lines.a.apply(lines, features.map(function (feature) {\n                            return feature.getJsLines(featureContext, i18n);\n                        }));\n                        return lines.wrapIfNotEmpty('<script>', '</script>');\n                    }(), '</body>', '</html>');\n                    return lines.join('\\t');\n                };\n            },\n            { '../base/lines.js': 1 }\n        ],\n        6: [\n            function (require, module, exports) {\n                'use strict';\n                var strings = {\n                    'options.source': 'Source URL',\n                    'options.filters': 'Filters',\n                    'options.filters.gain': 'Gain',\n                    'options.filters.gain.add': 'Add Gain',\n                    'options.filters.gain.properties.gain': 'Gain',\n                    'options.filters.panner': 'Stereo Panner',\n                    'options.filters.panner.add': 'Add Stereo Panner',\n                    'options.filters.panner.properties.pan': 'Pan',\n                    'options.filters.biquad': 'Biquad Filter',\n                    'options.filters.biquad.add': 'Add Biquad Filter',\n                    'options.filters.biquad.properties.type': 'Type',\n                    'options.filters.biquad.properties.frequency': 'Frequency',\n                    'options.filters.biquad.properties.detune': 'Detune',\n                    'options.filters.biquad.properties.Q': 'Q',\n                    'options-output.drag': 'Drag or press up/down while in focus to reorder',\n                    'options-output.delete': 'Delete'\n                };\n                module.exports = function (lang) {\n                    // TODO use lang to pick strings\n                    var i18n = function i18n(id) {\n                        return strings[id];\n                    };\n                    i18n.lang = lang;\n                    return i18n;\n                };\n            },\n            {}\n        ],\n        7: [\n            function (require, module, exports) {\n                'use strict';\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18n = require('./i18n.js')('en');\n                var Options = require('./options.js');\n                var generateCode = require('./code.js');\n                var CodeOutput = require('./code-output');\n                var OptionsOutput = require('./options-output');\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return generateCode(options.fix(), i18n);\n                        });\n                        options.updateCallback = codeOutput.update;\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output).append(codeOutput.$output);\n                    });\n                });\n            },\n            {\n                './code-output': 4,\n                './code.js': 5,\n                './i18n.js': 6,\n                './options-output': 8,\n                './options.js': 9\n            }\n        ],\n        8: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require('../base/option-classes.js');\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = this.optionClassWriters;\n                        function write(option) {\n                            for (var i = optionClassWriters.length - 1; i >= 0; i--) {\n                                // most specific options at the end need to be checked first\n                                var optionClass = optionClassWriters[i][0];\n                                var optionClassWriter = optionClassWriters[i][1];\n                                if (option instanceof optionClass) {\n                                    return optionClassWriter(option, write, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = write(options.root);\n                    }\n                    // override this fn for custom writers\n                    babelHelpers.createClass(OptionsOutput, [{\n                            key: 'optionClassWriters',\n                            get: function get() {\n                                // TODO use Map and superclass chain instead\n                                return [\n                                    [\n                                        Option.Root,\n                                        function (option, writeOption, i18n, generateId) {\n                                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                                        }\n                                    ],\n                                    [\n                                        Option.Void,\n                                        function (option, writeOption, i18n, generateId) {\n                                            return option.$ = $('<div class=\\'option\\'>')    //.append(\"<label>\"+i18n('options.'+option.fullName)+\"</label>\");\n.html(i18n('options.' + option.fullName));\n                                        }\n                                    ],\n                                    [\n                                        Option.Checkbox,\n                                        function (option, writeOption, i18n, generateId) {\n                                            var id = generateId();\n                                            return option.$ = $('<div class=\\'option\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').change(function () {\n                                                option.value = $(this).prop('checked');\n                                            })).append(' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                                        }\n                                    ],\n                                    [\n                                        Option.Text,\n                                        function (option, writeOption, i18n, generateId) {\n                                            var id = generateId();\n                                            var listId = generateId();\n                                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>').append(' ').append($('<input type=\\'text\\' id=\\'' + id + '\\'list=\\'' + listId + '\\' />').val(option.value).change(function () {\n                                                option.value = this.value;\n                                            })).append(' ').append($('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                                return $('<option>').text(availableValue);\n                                            })));\n                                        }\n                                    ],\n                                    [\n                                        Option.Array,\n                                        function (option, writeOption, i18n, generateId) {\n                                            var $dragged = null;\n                                            var $entries = undefined;\n                                            var updateArrayEntries = function updateArrayEntries() {\n                                                option.entries = $entries.children().map(function () {\n                                                    return $(this).data('option');\n                                                }).get();\n                                            };\n                                            var writeDraggableOption = function writeDraggableOption(option) {\n                                                // have to make drag handler 'draggable', not the whole item\n                                                // because inputs and labels don't like to be inside 'draggable'\n                                                // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                                                return $('<div class=\\'draggable-with-handle\\'>').data('option', option).append($('<div draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag') + '\\'>').on('dragstart', function (ev) {\n                                                    $dragged = $(this).parent();\n                                                    ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                                                    ev.originalEvent.dataTransfer.setData('Text', name);\n                                                    if (ev.originalEvent.dataTransfer.setDragImage) {\n                                                        // doesn't work in IE\n                                                        ev.originalEvent.dataTransfer.setDragImage($dragged[0], 0, 0);\n                                                    }\n                                                    setTimeout(function () {\n                                                        $dragged.addClass('ghost');\n                                                    }, 0);\n                                                }).keydown(function (ev) {\n                                                    var $handle = $(this);\n                                                    var $sorted = $handle.parent();\n                                                    if (ev.keyCode == 38) {\n                                                        $sorted.prev().before($sorted);\n                                                        $handle.focus();\n                                                        updateArrayEntries();\n                                                        return false;\n                                                    } else if (ev.keyCode == 40) {\n                                                        $sorted.next().after($sorted);\n                                                        $handle.focus();\n                                                        updateArrayEntries();\n                                                        return false;\n                                                    }\n                                                })).append(writeOption(option)).append(//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'></div>\")\n                                                $('<div tabindex=\\'0\\' class=\\'delete\\' title=\\'' + i18n('options-output.delete') + '\\'>').click(function () {\n                                                    $(this).parent().remove();\n                                                    updateArrayEntries();\n                                                }).keydown(function (ev) {\n                                                    if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                                        $(this).parent().remove();\n                                                        updateArrayEntries();\n                                                        return false;\n                                                    }\n                                                })).on('dragover', function (ev) {\n                                                    ev.preventDefault();\n                                                    ev.originalEvent.dataTransfer.dropEffect = 'move';\n                                                    var $target = $(this);\n                                                    if ($dragged) {\n                                                        if ($target.nextAll().is($dragged)) {\n                                                            $target.before($dragged);\n                                                            updateArrayEntries();\n                                                        } else if ($target.prevAll().is($dragged)) {\n                                                            $target.after($dragged);\n                                                            updateArrayEntries();\n                                                        }\n                                                    }\n                                                }).on('drop', function (ev) {\n                                                    ev.preventDefault();\n                                                }).on('dragend', function (ev) {\n                                                    ev.preventDefault();\n                                                    if ($dragged) {\n                                                        $dragged.removeClass('ghost');\n                                                        $dragged = null;\n                                                    }\n                                                });\n                                            };\n                                            option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append($entries = $('<div>').append(option.entries.map(writeDraggableOption)));\n                                            var $buttons = $('<div>');\n                                            option.availableTypes.forEach(function (type, i) {\n                                                if (i)\n                                                    $buttons.append(' ');\n                                                $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                                    var entry = option.addEntry(type);\n                                                    $entries.append(writeDraggableOption(entry));\n                                                }));\n                                            });\n                                            option.$.append($buttons);\n                                            return option.$;\n                                        }\n                                    ]\n                                ];\n                            }\n                        }]);\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            { '../base/option-classes.js': 2 }\n        ],\n        9: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseOptions = require('../base/options.js');\n                var Options = function (_BaseOptions) {\n                    babelHelpers.inherits(Options, _BaseOptions);\n                    function Options() {\n                        babelHelpers.classCallCheck(this, Options);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(Options, [{\n                            key: 'entriesDescription',\n                            get: function get() {\n                                return [\n                                    [\n                                        'Text',\n                                        'source',\n                                        [\n                                            // w3c mooc:\n                                            'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\n                                            'http://mainline.i3s.unice.fr/mooc/drums.mp3'\n                                        ]\n                                    ],\n                                    [\n                                        'Array',\n                                        'filters',\n                                        [\n                                            [\n                                                'Void',\n                                                'gain'\n                                            ],\n                                            [\n                                                'Void',\n                                                'panner'\n                                            ],\n                                            [\n                                                'Void',\n                                                'biquad'\n                                            ]\n                                        ]\n                                    ]\n                                ];\n                            }\n                        }]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            { '../base/options.js': 3 }\n        ]\n    }, {}, [7]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\r\n.a = add AFTER last line\r\n.t = add TO last line\r\n*/\r\n\r\nvar Lines=function(){\r\n\tthis.data=[];\r\n\tthis.addFlattenedArgs(\r\n\t\tthis.flattenArgs(arguments)\r\n\t);\r\n};\r\n\r\n// private\r\nLines.prototype.flattenArgs=function(s){\r\n\tvar r=[];\r\n\tfor (var i=0;i<s.length;i++) {\r\n\t\tif (typeof s[i] == 'string') {\r\n\t\t\tr.push(s[i]);\r\n\t\t} else if (Array.isArray(s[i])) {\r\n\t\t\tArray.prototype.push.apply(r,s[i]);\r\n\t\t} else if (s[i] instanceof Lines) {\r\n\t\t\tArray.prototype.push.apply(r,s[i].data);\r\n\t\t}\r\n\t}\r\n\treturn r;\r\n};\r\nLines.prototype.addFlattenedArgs=function(s){\r\n\tArray.prototype.push.apply(this.data,s);\r\n};\r\n\r\n// public\r\nLines.prototype.a=function(){\r\n\tthis.addFlattenedArgs(\r\n\t\tthis.flattenArgs(arguments)\r\n\t);\r\n\treturn this;\r\n};\r\nLines.prototype.t=function(){\r\n\tvar lastLine=this.data.pop();\r\n\tvar s=this.flattenArgs(arguments);\r\n\ts[0]=lastLine+s[0];\r\n\tthis.addFlattenedArgs(s);\r\n\treturn this;\r\n};\r\nLines.prototype.indent=function(level){\r\n\tif (level===undefined) {\r\n\t\tlevel=1;\r\n\t}\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn Array(level+1).join('\\t')+line;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.isEmpty=function(){\r\n\treturn this.data.length<=0;\r\n};\r\nLines.prototype.interleave=function(){\r\n\tvar first=true;\r\n\tfor (var i=0;i<arguments.length;i++) {\r\n\t\tvar r=this.flattenArgs([arguments[i]]);\r\n\t\tif (r.length>0) {\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.data.push('');\r\n\t\t\t}\r\n\t\t\tthis.addFlattenedArgs(r);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\nLines.prototype.wrap=function(begin,end){\r\n\tthis.indent();\r\n\tthis.data.unshift(begin);\r\n\tthis.data.push(end);\r\n\treturn this;\r\n};\r\nLines.prototype.wrapIfNotEmpty=function(begin,end){\r\n\tif (!this.isEmpty()) {\r\n\t\tthis.wrap(begin,end);\r\n\t}\r\n\treturn this;\r\n};\r\n/*\r\nLines.prototype.wrapEachLine=function(begin,end){\r\n\tthis.data=this.data.map(function(line){\r\n\t\treturn begin+line+end;\r\n\t});\r\n\treturn this;\r\n};\r\nLines.prototype.map=function(fn){\r\n\tthis.data=this.data.map(fn);\r\n\treturn this;\r\n};\r\n*/\r\nLines.prototype.join=function(indent){\r\n\treturn this.data.map(function(line){\r\n\t\treturn line.replace(/^(\\t)+/,function(match){\r\n\t\t\treturn Array(match.length+1).join(indent);\r\n\t\t});\r\n\t}).join('\\n');\r\n};\r\n\r\nmodule.exports=Lines;\r\n","'use strict';\r\n\r\n// constructors typically called from Options class\r\n// to call them manually, use the following args:\r\n//\tname,contents/availableValues,defaultValue,data - similar to entriesDescription()\r\n// the rest of arguments' order is not settled, don't use them\r\n// \t+ TODO not sure about data\r\n\r\n/*\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\t'type' if option is an array member\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={};\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tconstructor(name,_1,_2,_3,fullName,isVisible,updateCallback) {\r\n\t\tthis.name=name;\r\n\t\tthis.isVisible=isVisible;\r\n\t\tthis.updateCallback=updateCallback;\r\n\t\tthis.fullName=fullName;\r\n\t\tthis._$=null;\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$;\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$;\r\n\t\tthis.updateVisibility();\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible());\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value;\r\n\t\t} else {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data);\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value;\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nOption.Input = class extends Option.Base {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tif (defaultValue!==undefined) {\r\n\t\t\tthis.defaultValue=defaultValue;\r\n\t\t} else {\r\n\t\t\tthis.defaultValue=availableValues[0];\r\n\t\t}\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value;\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data;\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue;\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value;\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value;\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\nOption.BooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\treturn this.value;\r\n\t}\r\n};\r\n\r\nOption.NonBooleanInput = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value;\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value; },\r\n\t\t\ttoString() { return String(value); },\r\n\t\t};\r\n\t}\r\n};\r\n\r\nOption.FactorInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableValues,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableValues=availableValues;\r\n\t}\r\n};\r\n\r\nOption.RangeInput = class extends Option.NonBooleanInput {\r\n\tconstructor(name,availableRange,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.availableMin=availableRange[0];\r\n\t\tthis.availableMax=availableRange[1];\r\n\t}\r\n};\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tconstructor(name,entries,_1,_2,fullName,isVisible,updateCallback) {\r\n\t\tsuper(...arguments);\r\n\t\tthis.entries=entries;\r\n\t}\r\n\texport() {\r\n\t\tconst data={};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name);\r\n\t\t});\r\n\t\treturn data;\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[];\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t};\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix());\r\n\t\t});\r\n\t\treturn fixed;\r\n\t}\r\n};\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.BooleanInput {\r\n\tconstructor(name,_,defaultValue,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,!!defaultValue,data,fullName,isVisible,updateCallback);\r\n\t}\r\n};\r\n\r\nOption.Select = class extends Option.FactorInput {};\r\n\r\nOption.Text = class extends Option.FactorInput {};\r\n\r\nOption.Root = class extends Option.Collection {};\r\n\r\nOption.Group = class extends Option.Collection {};\r\n\r\nOption.Array = class extends Option.Base {\r\n\tconstructor(name,availableTypes,availableConstructors,data,fullName,isVisible,updateCallback) {\r\n\t\tsuper(name,undefined,undefined,undefined,fullName,isVisible,updateCallback);\r\n\t\tthis.availableTypes=availableTypes;\r\n\t\tthis.availableConstructors=availableConstructors;\r\n\t\tthis._entries=[];\r\n\t\tlet subDatas=[];\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data;\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value;\r\n\t\t}\r\n\t\tfor (let i=0;i<subDatas.length;i++) {\r\n\t\t\tconst subData=subDatas[i];\r\n\t\t\tlet subType=availableTypes[0];\r\n\t\t\tif (typeof subData == 'object' && subData.type!==undefined) {\r\n\t\t\t\tsubType=subData.type;\r\n\t\t\t}\r\n\t\t\tif (availableConstructors[subType]) {\r\n\t\t\t\tthis._entries.push(availableConstructors[subType](subData));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries;\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries;\r\n\t\tthis.updateCallback();\r\n\t}\r\n\taddEntry(type) {\r\n\t\tconst entry=this.availableConstructors[type]();\r\n\t\tthis._entries.push(entry);\r\n\t\tthis.updateCallback();\r\n\t\treturn entry;\r\n\t}\r\n\texport() {\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export();\r\n\t\t\t\tconst subType=entry.name;\r\n\t\t\t\tif (subType!=this.availableTypes[0]) subData.type=subType;\r\n\t\t\t\treturn entry.shortenExport(subData);\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix();\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed.type=entry.name;\r\n\t\t\t\treturn subFixed;\r\n\t\t\t}),\r\n\t\t};\r\n\t}\r\n};\r\n\r\nmodule.exports=Option;\r\n","'use strict';\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tthis.updateCallback=undefined; // general update callback for stuff like regenerating the code\r\n\t\tconst simpleUpdateCallback=()=>{\r\n\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t};\r\n\t\tconst Option=this.optionClasses;\r\n\t\tconst optionByFullName={};\r\n\t\tconst optionsWithVisibilityAffectedByFullName={};\r\n\t\tconst simpleMakeEntry=(description,fullNamePath,data)=>{\r\n\t\t\tconst className=description[0];\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`);\r\n\t\t\t}\r\n\t\t\tconst name=description[1];\r\n\t\t\tconst fullName=fullNamePath+name;\r\n\t\t\tconst ctorArgsDescription=description.slice(2);\r\n\t\t\tlet contents=[];\r\n\t\t\tlet defaultValue;\r\n\t\t\tlet nScalars=0;\r\n\t\t\tlet nArrays=0;\r\n\t\t\tfor (let i=0;i<ctorArgsDescription.length;i++) {\r\n\t\t\t\tlet arg=ctorArgsDescription[i];\r\n\t\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\t\tif (nScalars==0) {\r\n\t\t\t\t\t\tdefaultValue=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many scalar arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnScalars++;\r\n\t\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\t\tif (nArrays==0) {\r\n\t\t\t\t\t\tcontents=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnArrays++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"unknown argument type\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Option[className](name,contents,defaultValue,data,fullName,()=>true,simpleUpdateCallback);\r\n\t\t};\r\n\t\tconst makeEntry=(description,fullNamePath,data)=>{\r\n\t\t\tconst className=description[0];\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`);\r\n\t\t\t}\r\n\t\t\tconst name=description[1];\r\n\t\t\tconst fullName=fullNamePath+name;\r\n\t\t\tconst ctorArgsDescription=description.slice(2);\r\n\t\t\tlet contents=[];\r\n\t\t\tlet defaultValueOrConstructors;\r\n\t\t\tlet visibilityData={};\r\n\t\t\tlet nScalars=0;\r\n\t\t\tlet nArrays=0;\r\n\t\t\tlet nObjects=0;\r\n\t\t\tfor (let i=0;i<ctorArgsDescription.length;i++) {\r\n\t\t\t\tlet arg=ctorArgsDescription[i];\r\n\t\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\t\tif (nScalars==0) {\r\n\t\t\t\t\t\tdefaultValueOrConstructors=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many scalar arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnScalars++;\r\n\t\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\t\tif (nArrays==0) {\r\n\t\t\t\t\t\tif (className=='Array') {\r\n\t\t\t\t\t\t\tdefaultValueOrConstructors={};\r\n\t\t\t\t\t\t\targ.forEach(x=>{\r\n\t\t\t\t\t\t\t\tconst type=x[1];\r\n\t\t\t\t\t\t\t\tcontents.push(type);\r\n\t\t\t\t\t\t\t\tdefaultValueOrConstructors[type]=subData=>simpleMakeEntry(x,fullName+'.',subData);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontents=arg.map(x=>{\r\n\t\t\t\t\t\t\t\tif (Array.isArray(x)) {\r\n\t\t\t\t\t\t\t\t\tconst subName=x[1];\r\n\t\t\t\t\t\t\t\t\tlet subData;\r\n\t\t\t\t\t\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\t\t\t\t\t\treturn makeEntry(x,fullName+'.',subData); // nested option\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn x; // available value / value range boundary\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnArrays++;\r\n\t\t\t\t} else if (arg instanceof Object) {\r\n\t\t\t\t\tif (nObjects==0) {\r\n\t\t\t\t\t\tvisibilityData=arg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"too many array arguments\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnObjects++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"unknown argument type\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst isVisible=()=>{\r\n\t\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\t\tconst value=optionByFullName[testName].value;\r\n\t\t\t\t\tif (visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tconst updateCallback=()=>{\r\n\t\t\t\tif (optionsWithVisibilityAffectedByFullName[fullName]!==undefined) {\r\n\t\t\t\t\toptionsWithVisibilityAffectedByFullName[fullName].forEach(option=>{\r\n\t\t\t\t\t\toption.updateVisibility();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.updateCallback) this.updateCallback();\r\n\t\t\t};\r\n\t\t\tconst option=new Option[className](name,contents,defaultValueOrConstructors,data,fullName,isVisible,updateCallback);\r\n\t\t\toptionByFullName[fullName]=option;\r\n\t\t\tfor (let testName in visibilityData) {\r\n\t\t\t\tif (optionsWithVisibilityAffectedByFullName[testName]===undefined) {\r\n\t\t\t\t\toptionsWithVisibilityAffectedByFullName[testName]=[];\r\n\t\t\t\t}\r\n\t\t\t\toptionsWithVisibilityAffectedByFullName[testName].push(option);\r\n\t\t\t}\r\n\t\t\treturn option;\r\n\t\t};\r\n\t\tthis.root=new Option.Root(\r\n\t\t\tnull,this.entriesDescription.map(description=>{\r\n\t\t\t\tconst subName=description[1];\r\n\t\t\t\tlet subData;\r\n\t\t\t\tif (typeof data == 'object') subData=data[subName];\r\n\t\t\t\treturn makeEntry(description,'',subData);\r\n\t\t\t}),undefined,data,null,()=>true,simpleUpdateCallback\r\n\t\t);\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes.js');\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn [];\r\n\t}\r\n\t// public methods\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export());\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix();\r\n\t}\r\n}\r\n\r\nmodule.exports=Options;\r\n","'use strict';\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCodeFn) {\r\n\t\tlet $code;\r\n\t\tconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html);\r\n\t\tconst writeControls=()=>{\r\n\t\t\treturn $(\"<div>\").append(\r\n\t\t\t\t$(\"<a download='source.html'><button type='button'>Save source code</button></a>\").click(function(){\r\n\t\t\t\t\t// yes I want a button, but download attr is only available for links\r\n\t\t\t\t\t$(this).attr('href',getHtmlDataUri($code.text()));\r\n\t\t\t\t})\r\n\t\t\t).append(\r\n\t\t\t\t\" \"\r\n\t\t\t).append(\r\n\t\t\t\t$(\"<button type='button'>Run in new window</button>\").click(function(){\r\n\t\t\t\t\twindow.open(getHtmlDataUri($code.text()),\"generatedCode\");\r\n\t\t\t\t})\r\n\t\t\t).append(\r\n\t\t\t\t\" these buttons don't work in Internet Explorer, copy-paste the code manually\"\r\n\t\t\t)\r\n\t\t};\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(writeControls()).append(\r\n\t\t\t$(\"<pre>\").append($code=$(\"<code>\").text(generateCodeFn()))\r\n\t\t);\r\n\t\tif (window.hljs) {\r\n\t\t\thljs.highlightBlock($code[0]);\r\n\t\t} else {\r\n\t\t\t//$output.append(\"<p>\"+i18n('message.hljs')+\"</p>\"); // TODO i18n\r\n\t\t}\r\n\t\t$output.append(writeControls());\r\n\r\n\t\tconst delay=200;\r\n\t\tlet timeoutId=null;\r\n\t\tconst update=()=>{\r\n\t\t\tclearTimeout(timeoutId);\r\n\t\t\ttimeoutId=setTimeout(()=>{\r\n\t\t\t\t$code.text(generateCodeFn());\r\n\t\t\t\tif (window.hljs) hljs.highlightBlock($code[0]);\r\n\t\t\t},delay);\r\n\t\t};\r\n\r\n\t\t// public props:\r\n\t\tthis.$output=$output;\r\n\t\tthis.update=update;\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput;\r\n","'use strict';\r\n\r\nconst Lines=require('../base/lines.js');\r\n\r\nfunction capitalize(s) {\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1);\r\n}\r\nfunction toCamelCase(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('');\r\n}\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn new Lines;\r\n\t}\r\n\tgetJsLines(featureContext,i18n) {\r\n\t\treturn new Lines;\r\n\t}\r\n}\r\n\r\nclass Audio extends Feature {\r\n\tconstructor(source) {\r\n\t\tsuper();\r\n\t\tthis.source=source;\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn (new Lines(\r\n\t\t\t\"<audio src='\"+this.source+\"' id='my.source' controls loop crossorigin='anonymous'></audio>\" // TODO html escape\r\n\t\t)).wrap(\"<div>\",\"</div>\");\r\n\t}\r\n\tgetJsLines(featureContext,i18n) {\r\n\t\tconst lines=super.getJsLines(featureContext,i18n);\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\tlines.a(\r\n\t\t\t\t\"var ctx=new (AudioContext || webkitAudioContext);\",\r\n\t\t\t\t\"var sourceElement=document.getElementById('my.source');\",\r\n\t\t\t\t\"var sourceNode=ctx.createMediaElementSource(sourceElement);\"\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn lines;\r\n\t}\r\n}\r\n\r\nclass Filter {\r\n\tconstructor(n) {\r\n\t\tthis.n=n;\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n;\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.node');\r\n\t}\r\n\tgetPropertyOptionName(propertyName) {\r\n\t\treturn 'options.filters.'+this.type+'.properties.'+propertyName;\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName;\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn toCamelCase(this.type+this.nSuffix+'.'+propertyName+'.input');\r\n\t}\r\n\tgetHtmlLines(i18n) {\r\n\t\tconst lines=new Lines;\r\n\t\tthis.nodeProperties.forEach(property=>{\r\n\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name);\r\n\t\t\tlines.a(\r\n\t\t\t\t\"<label for='\"+inputHtmlName+\"'>\"+i18n(this.getPropertyOptionName(property.name))+\"</label>\"\r\n\t\t\t);\r\n\t\t\tif (property.type=='range') {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t\"<input id='\"+inputHtmlName+\"' type='range' value='\"+property.value+\"' min='\"+property.min+\"' max='\"+property.max+\"'\"+(property.step?\" step='\"+property.step+\"'\":\"\")+\" />\"\r\n\t\t\t\t);\r\n\t\t\t} else if (property.type=='select') {\r\n\t\t\t\tlines.a(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tnew Lines(...property.options.map(option=>\"<option>\"+option+\"</option>\"))\r\n\t\t\t\t\t).wrap(\r\n\t\t\t\t\t\t\"<select id='\"+inputHtmlName+\"'>\",\"</select>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn lines.wrap(\"<div>\",\"</div>\");\r\n\t}\r\n\tgetJsLines(prevNodeJsName) {\r\n\t\tconst lines=new Lines;\r\n\t\tlines.a(\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\tprevNodeJsName+\".connect(\"+this.nodeJsName+\")\"\r\n\t\t);\r\n\t\tthis.nodeProperties.forEach(property=>{\r\n\t\t\tconst inputJsName=this.getPropertyInputJsName(property.name);\r\n\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name);\r\n\t\t\tlet value=\"this.value\";\r\n\t\t\tif (property.fn) {\r\n\t\t\t\tvalue=property.fn(value);\r\n\t\t\t}\r\n\t\t\tlines.a(\r\n\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t(property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\"\t\"+this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")+\"=\"+value+\";\",\r\n\t\t\t\t\"};\"\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn lines;\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends Filter {\r\n\t\tget type()                { return 'gain'; }\r\n\t\tget ctxCreateMethodName() { return 'createGain'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tvalue:'1', min:'0', max:'1', step:'0.01',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tpanner: class extends Filter {\r\n\t\tget type()                { return 'panner'; }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tvalue:'0', min:'-1', max:'1', step:'0.01',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends Filter {\r\n\t\tget type()                { return 'biquad'; }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter'; }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t\toptions:['lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'],\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tvalue:'350', min:'0', max:'22050',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tvalue:'0', min:'0', max:'100',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tvalue:'0', min:'-4', max:'4', step:'0.01', fn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n};\r\n\r\nclass FilterSequence extends Feature {\r\n\tconstructor(filterOptions) {\r\n\t\tsuper();\r\n\t\tconst filterCounts={};\r\n\t\tfilterOptions.entries.forEach(entry=>{\r\n\t\t\tif (!filterCounts[entry.type]) {\r\n\t\t\t\tfilterCounts[entry.type]=0;\r\n\t\t\t}\r\n\t\t\tfilterCounts[entry.type]++;\r\n\t\t});\r\n\t\tconst filterCounts2={};\r\n\t\tthis.filters=filterOptions.entries.map(entry=>{\r\n\t\t\tconst filterClass=filterClasses[entry.type];\r\n\t\t\tif (filterCounts[entry.type]>1) {\r\n\t\t\t\tif (!filterCounts2[entry.type]) {\r\n\t\t\t\t\tfilterCounts2[entry.type]=0;\r\n\t\t\t\t}\r\n\t\t\t\treturn new filterClass(filterCounts2[entry.type]++);\r\n\t\t\t} else {\r\n\t\t\t\treturn new filterClass;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.filters.length>0) {\r\n\t\t\tfeatureContext.audioContext=true;\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn new Lines(...this.filters.map(filter=>filter.getHtmlLines(i18n)));\r\n\t}\r\n\tgetJsLines(featureContext,i18n) {\r\n\t\tconst lines=super.getJsLines(featureContext,i18n);\r\n\t\tif (this.filters.length==0) {\r\n\t\t\treturn lines;\r\n\t\t}\r\n\t\tlet prevNodeJsName='sourceNode';\r\n\t\tthis.filters.forEach(filter=>{\r\n\t\t\tlines.a(filter.getJsLines(prevNodeJsName));\r\n\t\t\tprevNodeJsName=filter.nodeJsName;\r\n\t\t});\r\n\t\tlines.a(\r\n\t\t\tprevNodeJsName+\".connect(ctx.destination);\"\r\n\t\t);\r\n\t\treturn lines;\r\n\t}\r\n}\r\n\r\nmodule.exports=function(options,i18n){\r\n\tconst featureContext={};\r\n\tconst features=[];\r\n\tfeatures.push(new Audio(options.source));\r\n\tfeatures.push(new FilterSequence(options.filters));\r\n\tfeatures.forEach(feature=>{\r\n\t\tfeature.requestFeatureContext(featureContext);\r\n\t});\r\n\tconst lines=new Lines(\r\n\t\t\"<!DOCTYPE html>\",\r\n\t\t\"<html lang='en'>\",\r\n\t\t\"<head>\",\r\n\t\t\"<meta charset='utf-8' />\",\r\n\t\t\"<title>WebAudio example - Generated code</title>\",\r\n\t\t\"</head>\",\r\n\t\t\"<body>\",\r\n\t\t(()=>{\r\n\t\t\tconst lines=new Lines;\r\n\t\t\tlines.a(...features.map(feature=>feature.getHtmlLines(featureContext,i18n)));\r\n\t\t\treturn lines;\r\n\t\t})(),\r\n\t\t(()=>{\r\n\t\t\tconst lines=new Lines;\r\n\t\t\tlines.a(...features.map(feature=>feature.getJsLines(featureContext,i18n)));\r\n\t\t\treturn lines.wrapIfNotEmpty(\"<script>\",\"</script>\");\r\n\t\t})(),\r\n\t\t\"</body>\",\r\n\t\t\"</html>\"\r\n\t);\r\n\treturn lines.join('\\t');\r\n};\r\n","'use strict';\r\n\r\nconst strings={\r\n\t'options.source': \"Source URL\",\r\n\r\n\t'options.filters': \"Filters\",\r\n\t'options.filters.gain': \"Gain\",\r\n\t'options.filters.gain.add': \"Add Gain\",\r\n\t'options.filters.gain.properties.gain': \"Gain\",\r\n\t'options.filters.panner': \"Stereo Panner\",\r\n\t'options.filters.panner.add': \"Add Stereo Panner\",\r\n\t'options.filters.panner.properties.pan': \"Pan\",\r\n\t'options.filters.biquad': \"Biquad Filter\",\r\n\t'options.filters.biquad.add': \"Add Biquad Filter\",\r\n\t'options.filters.biquad.properties.type': \"Type\",\r\n\t'options.filters.biquad.properties.frequency': \"Frequency\",\r\n\t'options.filters.biquad.properties.detune': \"Detune\",\r\n\t'options.filters.biquad.properties.Q': \"Q\",\r\n\r\n\t'options-output.drag': \"Drag or press up/down while in focus to reorder\",\r\n\t'options-output.delete': \"Delete\",\r\n};\r\n\r\nmodule.exports=function(lang){\r\n\t// TODO use lang to pick strings\r\n\tconst i18n=function(id){\r\n\t\treturn strings[id];\r\n\t};\r\n\ti18n.lang=lang;\r\n\treturn i18n;\r\n};\r\n","'use strict';\r\n\r\nlet idCounter=0;\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++);\r\n}\r\n\r\nconst i18n=require('./i18n.js')('en');\r\nconst Options=require('./options.js');\r\nconst generateCode=require('./code.js');\r\nconst CodeOutput=require('./code-output');\r\nconst OptionsOutput=require('./options-output');\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this);\r\n\t\tconst options=new Options();\r\n\t\tconst codeOutput=new CodeOutput(()=>generateCode(options.fix(),i18n));\r\n\t\toptions.updateCallback=codeOutput.update;\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n);\r\n\t\t$container.empty()\r\n\t\t\t.append(optionsOutput.$output)\r\n\t\t\t.append(codeOutput.$output);\r\n\t})\r\n});\r\n","'use strict';\r\n\r\nconst Option=require('../base/option-classes.js');\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=this.optionClassWriters;\r\n\t\tfunction write(option) {\r\n\t\t\tfor (let i=optionClassWriters.length-1;i>=0;i--) { // most specific options at the end need to be checked first\r\n\t\t\t\tconst optionClass=optionClassWriters[i][0];\r\n\t\t\t\tconst optionClassWriter=optionClassWriters[i][1];\r\n\t\t\t\tif (option instanceof optionClass) {\r\n\t\t\t\t\treturn optionClassWriter(option,write,i18n,generateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=write(options.root);\r\n\t}\r\n\t// override this fn for custom writers\r\n\tget optionClassWriters() {\r\n\t\t// TODO use Map and superclass chain instead\r\n\t\treturn [\r\n\t\t\t[Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t\t);\r\n\t\t\t}],\r\n\t\t\t[Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t\t//.append(\"<label>\"+i18n('options.'+option.fullName)+\"</label>\");\r\n\t\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t\t}],\r\n\t\t\t[Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\t\tconst id=generateId();\r\n\t\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\toption.value=$(this).prop('checked');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.append(\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\");\r\n\t\t\t}],\r\n\t\t\t[Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\t\tconst id=generateId();\r\n\t\t\t\tconst listId=generateId();\r\n\t\t\t\treturn option.$=$(\"<div class='option'>\")\r\n\t\t\t\t\t.append(\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\")\r\n\t\t\t\t\t.append(\" \")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<input type='text' id='\"+id+\"'list='\"+listId+\"' />\")\r\n\t\t\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\toption.value=this.value;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.append(\" \")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<datalist id='\"+listId+\"'>\")\r\n\t\t\t\t\t\t\t.append(\r\n\t\t\t\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t}],\r\n\t\t\t[Option.Array,(option,writeOption,i18n,generateId)=>{\r\n\t\t\t\tlet $dragged=null;\r\n\t\t\t\tlet $entries;\r\n\t\t\t\tconst updateArrayEntries=()=>{\r\n\t\t\t\t\toption.entries=$entries.children().map(function(){\r\n\t\t\t\t\t\treturn $(this).data('option');\r\n\t\t\t\t\t}).get();\r\n\t\t\t\t};\r\n\t\t\t\tconst writeDraggableOption=option=>{\r\n\t\t\t\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t\t\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t\t\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\t\t\t\treturn $(\"<div class='draggable-with-handle'>\")\r\n\t\t\t\t\t\t.data('option',option)\r\n\t\t\t\t\t\t.append(\r\n\t\t\t\t\t\t\t$(\"<div draggable='true' tabindex='0' title='\"+i18n('options-output.drag')+\"'>\")\r\n\t\t\t\t\t\t\t\t.on('dragstart',function(ev){\r\n\t\t\t\t\t\t\t\t\t$dragged=$(this).parent();\r\n\t\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move';\r\n\t\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name);\r\n\t\t\t\t\t\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\t\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage($dragged[0],0,0);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t$dragged.addClass('ghost');\r\n\t\t\t\t\t\t\t\t\t},0);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\t\tconst $handle=$(this);\r\n\t\t\t\t\t\t\t\t\tconst $sorted=$handle.parent();\r\n\t\t\t\t\t\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\t\t\t\t\t\t$sorted.prev().before($sorted);\r\n\t\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\t\t\t\t\t\t$sorted.next().after($sorted);\r\n\t\t\t\t\t\t\t\t\t\t$handle.focus();\r\n\t\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.append(writeOption(option))\r\n\t\t\t\t\t\t.append(\r\n\t\t\t\t\t\t\t//$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'></div>\")\r\n\t\t\t\t\t\t\t$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>\")\r\n\t\t\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\t\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\t\t\t\t\t\t$(this).parent().remove();\r\n\t\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.on('dragover',function(ev){\r\n\t\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\t\tev.originalEvent.dataTransfer.dropEffect='move';\r\n\t\t\t\t\t\t\tconst $target=$(this);\r\n\t\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\t\tif ($target.nextAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t\t$target.before($dragged);\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t} else if ($target.prevAll().is($dragged)) {\r\n\t\t\t\t\t\t\t\t\t$target.after($dragged);\r\n\t\t\t\t\t\t\t\t\tupdateArrayEntries();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('drop',function(ev){\r\n\t\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('dragend',function(ev){\r\n\t\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\t\tif ($dragged) {\r\n\t\t\t\t\t\t\t\t$dragged.removeClass('ghost');\r\n\t\t\t\t\t\t\t\t$dragged=null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\toption.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$entries=$(\"<div>\")\r\n\t\t\t\t\t\t\t.append(option.entries.map(writeDraggableOption))\r\n\t\t\t\t\t);\r\n\t\t\t\tconst $buttons=$(\"<div>\");\r\n\t\t\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\t\t\tif (i) $buttons.append(\" \");\r\n\t\t\t\t\t$buttons.append(\r\n\t\t\t\t\t\t$(\"<button type='button'>\")\r\n\t\t\t\t\t\t\t.html(i18n('options.'+option.fullName+'.'+type+'.add'))\r\n\t\t\t\t\t\t\t.click(function(){\r\n\t\t\t\t\t\t\t\tconst entry=option.addEntry(type);\r\n\t\t\t\t\t\t\t\t$entries.append(writeDraggableOption(entry));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\toption.$.append($buttons);\r\n\t\t\t\treturn option.$;\r\n\t\t\t}],\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput;\r\n","'use strict';\r\n\r\nconst BaseOptions=require('../base/options.js');\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Text','source',[\r\n\t\t\t\t// w3c mooc:\r\n\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t]],\r\n\t\t\t['Array','filters',[\r\n\t\t\t\t['Void','gain'],\r\n\t\t\t\t['Void','panner'],\r\n\t\t\t\t['Void','biquad'],\r\n\t\t\t]],\r\n\t\t]\r\n\t};\r\n}\r\n\r\nmodule.exports=Options;\r\n"],"sourceRoot":"."}