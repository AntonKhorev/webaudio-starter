{"version":3,"sources":["webaudio-starter.js","node_modules/browser-pack/_prelude.js","node_modules/crnx-base/array-option-output.js","node_modules/crnx-base/code-output-i18n.js","node_modules/crnx-base/code-output.js","node_modules/crnx-base/code-section.js","node_modules/crnx-base/fake-lodash/camelcase.js","node_modules/crnx-base/fake-lodash/capitalize.js","node_modules/crnx-base/fake-lodash/debounce.js","node_modules/crnx-base/fake-lodash/escape.js","node_modules/crnx-base/fake-lodash/repeat.js","node_modules/crnx-base/format-numbers.js","node_modules/crnx-base/group-option-output.js","node_modules/crnx-base/i18n-expand-curly.js","node_modules/crnx-base/i18n.js","node_modules/crnx-base/interleave-lines.js","node_modules/crnx-base/js-lines.js","node_modules/crnx-base/lines.js","node_modules/crnx-base/nose-wrap-lines.js","node_modules/crnx-base/option-classes.js","node_modules/crnx-base/options-output-i18n.js","node_modules/crnx-base/options-output.js","node_modules/crnx-base/options.js","node_modules/crnx-base/ref-lines.js","node_modules/crnx-base/web-code.js","node_modules/crnx-base/wrap-lines.js","src/audio-context.js","src/biquad-filter-option-output.js","src/canvas.js","src/code-output.js","src/code.js","src/collection-feature.js","src/destination.js","src/feature.js","src/filter-option-output.js","src/filter-sequence.js","src/i18n.js","src/iir-filter-option-output.js","src/main.js","src/option-classes.js","src/options-output.js","src/options.js","src/source-set.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","ArrayOptionOutput","option","writeOption","i18n","generateId","_this","this","$dragged","$entries","$","append","entries","map","subOption","writeDraggableSubOption","$buttons","availableTypes","forEach","type","html","fullName","click","makeEntry","updateArrayEntries","$output","canDeleteEntry","$entry","children","data","get","_this2","moveUp","$moved","prev","before","moveDown","next","after","attemptDelete","remove","This","on","ev","parent","originalEvent","dataTransfer","effectAllowed","setData","name","setDragImage","setTimeout","addClass","keydown","$handle","$sorted","keyCode","focus","preventDefault","dropEffect","$target","is","dh","height","y","pageY","offset","top","nextAll","th","prevAll","removeClass",2,"lang","additionalStringsPrefix","additionalStrings","en","save","run","open.codepen","open.jsfiddle","section.html","section.css","section.js","embedded","mode.full","mode.body","mode.embed","mode.paste","mode.file","formatting","formatting.indent","formatting.indentNumber","formatting.jsSemicolons","warning.no-hljs","ru","id",3,"debounce","repeat","getHtmlDataUri","encodeURIComponent","makeObjectWithSetters","values","setCallback","_loop","prop","set","v","CodeOutput","generateCode","defaultFormatting","update","flush","applyUpdatedCode","sectionModes","css","js","_code","initDomProps","writeFormattingControls","$indentCheckbox","$indentNumber","updateIndent","indent","checkValidity","Number","val","change","jsSemicolons","checked","writeSection","sectionName","writeSectionSummary","$sectionCode","writeButtons","window","hljs","$saveButtons","sections","extractSections","empty","$code","getHtml","join","highlightBlock","navigator","msSaveOrOpenBlob","w","open","document","write","close","getSection","JSON","stringify","title","appendTo","submit","attr","$summary","mode","section","blob","Blob","mimeType","filename","$a","URL","createObjectURL","7","9",4,"CodeSection","lines",5,"capitalize","split","6","charAt","toUpperCase","slice","func","wait","timeoutId","debounced","clearTimeout",8,"entityMap","&","<",">","\"","'","String","replace","m","Array",10,"formatNumbersInternal","numbers","precision","keepDot","noPlus","maxPrecision","hasNegative","p","number","toFixed","match","ss","isArray","formatNumbers","glsl",11,"GroupOptionOutput",12,"inStrings","expandIdAndString","string","expandRegexp","exec","idStart","idMids","idEnd","stringStart","stringMidsStr","stringMids","stringEnd","idMid","stringMid",13,"escape","langStrings","defaultLang","has","pluralSuffix","ns","indexOf","nn","Math","abs","teen","plural","numberWithUnits","unit","abbrFn","abbr","expansion","test",14,"Lines","InterleaveLines","_Lines","apply","arguments","doGet","out","first","fp","push","item","subOut","16",15,"JsLines","processStringInGet","TO","isDataEmpty","isEmpty","addTo","pop","shift","b","_arguments","makeLines","Function","bind","concat","ae","ba","_b","be","bae","_b2","count","_arguments2","reduce",17,"WrapLines","NoseWrapLines","_WrapLines","24",18,"Option","Base","_class","settings","visibilityManager","updateCallbacks","_$","isVisible","register","visibilityData","testName","options","declareAffectedBy","make","nScalars","nArrays","nObjects","scalarArg","arrayArg","objectArg","arg","optionClass","collectArgs","updateVisibility","toggle","updateCallback","addUpdateCallback","shortenExport","dataKeys","shortenExportAssign","parentData","Input","_Option$Base","_class2","defaultValue","_value","Boolean","_Option$Input","_class3","fix","NonBoolean","_Option$Input2","_class4","valueOf","toString","Factor","_Option$NonBoolean","_class5","_this4","availableValues","_Option$NonBoolean2","_class6","_this5","availableMin","availableMax","fixed","Collection","_Option$Base2","_class7","_this6","descriptions","x","subName","subData","entry","fixedEntries","Void","_Option$Base3","_class8","Checkbox","_Option$Boolean","_class9","Select","_Option$Factor","_class10","Text","_Option$Factor2","_class11","Int","_Option$Number","_class12","Float","_Option$Number2","_class13","_this12","Root","_Option$Collection","_class14","Group","_Option$Collection2","_class15","_Option$Base4","_class16","_this15","availableConstructors","Map","enterArray","ctor","exitArray","typePropertyName","_entries","subDatas","defaultType","subType","subCtor","_this16","_this17","subFixed","types","_",19,"reset","drag","delete",20,"OptionsOutput","optionProto","getPrototypeOf","optionClassWriter","optionClassWriters","setOptionClassWriters","root","valueId","valueInfoId","$select","availableValue","some","$tip","$tipContent","handler","show","hide","listId","text","setInputAttrs","$input","pow","setInputAttrsAndListeners","getOtherInput","$that","parseFloat","$sliderInput","$numberInput","fmt","min","max",21,"OptionVisibilityManager","affects","inArray","updateVisibilityAffectedBy","byFullName","Options","optionClasses","description","_Option$className","className","makeArgs","entriesDescription",22,"RefLines","ref","parse","re","substr","plainOut","href","refs",23,"_templateObject","_templateObject2","_templateObject3","WebCode","getLines","stylePlaceLines","cachedStyleLines","styleExtractLines","getSectionPasteComment","basename","scriptPlaceLines","cachedScriptLines","scriptExtractLines","htmlExtractLines","getBodyHtmlSectionLines","getFullHtmlSectionLines","cachedHeadLines","cachedBodyLines","_styleLines","styleLines","_headLines","headLines","_bodyLines","bodyLines","_scriptLines","scriptLines","wrappers","pushWrapper",25,"Feature","AudioContext","_Feature","getJsInitLines","featureContext","prevNodeJsNames","audioContext","32",26,"FilterOptionOutput","BiquadFilterOptionOutput","_FilterOptionOutput","computeCoefs","sampleRate","frequency","detune","Q","gain","post20160415","F_s","f_0","G","A","omega_0","PI","alpha_Q","sin","Q_dB","alpha_B","sqrt","alpha_Q_dB","S","alpha_S","c","cos","aSA2","feedforward","feedback","$cloneUi","writeCloneButton","runIfCanCreateAudioContext","fixedOption","coefs","removeData","getFilterNode","biquadNode","createBiquadFilter","33",27,"Canvas","getHtmlLines","canvas","width","getJsLoopPreLines","writeStyle","canvasContextProperty","colorOption","cs","color","isBlack","every","background","line",28,"BaseCodeOutput","_BaseCodeOutput","$warnings","isInteresting","$section","$warning","add","context","source","panner","biquad","iir","convolver","peaking","destination","compressor","analyser",29,"SourceSet","FilterSequence","Destination","BaseWebCode","Code","_BaseWebCode","features","sources","filters","feature","requestFeatureContext","alignedInputs","_NoseWrapLines$b","_this3","getNodeJsNames","getJsLoopVisLines","31","34","41",30,"CollectionFeature","entryOptions","entryCounts","entryOption","entryClass","getEntryClass","entryCounts2","audioProcessing","waveform","nextNodeJsName","prevNodeJsName","pad","maxNGridLines","fontSize","fontOffset","frequencyArray","magnitudeArray","phaseArray","_GroupOptionOutput","shown","$magnitudeFigure","$phaseFigure","magnitudeCanvasContext","phaseCanvasContext","updatePlots","filterNode","wrap","maxAbs","getFrequencyResponse","log","LN10","k","v0","v1","plotResponse","canvasContext","array","units","enforcedRange","majorGridLineTest","_Math","_Math2","setPlotRange","min0","max0","ph","minArr","maxArr","calcX","calcY","drawGrid","labelLimit","_Math3","translate","fillStyle","font","textAlign","numLogs","Infinity","tk","tp","ceil","dv","getLabel","labelWidth","measureText","round","drawLine","beginPath","moveTo","lineTo","stroke","majorGridLine","strokeStyle","setLineDash","lineWidth","fillText","restore","clearRect","yLabelWidth","rotate","_y","delayedUpdate","$button","replaceWith","$magnitudeCanvas","$phaseCanvas","getContext","fn","$ui","errorMessage","initAudioContext","webkitAudioContext","Float32Array","maxFreq","_templateObject4","_templateObject5","_templateObject6","camelCase","Filter","getPropertyOptionName","property","getPropertyInputHtmlName","propertyName","nSuffix","getPropertyInputJsName","hasRangeInputs","nodeProperties","input","getHtmlPropertyLines","inputHtmlName","fmtAttrs","fmtLabels","minMax","_WrapLines$b","nodeJsName","ctxCreateMethodName","SinglePathFilter","_Filter","nodePropertyJsName","inputJsName","eventProp","PassiveByDefaultSinglePathFilter","_SinglePathFilter","_this8","filterClasses","_PassiveByDefaultSing","_PassiveByDefaultSing2","_SinglePathFilter2","_SinglePathFilter3","_this13","_Filter2","messageHtmlName","reverb","wetGainNodeJsName","dryGainNodeJsName","url","equalizer","_Filter3","getFrequencyOption","allGainsConstant","singleFreq","affectedFreqsAndOptions","fo","noGainsConstant","getJsData","freq","getJsDataItem","getJsLoopLines","inputHtmlNameExpr","constLines","varLines","outerNodeJsName","frequencies","_this18","filter","_CollectionFeature","skipNode","nodeJsNames",35,"options.sources","options.sources.{audio,video}","options.sources.{audio,video}.add","options.sources.{audio,video}.url","options.sources.video.{width,height}","options.filters","options.filters.gain","options.filters.gain.add","options.filters.gain.gain","options.filters.panner","options.filters.panner.add","options.filters.panner.pan","options.filters.biquad","options.filters.biquad.add","options.filters.biquad.type","options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}","options.filters.biquad.frequency","options.filters.biquad.detune","options.filters.biquad.Q","options.filters.biquad.gain","options.filters.iir","options.filters.iir.add","options.filters.iir.feedforward","options.filters.iir.feedforward.b","options.filters.iir.feedforward.b.add","options.filters.iir.feedback","options.filters.iir.feedback.a","options.filters.iir.feedback.a.add","options.filters.convolver","options.filters.convolver.add","options.filters.convolver.url","options.filters.convolver.reverb","options.filters.convolver.buffer.loading","options.filters.convolver.buffer.error","options.filters.equalizer","options.filters.equalizer.add","options.filters.equalizer.gain{60,170,350,1000,3500,10000}","options.destination","options.destination.compressor","options.destination.compressor.enable","options.destination.waveform","options.canvas","options.canvas.{width,height}","options.canvas.line","options.canvas.line.width","options.canvas.line.color","options.canvas.line.color.{r,g,b,a}","options.canvas.background","options.canvas.background.type","options.canvas.background.type.{clear,filled}","options.canvas.background.color","options.canvas.background.color.{r,g,b,a}","options-output.input","options-output.range","options-output.filter.frequencyResponse","options-output.filter.magnitude","options-output.filter.phase","options-output.filter.contextError","options-output.filter.nodeError","options-output.filter.biquad.clone","options-output.filter.biquad.clone.{pre,post}","options-output.show","options-output.hide","code-output.warning.jsfiddle-run","code-output.warning.interesting","code.title","comment.context","comment.sources.audio","comment.sources.video","comment.filters.gain","comment.filters.panner","comment.filters.biquad","comment.filters.iir","comment.filters.convolver","comment.filters.convolver.single","comment.filters.equalizer","comment.filters.equalizer.single","comment.destination","comment.destination.compressor","comment.destination.waveform","units.pixel.a","units.pixel.{1,2}","units.hertz.a","units.hertz.{1,2}","units.decibel.a","units.decibel.{1,2}","options.filters.biquad.type.lowpass","options.filters.biquad.type.highpass","options.filters.biquad.type.bandpass","options.filters.biquad.type.{lowshelf,highshelf,peaking}","options.filters.biquad.type.notch","options.filters.biquad.type.allpass","units.pixel.{1,2,5}","units.hertz.{1,2,5}","units.decibel.{1,2,5}",36,"IIRFilterOptionOutput","createIIRFilter",37,"idCounter","i18ns","each","$container","closest","codeOutput","optionsOutput","39","40",38,"LiveNumber","dataValue","dataMin","dataMax","dataInput","defaultMin","defaultMax","_min","_max","_input","_$range","updateInternalVisibility","exportHelper","src","$range","LiveInt","_Option$LiveNumber","LiveFloat","_Option$LiveNumber2","FixedLiveSelect","LiveSelect","_Option$Select","AnyFloat","BiquadFilter","_Option$Group","IIRFilterCoefs","_Option$Array","_this7","IIRFilter","_Option$Group2","Filters","_Option$Array2","BaseOptionsOutput","FiltersOptionOutput","_ArrayOptionOutput","$subOutput","find","IIRFilterCoefsOptionOutput","_ArrayOptionOutput2","updateArrayEntryLabels","_BaseOptionsOutput","writeMinMaxInput","minOrMax","inputCheckboxId","$inputCheckbox","$rangeMinInput","$rangeMaxInput","BaseOptions","_BaseOptions","canvas.background.type","destination.waveform","Source","getElementHtmlLines","elementHtmlName","sourceClasses","audio","_Source","video","_Source2"],"mappings":"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","file":"webaudio-starter.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        },\n        taggedTemplateLiteralLoose: function (strings, raw) {\n            strings.raw = raw;\n            return strings;\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                var ArrayOptionOutput = function () {\n                    function ArrayOptionOutput(option, writeOption, i18n, generateId) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, ArrayOptionOutput);\n                        this.option = option;\n                        this.$dragged = null;\n                        this.$entries = $('<div>').append(option.entries.map(function (subOption) {\n                            return _this.writeDraggableSubOption(subOption, writeOption, i18n);\n                        }));\n                        var $buttons = $('<div>');\n                        option.availableTypes.forEach(function (type, i) {\n                            if (i)\n                                $buttons.append(' ');\n                            $buttons.append($('<button type=\\'button\\'>').html(i18n('options.' + option.fullName + '.' + type + '.add')).click(function () {\n                                //option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\n                                _this.$entries.append(_this.writeDraggableSubOption(option.makeEntry(type), writeOption, i18n));\n                                _this.updateArrayEntries();\n                            }));\n                        });\n                        this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>', this.$entries, $buttons);\n                    }\n                    ArrayOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return true;\n                    };\n                    ArrayOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        this.option.entries = this.$entries.children().map(function () {\n                            return $(this).data('option');\n                        }).get();\n                    };\n                    ArrayOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var _this2 = this;\n                        // have to make drag handler 'draggable', not the whole item\n                        // because inputs and labels don't like to be inside 'draggable'\n                        // http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\n                        var moveUp = function ($moved) {\n                            $moved.prev().before($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var moveDown = function ($moved) {\n                            $moved.next().after($moved);\n                            _this2.updateArrayEntries();\n                        };\n                        var attemptDelete = function ($entry) {\n                            if (_this2.canDeleteEntry($entry)) {\n                                $entry.remove();\n                                _this2.updateArrayEntries();\n                            }\n                        };\n                        var This = this;\n                        return $('<div class=\\'draggable-with-handle\\'>').data('option', subOption).append($('<div draggable=\\'true\\' tabindex=\\'0\\' title=\\'' + i18n('options-output.drag') + '\\'>').on('dragstart', function (ev) {\n                            This.$dragged = $(this).parent();\n                            ev.originalEvent.dataTransfer.effectAllowed = 'move';\n                            ev.originalEvent.dataTransfer.setData('Text', name);\n                            if (ev.originalEvent.dataTransfer.setDragImage) {\n                                // doesn't work in IE\n                                ev.originalEvent.dataTransfer.setDragImage(This.$dragged[0], 0, 0);\n                            }\n                            setTimeout(function () {\n                                This.$dragged.addClass('ghost');\n                            }, 0);\n                        }).keydown(function (ev) {\n                            var $handle = $(this);\n                            var $sorted = $handle.parent();\n                            if (ev.keyCode == 38) {\n                                moveUp($sorted);\n                                $handle.focus();\n                                return false;\n                            } else if (ev.keyCode == 40) {\n                                moveDown($sorted);\n                                $handle.focus();\n                                return false;\n                            }\n                        }), writeOption(subOption), $('<div tabindex=\\'0\\' class=\\'delete\\' title=\\'' + i18n('options-output.delete') + '\\'>').click(function () {\n                            attemptDelete($(this).parent());\n                        }).keydown(function (ev) {\n                            if (ev.keyCode == 13 || ev.keyCode == 32) {\n                                attemptDelete($(this).parent());\n                                return false;\n                            }\n                        })).on('dragover', function (ev) {\n                            ev.preventDefault();\n                            ev.originalEvent.dataTransfer.dropEffect = 'move';\n                            var $target = $(this);\n                            if (This.$dragged) {\n                                if ($target.next().is(This.$dragged)) {\n                                    var dh = This.$dragged.height();\n                                    var y = ev.pageY - $target.offset().top;\n                                    if (y < dh) {\n                                        moveUp(This.$dragged);\n                                    }\n                                } else if ($target.nextAll().is(This.$dragged)) {\n                                    moveUp(This.$dragged);\n                                } else if ($target.prev().is(This.$dragged)) {\n                                    var th = $target.height();\n                                    var dh = This.$dragged.height();\n                                    var y = ev.pageY - $target.offset().top;\n                                    if (y > th - dh) {\n                                        moveDown(This.$dragged);\n                                    }\n                                } else if ($target.prevAll().is(This.$dragged)) {\n                                    moveDown(This.$dragged);\n                                }\n                            }\n                        }).on('drop', function (ev) {\n                            ev.preventDefault();\n                        }).on('dragend', function (ev) {\n                            ev.preventDefault();\n                            if (This.$dragged) {\n                                This.$dragged.removeClass('ghost');\n                                This.$dragged = null;\n                            }\n                        });\n                    };\n                    return ArrayOptionOutput;\n                }();\n                module.exports = ArrayOptionOutput;\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'code-output';\n                        var additionalStrings = {\n                            en: {\n                                'save': 'Save source code',\n                                'run': 'Run in new window',\n                                'open.codepen': 'Open in CodePen',\n                                'open.jsfiddle': 'Open in JSFiddle',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': 'embedded in HTML source code',\n                                'mode.full': 'complete HTML',\n                                'mode.body': 'only HTML body',\n                                'mode.embed': 'embed in HTML',\n                                'mode.paste': 'extract to paste into HTML later',\n                                'mode.file': 'extract to load as external resource',\n                                'formatting': 'Formatting',\n                                'formatting.indent': 'indent with tabs',\n                                'formatting.indentNumber': 'spaces per indent',\n                                'formatting.jsSemicolons': 'JavaScript semicolons',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.'\n                            },\n                            ru: {\n                                'save': 'Сохранить исходный код',\n                                'run': 'Запустить в новом окне',\n                                'open.codepen': 'Открыть в CodePen',\n                                'open.jsfiddle': 'Открыть в JSFiddle',\n                                'section.html': 'HTML',\n                                'section.css': 'CSS',\n                                'section.js': 'JavaScript',\n                                'embedded': 'встроен в код HTML',\n                                'mode.full': 'полностью',\n                                'mode.body': 'только <code>body</code>',\n                                'mode.embed': 'встроить в HTML',\n                                'mode.paste': 'извлечь для последующей вставки в HTML',\n                                'mode.file': 'извлечь для загрузки в качестве внешнего ресурса',\n                                'formatting': 'Форматирование',\n                                'formatting.indent': 'отступы с помощью tab',\n                                'formatting.indentNumber': 'пробелов в отступе',\n                                'formatting.jsSemicolons': '<code>;</code> в JavaScript',\n                                'warning.no-hljs': '<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена.'\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var debounce = require(7);\n                var repeat = require(9);\n                var getHtmlDataUri = function (html) {\n                    return 'data:text/html;charset=utf-8,' + encodeURIComponent(html);\n                };\n                var makeObjectWithSetters = function (values, setCallback) {\n                    var obj = {};\n                    var _loop = function (prop) {\n                        Object.defineProperty(obj, prop, {\n                            get: function () {\n                                return values[prop];\n                            },\n                            set: function (v) {\n                                values[prop] = v;\n                                setCallback();\n                            }\n                        });\n                    };\n                    for (var prop in values) {\n                        _loop(prop);\n                    }\n                    return obj;\n                };\n                var CodeOutput = function () {\n                    function CodeOutput(generateCode, i18n) {\n                        var _this = this;\n                        babelHelpers.classCallCheck(this, CodeOutput);\n                        this.formatting = makeObjectWithSetters(this.defaultFormatting, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this.sectionModes = makeObjectWithSetters({\n                            html: 'full',\n                            css: 'embed',\n                            js: 'embed'\n                        }, function () {\n                            _this.update.flush();\n                            _this.applyUpdatedCode(i18n);\n                        });\n                        this._code = generateCode();\n                        this.update = debounce(function () {\n                            _this._code = generateCode();\n                            _this.applyUpdatedCode(i18n);\n                        }, 200);\n                        this.initDomProps();\n                        var writeFormattingControls = function () {\n                            var This = _this;\n                            var $indentCheckbox = undefined, $indentNumber = undefined;\n                            var updateIndent = function () {\n                                var indent = '\\t';\n                                if (!$indentCheckbox.prop('checked')) {\n                                    var n = 4;\n                                    if ($indentNumber[0].checkValidity()) {\n                                        n = Number($indentNumber.val());\n                                    }\n                                    indent = repeat(' ', n);\n                                }\n                                _this.formatting.indent = indent;\n                            };\n                            return $('<details>').append('<summary>' + i18n('code-output.formatting') + '</summary>', $('<div>').append($('<label>').append($indentCheckbox = $('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.indent == '\\t').change(updateIndent), ' ' + i18n('code-output.formatting.indent'))), $('<div>').append($('<label>').append($indentNumber = $('<input type=\\'number\\' min=\\'0\\' max=\\'32\\' required>').val(_this.formatting.indent == '\\t' ? 4 : _this.formatting.indent.length).on('input change', updateIndent), ' ' + i18n('code-output.formatting.indentNumber'))), $('<div>').append($('<label>').append($('<input type=\\'checkbox\\'>').prop('checked', _this.formatting.jsSemicolons).change(function () {\n                                This.formatting.jsSemicolons = this.checked;\n                            }), ' ' + i18n('code-output.formatting.jsSemicolons'))));\n                        };\n                        var writeSection = function (sectionName) {\n                            return $('<details open>').append(_this.writeSectionSummary(sectionName, i18n), _this.$sectionCode[sectionName] = $('<div class=\\'code\\'>'));\n                        };\n                        var $output = $('<div class=\\'code-output\\'>').append(this.writeButtons(i18n)).append(writeFormattingControls(), writeSection('html'), writeSection('css'), writeSection('js'));\n                        if (!window.hljs) {\n                            $output.append('<p>' + i18n('code-output.warning.no-hljs') + '</p>');\n                        }\n                        $output.append(this.writeButtons(i18n));\n                        this.applyUpdatedCode(i18n);\n                        // public interface:\n                        // this.update\n                        this.$output = $output;\n                    }\n                    // private interface:\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        this.$sectionCode = {};\n                        this.$saveButtons = {};\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\n                        var sections = this.code.extractSections(this.sectionModes);\n                        for (var sectionName in sections) {\n                            if (this.sectionModes[sectionName] == 'embed') {\n                                this.$sectionCode[sectionName].empty().append('<p>' + i18n('code-output.embedded') + '</p>');\n                            } else {\n                                var $code = undefined;\n                                this.$sectionCode[sectionName].empty().append($('<pre>').append($code = $('<code class=\\'' + sectionName + '\\'>')));\n                                $code.html(sections[sectionName].getHtml(this.formatting).join('\\n'));\n                                if (window.hljs) {\n                                    hljs.highlightBlock($code[0]);\n                                }\n                            }\n                            if (sectionName != 'html') {\n                                // extractable section\n                                this.$saveButtons[sectionName].prop('disabled', this.sectionModes[sectionName] == 'embed');\n                            }\n                        }\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        var This = this;\n                        return $('<div>').append($('<button type=\\'button\\'>' + i18n('code-output.run') + '</button>').click(function () {\n                            var html = This.code.get(This.formatting).join('\\n');\n                            if (navigator.msSaveOrOpenBlob) {\n                                // has drawbacks:\n                                // * Firefox and Chrome have trouble showing the source\n                                // * weird bug in Firefox:\n                                //   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\n                                // * Firefox shows url of a generator page\n                                var w = window.open('', 'generatedCode');\n                                w.document.open();\n                                w.document.write(html);\n                                w.document.close();\n                            } else {\n                                // has drawbacks:\n                                // * doesn't work in IE b/c they decided it's security risk\n                                // * long url\n                                window.open(getHtmlDataUri(html), 'generatedCode');\n                            }\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.codepen') + '</button>').click(function () {\n                            // http://blog.codepen.io/documentation/api/prefill/\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            $('<form method=\\'post\\' action=\\'http://codepen.io/pen/define/\\' target=\\'codepenGeneratedCode\\'>').append($('<input type=\\'hidden\\' name=\\'data\\'>').val(JSON.stringify({\n                                html: getSection('html'),\n                                css: getSection('css'),\n                                js: getSection('js'),\n                                title: code.title\n                            }))).appendTo('body').submit().remove();\n                        }), ' ', $('<button type=\\'button\\'>' + i18n('code-output.open.jsfiddle') + '</button>').click(function () {\n                            // http://doc.jsfiddle.net/api/post.html\n                            var sections = This.code.extractSections({\n                                html: 'body',\n                                css: 'paste',\n                                js: 'paste'\n                            });\n                            var getSection = function (sectionName) {\n                                return sections[sectionName].get(This.formatting).join('\\n');\n                            };\n                            var writeSection = function (sectionName) {\n                                return $('<input type=\\'hidden\\'>').attr('name', sectionName).val(getSection(sectionName));\n                            };\n                            $('<form method=\\'post\\' action=\\'http://jsfiddle.net/api/post/library/pure/\\' target=\\'jsfiddleGeneratedCode\\'>').append(writeSection('html'), writeSection('css'), writeSection('js'), $('<input type=\\'hidden\\' name=\\'title\\'>').val(This.code.title), '<input type=\\'hidden\\' name=\\'wrap\\' value=\\'b\\'>').appendTo('body').submit().remove();\n                        }));\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var This = this;\n                        var $summary = $('<summary>' + i18n('code-output.section.' + sectionName) + '</summary>');\n                        $summary.append(' ', $('<select>').append((sectionName == 'html' ? [\n                            'full',\n                            'body'\n                        ] : [\n                            'embed',\n                            'paste',\n                            'file'\n                        ]).map(function (mode) {\n                            return $('<option>').val(mode).html(i18n('code-output.mode.' + mode));\n                        })).val(this.sectionModes[sectionName]).change(function () {\n                            This.sectionModes[sectionName] = this.value;\n                        }), ' ', // doesn't work in IE\n                        //$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\n                        //\t// yes I want a button, but download attr is only available for links\n                        //\t$(this).attr('href',getHtmlDataUri(\n                        //\t\tsection.get(this.formatting).join(\"\\n\")\n                        //\t))\n                        //})\n                        this.$saveButtons[sectionName] = $('<button type=\\'button\\'>' + i18n('code-output.save') + '</button>').click(function () {\n                            var section = This.code.extractSections(This.sectionModes)[sectionName];\n                            // http://stackoverflow.com/a/24354303\n                            var blob = new Blob([section.get(This.formatting).join('\\n')], { type: section.mimeType });\n                            if (navigator.msSaveOrOpenBlob) {\n                                navigator.msSaveOrOpenBlob(blob, section.filename);\n                            } else {\n                                var $a = $('<a>').attr('download', section.filename).attr('href', URL.createObjectURL(blob)).appendTo('body');\n                                $a.get(0).click();\n                                $a.remove();\n                            }\n                        }));\n                        return $summary;\n                    };\n                    babelHelpers.createClass(CodeOutput, [\n                        {\n                            key: 'code',\n                            get: function () {\n                                this.update.flush();\n                                return this._code;\n                            }    // extend/override fns:\n                        },\n                        {\n                            key: 'defaultFormatting',\n                            get: function () {\n                                return {\n                                    indent: '\\t',\n                                    jsSemicolons: false\n                                };\n                            }\n                        }\n                    ]);\n                    return CodeOutput;\n                }();\n                module.exports = CodeOutput;\n            },\n            {\n                '7': 7,\n                '9': 9\n            }\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                var CodeSection = function () {\n                    function CodeSection(filename, mimeType, lines) {\n                        babelHelpers.classCallCheck(this, CodeSection);\n                        this.filename = filename;\n                        this.mimeType = mimeType;\n                        this.lines = lines;\n                    }\n                    CodeSection.prototype.get = function get(formatting) {\n                        return this.lines.get(formatting);\n                    };\n                    CodeSection.prototype.getHtml = function getHtml(formatting) {\n                        return this.lines.getHtml(formatting);\n                    };\n                    return CodeSection;\n                }();\n                module.exports = CodeSection;\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                // assumes string is dot-separated, like this: \"some.html.id\"\n                var capitalize = require(6);\n                module.exports = function (s) {\n                    return s.split('.').map(function (w, i) {\n                        return i > 0 ? capitalize(w) : w;\n                    }).join('');\n                };\n            },\n            { '6': 6 }\n        ],\n        6: [\n            function (require, module, exports) {\n                // assumes string is lowercase\n                module.exports = function (s) {\n                    return s.charAt(0).toUpperCase() + s.slice(1);\n                };\n            },\n            {}\n        ],\n        7: [\n            function (require, module, exports) {\n                // no options\n                module.exports = function (func, wait) {\n                    var timeoutId = null;\n                    var debounced = function () {\n                        clearTimeout(timeoutId);\n                        timeoutId = setTimeout(function () {\n                            timeoutId = null;\n                            func();\n                        }, wait);\n                    };\n                    debounced.flush = function () {\n                        if (timeoutId) {\n                            timeoutId = null;\n                            func();\n                        }\n                    };\n                    return debounced;\n                };\n            },\n            {}\n        ],\n        8: [\n            function (require, module, exports) {\n                module.exports = function (s) {\n                    var entityMap = {\n                        '&': '&amp;',\n                        '<': '&lt;',\n                        '>': '&gt;',\n                        '\"': '&quot;',\n                        '\\'': '&#39;'\n                    };\n                    // lodash also escapes `\n                    return String(s).replace(/[&<>\"']/g, function (m) {\n                        return entityMap[m];\n                    });\n                };\n            },\n            {}\n        ],\n        9: [\n            function (require, module, exports) {\n                module.exports = function (s, n) {\n                    return Array(n + 1).join(s);\n                };\n            },\n            {}\n        ],\n        10: [\n            function (require, module, exports) {\n                'use strict';\n                var formatNumbersInternal = function (numbers, precision, keepDot, noPlus) {\n                    var maxPrecision = 0;\n                    if (keepDot) {\n                        maxPrecision = 1;\n                    }\n                    var hasNegative = false;\n                    for (var i in numbers) {\n                        var p = undefined;\n                        if (precision !== undefined) {\n                            p = precision;\n                        } else if (numbers[i].precision !== undefined) {\n                            p = numbers[i].precision;\n                        } else {\n                            throw new Error('formatNumbers received no precision');\n                        }\n                        var number = Number(numbers[i]);\n                        var s = number.toFixed(p);\n                        if (Number(s) < 0) {\n                            // protects against negative zero\n                            hasNegative = true;\n                        }\n                        if (p > 0) {\n                            p -= s.match(/0*$/)[0].length;\n                        }\n                        if (p > maxPrecision) {\n                            maxPrecision = p;\n                        }\n                    }\n                    var ss = Array.isArray(numbers) ? [] : {};\n                    for (var i in numbers) {\n                        var number = Number(numbers[i]);\n                        var s = number.toFixed(maxPrecision);\n                        if (Number(s) >= 0 && s.charAt(0) == '-') {\n                            // protects against negative zero\n                            s = s.slice(1);\n                        }\n                        if (!noPlus && hasNegative && number > 0) {\n                            s = '+' + s;\n                        }\n                        ss[i] = s;\n                    }\n                    return ss;\n                };\n                var formatNumbers = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.html = function (number, precision) {\n                    return formatNumbersInternal(number, precision, false, true);\n                };\n                formatNumbers.js = function (number, precision) {\n                    return formatNumbersInternal(number, precision);\n                };\n                formatNumbers.glsl = function (number, precision) {\n                    return formatNumbersInternal(number, precision, true);\n                };\n                module.exports = formatNumbers;\n            },\n            {}\n        ],\n        11: [\n            function (require, module, exports) {\n                'use strict';\n                var GroupOptionOutput = function GroupOptionOutput(option, writeOption, i18n, generateId) {\n                    babelHelpers.classCallCheck(this, GroupOptionOutput);\n                    this.option = option;\n                    this.$output = option.$ = $('<fieldset>').append('<legend>' + i18n('options.' + option.fullName) + '</legend>').append(option.entries.map(writeOption));\n                };\n                module.exports = GroupOptionOutput;\n            },\n            {}\n        ],\n        12: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (inStrings) {\n                    var strings = {};\n                    var expandRegexp = /^([^{]*)\\{([^}]*)\\}(.*)$/;\n                    function expandIdAndString(id, string) {\n                        var match = undefined;\n                        if (match = expandRegexp.exec(id)) {\n                            (function () {\n                                var idStart = match[1];\n                                var idMids = match[2].split(',');\n                                var idEnd = match[3];\n                                if (match = expandRegexp.exec(string)) {\n                                    (function () {\n                                        var stringStart = match[1];\n                                        var stringMidsStr = match[2];\n                                        var stringMids = stringMidsStr.split(',');\n                                        var stringEnd = match[3];\n                                        idMids.forEach(function (idMid, i) {\n                                            var stringMid = stringMids[i];\n                                            if (stringMidsStr != '') {\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + stringMid + stringEnd);\n                                            } else {\n                                                expandIdAndString(idStart + idMid + idEnd, stringStart + idMid + stringEnd);\n                                            }\n                                        });\n                                    }());\n                                } else {\n                                    idMids.forEach(function (idMid) {\n                                        expandIdAndString(idStart + idMid + idEnd, string);\n                                    });\n                                }\n                            }());\n                        } else {\n                            strings[id] = string;\n                        }\n                    }\n                    for (var id in inStrings) {\n                        expandIdAndString(id, inStrings[id]);\n                    }\n                    return strings;\n                };\n            },\n            {}\n        ],\n        13: [\n            function (require, module, exports) {\n                'use strict';\n                var escape = require(8);\n                module.exports = function (langStrings) {\n                    return function (lang) {\n                        var defaultLang = 'en';\n                        lang = lang || defaultLang;\n                        lang = lang.split('-')[0];\n                        // get primary language subtag\n                        var strings = langStrings[lang];\n                        if (strings === undefined) {\n                            lang = defaultLang;\n                            strings = langStrings[lang];\n                        }\n                        var i18n = function (id) {\n                            if (strings[id] !== undefined) {\n                                return strings[id];\n                            } else {\n                                throw new Error('undefined string ' + id);\n                            }\n                        };\n                        i18n.lang = lang;\n                        i18n.has = function (id) {\n                            return strings[id] !== undefined;\n                        };\n                        if (lang == 'en') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (ns.indexOf('.') < 0) {\n                                    var nn = Number(n);\n                                    if (Math.abs(nn) == 1) {\n                                        return '1';\n                                    } else {\n                                        return '2';\n                                    }\n                                } else {\n                                    return '2';\n                                }\n                            };\n                        } else if (lang == 'ru') {\n                            i18n.number = function (n) {\n                                return String(n).replace('-', '\\u2212').replace('.', ',');\n                            };\n                            i18n.pluralSuffix = function (n) {\n                                var ns = String(n);\n                                if (ns.indexOf('.') < 0) {\n                                    var teen = ns.slice(-2, -1) === '1';\n                                    if (ns.slice(-1) === '1' && !teen) {\n                                        return '1';\n                                    } else if ('234'.indexOf(ns.slice(-1)) >= 0 && !teen) {\n                                        return '2';\n                                    } else {\n                                        return '5';\n                                    }\n                                } else {\n                                    return '2';\n                                }\n                            };\n                        }\n                        i18n.plural = function (n, id) {\n                            return this(id + '.' + this.pluralSuffix(n));\n                        };\n                        i18n.numberWithUnits = function (n, unit, abbrFn) {\n                            if (abbrFn === undefined) {\n                                // codegen needs its own fn\n                                abbrFn = function (abbr, expansion) {\n                                    return '<abbr title=\\'' + escape(expansion) + '\\'>' + abbr + '</abbr>';\n                                };    // expansion is html for stuff like s^(-1)\n                            }\n                            var s = this.number(n);\n                            if (unit !== undefined) {\n                                if (unit.length == 1 && /^\\W/.test(unit)) {\n                                    s += unit;\n                                } else {\n                                    s += ' ';\n                                    // nbsp\n                                    var abbr = undefined;\n                                    if (unit == '1/second') {\n                                        abbr = i18n('units.second.a') + '<sup>\\u22121</sup>';\n                                    } else {\n                                        abbr = i18n('units.' + unit + '.a');\n                                    }\n                                    var expansion = this.plural(n, 'units.' + unit);\n                                    s += abbrFn(abbr, expansion);\n                                }\n                            }\n                            return s;\n                        };\n                        return i18n;\n                    };\n                };\n            },\n            { '8': 8 }\n        ],\n        14: [\n            function (require, module, exports) {\n                'use strict';\n                var escape = require(8);\n                var Lines = require(16);\n                var InterleaveLines = function (_Lines) {\n                    babelHelpers.inherits(InterleaveLines, _Lines);\n                    function InterleaveLines() {\n                        babelHelpers.classCallCheck(this, InterleaveLines);\n                        return babelHelpers.possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    InterleaveLines.prototype.doGet = function doGet(formatting, html) {\n                        var out = [];\n                        var first = true;\n                        var fp = function () {\n                            if (first) {\n                                first = false;\n                            } else {\n                                out.push('');\n                            }\n                        };\n                        this.data.forEach(function (item) {\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (subOut.length > 0) {\n                                    fp();\n                                    out.push.apply(out, subOut);\n                                }\n                            } else if (typeof item == 'string') {\n                                fp();\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                        });\n                        return out;\n                    };\n                    return InterleaveLines;\n                }(Lines);\n                module.exports = InterleaveLines;\n            },\n            {\n                '16': 16,\n                '8': 8\n            }\n        ],\n        15: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(16);\n                var JsLines = function (_Lines) {\n                    babelHelpers.inherits(JsLines, _Lines);\n                    function JsLines() {\n                        babelHelpers.classCallCheck(this, JsLines);\n                        return babelHelpers.possibleConstructorReturn(this, _Lines.apply(this, arguments));\n                    }\n                    JsLines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        if (formatting.jsSemicolons) {\n                            return s.replace(/^;/, '');\n                        } else {\n                            return s.replace(/;$/, '');\n                        }\n                    };\n                    return JsLines;\n                }(Lines);\n                module.exports = JsLines;\n            },\n            { '16': 16 }\n        ],\n        16: [\n            function (require, module, exports) {\n                'use strict';\n                /*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\n                var escape = require(8);\n                var repeat = require(9);\n                var TO = {};\n                // TODO Symbol\n                var Lines = function () {\n                    // lines private interface:\n                    function Lines(data) {\n                        babelHelpers.classCallCheck(this, Lines);\n                        if (!Array.isArray(data)) {\n                            throw new TypeError('attempted to construct Lines with non-array data argument');\n                        }\n                        this.data = data;\n                    }\n                    Lines.prototype.isDataEmpty = function isDataEmpty() {\n                        for (var i = 0; i < this.data.length; i++) {\n                            var item = this.data[i];\n                            if (item instanceof Lines) {\n                                if (!item.isEmpty()) {\n                                    return false;\n                                }\n                            } else if (typeof item == 'string') {\n                                return false;\n                            }\n                        }\n                        return true;\n                    };\n                    Lines.prototype.processStringInGet = function processStringInGet(s, formatting) {\n                        return s;\n                    };\n                    Lines.prototype.doGet = function doGet(formatting, html) {\n                        var _this = this;\n                        var out = [];\n                        var addTo = false;\n                        this.data.forEach(function (item) {\n                            if (item === TO) {\n                                addTo = true;\n                            } else if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                if (addTo && subOut.length > 0) {\n                                    out.push(out.pop() + subOut.shift());\n                                }\n                                out.push.apply(out, subOut);\n                                addTo = false;\n                            } else if (typeof item == 'string') {\n                                var s = _this.processStringInGet(item, formatting);\n                                if (formatting.indent !== undefined && formatting.indent != '\\t') {\n                                    s = s.replace(/^(\\t)+/, function (match) {\n                                        return repeat(formatting.indent, match.length);\n                                    });\n                                }\n                                s = html ? escape(s) : s;\n                                if (addTo) {\n                                    out.push(out.pop() + s);\n                                } else {\n                                    out.push(s);\n                                }\n                                addTo = false;\n                            }\n                        });\n                        return out;\n                    };\n                    // lines public interface:\n                    Lines.b = function b() {\n                        var _this2 = this, _arguments = arguments;\n                        var data = [];\n                        var makeLines = function () {\n                            return new (Function.prototype.bind.apply(_this2, [null].concat([data], Array.prototype.slice.call(_arguments))))();\n                        };\n                        var a = function () {\n                            return a.a.apply(a, arguments);\n                        };\n                        a.a = function () {\n                            data.push.apply(data, arguments);\n                            return this;\n                        };\n                        a.t = function () {\n                            data.push.apply(data, [TO].concat(Array.prototype.slice.call(arguments)));\n                            return this;\n                        };\n                        a.e = makeLines;\n                        a.ae = function () {\n                            return this.a.apply(this, arguments).e();\n                        };\n                        return a;\n                    };\n                    Lines.ba = function ba() {\n                        var _b;\n                        return (_b = this.b()).a.apply(_b, arguments);\n                    };\n                    Lines.be = function be() {\n                        return this.b().e();\n                    };\n                    Lines.bae = function bae() {\n                        var _b2;\n                        return (_b2 = this.b()).a.apply(_b2, arguments).e();\n                    };\n                    Lines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    Lines.prototype.get = function get(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, false);\n                    };\n                    Lines.prototype.getHtml = function getHtml(formatting) {\n                        if (formatting === undefined)\n                            formatting = {};\n                        return this.doGet(formatting, true);\n                    };\n                    Lines.prototype.count = function count() {\n                        return this.doGet({}, false).length;    // can be faster b/c don't need to output stuff\n                    };\n                    // TODO make HtmlLines\n                    Lines.html = function html(strings) {\n                        var _arguments2 = arguments;\n                        // html template tag\n                        // usage example for attributes: Lines.html`<input type=text value=${value}>`\n                        // usage example for elements: Lines.html`<option>${option}</option>`\n                        return strings.reduce(function (r, s, i) {\n                            var v = _arguments2[i];\n                            switch (r.slice(-1)) {\n                            case '=':\n                                if (v === false) {\n                                    return r.replace(/\\s+[a-zA-Z0-9-]+=$/, '') + s;    // TODO more permitting attr name regexp\n                                } else if (v === true) {\n                                    return r.replace(/=$/, '') + s;\n                                }\n                                v = String(v).replace(/&/g, '&amp;');\n                                if (v == '') {\n                                    return r.replace(/=$/, '') + s;\n                                } else if (!/[\\s\"'=<>`]/.test(v)) {\n                                    return r + v + s;\n                                } else if (!/'/.test(v)) {\n                                    return r + '\\'' + v + '\\'' + s;\n                                } else {\n                                    v = v.replace(/\"/g, '&quot;');\n                                    return r + '\"' + v + '\"' + s;\n                                }\n                            case '>':\n                                v = String(v).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n                                return r + v + s;\n                            }\n                            throw new Error('invalid character before substitution');\n                        });\n                    };\n                    return Lines;\n                }();\n                module.exports = Lines;\n            },\n            {\n                '8': 8,\n                '9': 9\n            }\n        ],\n        17: [\n            function (require, module, exports) {\n                'use strict';\n                var WrapLines = require(24);\n                var NoseWrapLines = function (_WrapLines) {\n                    babelHelpers.inherits(NoseWrapLines, _WrapLines);\n                    function NoseWrapLines() {\n                        babelHelpers.classCallCheck(this, NoseWrapLines);\n                        return babelHelpers.possibleConstructorReturn(this, _WrapLines.apply(this, arguments));\n                    }\n                    NoseWrapLines.prototype.isEmpty = function isEmpty() {\n                        return this.isDataEmpty();\n                    };\n                    NoseWrapLines.prototype.doGet = function doGet(formatting, html) {\n                        if (this.isEmpty()) {\n                            return [];\n                        } else {\n                            return _WrapLines.prototype.doGet.call(this, formatting, html);\n                        }\n                    };\n                    return NoseWrapLines;\n                }(WrapLines);\n                module.exports = NoseWrapLines;\n            },\n            { '24': 24 }\n        ],\n        18: [\n            function (require, module, exports) {\n                'use strict';\n                /*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\n                var Option = {};\n                // abstract classes\n                Option.Base = function () {\n                    _class.make = function make(name) {\n                        var nScalars = 0, nArrays = 0, nObjects = 0;\n                        var scalarArg = undefined, arrayArg = [], objectArg = {};\n                        for (var i = 1; i < arguments.length; i++) {\n                            var arg = arguments[i];\n                            if (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\n                                if (nScalars++ == 0)\n                                    scalarArg = arg;\n                            } else if (Array.isArray(arg)) {\n                                if (nArrays++ == 0)\n                                    arrayArg = arg;\n                            } else if (arg instanceof Object) {\n                                if (nObjects++ == 0)\n                                    objectArg = arg;\n                            }\n                        }\n                        var optionClass = this;\n                        var settings = this.collectArgs(scalarArg, arrayArg, objectArg);\n                        return function (data, parent, visibilityManager, makeEntry) {\n                            return new optionClass(name, settings, data, parent, visibilityManager, makeEntry);\n                        };\n                    };\n                    _class.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return settings;\n                    };\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class);\n                        this.parent = parent;\n                        this.name = name;\n                        this.fullName = name;\n                        if (parent && parent.fullName !== null) {\n                            this.fullName = parent.fullName + '.' + name;\n                        }\n                        this.updateCallbacks = [];\n                        this._$ = null;\n                        // visibility and callbacks\n                        this.isVisible = function () {\n                            return true;\n                        };\n                        if (visibilityManager) {\n                            visibilityManager.register(this);\n                            if (settings.visibilityData !== undefined) {\n                                this.isVisible = function () {\n                                    for (var testName in settings.visibilityData) {\n                                        var value = visibilityManager.options[testName].value;\n                                        if (settings.visibilityData[testName].indexOf(value) < 0) {\n                                            return false;\n                                        }\n                                    }\n                                    return true;\n                                };\n                                for (var testName in settings.visibilityData) {\n                                    visibilityManager.declareAffectedBy(this, testName);\n                                }\n                            }\n                        }\n                    }\n                    _class.prototype.updateVisibility = function updateVisibility() {\n                        if (this.$)\n                            this.$.toggle(this.isVisible());\n                    };\n                    _class.prototype.update = function update() {\n                        this.updateCallbacks.forEach(function (updateCallback) {\n                            updateCallback();\n                        });\n                        if (this.parent) {\n                            this.parent.update();\n                        }\n                    };\n                    _class.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.updateCallbacks.push(updateCallback);\n                    };\n                    _class.prototype.shortenExport = function shortenExport(data) {\n                        // used by parent\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            return data.value;\n                        } else {\n                            return data;\n                        }\n                    };\n                    _class.prototype.shortenExportAssign = function shortenExportAssign(data, parentData, name) {\n                        var dataKeys = Object.keys(data);\n                        if (dataKeys.length == 1 && dataKeys[0] == 'value') {\n                            parentData[name] = data.value;\n                        } else if (dataKeys.length > 0) {\n                            parentData[name] = data;\n                        }\n                    };\n                    babelHelpers.createClass(_class, [{\n                            key: '$',\n                            get: function () {\n                                return this._$;\n                            },\n                            set: function ($) {\n                                this._$ = $;\n                                this.updateVisibility();\n                            }\n                        }]);\n                    return _class;\n                }();\n                Option.Input = function (_Option$Base) {\n                    babelHelpers.inherits(_class2, _Option$Base);\n                    _class2.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.defaultValue === undefined)\n                            settings.defaultValue = scalarArg;\n                        return _Option$Base.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class2(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class2);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$Base.apply(this, arguments));\n                        _this.defaultValue = settings.defaultValue;\n                        if (typeof data == 'object') {\n                            data = data.value;\n                        }\n                        if (data !== undefined) {\n                            _this._value = data;\n                        } else {\n                            _this._value = _this.defaultValue;\n                        }\n                        return _this;\n                    }\n                    _class2.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        return data;\n                    };\n                    babelHelpers.createClass(_class2, [{\n                            key: 'value',\n                            get: function () {\n                                return this._value;\n                            },\n                            set: function (value) {\n                                this._value = value;\n                                this.update();\n                            }\n                        }]);\n                    return _class2;\n                }(Option.Base);\n                Option.Boolean = function (_Option$Input) {\n                    babelHelpers.inherits(_class3, _Option$Input);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input.apply(this, arguments));\n                    }\n                    _class3.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        return _Option$Input.collectArgs.call(this, !!scalarArg, arrayArg, settings);\n                    };\n                    _class3.prototype.fix = function fix() {\n                        return this.value;\n                    };\n                    return _class3;\n                }(Option.Input);\n                Option.NonBoolean = function (_Option$Input2) {\n                    babelHelpers.inherits(_class4, _Option$Input2);\n                    function _class4() {\n                        babelHelpers.classCallCheck(this, _class4);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Input2.apply(this, arguments));\n                    }\n                    _class4.prototype.fix = function fix() {\n                        var value = this.value;\n                        return {\n                            // can't use fixed value in boolean context\n                            name: this.name,\n                            value: value,\n                            valueOf: function () {\n                                return value;\n                            },\n                            toString: function () {\n                                return String(value);\n                            }\n                        };\n                    };\n                    return _class4;\n                }(Option.Input);\n                Option.Factor = function (_Option$NonBoolean) {\n                    babelHelpers.inherits(_class5, _Option$NonBoolean);\n                    _class5.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableValues === undefined)\n                            settings.availableValues = arrayArg;\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableValues[0];\n                        return _Option$NonBoolean.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class5(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class5);\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                        _this4.availableValues = settings.availableValues;\n                        return _this4;\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.Number = function (_Option$NonBoolean2) {\n                    babelHelpers.inherits(_class6, _Option$NonBoolean2);\n                    // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.availableMin === undefined)\n                            settings.availableMin = arrayArg[0];\n                        if (settings.availableMax === undefined)\n                            settings.availableMax = arrayArg[1];\n                        if (scalarArg === undefined)\n                            scalarArg = settings.availableMin;\n                        return _Option$NonBoolean2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class6(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class6);\n                        var _this5 = babelHelpers.possibleConstructorReturn(this, _Option$NonBoolean2.apply(this, arguments));\n                        _this5.availableMin = settings.availableMin;\n                        _this5.availableMax = settings.availableMax;\n                        _this5.unit = settings.unit;\n                        return _this5;\n                    }\n                    _class6.prototype.fix = function fix() {\n                        var fixed = _Option$NonBoolean2.prototype.fix.call(this);\n                        fixed.precision = this.precision;\n                        fixed.unit = this.unit;\n                        return fixed;\n                    };\n                    return _class6;\n                }(Option.NonBoolean);\n                Option.Collection = function (_Option$Base2) {\n                    babelHelpers.inherits(_class7, _Option$Base2);\n                    _class7.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        return _Option$Base2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class7);\n                        var _this6 = babelHelpers.possibleConstructorReturn(this, _Option$Base2.apply(this, arguments));\n                        _this6.entries = settings.descriptions.map(function (x) {\n                            var subName = x[1];\n                            var subData = undefined;\n                            if (typeof data == 'object')\n                                subData = data[subName];\n                            return makeEntry(x, subData, _this6, visibilityManager);    // nested option\n                        });\n                        return _this6;\n                    }\n                    _class7.prototype.export = function _export() {\n                        var data = {};\n                        this.entries.forEach(function (entry) {\n                            entry.shortenExportAssign(entry.export(), data, entry.name);\n                        });\n                        return data;\n                    };\n                    _class7.prototype.fix = function fix() {\n                        var fixedEntries = [];\n                        var fixed = {\n                            name: this.name,\n                            entries: fixedEntries\n                        };\n                        this.entries.forEach(function (entry) {\n                            fixedEntries.push(fixed[entry.name] = entry.fix());\n                        });\n                        return fixed;\n                    };\n                    return _class7;\n                }(Option.Base);\n                // concrete classes\n                Option.Void = function (_Option$Base3) {\n                    babelHelpers.inherits(_class8, _Option$Base3);\n                    function _class8() {\n                        babelHelpers.classCallCheck(this, _class8);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Base3.apply(this, arguments));\n                    }\n                    // useful as array entry w/o settings\n                    _class8.prototype.export = function _export() {\n                        return {};\n                    };\n                    _class8.prototype.fix = function fix() {\n                        return { name: this.name };\n                    };\n                    return _class8;\n                }(Option.Base);\n                Option.Checkbox = function (_Option$Boolean) {\n                    babelHelpers.inherits(_class9, _Option$Boolean);\n                    function _class9() {\n                        babelHelpers.classCallCheck(this, _class9);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Boolean.apply(this, arguments));\n                    }\n                    return _class9;\n                }(Option.Boolean);\n                Option.Select = function (_Option$Factor) {\n                    babelHelpers.inherits(_class10, _Option$Factor);\n                    function _class10() {\n                        babelHelpers.classCallCheck(this, _class10);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Factor.apply(this, arguments));\n                    }\n                    return _class10;\n                }(Option.Factor);\n                Option.Text = function (_Option$Factor2) {\n                    babelHelpers.inherits(_class11, _Option$Factor2);\n                    function _class11() {\n                        babelHelpers.classCallCheck(this, _class11);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Factor2.apply(this, arguments));\n                    }\n                    return _class11;\n                }(Option.Factor);\n                Option.Int = function (_Option$Number) {\n                    babelHelpers.inherits(_class12, _Option$Number);\n                    function _class12() {\n                        babelHelpers.classCallCheck(this, _class12);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class12, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class12;\n                }(Option.Number);\n                Option.Float = function (_Option$Number2) {\n                    babelHelpers.inherits(_class13, _Option$Number2);\n                    function _class13(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class13);\n                        var _this12 = babelHelpers.possibleConstructorReturn(this, _Option$Number2.apply(this, arguments));\n                        if (settings.precision !== undefined) {\n                            _this12.precision = settings.precision;\n                        } else {\n                            if (_this12.availableMax >= 100) {\n                                _this12.precision = 1;\n                            } else if (_this12.availableMax >= 10) {\n                                _this12.precision = 2;\n                            } else {\n                                _this12.precision = 3;\n                            }\n                        }\n                        return _this12;\n                    }\n                    return _class13;\n                }(Option.Number);\n                Option.Root = function (_Option$Collection) {\n                    babelHelpers.inherits(_class14, _Option$Collection);\n                    function _class14() {\n                        babelHelpers.classCallCheck(this, _class14);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection.apply(this, arguments));\n                    }\n                    return _class14;\n                }(Option.Collection);\n                Option.Group = function (_Option$Collection2) {\n                    babelHelpers.inherits(_class15, _Option$Collection2);\n                    function _class15() {\n                        babelHelpers.classCallCheck(this, _class15);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Collection2.apply(this, arguments));\n                    }\n                    return _class15;\n                }(Option.Collection);\n                Option.Array = function (_Option$Base4) {\n                    babelHelpers.inherits(_class16, _Option$Base4);\n                    // TODO consider extending Collection\n                    _class16.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        if (settings.descriptions === undefined)\n                            settings.descriptions = arrayArg;\n                        if (settings.typePropertyName === undefined)\n                            settings.typePropertyName = scalarArg;\n                        return _Option$Base4.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    function _class16(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class16);\n                        var _this15 = babelHelpers.possibleConstructorReturn(this, _Option$Base4.apply(this, arguments));\n                        _this15.availableConstructors = new Map();\n                        if (visibilityManager)\n                            visibilityManager.enterArray();\n                        settings.descriptions.forEach(function (x) {\n                            // TODO test array inside array\n                            var type = x[1];\n                            var ctor = function (subData) {\n                                return makeEntry(x, subData, _this15, visibilityManager);\n                            };\n                            _this15.availableConstructors.set(type, ctor);\n                        });\n                        if (visibilityManager)\n                            visibilityManager.exitArray();\n                        if (settings.typePropertyName !== undefined) {\n                            _this15.typePropertyName = settings.typePropertyName;\n                        } else {\n                            _this15.typePropertyName = 'type';\n                        }\n                        // populate array entries from data:\n                        _this15._entries = [];\n                        var subDatas = [];\n                        if (Array.isArray(data)) {\n                            subDatas = data;\n                        } else if (typeof data == 'object') {\n                            subDatas = data.value;\n                        }\n                        var defaultType = _this15.availableTypes[0];\n                        for (var i = 0; i < subDatas.length; i++) {\n                            var subData = subDatas[i];\n                            var subType = defaultType;\n                            if (typeof subData == 'object' && subData[_this15.typePropertyName] !== undefined) {\n                                subType = subData[_this15.typePropertyName];\n                            }\n                            var subCtor = _this15.availableConstructors.get(subType);\n                            if (subCtor) {\n                                _this15._entries.push(subCtor(subData));\n                            }\n                        }\n                        return _this15;\n                    }\n                    _class16.prototype.makeEntry = function makeEntry(type, data) {\n                        return this.availableConstructors.get(type)(data);\n                    };\n                    _class16.prototype.export = function _export() {\n                        var _this16 = this;\n                        var defaultType = this.availableTypes[0];\n                        return {\n                            value: this._entries.map(function (entry) {\n                                var subData = entry.export();\n                                var subType = entry.name;\n                                if (subType != defaultType)\n                                    subData[_this16.typePropertyName] = subType;\n                                return entry.shortenExport(subData);\n                            })\n                        };\n                    };\n                    _class16.prototype.fix = function fix() {\n                        var _this17 = this;\n                        return {\n                            name: this.name,\n                            entries: this._entries.map(function (entry) {\n                                var subFixed = entry.fix();\n                                if (typeof subFixed == 'object')\n                                    subFixed[_this17.typePropertyName] = entry.name;\n                                return subFixed;\n                            })\n                        };\n                    };\n                    babelHelpers.createClass(_class16, [\n                        {\n                            key: 'availableTypes',\n                            get: function () {\n                                var types = [];\n                                this.availableConstructors.forEach(function (_, type) {\n                                    types.push(type);\n                                });\n                                return types;\n                            }\n                        },\n                        {\n                            key: 'entries',\n                            get: function () {\n                                return this._entries;\n                            },\n                            set: function (entries) {\n                                this._entries = entries;\n                                this.update();\n                            }\n                        }\n                    ]);\n                    return _class16;\n                }(Option.Base);\n                module.exports = Option;\n            },\n            {}\n        ],\n        19: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (lang) {\n                    return function (strings) {\n                        var additionalStringsPrefix = 'options-output';\n                        var additionalStrings = {\n                            en: {\n                                'reset': 'Reset',\n                                'drag': 'Drag or press \\u2191/\\u2193 while in focus to reorder',\n                                'delete': 'Delete'\n                            },\n                            ru: {\n                                'reset': 'Сбросить',\n                                'drag': 'Перетаскивайте или нажимайте \\u2191/\\u2193, пока элемент в фокусе, чтобы изменить порядок',\n                                'delete': 'Удалить'\n                            }\n                        };\n                        for (var id in additionalStrings[lang]) {\n                            strings[additionalStringsPrefix + '.' + id] = additionalStrings[lang][id];\n                        }\n                        return strings;\n                    };\n                };\n            },\n            {}\n        ],\n        20: [\n            function (require, module, exports) {\n                'use strict';\n                var formatNumbers = require(10);\n                var Option = require(18);\n                var ArrayOptionOutput = require(1);\n                var GroupOptionOutput = require(11);\n                var OptionsOutput = function () {\n                    function OptionsOutput(options, generateId, i18n) {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        var optionClassWriters = new Map();\n                        this.setOptionClassWriters(optionClassWriters);\n                        function writeOption(option) {\n                            var optionProto = option;\n                            while (optionProto = Object.getPrototypeOf(optionProto)) {\n                                var optionClassWriter = optionClassWriters.get(optionProto.constructor);\n                                if (optionClassWriter) {\n                                    return optionClassWriter(option, writeOption, i18n, generateId);\n                                }\n                            }\n                        }\n                        // public prop:\n                        this.$output = writeOption(options.root);\n                    }\n                    // override this fn for custom writers\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        optionClassWriters.set(Option.Root, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'options-output\\'>').append(option.entries.map(writeOption));\n                        });\n                        optionClassWriters.set(Option.Group, function () {\n                            return new (Function.prototype.bind.apply(GroupOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Void, function (option, writeOption, i18n, generateId) {\n                            return option.$ = $('<div class=\\'option no-lead\\'>').html(i18n('options.' + option.fullName));\n                        });\n                        optionClassWriters.set(Option.Checkbox, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option no-lead\\'>').append($('<input type=\\'checkbox\\' id=\\'' + id + '\\'>').prop('checked', option.value).change(function () {\n                                option.value = $(this).prop('checked');\n                            }), ' <label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + '</label>');\n                        });\n                        optionClassWriters.set(Option.Select, function (option, writeOption, i18n, generateId) {\n                            var valueId = function (value) {\n                                return 'options.' + option.fullName + '.' + value;\n                            };\n                            var valueInfoId = function (value) {\n                                return 'options-info.' + option.fullName + '.' + value;\n                            };\n                            var id = generateId();\n                            var $select = undefined;\n                            option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label> ', $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n(valueId(availableValue)));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }));\n                            if (option.availableValues.some(function (availableValue) {\n                                    return i18n.has(valueInfoId(availableValue));\n                                })) {\n                                (function () {\n                                    var $tip = undefined, $tipContent = undefined;\n                                    option.$.append(' ', $tip = $('<span class=\\'tip-info\\'>').append($tipContent = $('<span class=\\'tip-content\\'>')));\n                                    var handler = function () {\n                                        if (i18n.has(valueInfoId(this.value))) {\n                                            $tipContent.html(i18n(valueInfoId(this.value)));\n                                            $tip.show();\n                                        } else {\n                                            $tip.hide();\n                                            $tipContent.empty();\n                                        }\n                                    };\n                                    handler.call($select[0]);\n                                    $select.change(handler);\n                                }());\n                            }\n                            return option.$;\n                        });\n                        optionClassWriters.set(Option.Text, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var listId = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label> ', $('<input type=\\'text\\' id=\\'' + id + '\\' list=\\'' + listId + '\\' />').val(option.value).on('input change', function () {\n                                option.value = this.value;\n                            }), ' ', $('<datalist id=\\'' + listId + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').text(availableValue);\n                            })));\n                        });\n                        optionClassWriters.set(Option.Number, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var setInputAttrsAndListeners = function ($input, getOtherInput) {\n                                return setInputAttrs($input).val(option.value).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        var $that = getOtherInput();\n                                        $that.val(this.value);\n                                        option.value = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var id = generateId();\n                            var $sliderInput = undefined, $numberInput = undefined;\n                            var $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var fmt = formatNumbers({\n                                min: option.availableMin,\n                                max: option.availableMax\n                            }, option.precision);\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label>', ' <span class=\\'min\\'>' + i18n.numberWithUnits(fmt.min, option.unit) + '</span> ', $sliderInput = setInputAttrsAndListeners($('<input type=\\'range\\' id=\\'' + id + '\\'>'), function () {\n                                return $numberInput;\n                            }), ' <span class=\\'max\\'>' + i18n.numberWithUnits(fmt.max, option.unit) + '</span> ', $numberInput = setInputAttrsAndListeners($('<input type=\\'number\\' required>'), function () {\n                                return $sliderInput;\n                            }), ' ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $sliderInput.val(option.defaultValue).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.Array, function () {\n                            return new (Function.prototype.bind.apply(ArrayOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }();\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '10': 10,\n                '11': 11,\n                '18': 18\n            }\n        ],\n        21: [\n            function (require, module, exports) {\n                'use strict';\n                var OptionVisibilityManager = function () {\n                    function OptionVisibilityManager() {\n                        babelHelpers.classCallCheck(this, OptionVisibilityManager);\n                        this.options = {};\n                        this.affects = {};\n                        this.inArray = 0;\n                    }\n                    OptionVisibilityManager.prototype.register = function register(option) {\n                        var _this = this;\n                        if (!this.inArray) {\n                            this.options[option.fullName] = option;\n                            option.addUpdateCallback(function () {\n                                _this.updateVisibilityAffectedBy(option.fullName);\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.declareAffectedBy = function declareAffectedBy(option, byFullName) {\n                        if (this.affects[byFullName] === undefined) {\n                            this.affects[byFullName] = [];\n                        }\n                        this.affects[byFullName].push(option);\n                    };\n                    OptionVisibilityManager.prototype.updateVisibilityAffectedBy = function updateVisibilityAffectedBy(byFullName) {\n                        if (this.affects[byFullName] !== undefined) {\n                            this.affects[byFullName].forEach(function (option) {\n                                option.updateVisibility();\n                            });\n                        }\n                    };\n                    OptionVisibilityManager.prototype.enterArray = function enterArray() {\n                        this.inArray += 1;\n                    };\n                    OptionVisibilityManager.prototype.exitArray = function exitArray() {\n                        this.inArray -= 1;\n                    };\n                    return OptionVisibilityManager;\n                }();\n                var Options = function () {\n                    function Options(data) {\n                        babelHelpers.classCallCheck(this, Options);\n                        // data = imported values, import is done in ctor to avoid calling updateCallback later\n                        var Option = this.optionClasses;\n                        var makeEntry = function (description, data, parent, visibilityManager) {\n                            var _Option$className;\n                            var className = description[0];\n                            if (Option[className] === undefined) {\n                                throw new Error('invalid option type \\'' + className + '\\'');\n                            }\n                            var makeArgs = description.slice(1);\n                            return (_Option$className = Option[className]).make.apply(_Option$className, makeArgs)(data, parent, visibilityManager, makeEntry);\n                        };\n                        this.root = Option.Root.make(null, this.entriesDescription)(data, null, new OptionVisibilityManager(), makeEntry);\n                    }\n                    // methods to be redefined by subclasses\n                    // TODO make them static?\n                    // public methods\n                    Options.prototype.addUpdateCallback = function addUpdateCallback(updateCallback) {\n                        this.root.addUpdateCallback(updateCallback);\n                    };\n                    Options.prototype.export = function _export() {\n                        return this.root.shortenExport(this.root.export());\n                    };\n                    Options.prototype.fix = function fix() {\n                        return this.root.fix();\n                    };\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(18);\n                            }\n                        },\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [];\n                            }\n                        }\n                    ]);\n                    return Options;\n                }();\n                module.exports = Options;\n            },\n            { '18': 18 }\n        ],\n        22: [\n            function (require, module, exports) {\n                'use strict';\n                var escape = require(8);\n                var Lines = require(16);\n                var RefLines = function (_Lines) {\n                    babelHelpers.inherits(RefLines, _Lines);\n                    function RefLines(data, ref) {\n                        babelHelpers.classCallCheck(this, RefLines);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.ref = ref;\n                        return _this;\n                    }\n                    RefLines.parse = function parse(s) {\n                        var a = Lines.ba('');\n                        var re = /^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/;\n                        for (; s.length > 0;) {\n                            var match = re.exec(s);\n                            if (match) {\n                                a.t(match[1]);\n                                a.t(this.b(match[3]).ae(match[2]));\n                                s = s.substr(match[0].length);\n                            } else {\n                                a.t(s);\n                                break;\n                            }\n                        }\n                        return a.e();\n                    };\n                    RefLines.prototype.doGet = function doGet(formatting, html) {\n                        var plainOut = _Lines.prototype.doGet.call(this, formatting, html);\n                        var href = undefined;\n                        if (html && typeof formatting.refs == 'object') {\n                            href = formatting.refs[this.ref];\n                        }\n                        if (href !== undefined) {\n                            return plainOut.map(function (s) {\n                                return '<a href=\\'' + escape(href) + '\\'>' + s + '</a>';\n                            });\n                        } else {\n                            return plainOut;\n                        }\n                    };\n                    return RefLines;\n                }(Lines);\n                module.exports = RefLines;\n            },\n            {\n                '16': 16,\n                '8': 8\n            }\n        ],\n        23: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ], [\n                        '<link rel=stylesheet href=',\n                        '>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<script src=',\n                        '></script>'\n                    ], [\n                        '<script src=',\n                        '></script>'\n                    ]), _templateObject3 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<html lang=',\n                        '>'\n                    ], [\n                        '<html lang=',\n                        '>'\n                    ]);\n                var Lines = require(16);\n                var NoseWrapLines = require(17);\n                var CodeSection = require(4);\n                var WebCode = function () {\n                    function WebCode() {\n                        babelHelpers.classCallCheck(this, WebCode);\n                    }\n                    WebCode.prototype.get = function get(formatting) {\n                        return this.getLines().get(formatting);\n                    };\n                    WebCode.prototype.getHtml = function getHtml(formatting) {\n                        return this.getLines().getHtml(formatting);\n                    };\n                    WebCode.prototype.extractSections = function extractSections(sectionModes) {\n                        if (sectionModes === undefined) {\n                            sectionModes = {};\n                        }\n                        var stylePlaceLines = NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines);\n                        var styleExtractLines = Lines.be();\n                        if (sectionModes.css == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                stylePlaceLines = Lines.be();\n                            } else {\n                                stylePlaceLines = Lines.bae('<!-- <style> ' + this.getSectionPasteComment('css') + ' </style> -->');\n                            }\n                            styleExtractLines = this.cachedStyleLines;\n                        } else if (sectionModes.css == 'file') {\n                            stylePlaceLines = Lines.bae(Lines.html(_templateObject, this.basename + '.css'));\n                            styleExtractLines = this.cachedStyleLines;\n                        }\n                        var scriptPlaceLines = NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines);\n                        var scriptExtractLines = Lines.be();\n                        if (sectionModes.js == 'paste') {\n                            if (sectionModes.html == 'body') {\n                                scriptPlaceLines = Lines.be();\n                            } else {\n                                scriptPlaceLines = Lines.bae('<!-- <script> ' + this.getSectionPasteComment('js') + ' </script> -->');\n                            }\n                            scriptExtractLines = this.cachedScriptLines;\n                        } else if (sectionModes.js == 'file') {\n                            scriptPlaceLines = Lines.bae(Lines.html(_templateObject2, this.basename + '.js'));\n                            scriptExtractLines = this.cachedScriptLines;\n                        }\n                        var htmlExtractLines = undefined;\n                        if (sectionModes.html == 'body') {\n                            htmlExtractLines = this.getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        } else {\n                            htmlExtractLines = this.getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines);\n                        }\n                        var type = function (sectionName) {\n                            return 'text/' + (sectionName == 'js' ? 'javascript' : sectionName);\n                        };\n                        return {\n                            html: new CodeSection(this.filename, type('html'), htmlExtractLines),\n                            css: new CodeSection(this.basename + '.css', type('css'), styleExtractLines),\n                            js: new CodeSection(this.basename + '.js', type('js'), scriptExtractLines)\n                        };\n                    };\n                    // get title()\n                    // private:\n                    WebCode.prototype.getLines = function getLines() {\n                        return this.getFullHtmlSectionLines(NoseWrapLines.b('<style>', '</style>').ae(this.cachedStyleLines), NoseWrapLines.b('<script>', '</script>').ae(this.cachedScriptLines));\n                    };\n                    WebCode.prototype.getFullHtmlSectionLines = function getFullHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        var a = Lines.b();\n                        a('<!DOCTYPE html>');\n                        if (this.lang !== null) {\n                            a(Lines.html(_templateObject3, this.lang));\n                        } else {\n                            a('<html>');\n                        }\n                        a('<head>', '<meta charset=utf-8>');\n                        if (this.title !== null) {\n                            a('<title>' + this.title + '</title>');\n                        }\n                        a(stylePlaceLines, this.cachedHeadLines, '</head>', '<body>', this.cachedBodyLines, scriptPlaceLines, '</body>', '</html>');\n                        return a.e();\n                    };\n                    WebCode.prototype.getBodyHtmlSectionLines = function getBodyHtmlSectionLines(stylePlaceLines, scriptPlaceLines) {\n                        return Lines.bae(stylePlaceLines, this.cachedHeadLines, this.cachedBodyLines, scriptPlaceLines);\n                    };\n                    WebCode.prototype.getSectionPasteComment = function getSectionPasteComment(sectionName) {\n                        // section placeholder comment in paste mode - likely to be overridden with i18n\n                        return sectionName + ' goes here';\n                    };\n                    babelHelpers.createClass(WebCode, [\n                        {\n                            key: 'filename',\n                            // public:\n                            get: function () {\n                                return this.basename + '.html';\n                            }\n                        },\n                        {\n                            key: 'mimeType',\n                            get: function () {\n                                return 'text/html';\n                            }\n                        },\n                        {\n                            key: 'cachedStyleLines',\n                            get: function () {\n                                if (!this._styleLines)\n                                    this._styleLines = this.styleLines;\n                                return this._styleLines;\n                            }\n                        },\n                        {\n                            key: 'cachedHeadLines',\n                            get: function () {\n                                if (!this._headLines)\n                                    this._headLines = this.headLines;\n                                return this._headLines;\n                            }\n                        },\n                        {\n                            key: 'cachedBodyLines',\n                            get: function () {\n                                if (!this._bodyLines)\n                                    this._bodyLines = this.bodyLines;\n                                return this._bodyLines;\n                            }\n                        },\n                        {\n                            key: 'cachedScriptLines',\n                            get: function () {\n                                if (!this._scriptLines)\n                                    this._scriptLines = this.scriptLines;\n                                return this._scriptLines;\n                            }    // to be redefined in subclasses:\n                        },\n                        {\n                            key: 'basename',\n                            get: function () {\n                                // filename base\n                                return 'source';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                // language tag for <html lang=xx> or null to skip it - likely read from i18n\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                // page title or null to skip it\n                                return null;\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                // contents of <style>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'headLines',\n                            get: function () {\n                                // contents of <head> following <style>, goes to <body> in html body mode\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                // contents of <body> preceding <script>\n                                return Lines.be();\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                // contents of <script>\n                                return Lines.be();\n                            }\n                        }\n                    ]);\n                    return WebCode;\n                }();\n                module.exports = WebCode;\n            },\n            {\n                '16': 16,\n                '17': 17,\n                '4': 4\n            }\n        ],\n        24: [\n            function (require, module, exports) {\n                'use strict';\n                var escape = require(8);\n                var Lines = require(16);\n                var WrapLines = function (_Lines) {\n                    babelHelpers.inherits(WrapLines, _Lines);\n                    function WrapLines(data) {\n                        babelHelpers.classCallCheck(this, WrapLines);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Lines.call(this, data));\n                        _this.wrappers = [];\n                        for (var i = 1; i < arguments.length; i++) {\n                            _this.wrappers.push(arguments[i]);\n                        }\n                        return _this;\n                    }\n                    WrapLines.prototype.isEmpty = function isEmpty() {\n                        return false;\n                    };\n                    WrapLines.prototype.doGet = function doGet(formatting, html) {\n                        var _this2 = this;\n                        var indent = '\\t';\n                        if (formatting.indent !== undefined) {\n                            indent = formatting.indent;\n                        }\n                        var out = [];\n                        var i = 0;\n                        var pushWrapper = function () {\n                            var item = _this2.wrappers[i];\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut);\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(s);\n                            }\n                            i++;\n                        };\n                        pushWrapper();\n                        this.data.forEach(function (item) {\n                            if (item instanceof Lines) {\n                                var subOut = item.doGet(formatting, html);\n                                out.push.apply(out, subOut.map(function (s) {\n                                    return indent + s;\n                                }));\n                                if (_this2.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            } else if (typeof item == 'string') {\n                                var s = html ? escape(item) : item;\n                                out.push(indent + s);\n                                if (_this2.wrappers.length != 2) {\n                                    pushWrapper();\n                                }\n                            }\n                        });\n                        if (this.wrappers.length == 2) {\n                            pushWrapper();\n                        }\n                        return out;\n                    };\n                    return WrapLines;\n                }(Lines);\n                module.exports = WrapLines;\n            },\n            {\n                '16': 16,\n                '8': 8\n            }\n        ],\n        25: [\n            function (require, module, exports) {\n                'use strict';\n                var JsLines = require(15);\n                var RefLines = require(22);\n                var Feature = require(32);\n                var AudioContext = function (_Feature) {\n                    babelHelpers.inherits(AudioContext, _Feature);\n                    function AudioContext() {\n                        babelHelpers.classCallCheck(this, AudioContext);\n                        return babelHelpers.possibleConstructorReturn(this, _Feature.apply(this, arguments));\n                    }\n                    AudioContext.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.audioContext) {\n                            a(RefLines.parse('// ' + i18n('comment.context')), 'var ctx=new (AudioContext || webkitAudioContext);');\n                        }\n                        return a.e();\n                    };\n                    return AudioContext;\n                }(Feature);\n                module.exports = AudioContext;\n            },\n            {\n                '15': 15,\n                '22': 22,\n                '32': 32\n            }\n        ],\n        26: [\n            function (require, module, exports) {\n                'use strict';\n                var FilterOptionOutput = require(33);\n                var BiquadFilterOptionOutput = function (_FilterOptionOutput) {\n                    babelHelpers.inherits(BiquadFilterOptionOutput, _FilterOptionOutput);\n                    function BiquadFilterOptionOutput(option, writeOption, i18n, generateId) {\n                        babelHelpers.classCallCheck(this, BiquadFilterOptionOutput);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _FilterOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var $cloneButton = undefined;\n                        var computeCoefs = function (sampleRate, type, frequency, detune, Q, gain, post20160415) {\n                            // constants defined in the spec\n                            var F_s = sampleRate;\n                            var f_0 = frequency * Math.pow(2, detune / 1200);\n                            var G = gain;\n                            var A = Math.pow(10, G / 40);\n                            var omega_0 = 2 * Math.PI * f_0 / F_s;\n                            var alpha_Q = Math.sin(omega_0) / (2 * Q);\n                            var Q_dB = Math.pow(10, Q / 20);\n                            // fix for incorrect alpha_B\n                            var alpha_B = Math.sin(omega_0) / 2 * Math.sqrt((4 - Math.sqrt(16 - 16 / (Q_dB * Q_dB))) / 2);\n                            // was incorrect in the spec\n                            var alpha_Q_dB = Math.sin(omega_0) / (2 * Q_dB);\n                            // introduced on 2016-04-15\n                            var S = 1;\n                            var alpha_S = Math.sin(omega_0) / 2 * Math.sqrt((A + 1 / A) * (1 / S - 1) + 2);\n                            // shortcuts\n                            var c = Math.cos(omega_0);\n                            var aSA2 = 2 * alpha_S * Math.sqrt(A);\n                            switch (type) {\n                            case 'lowpass':\n                                return {\n                                    feedforward: [\n                                        (1 - c) / 2,\n                                        1 - c,\n                                        (1 - c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'highpass':\n                                return {\n                                    feedforward: [\n                                        (1 + c) / 2,\n                                        -(1 + c),\n                                        (1 + c) / 2\n                                    ],\n                                    feedback: post20160415 ? [\n                                        1 + alpha_Q_dB,\n                                        -2 * c,\n                                        1 - alpha_Q_dB\n                                    ] : [\n                                        1 + alpha_B,\n                                        -2 * c,\n                                        1 - alpha_B\n                                    ]\n                                };\n                            case 'bandpass':\n                                return {\n                                    feedforward: [\n                                        alpha_Q,\n                                        0,\n                                        -alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'notch':\n                                return {\n                                    feedforward: [\n                                        1,\n                                        -2 * c,\n                                        1\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'allpass':\n                                return {\n                                    feedforward: [\n                                        1 - alpha_Q,\n                                        -2 * c,\n                                        1 + alpha_Q\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q,\n                                        -2 * c,\n                                        1 - alpha_Q\n                                    ]\n                                };\n                            case 'peaking':\n                                return {\n                                    feedforward: [\n                                        1 + alpha_Q * A,\n                                        -2 * c,\n                                        1 - alpha_Q * A\n                                    ],\n                                    feedback: [\n                                        1 + alpha_Q / A,\n                                        -2 * c,\n                                        1 - alpha_Q / A\n                                    ]\n                                };\n                            case 'lowshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 - (A - 1) * c + aSA2),\n                                        2 * A * (A - 1 - (A + 1) * c),\n                                        A * (A + 1 - (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 + (A - 1) * c + aSA2,\n                                        -2 * (A - 1 + (A + 1) * c),\n                                        A + 1 + (A - 1) * c - aSA2\n                                    ]\n                                };\n                            case 'highshelf':\n                                return {\n                                    feedforward: [\n                                        A * (A + 1 + (A - 1) * c + aSA2),\n                                        -2 * A * (A - 1 + (A + 1) * c),\n                                        A * (A + 1 + (A - 1) * c - aSA2)\n                                    ],\n                                    feedback: [\n                                        A + 1 - (A - 1) * c + aSA2,\n                                        2 * (A - 1 - (A + 1) * c),\n                                        A + 1 - (A - 1) * c - aSA2\n                                    ]\n                                };\n                            }\n                        };\n                        var This = _this;\n                        var $cloneUi = undefined;\n                        var writeCloneButton = function (post20160415) {\n                            return $('<button type=\\'button\\' class=\\'clone\\'>' + i18n('options-output.filter.biquad.clone.' + (post20160415 ? 'post' : 'pre')) + '</button>').click(function () {\n                                var _this2 = this;\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var fixedOption = option.fix();\n                                    var coefs = computeCoefs(audioContext.sampleRate, fixedOption.type.value, fixedOption.frequency.value, fixedOption.detune.value, Math.pow(10, fixedOption.Q.value), fixedOption.gain.value, post20160415);\n                                    if (coefs) {\n                                        $(_this2).data('coefs', coefs);\n                                    } else {\n                                        $(_this2).removeData('coefs');\n                                    }\n                                }, $cloneUi, i18n('options-output.filter.contextError'));\n                            });\n                        };\n                        _this.$output.append($('<div class=\\'option\\'>').append('<label>' + i18n('options-output.filter.biquad.clone') + ':</label> ', $cloneUi = $('<span>').append(writeCloneButton(false), ' ', writeCloneButton(true))));\n                        return _this;\n                    }\n                    BiquadFilterOptionOutput.prototype.getFilterNode = function getFilterNode(audioContext) {\n                        var biquadNode = audioContext.createBiquadFilter();\n                        var fixedOption = this.option.fix();\n                        biquadNode.type = fixedOption.type.value;\n                        biquadNode.frequency.value = fixedOption.frequency.value;\n                        biquadNode.detune.value = fixedOption.detune.value;\n                        biquadNode.Q.value = Math.pow(10, fixedOption.Q.value);\n                        biquadNode.gain.value = fixedOption.gain.value;\n                        return biquadNode;\n                    };\n                    return BiquadFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = BiquadFilterOptionOutput;\n            },\n            { '33': 33 }\n        ],\n        27: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ], [\n                    '\\t<canvas id=my.canvas width=',\n                    ' height=',\n                    '></canvas>'\n                ]);\n                var Lines = require(16);\n                var JsLines = require(15);\n                var Feature = require(32);\n                var Canvas = function (_Feature) {\n                    babelHelpers.inherits(Canvas, _Feature);\n                    function Canvas(options) {\n                        babelHelpers.classCallCheck(this, Canvas);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Canvas.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = Lines.b();\n                        if (featureContext.canvas) {\n                            a('<div>', Lines.html(_templateObject, this.options.width, this.options.height), '</div>');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = JsLines.b();\n                        if (featureContext.canvas) {\n                            a('var canvas=document.getElementById(\\'my.canvas\\');', 'var canvasContext=canvas.getContext(\\'2d\\');');\n                        }\n                        return a.e();\n                    };\n                    Canvas.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        var a = JsLines.b();\n                        var writeStyle = function (canvasContextProperty, colorOption) {\n                            var cs = [\n                                'r',\n                                'g',\n                                'b'\n                            ];\n                            var color = cs.map(function (c) {\n                                return colorOption[c] + '%';\n                            }).join();\n                            var isBlack = cs.every(function (c) {\n                                return colorOption[c] == 0;\n                            });\n                            if (colorOption.a == 100) {\n                                if (!isBlack) {\n                                    a('canvasContext.' + canvasContextProperty + '=\\'rgb(' + color + ')\\';');\n                                }\n                            } else {\n                                a('canvasContext.' + canvasContextProperty + '=\\'rgba(' + color + ',' + (colorOption.a / 100).toFixed(2) + ')\\';');\n                            }\n                        };\n                        if (featureContext.canvas) {\n                            if (this.options.background.type == 'clear') {\n                                a('canvasContext.clearRect(0,0,canvas.width,canvas.height);');\n                            } else {\n                                writeStyle('fillStyle', this.options.background.color);\n                                a('canvasContext.fillRect(0,0,canvas.width,canvas.height);');\n                            }\n                            if (this.options.line.width != 1) {\n                                a('canvasContext.lineWidth=' + this.options.line.width + ';');\n                            }\n                            writeStyle('strokeStyle', this.options.line.color);\n                        }\n                        return a.e();\n                    };\n                    return Canvas;\n                }(Feature);\n                module.exports = Canvas;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '32': 32\n            }\n        ],\n        28: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseCodeOutput = require(3);\n                var CodeOutput = function (_BaseCodeOutput) {\n                    babelHelpers.inherits(CodeOutput, _BaseCodeOutput);\n                    function CodeOutput() {\n                        babelHelpers.classCallCheck(this, CodeOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseCodeOutput.apply(this, arguments));\n                    }\n                    CodeOutput.prototype.initDomProps = function initDomProps() {\n                        _BaseCodeOutput.prototype.initDomProps.call(this);\n                        this.$warnings = $();\n                    };\n                    CodeOutput.prototype.applyUpdatedCode = function applyUpdatedCode(i18n) {\n                        _BaseCodeOutput.prototype.applyUpdatedCode.call(this, i18n);\n                        this.$warnings.toggle(!this.code.isInteresting);\n                    };\n                    CodeOutput.prototype.writeButtons = function writeButtons(i18n) {\n                        return _BaseCodeOutput.prototype.writeButtons.call(this, i18n).append(' <span class=\\'tip-warn\\'><span class=\\'tip-content\\'>' + i18n('code-output.warning.jsfiddle-run') + '</span></span>');\n                    };\n                    CodeOutput.prototype.writeSectionSummary = function writeSectionSummary(sectionName, i18n) {\n                        var $section = _BaseCodeOutput.prototype.writeSectionSummary.call(this, sectionName, i18n);\n                        if (sectionName == 'html' || sectionName == 'js') {\n                            var $warning = undefined;\n                            $section.append(' ', $warning = $('<span class=\\'tip-warn\\'><span class=\\'tip-content\\'>' + i18n('code-output.warning.interesting') + '</span></span>'));\n                            this.$warnings = this.$warnings.add($warning);\n                        }\n                        return $section;\n                    };\n                    babelHelpers.createClass(CodeOutput, [{\n                            key: 'defaultFormatting',\n                            get: function () {\n                                var formatting = _BaseCodeOutput.prototype.defaultFormatting;\n                                formatting.refs = {\n                                    context: 'https://www.w3.org/TR/webaudio/#AudioContext',\n                                    source: 'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\n                                    gain: 'https://www.w3.org/TR/webaudio/#GainNode',\n                                    panner: 'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\n                                    biquad: 'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\n                                    iir: 'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\n                                    convolver: 'https://www.w3.org/TR/webaudio/#ConvolverNode',\n                                    peaking: 'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\n                                    destination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\n                                    compressor: 'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\n                                    analyser: 'https://www.w3.org/TR/webaudio/#the-analysernode-interface'\n                                };\n                                return formatting;\n                            }\n                        }]);\n                    return CodeOutput;\n                }(BaseCodeOutput);\n                module.exports = CodeOutput;\n            },\n            { '3': 3 }\n        ],\n        29: [\n            function (require, module, exports) {\n                'use strict';\n                var AudioContext = require(25);\n                var SourceSet = require(41);\n                var FilterSequence = require(34);\n                var Destination = require(31);\n                var Canvas = require(27);\n                var Lines = require(16);\n                var JsLines = require(15);\n                var InterleaveLines = require(14);\n                var NoseWrapLines = require(17);\n                var BaseWebCode = require(23);\n                var Code = function (_BaseWebCode) {\n                    babelHelpers.inherits(Code, _BaseWebCode);\n                    function Code(options, i18n) {\n                        babelHelpers.classCallCheck(this, Code);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _BaseWebCode.call(this));\n                        _this.i18n = i18n;\n                        _this.featureContext = {};\n                        _this.features = [\n                            new AudioContext(),\n                            new SourceSet(options.sources),\n                            new FilterSequence(options.filters),\n                            new Destination(options.destination),\n                            new Canvas(options.canvas)\n                        ];\n                        _this.features.forEach(function (feature) {\n                            feature.requestFeatureContext(_this.featureContext);\n                        });\n                        _this.isInteresting = !!_this.featureContext.audioContext;\n                        return _this;\n                    }\n                    babelHelpers.createClass(Code, [\n                        {\n                            key: 'basename',\n                            get: function () {\n                                return 'webaudio';\n                            }\n                        },\n                        {\n                            key: 'lang',\n                            get: function () {\n                                return this.i18n.lang;\n                            }\n                        },\n                        {\n                            key: 'title',\n                            get: function () {\n                                return this.i18n('code.title');\n                            }\n                        },\n                        {\n                            key: 'styleLines',\n                            get: function () {\n                                var a = Lines.b();\n                                if (this.featureContext.alignedInputs) {\n                                    a('label {', '\\tdisplay: inline-block;', '\\twidth: 15em;', '\\ttext-align: right;', '\\tline-height: 0.8em;', '}', '.min {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: right;', '}', '.max {', '\\tdisplay: inline-block;', '\\twidth: 5em;', '\\ttext-align: left;', '}');\n                                }\n                                if (this.featureContext.canvas) {\n                                    a('canvas {', '\\tborder: 1px solid;', '}');\n                                }\n                                return a.e();\n                            }\n                        },\n                        {\n                            key: 'bodyLines',\n                            get: function () {\n                                var _this2 = this;\n                                return Lines.bae.apply(Lines, this.features.map(function (feature) {\n                                    return feature.getHtmlLines(_this2.featureContext, _this2.i18n);\n                                }));\n                            }\n                        },\n                        {\n                            key: 'scriptLines',\n                            get: function () {\n                                var _this3 = this, _NoseWrapLines$b;\n                                var prevNodeJsNames = undefined;\n                                return InterleaveLines.bae.apply(InterleaveLines, this.features.map(function (feature) {\n                                    var lines = feature.getJsInitLines(_this3.featureContext, _this3.i18n, prevNodeJsNames);\n                                    prevNodeJsNames = feature.getNodeJsNames(_this3.featureContext, prevNodeJsNames);\n                                    return lines;\n                                }).concat([(_NoseWrapLines$b = NoseWrapLines.b(JsLines.bae('function visualize() {'), JsLines.bae('\\trequestAnimationFrame(visualize);', '}', 'requestAnimationFrame(visualize);'))).ae.apply(_NoseWrapLines$b, this.features.map(function (feature) {\n                                        return feature.getJsLoopPreLines(_this3.featureContext, _this3.i18n);\n                                    }).concat(this.features.map(function (feature) {\n                                        return feature.getJsLoopVisLines(_this3.featureContext, _this3.i18n);\n                                    })))]));\n                            }\n                        }\n                    ]);\n                    return Code;\n                }(BaseWebCode);\n                module.exports = Code;\n            },\n            {\n                '14': 14,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '23': 23,\n                '25': 25,\n                '27': 27,\n                '31': 31,\n                '34': 34,\n                '41': 41\n            }\n        ],\n        30: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(16);\n                var Feature = require(32);\n                var CollectionFeature = function (_Feature) {\n                    babelHelpers.inherits(CollectionFeature, _Feature);\n                    function CollectionFeature(entryOptions) {\n                        babelHelpers.classCallCheck(this, CollectionFeature);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        var entryCounts = new Map();\n                        entryOptions.entries.forEach(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            entryCounts.set(entryClass, entryCounts.get(entryClass) + 1 || 1);\n                        });\n                        var entryCounts2 = new Map();\n                        _this.entries = entryOptions.entries.map(function (entryOption) {\n                            var entryClass = _this.getEntryClass(entryOption);\n                            if (entryCounts.get(entryClass) > 1) {\n                                var n = entryCounts2.get(entryClass) || 0;\n                                entryCounts2.set(entryClass, n + 1);\n                                return new entryClass(entryOption, n);\n                            } else {\n                                return new entryClass(entryOption);\n                            }\n                        });\n                        return _this;\n                    }\n                    CollectionFeature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.bae.apply(Lines, this.entries.map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    // abstract:\n                    // getEntryClass(entryOption) {}\n                    return CollectionFeature;\n                }(Feature);\n                module.exports = CollectionFeature;\n            },\n            {\n                '16': 16,\n                '32': 32\n            }\n        ],\n        31: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                    '<label for=my.compressor>',\n                    '</label>'\n                ], [\n                    '<label for=my.compressor>',\n                    '</label>'\n                ]);\n                var Lines = require(16);\n                var JsLines = require(15);\n                var NoseWrapLines = require(17);\n                var RefLines = require(22);\n                var Feature = require(32);\n                var Destination = function (_Feature) {\n                    babelHelpers.inherits(Destination, _Feature);\n                    function Destination(options) {\n                        babelHelpers.classCallCheck(this, Destination);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Feature.call(this));\n                        _this.options = options;\n                        return _this;\n                    }\n                    Destination.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        if (this.options.compressor || this.options.waveform) {\n                            featureContext.audioContext = true;\n                        }\n                        if (this.options.waveform) {\n                            featureContext.canvas = true;\n                        }\n                    };\n                    Destination.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var a = NoseWrapLines.b('<div>', '</div>');\n                        if (featureContext.audioProcessing && this.options.compressor) {\n                            a('<input id=my.compressor type=checkbox checked>', Lines.html(_templateObject, i18n('options.destination.compressor.enable')));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var _this2 = this;\n                        var a = JsLines.b();\n                        if (featureContext.audioProcessing && featureContext.audioContext) {\n                            if (this.options.compressor) {\n                                (function () {\n                                    var nextNodeJsName = _this2.options.waveform ? 'analyserNode' : 'ctx.destination';\n                                    a.apply(undefined, [\n                                        RefLines.parse('// ' + i18n('comment.destination.compressor')),\n                                        'var compressorNode=ctx.createDynamicsCompressor();'\n                                    ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                        return prevNodeJsName + '.connect(compressorNode);';\n                                    })));\n                                    if (prevNodeJsNames.length > 0) {\n                                        a.apply(undefined, [\n                                            'document.getElementById(\\'my.compressor\\').onchange=function(){',\n                                            '\\tif (this.checked) {'\n                                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.disconnect(' + nextNodeJsName + ');';\n                                        }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.connect(compressorNode);';\n                                        }), ['\\t} else {'], prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.disconnect(compressorNode);';\n                                        }), prevNodeJsNames.map(function (prevNodeJsName) {\n                                            return '\\t\\t' + prevNodeJsName + '.connect(' + nextNodeJsName + ');';\n                                        }), [\n                                            '\\t}',\n                                            '};',\n                                            ''\n                                        ]));\n                                    }\n                                    prevNodeJsNames = ['compressorNode'];\n                                }());\n                            }\n                            if (this.options.waveform) {\n                                a.apply(undefined, [\n                                    RefLines.parse('// ' + i18n('comment.destination.waveform')),\n                                    'var analyserNode=ctx.createAnalyser();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(analyserNode);';\n                                }), [\n                                    'analyserNode.fftSize=1024;',\n                                    'var analyserData=new Uint8Array(analyserNode.frequencyBinCount);',\n                                    ''\n                                ]));\n                                prevNodeJsNames = ['analyserNode'];\n                            }\n                            a.apply(undefined, [RefLines.parse('// ' + i18n('comment.destination'))].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(ctx.destination);';\n                            })));\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        var a = JsLines.b();\n                        if (featureContext.audioProcessing && this.options.waveform) {\n                            a('analyserNode.getByteTimeDomainData(analyserData);', 'canvasContext.beginPath();', 'for (var i=0;i<analyserData.length;i++) {', '\\tvar x=i*canvas.width/analyserData.length;', '\\tvar y=analyserData[i]*canvas.height/255;', '\\tif (i==0) {', '\\t\\tcanvasContext.moveTo(x,y);', '\\t} else {', '\\t\\tcanvasContext.lineTo(x,y);', '\\t}', '}', 'canvasContext.stroke();');\n                        }\n                        return a.e();\n                    };\n                    Destination.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        if (featureContext.audioContext) {\n                            return ['ctx.destination'];\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return Destination;\n                }(Feature);\n                module.exports = Destination;\n            },\n            {\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '22': 22,\n                '32': 32\n            }\n        ],\n        32: [\n            function (require, module, exports) {\n                'use strict';\n                var Lines = require(16);\n                var Feature = function () {\n                    function Feature() {\n                        babelHelpers.classCallCheck(this, Feature);\n                    }\n                    Feature.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                    };\n                    Feature.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopPreLines = function getJsLoopPreLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getJsLoopVisLines = function getJsLoopVisLines(featureContext, i18n) {\n                        return Lines.be();\n                    };\n                    Feature.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        return prevNodeJsNames;\n                    };\n                    return Feature;\n                }();\n                module.exports = Feature;\n            },\n            { '16': 16 }\n        ],\n        33: [\n            function (require, module, exports) {\n                'use strict';\n                var debounce = require(7);\n                var formatNumbers = require(10);\n                var GroupOptionOutput = require(11);\n                var width = 300;\n                var height = 300;\n                var pad = 30;\n                var maxNGridLines = 10;\n                var fontSize = 10;\n                var fontOffset = 3;\n                var audioContext = undefined;\n                var frequencyArray = undefined, magnitudeArray = undefined, phaseArray = undefined;\n                var FilterOptionOutput = function (_GroupOptionOutput) {\n                    babelHelpers.inherits(FilterOptionOutput, _GroupOptionOutput);\n                    function FilterOptionOutput(option, writeOption, i18n, generateId) {\n                        babelHelpers.classCallCheck(this, FilterOptionOutput);\n                        var _this = babelHelpers.possibleConstructorReturn(this, _GroupOptionOutput.call(this, option, writeOption, i18n, generateId));\n                        var shown = false;\n                        var $magnitudeFigure = undefined, $phaseFigure = undefined;\n                        var magnitudeCanvasContext = undefined, phaseCanvasContext = undefined;\n                        var updatePlots = function (filterNode) {\n                            filterNode.getFrequencyResponse(frequencyArray, magnitudeArray, phaseArray);\n                            for (var i = 0; i < width; i++) {\n                                // convert to decibels\n                                magnitudeArray[i] = 20 * Math.log(magnitudeArray[i]) / Math.LN10;\n                            }\n                            function wrap(v, maxAbs) {\n                                v %= maxAbs * 2;\n                                if (Math.abs(v) <= maxAbs)\n                                    return v;\n                                return v - (v > 0 ? 1 : -1) * maxAbs * 2;\n                            }\n                            var k = 0;\n                            var v0 = 0;\n                            for (var i = 0; i < width; i++) {\n                                // unwrap phase\n                                var v1 = wrap(phaseArray[i] / Math.PI, 1);\n                                k += v1 < v0 && v0 - v1 > v1 + 2 - v0;\n                                k -= v1 > v0 && v1 - v0 > v0 - (v1 - 2);\n                                v0 = v1;\n                                phaseArray[i] = v0 + 2 * k;\n                            }\n                            var plotResponse = function (canvasContext, array, units, enforcedRange, majorGridLineTest) {\n                                var _Math, _Math2;\n                                var min = undefined, max = undefined;\n                                var setPlotRange = function (min0, max0) {\n                                    var ph = pad / height;\n                                    min = ((min0 + max0) * ph - min0) / (2 * ph - 1);\n                                    max = ((min0 + max0) * ph - max0) / (2 * ph - 1);\n                                };\n                                var minArr = (_Math = Math).min.apply(_Math, array);\n                                var maxArr = (_Math2 = Math).max.apply(_Math2, array);\n                                setPlotRange(Math.min(0, -enforcedRange + Math.max(0, maxArr - enforcedRange), minArr), Math.max(0, enforcedRange - Math.max(0, -enforcedRange - minArr), maxArr));\n                                var calcX = function (v) {\n                                    return width * (v - frequencyArray[0]) / (frequencyArray[width - 1] - frequencyArray[0]);\n                                };\n                                var calcY = function (v) {\n                                    return height * (1 - (v - min) / (max - min));\n                                };\n                                var drawGrid = function (min, max, calcY, labelLimit, units, majorGridLineTest) {\n                                    var _Math3;\n                                    canvasContext.save();\n                                    canvasContext.translate(0, 0.5);\n                                    // don't translate along x to keep dashes sharp\n                                    canvasContext.fillStyle = '#444';\n                                    canvasContext.font = fontSize + 'px';\n                                    canvasContext.textAlign = 'right';\n                                    var numLogs = Math.log(max - min) - Math.log(maxNGridLines);\n                                    var k = undefined;\n                                    var p = Infinity;\n                                    [\n                                        1,\n                                        2,\n                                        5\n                                    ].forEach(function (tk) {\n                                        var tp = Math.ceil((numLogs - Math.log(tk)) / Math.LN10);\n                                        if (tp < p) {\n                                            p = tp;\n                                            k = tk;\n                                        }\n                                    });\n                                    var dv = k * Math.pow(10, p);\n                                    var v0 = Math.ceil(min / dv) * dv;\n                                    var numbers = [];\n                                    for (var v = v0; v < max; v += dv) {\n                                        numbers.push(v);\n                                    }\n                                    var fmt = formatNumbers(numbers, p < 0 ? -p : 0);\n                                    var getLabel = function (n) {\n                                        return '' + i18n.number(n) + units;\n                                    };\n                                    var labelWidth = (_Math3 = Math).max.apply(_Math3, fmt.map(function (n) {\n                                        return canvasContext.measureText(getLabel(n)).width;\n                                    }));\n                                    var _loop = function (v, i) {\n                                        var y = Math.round(calcY(v));\n                                        var drawLine = function () {\n                                            canvasContext.beginPath();\n                                            canvasContext.moveTo(0, y);\n                                            canvasContext.lineTo(width, y);\n                                            canvasContext.stroke();\n                                        };\n                                        var majorGridLine = majorGridLineTest(Number(fmt[i]));\n                                        if (majorGridLine) {\n                                            canvasContext.strokeStyle = 'rgba(70%,70%,100%,0.3)';\n                                            canvasContext.setLineDash([]);\n                                            canvasContext.lineWidth = 3;\n                                            drawLine();\n                                        }\n                                        canvasContext.strokeStyle = majorGridLine ? '#000' : '#888';\n                                        canvasContext.setLineDash([1]);\n                                        canvasContext.lineWidth = 1;\n                                        drawLine();\n                                        if (y - fontOffset - fontSize > labelLimit) {\n                                            canvasContext.fillText(getLabel(fmt[i]), fontOffset + labelWidth, y - fontOffset);\n                                        }\n                                    };\n                                    for (var v = v0, i = 0; v < max; v += dv, i++) {\n                                        _loop(v, i);\n                                    }\n                                    canvasContext.restore();\n                                    return labelWidth;\n                                };\n                                canvasContext.clearRect(0, 0, width, height);\n                                var yLabelWidth = drawGrid(min, max, calcY, 0, units, majorGridLineTest);\n                                canvasContext.save();\n                                canvasContext.rotate(-Math.PI / 2);\n                                canvasContext.translate(-height, 0);\n                                drawGrid(frequencyArray[0], frequencyArray[width - 1], calcX, fontOffset + yLabelWidth, ' ' + i18n('units.hertz.a'), function (v) {\n                                    return false;\n                                });\n                                canvasContext.restore();\n                                canvasContext.save();\n                                canvasContext.translate(0.5, 0.5);\n                                canvasContext.strokeStyle = '#F00';\n                                canvasContext.beginPath();\n                                for (var i = 0; i < width; i++) {\n                                    var x = i;\n                                    var _y = calcY(array[i]);\n                                    if (i == 0) {\n                                        canvasContext.moveTo(x, _y);\n                                    } else {\n                                        canvasContext.lineTo(x, _y);\n                                    }\n                                }\n                                canvasContext.stroke();\n                                canvasContext.restore();\n                            };\n                            plotResponse(magnitudeCanvasContext, magnitudeArray, ' ' + i18n('units.decibel.a'), 1, function (v) {\n                                return v == 0;\n                            });\n                            plotResponse(phaseCanvasContext, phaseArray, 'π', 0.1, function (v) {\n                                return v % 2 == 0;\n                            });\n                        };\n                        var delayedUpdate = debounce(function () {\n                            try {\n                                updatePlots(_this.getFilterNode(audioContext));\n                            } catch (e) {\n                            }\n                        }, 50);\n                        var This = _this;\n                        _this.$output.append($('<div class=\\'option\\'>').append('<label>' + i18n('options-output.filter.frequencyResponse') + ':</label> ', $('<button type=\\'button\\'>' + i18n('options-output.show') + '</button>').click(function () {\n                            var $button = $(this);\n                            if (!shown) {\n                                This.runIfCanCreateAudioContext(function (audioContext) {\n                                    var filterNode = undefined;\n                                    try {\n                                        filterNode = This.getFilterNode(audioContext);\n                                    } catch (e) {\n                                        $button.replaceWith(i18n('options-output.filter.nodeError'));\n                                        return;\n                                    }\n                                    var $magnitudeCanvas = undefined, $phaseCanvas = undefined;\n                                    $button.before($magnitudeFigure = $('<figure>').append('<figcaption>' + i18n('options-output.filter.magnitude') + '</figcaption>', $magnitudeCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>')), $phaseFigure = $('<figure>').append('<figcaption>' + i18n('options-output.filter.phase') + '</figcaption>', $phaseCanvas = $('<canvas width=\\'' + width + '\\' height=\\'' + height + '\\'></canvas>'))).text(i18n('options-output.hide'));\n                                    magnitudeCanvasContext = $magnitudeCanvas[0].getContext('2d');\n                                    phaseCanvasContext = $phaseCanvas[0].getContext('2d');\n                                    updatePlots(filterNode);\n                                    shown = true;\n                                }, $button, i18n('options-output.filter.contextError'));\n                            } else {\n                                $magnitudeFigure.remove();\n                                $phaseFigure.remove();\n                                $button.text(i18n('options-output.show'));\n                                shown = false;\n                            }\n                        })));\n                        option.addUpdateCallback(function () {\n                            if (shown) {\n                                delayedUpdate();\n                            }\n                        });\n                        return _this;\n                    }\n                    FilterOptionOutput.prototype.runIfCanCreateAudioContext = function runIfCanCreateAudioContext(fn, $ui, errorMessage) {\n                        var initAudioContext = function () {\n                            audioContext = new (AudioContext || webkitAudioContext)();\n                            frequencyArray = new Float32Array(width);\n                            magnitudeArray = new Float32Array(width);\n                            phaseArray = new Float32Array(width);\n                            var maxFreq = audioContext.sampleRate / 2;\n                            for (var i = 0; i < width; i++) {\n                                frequencyArray[i] = maxFreq / width * (i + 0.5);\n                            }\n                        };\n                        if (!audioContext) {\n                            try {\n                                initAudioContext();\n                            } catch (e) {\n                                $ui.replaceWith(errorMessage);\n                                return;\n                            }\n                        }\n                        fn(audioContext);\n                    };\n                    // abstract\n                    // getFilterNode(audioContext)\n                    return FilterOptionOutput;\n                }(GroupOptionOutput);\n                module.exports = FilterOptionOutput;\n            },\n            {\n                '10': 10,\n                '11': 11,\n                '7': 7\n            }\n        ],\n        34: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<abbr title=',\n                        '>'\n                    ], [\n                        '<abbr title=',\n                        '>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ], [\n                        '<label for=',\n                        '>',\n                        ':</label>'\n                    ]), _templateObject3 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ], [\n                        '<input id=',\n                        ' type=range value=',\n                        ' min=',\n                        ' max=',\n                        ' step=',\n                        '>'\n                    ]), _templateObject4 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<select id=',\n                        '>'\n                    ], [\n                        '<select id=',\n                        '>'\n                    ]), _templateObject5 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ], [\n                        '<option selected=',\n                        ' value=',\n                        '>',\n                        '</option>'\n                    ]), _templateObject6 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ], [\n                        '<span id=',\n                        '>',\n                        '</span>'\n                    ]);\n                var camelCase = require(5);\n                var formatNumbers = require(10);\n                var Lines = require(16);\n                var JsLines = require(15);\n                var WrapLines = require(24);\n                var NoseWrapLines = require(17);\n                var InterleaveLines = require(14);\n                var RefLines = require(22);\n                var CollectionFeature = require(30);\n                var Filter = function () {\n                    function Filter(options, n) {\n                        babelHelpers.classCallCheck(this, Filter);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Filter.prototype.getPropertyOptionName = function getPropertyOptionName(property) {\n                        return 'options.filters.' + this.type + '.' + property.name;\n                    };\n                    Filter.prototype.getPropertyInputHtmlName = function getPropertyInputHtmlName(propertyName) {\n                        return 'my.' + this.type + this.nSuffix + '.' + propertyName;\n                    };\n                    Filter.prototype.getPropertyInputJsName = function getPropertyInputJsName(propertyName) {\n                        return camelCase(this.type + this.nSuffix + '.' + propertyName + '.input');\n                    };\n                    Filter.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        var _this = this;\n                        var hasRangeInputs = this.nodeProperties.some(function (property) {\n                            if (property.type == 'range') {\n                                var option = _this.options[property.name];\n                                return option.input;\n                            } else {\n                                return false;\n                            }\n                        });\n                        if (hasRangeInputs) {\n                            featureContext.alignedInputs = true;\n                        }\n                    };\n                    Filter.prototype.getHtmlPropertyLines = function getHtmlPropertyLines(i18n, property) {\n                        var _this2 = this;\n                        var option = this.options[property.name];\n                        var inputHtmlName = this.getPropertyInputHtmlName(property.name);\n                        var a = Lines.b();\n                        if (property.type == 'range' && option.input) {\n                            var p = option.precision;\n                            var fmtAttrs = formatNumbers.html({\n                                min: option.min,\n                                max: option.max,\n                                value: option.value\n                            }, p);\n                            var fmtLabels = formatNumbers({\n                                min: option.min,\n                                max: option.max\n                            }, p);\n                            var minMax = function (n) {\n                                return i18n.numberWithUnits(n, option.unit, function (a, e) {\n                                    return Lines.html(_templateObject, e) + a + '</abbr>';\n                                });\n                            };\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), '<span class=min>' + minMax(fmtLabels.min) + '</span>', Lines.html(_templateObject3, inputHtmlName, fmtAttrs.value, fmtAttrs.min, fmtAttrs.max, p ? Math.pow(0.1, p).toFixed(p) : false), '<span class=max>' + minMax(fmtLabels.max) + '</span>');\n                        } else if (property.type == 'select' && option.input) {\n                            var _WrapLines$b;\n                            a(Lines.html(_templateObject2, inputHtmlName, i18n(this.getPropertyOptionName(property))), (_WrapLines$b = WrapLines.b(Lines.html(_templateObject4, inputHtmlName), '</select>')).ae.apply(_WrapLines$b, option.availableValues.map(function (value) {\n                                var title = i18n(_this2.getPropertyOptionName(property) + '.' + value);\n                                return Lines.html(_templateObject5, option.value == value, value != title && value, title);\n                            })));\n                        } else if (property.type == 'xhr') {\n                            a(Lines.html(_templateObject6, inputHtmlName, i18n(this.getPropertyOptionName(property) + '.loading')));\n                        }\n                        return a.e();\n                    };\n                    // { not called if skipNode is set\n                    Filter.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        var _this3 = this;\n                        return Lines.bae.apply(Lines, this.nodeProperties.map(function (property) {\n                            return NoseWrapLines.b('<div>', '</div>').ae(_this3.getHtmlPropertyLines(i18n, property));\n                        }));\n                    };\n                    Filter.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                        var _this4 = this;\n                        return JsLines.bae.apply(JsLines, [\n                            RefLines.parse('// ' + i18n('comment.filters.' + this.type)),\n                            'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'\n                        ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                            return prevNodeJsName + '.connect(' + _this4.nodeJsName + ');';\n                        })));\n                    };\n                    babelHelpers.createClass(Filter, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        },\n                        {\n                            key: 'skipNode',\n                            get: function () {\n                                return false;\n                            }\n                        },\n                        {\n                            key: 'nodeJsNames',\n                            get: function () {\n                                return [this.nodeJsName];\n                            }    // }\n                                 // abstract:\n                                 // get type()\n                                 // get ctxCreateMethodName()\n                                 // get nodeProperties()\n                        }\n                    ]);\n                    return Filter;\n                }();\n                var SinglePathFilter = function (_Filter) {\n                    babelHelpers.inherits(SinglePathFilter, _Filter);\n                    function SinglePathFilter() {\n                        babelHelpers.classCallCheck(this, SinglePathFilter);\n                        return babelHelpers.possibleConstructorReturn(this, _Filter.apply(this, arguments));\n                    }\n                    SinglePathFilter.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                        var _this6 = this;\n                        return Lines.bae.apply(Lines, [_Filter.prototype.getJsInitLines.call(this, i18n, prevNodeJsNames)].concat(this.nodeProperties.map(function (property) {\n                            var option = _this6.options[property.name];\n                            var nodePropertyJsName = _this6.nodeJsName + '.' + property.name + (property.type == 'range' ? '.value' : '');\n                            var a = JsLines.b();\n                            if (option.input) {\n                                var inputJsName = _this6.getPropertyInputJsName(property.name);\n                                var inputHtmlName = _this6.getPropertyInputHtmlName(property.name);\n                                var value = inputJsName + '.value';\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                var eventProp = property.type == 'range' ? 'oninput' : 'onchange';\n                                a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', // was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\n                                ';(' + inputJsName + '.' + eventProp + '=function(){', '\\t' + nodePropertyJsName + '=' + value + ';', '})();');\n                            } else if (option.value != option.defaultValue) {\n                                var value = option.value;\n                                if (property.type == 'select') {\n                                    value = '\\'' + value + '\\'';\n                                }\n                                if (property.fn) {\n                                    value = property.fn(value);\n                                }\n                                a(nodePropertyJsName + '=' + value + ';');\n                            }\n                            return a.e();\n                        })));\n                    };\n                    return SinglePathFilter;\n                }(Filter);\n                var PassiveByDefaultSinglePathFilter = function (_SinglePathFilter) {\n                    babelHelpers.inherits(PassiveByDefaultSinglePathFilter, _SinglePathFilter);\n                    function PassiveByDefaultSinglePathFilter() {\n                        babelHelpers.classCallCheck(this, PassiveByDefaultSinglePathFilter);\n                        return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(PassiveByDefaultSinglePathFilter, [{\n                            key: 'skipNode',\n                            get: function () {\n                                var _this8 = this;\n                                return this.nodeProperties.every(function (property) {\n                                    var option = _this8.options[property.name];\n                                    return option.value == option.defaultValue && !option.input;\n                                });\n                            }\n                        }]);\n                    return PassiveByDefaultSinglePathFilter;\n                }(SinglePathFilter);\n                var filterClasses = {\n                    gain: function (_PassiveByDefaultSing) {\n                        babelHelpers.inherits(gain, _PassiveByDefaultSing);\n                        function gain() {\n                            babelHelpers.classCallCheck(this, gain);\n                            return babelHelpers.possibleConstructorReturn(this, _PassiveByDefaultSing.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(gain, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'gain';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createGain';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'gain',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return gain;\n                    }(PassiveByDefaultSinglePathFilter),\n                    panner: function (_PassiveByDefaultSing2) {\n                        babelHelpers.inherits(panner, _PassiveByDefaultSing2);\n                        function panner() {\n                            babelHelpers.classCallCheck(this, panner);\n                            return babelHelpers.possibleConstructorReturn(this, _PassiveByDefaultSing2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(panner, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'panner';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createStereoPanner';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [{\n                                            name: 'pan',\n                                            type: 'range'\n                                        }];\n                                }\n                            }\n                        ]);\n                        return panner;\n                    }(PassiveByDefaultSinglePathFilter),\n                    biquad: function (_SinglePathFilter2) {\n                        babelHelpers.inherits(biquad, _SinglePathFilter2);\n                        function biquad() {\n                            babelHelpers.classCallCheck(this, biquad);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter2.apply(this, arguments));\n                        }\n                        babelHelpers.createClass(biquad, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'biquad';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'type',\n                                            type: 'select'\n                                        },\n                                        {\n                                            name: 'frequency',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'detune',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'Q',\n                                            type: 'range',\n                                            fn: function (x) {\n                                                return 'Math.pow(10,' + x + ')';\n                                            }\n                                        },\n                                        {\n                                            name: 'gain',\n                                            type: 'range'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    // lowshelf, highshelf and peaking are passive when gain==0\n                                    return !this.options.type.input && [\n                                        'lowshelf',\n                                        'highshelf',\n                                        'peaking'\n                                    ].indexOf(this.options.type.value) >= 0 && !this.options.gain.input && this.options.gain == 0;\n                                }\n                            }\n                        ]);\n                        return biquad;\n                    }(SinglePathFilter),\n                    iir: function (_SinglePathFilter3) {\n                        babelHelpers.inherits(iir, _SinglePathFilter3);\n                        function iir() {\n                            babelHelpers.classCallCheck(this, iir);\n                            return babelHelpers.possibleConstructorReturn(this, _SinglePathFilter3.apply(this, arguments));\n                        }\n                        iir.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                            var _this13 = this;\n                            return JsLines.bae.apply(JsLines, [\n                                RefLines.parse('// ' + i18n('comment.filters.' + this.type)),\n                                'var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '([' + this.options.feedforward.entries + '],[' + this.options.feedback.entries + ']);'\n                            ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this13.nodeJsName + ');';\n                            })));\n                        };\n                        babelHelpers.createClass(iir, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'iir';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createIIRFilter';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [];\n                                }\n                            }\n                        ]);\n                        return iir;\n                    }(SinglePathFilter),\n                    convolver: function (_Filter2) {\n                        babelHelpers.inherits(convolver, _Filter2);\n                        function convolver() {\n                            babelHelpers.classCallCheck(this, convolver);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter2.apply(this, arguments));\n                        }\n                        convolver.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                            var _this15 = this;\n                            var messageHtmlName = this.getPropertyInputHtmlName('buffer');\n                            var a = JsLines.b();\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                            } else {\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')));\n                            }\n                            a.apply(undefined, ['var ' + this.nodeJsName + '=ctx.' + this.ctxCreateMethodName + '();'].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                return prevNodeJsName + '.connect(' + _this15.nodeJsName + ');';\n                            })));\n                            if (this.options.reverb.input || this.options.reverb != 1) {\n                                a.apply(undefined, [\n                                    'var ' + this.wetGainNodeJsName + '=ctx.createGain();',\n                                    this.nodeJsName + '.connect(' + this.wetGainNodeJsName + ');',\n                                    'var ' + this.dryGainNodeJsName + '=ctx.createGain();'\n                                ].concat(prevNodeJsNames.map(function (prevNodeJsName) {\n                                    return prevNodeJsName + '.connect(' + _this15.dryGainNodeJsName + ');';\n                                })));\n                                if (this.options.reverb.input) {\n                                    var inputHtmlName = this.getPropertyInputHtmlName('reverb');\n                                    var inputJsName = this.getPropertyInputJsName('reverb');\n                                    a('var ' + inputJsName + '=document.getElementById(\\'' + inputHtmlName + '\\');', ';(' + inputJsName + '.oninput=function(){', '\\t' + this.wetGainNodeJsName + '.gain.value=' + inputJsName + '.value;', '\\t' + this.dryGainNodeJsName + '.gain.value=1-' + inputJsName + '.value;', '})();');\n                                }\n                            }\n                            a('var xhr=new XMLHttpRequest();', 'xhr.open(\\'GET\\',\\'' + this.options.url + '\\');', // TODO html escape\n                            'xhr.responseType=\\'arraybuffer\\';', 'xhr.onload=function(){', '\\tif (this.status==200) {', // TODO we are checking status here, but what if <audio>'s status is an error?\n                            '\\t\\tctx.decodeAudioData(this.response,function(buffer){', '\\t\\t\\t' + this.nodeJsName + '.buffer=buffer;', '\\t\\t\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'\\';', '\\t\\t});', '\\t} else {', '\\t\\tthis.onerror();', '\\t}', '};', 'xhr.onerror=function(){', '\\tdocument.getElementById(\\'' + messageHtmlName + '\\').textContent=\\'' + i18n('options.filters.convolver.buffer.error') + '\\';', '};', 'xhr.send();');\n                            return a.e();\n                        };\n                        babelHelpers.createClass(convolver, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'convolver';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createConvolver';\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return [\n                                        {\n                                            name: 'reverb',\n                                            type: 'range'\n                                        },\n                                        {\n                                            name: 'buffer',\n                                            type: 'xhr'\n                                        }\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'dryGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.dry.gain.node');\n                                }\n                            },\n                            {\n                                key: 'wetGainNodeJsName',\n                                get: function () {\n                                    return camelCase(this.type + this.nSuffix + '.wet.gain.node');\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.options.reverb == 0 && !this.options.reverb.input;\n                                }\n                            },\n                            {\n                                key: 'nodeJsNames',\n                                get: function () {\n                                    if (this.options.reverb.input || this.options.reverb != 1) {\n                                        return [\n                                            this.wetGainNodeJsName,\n                                            this.dryGainNodeJsName\n                                        ];\n                                    } else {\n                                        return [this.nodeJsName];\n                                    }\n                                }\n                            }\n                        ]);\n                        return convolver;\n                    }(Filter),\n                    equalizer: function (_Filter3) {\n                        babelHelpers.inherits(equalizer, _Filter3);\n                        function equalizer() {\n                            babelHelpers.classCallCheck(this, equalizer);\n                            return babelHelpers.possibleConstructorReturn(this, _Filter3.apply(this, arguments));\n                        }\n                        equalizer.prototype.getFrequencyOption = function getFrequencyOption(i) {\n                            return this.options[this.nodeProperties[i].name];\n                        };\n                        equalizer.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                            if (!this.allGainsConstant) {\n                                featureContext.alignedInputs = true;\n                            }\n                        };\n                        equalizer.prototype.getJsInitLines = function getJsInitLines(i18n, prevNodeJsNames) {\n                            var _this17 = this;\n                            var singleFreq = this.affectedFreqsAndOptions.length == 1;\n                            var allGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == false;\n                            });\n                            var noGainsConstant = this.affectedFreqsAndOptions.every(function (fo) {\n                                return fo.option.input == true;\n                            });\n                            var getJsData = function () {\n                                return _this17.affectedFreqsAndOptions.map(function (fo) {\n                                    if (noGainsConstant) {\n                                        return fo.freq;\n                                    } else {\n                                        return '[' + fo.freq + ',' + (fo.option.input ? 'null' : fo.option.value) + ']';\n                                    }\n                                }).join();\n                            };\n                            var getJsDataItem = function () {\n                                if (noGainsConstant) {\n                                    return 'freq';\n                                } else {\n                                    return 'freqData';\n                                }\n                            };\n                            var getJsLoopLines = function () {\n                                var freq = singleFreq ? _this17.affectedFreqsAndOptions[0].freq : 'freq';\n                                var gain = singleFreq ? _this17.affectedFreqsAndOptions[0].option.value : 'gain';\n                                var nodeJsName = allGainsConstant || singleFreq ? _this17.nodeJsName : 'node';\n                                var inputJsName = singleFreq ? _this17.getPropertyInputJsName('gain' + freq) : 'input';\n                                var inputHtmlNameExpr = singleFreq ? '\\'' + _this17.getPropertyInputHtmlName('gain' + freq) + '\\'' : '\\'' + _this17.getPropertyInputHtmlName('gain') + '\\'+freq';\n                                var a = JsLines.b();\n                                if (!(noGainsConstant || singleFreq)) {\n                                    a('var freq=freqData[0], gain=freqData[1];');\n                                }\n                                if (allGainsConstant && !singleFreq) {\n                                    a('');\n                                } else {\n                                    a('var ');\n                                }\n                                a.t(nodeJsName + '=ctx.' + _this17.ctxCreateMethodName + '();');\n                                if (singleFreq) {\n                                    a.apply(undefined, prevNodeJsNames.map(function (prevNodeJsName) {\n                                        return prevNodeJsName + '.connect(' + nodeJsName + ');';\n                                    }));\n                                } else {\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode.connect(' + nodeJsName + ');');\n                                    } else {\n                                        a('prevNodes.forEach(function(prevNode){', '\\tprevNode.connect(' + nodeJsName + ');', '});');\n                                    }\n                                }\n                                a(nodeJsName + '.type=\\'peaking\\';', nodeJsName + '.frequency.value=' + freq + ';');\n                                var constLines = JsLines.bae(nodeJsName + '.gain.value=' + gain + ';');\n                                var varLines = JsLines.bae('var ' + inputJsName + '=document.getElementById(' + inputHtmlNameExpr + ');', ';(' + inputJsName + '.oninput=function(){', '\\t' + nodeJsName + '.gain.value=' + inputJsName + '.value;', '})();');\n                                if (!noGainsConstant && allGainsConstant) {\n                                    a(constLines);\n                                } else if (noGainsConstant && !allGainsConstant) {\n                                    a(varLines);\n                                } else if (!noGainsConstant && !allGainsConstant) {\n                                    a(WrapLines.b('if (gain!==null) {', '} else {', '}').ae(constLines, varLines));\n                                }\n                                if (!singleFreq) {\n                                    var outerNodeJsName = allGainsConstant ? nodeJsName : _this17.nodeJsName + '=' + nodeJsName;\n                                    if (prevNodeJsNames.length == 1) {\n                                        a('prevNode=' + outerNodeJsName + ';');\n                                    } else {\n                                        a('prevNodes=[' + outerNodeJsName + '];');\n                                    }\n                                }\n                                return a.e();\n                            };\n                            if (singleFreq) {\n                                return JsLines.bae(RefLines.parse('// ' + i18n('comment.filters.' + this.type + '.single')), getJsLoopLines());\n                            } else {\n                                var a = JsLines.b();\n                                a(RefLines.parse('// ' + i18n('comment.filters.' + this.type)));\n                                if (prevNodeJsNames.length == 1) {\n                                    a('var prevNode=' + prevNodeJsNames[0] + ';');\n                                } else {\n                                    a('var prevNodes=[' + prevNodeJsNames.join() + '];');\n                                }\n                                a('var ' + this.nodeJsName + ';', WrapLines.b(JsLines.bae(';[' + getJsData() + '].forEach(function(' + getJsDataItem() + '){'), JsLines.bae('});')).ae(getJsLoopLines()));\n                                return a.e();\n                            }\n                        };\n                        babelHelpers.createClass(equalizer, [\n                            {\n                                key: 'type',\n                                get: function () {\n                                    return 'equalizer';\n                                }\n                            },\n                            {\n                                key: 'ctxCreateMethodName',\n                                get: function () {\n                                    return 'createBiquadFilter';\n                                }\n                            },\n                            {\n                                key: 'frequencies',\n                                get: function () {\n                                    return [\n                                        60,\n                                        170,\n                                        350,\n                                        1000,\n                                        3500,\n                                        10000\n                                    ];\n                                }\n                            },\n                            {\n                                key: 'nodeProperties',\n                                get: function () {\n                                    return this.frequencies.map(function (freq) {\n                                        return {\n                                            name: 'gain' + freq,\n                                            type: 'range'\n                                        };\n                                    });\n                                }\n                            },\n                            {\n                                key: 'affectedFreqsAndOptions',\n                                get: function () {\n                                    var _this18 = this;\n                                    return this.frequencies.map(function (freq, i) {\n                                        var option = _this18.getFrequencyOption(i);\n                                        return {\n                                            freq: freq,\n                                            option: option\n                                        };\n                                    }).filter(function (fo) {\n                                        return fo.option.input != false || fo.option.value != 0;\n                                    });\n                                }\n                            },\n                            {\n                                key: 'skipNode',\n                                get: function () {\n                                    return this.affectedFreqsAndOptions.length == 0;\n                                }\n                            }\n                        ]);\n                        return equalizer;\n                    }(Filter)\n                };\n                var FilterSequence = function (_CollectionFeature) {\n                    babelHelpers.inherits(FilterSequence, _CollectionFeature);\n                    function FilterSequence() {\n                        babelHelpers.classCallCheck(this, FilterSequence);\n                        return babelHelpers.possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    FilterSequence.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return filterClasses[entryOption.filter];\n                    };\n                    FilterSequence.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (!featureContext.audioProcessing)\n                            return;\n                        this.entries.forEach(function (entry) {\n                            if (!entry.skipNode) {\n                                featureContext.audioContext = true;\n                                entry.requestFeatureContext(featureContext);\n                            }\n                        });\n                    };\n                    FilterSequence.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return Lines.bae.apply(Lines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            return entry.getHtmlLines(featureContext, i18n);\n                        }));\n                    };\n                    FilterSequence.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return Lines.be();\n                        return InterleaveLines.bae.apply(InterleaveLines, this.entries.filter(function (entry) {\n                            return !entry.skipNode;\n                        }).map(function (entry) {\n                            var lines = entry.getJsInitLines(i18n, prevNodeJsNames);\n                            prevNodeJsNames = entry.nodeJsNames;\n                            return lines;\n                        }));\n                    };\n                    FilterSequence.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (!featureContext.audioProcessing)\n                            return prevNodeJsNames;\n                        this.entries.forEach(function (entry) {\n                            if (!entry.skipNode) {\n                                prevNodeJsNames = entry.nodeJsNames;\n                            }\n                        });\n                        return prevNodeJsNames;\n                    };\n                    return FilterSequence;\n                }(CollectionFeature);\n                module.exports = FilterSequence;\n            },\n            {\n                '10': 10,\n                '14': 14,\n                '15': 15,\n                '16': 16,\n                '17': 17,\n                '22': 22,\n                '24': 24,\n                '30': 30,\n                '5': 5\n            }\n        ],\n        35: [\n            function (require, module, exports) {\n                'use strict';\n                var langStrings = {\n                    en: {\n                        'options.sources': 'Sources',\n                        'options.sources.{audio,video}': '{Audio,Video} element',\n                        'options.sources.{audio,video}.add': 'Add {} element',\n                        'options.sources.{audio,video}.url': 'Source URL',\n                        'options.sources.video.{width,height}': 'Player {}',\n                        'options.filters': 'Filters',\n                        'options.filters.gain': 'Gain',\n                        'options.filters.gain.add': 'Add gain',\n                        'options.filters.gain.gain': 'Gain',\n                        'options.filters.panner': 'Stereo panner',\n                        'options.filters.panner.add': 'Add stereo panner',\n                        'options.filters.panner.pan': 'Pan',\n                        'options.filters.biquad': 'Biquad filter',\n                        // [[Digital biquad filter]]\n                        'options.filters.biquad.add': 'Add biquad filter',\n                        'options.filters.biquad.type': 'Filter type',\n                        'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': '{}',\n                        'options.filters.biquad.frequency': 'Frequency',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': 'log(Q)',\n                        'options.filters.biquad.gain': 'Gain',\n                        'options.filters.iir': 'IIR filter',\n                        'options.filters.iir.add': 'Add IIR filter',\n                        'options.filters.iir.feedforward': 'Feedforward coefficients',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': 'Add coefficient',\n                        'options.filters.iir.feedback': 'Feedback coefficients',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': 'Add coefficient',\n                        'options.filters.convolver': 'Convolver',\n                        'options.filters.convolver.add': 'Add convolver',\n                        'options.filters.convolver.url': 'Impulse responce URL',\n                        'options.filters.convolver.reverb': 'Reverb (dry/wet)',\n                        'options.filters.convolver.buffer.loading': 'Loading and decoding the impulse response',\n                        'options.filters.convolver.buffer.error': 'Error while loading the impulse response',\n                        'options.filters.equalizer': 'Equalizer',\n                        'options.filters.equalizer.add': 'Add equalizer',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': '{} Hz gain',\n                        'options.destination': 'Destination',\n                        'options.destination.compressor': 'Add dynamics compressor before the destination',\n                        'options.destination.compressor.enable': 'Enable dynamics compressor',\n                        'options.destination.waveform': 'Add waveform visualization',\n                        'options.canvas': 'Canvas',\n                        'options.canvas.{width,height}': 'Canvas {}',\n                        'options.canvas.line': 'Waveform line',\n                        'options.canvas.line.width': 'Waveform line width',\n                        'options.canvas.line.color': 'Waveform line color',\n                        'options.canvas.line.color.{r,g,b,a}': 'Waveform line {red,green,blue,opacity}',\n                        'options.canvas.background': 'Background',\n                        'options.canvas.background.type': 'Background type',\n                        'options.canvas.background.type.{clear,filled}': '{}',\n                        'options.canvas.background.color': 'Background fill color',\n                        'options.canvas.background.color.{r,g,b,a}': 'Background fill {red,green,blue,opacity (blur)}',\n                        'options-output.input': 'Editable',\n                        'options-output.range': 'with range',\n                        'options-output.filter.frequencyResponse': 'Frequency response',\n                        'options-output.filter.magnitude': 'Magnitude',\n                        'options-output.filter.phase': 'Phase',\n                        'options-output.filter.contextError': 'Error creating audio context. Your browser likely doesn\\'t support Web Audio API.',\n                        'options-output.filter.nodeError': 'Error creating filter node. Your browser likely doesn\\'t support this filter type.',\n                        'options-output.filter.biquad.clone': 'Clone as IIR filter',\n                        'options-output.filter.biquad.clone.{pre,post}': 'Clone with {}-2016-04-15 coefficients',\n                        'options-output.show': 'Show',\n                        'options-output.hide': 'Hide',\n                        'code-output.warning.jsfiddle-run': 'You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working',\n                        'code-output.warning.interesting': 'You need at least one source and some processing enabled to get interesting JavaScript code',\n                        'code.title': 'Web Audio API example \\u2014 generated code',\n                        'comment.context': 'create [audio context][context]',\n                        'comment.sources.audio': 'create [audio source node][source]',\n                        'comment.sources.video': 'create [video source node][source]',\n                        'comment.filters.gain': 'create [gain node][gain]',\n                        'comment.filters.panner': 'create [stereo panner node][panner]',\n                        'comment.filters.biquad': 'create [biquad filter node][biquad]',\n                        'comment.filters.iir': 'create [IIR filter node][iir]',\n                        'comment.filters.convolver': 'create dry and wet routes with [convolver node][convolver]',\n                        'comment.filters.convolver.single': 'create [convolver node][convolver]',\n                        'comment.filters.equalizer': 'create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]',\n                        'comment.filters.equalizer.single': 'create equalizer as a [peaking][peaking] [biquad filter node][biquad]',\n                        'comment.destination': 'connect last node to [destination][destination]',\n                        'comment.destination.compressor': 'create [dynamics compressor node][compressor]',\n                        'comment.destination.waveform': 'create [analyser node][analyser] for waveform visualization',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2}': 'pixel{,s}',\n                        'units.hertz.a': 'Hz',\n                        'units.hertz.{1,2}': 'Hertz',\n                        'units.decibel.a': 'dB',\n                        'units.decibel.{1,2}': 'decibel{,s}'\n                    },\n                    ru: {\n                        'options.sources': 'Источники',\n                        'options.sources.{audio,video}': 'Элемент <code>{}</code>',\n                        'options.sources.{audio,video}.add': 'Добавить элемент <code>{}</code>',\n                        'options.sources.{audio,video}.url': 'URL источника',\n                        'options.sources.video.{width,height}': '{Ширина,Высота} проигрывателя',\n                        'options.filters': 'Фильтры',\n                        'options.filters.gain': 'Усилитель',\n                        'options.filters.gain.add': 'Добавить усилитель',\n                        'options.filters.gain.gain': 'Коэффициент усиления',\n                        'options.filters.panner': 'Панорамирование',\n                        'options.filters.panner.add': 'Добавить панорамирование',\n                        'options.filters.panner.pan': 'Баланс',\n                        'options.filters.biquad': 'Биквадратичный фильтр',\n                        'options.filters.biquad.add': 'Добавить биквадратичный фильтр',\n                        'options.filters.biquad.type': 'Тип фильтра',\n                        'options.filters.biquad.type.lowpass': 'нижних частот',\n                        'options.filters.biquad.type.highpass': 'верхних частот',\n                        'options.filters.biquad.type.bandpass': 'полосовой',\n                        'options.filters.biquad.type.{lowshelf,highshelf,peaking}': '{}',\n                        // TODO\n                        'options.filters.biquad.type.notch': 'полосно-заграждающий',\n                        'options.filters.biquad.type.allpass': 'всепропускающий',\n                        // http://www.dsplib.ru/content/allpass/allpass.html\n                        'options.filters.biquad.frequency': 'Частота',\n                        'options.filters.biquad.detune': 'Detune',\n                        'options.filters.biquad.Q': 'Логарифм добротности',\n                        'options.filters.biquad.gain': 'Усиление',\n                        'options.filters.iir': 'БИХ-фильтр',\n                        'options.filters.iir.add': 'Добавить БИХ-фильтр',\n                        'options.filters.iir.feedforward': 'Коэффициенты прямой связи',\n                        // Transfer fn numerator coefs\n                        'options.filters.iir.feedforward.b': 'b',\n                        'options.filters.iir.feedforward.b.add': 'Добавить коэффициент',\n                        'options.filters.iir.feedback': 'Коэффициенты обратной связи',\n                        // Transfer fn denominator coefs\n                        'options.filters.iir.feedback.a': 'a',\n                        'options.filters.iir.feedback.a.add': 'Добавить коэффициент',\n                        'options.filters.convolver': 'Свёртка',\n                        'options.filters.convolver.add': 'Добавить свёртку',\n                        'options.filters.convolver.url': 'URL импульсной характеристики',\n                        'options.filters.convolver.reverb': 'Соотношение прямого/обработанного звука',\n                        // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\n                        'options.filters.convolver.buffer.loading': 'Идёт загрузка и декодирование импульсной характеристики',\n                        'options.filters.convolver.buffer.error': 'Ошибка загрузки импульсной характеристики',\n                        'options.filters.equalizer': 'Эквалайзер',\n                        'options.filters.equalizer.add': 'Добавить эквалайзер',\n                        'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': 'Усиление частоты {} Гц',\n                        'options.destination': 'Выход',\n                        'options.destination.compressor': 'Добавить компрессор перед выходом',\n                        'options.destination.compressor.enable': 'Включить компрессор',\n                        'options.destination.waveform': 'Добавить визуализацию формы волны',\n                        'options.canvas': 'Элемент <code>canvas</code>',\n                        'options.canvas.{width,height}': '{Ширина,Высота} элемента <code>canvas</code>',\n                        'options.canvas.line': 'Линия волны',\n                        'options.canvas.line.width': 'Ширина линии волны',\n                        'options.canvas.line.color': 'Цвет линии волны',\n                        'options.canvas.line.color.{r,g,b,a}': '{Красный ,Зелёный ,Синий ,Альфа-}канал линии волны',\n                        'options.canvas.background': 'Фон',\n                        'options.canvas.background.type': 'Тип фона',\n                        'options.canvas.background.type.{clear,filled}': '{прозрачный,закрашенный}',\n                        'options.canvas.background.color': 'Цвет фона',\n                        'options.canvas.background.color.{r,g,b,a}': '{Красный ,Зелёный ,Синий ,Альфа-}канал фона',\n                        'options-output.input': 'Значение изменяемо',\n                        'options-output.range': 'в диапазоне',\n                        'options-output.filter.frequencyResponse': 'Частотная характеристика',\n                        'options-output.filter.magnitude': 'Амплитуда',\n                        'options-output.filter.phase': 'Фаза',\n                        'options-output.filter.contextError': 'Ошибка создания аудио-контекста. Вероятно, браузер не поддерживает Web Audio API.',\n                        'options-output.filter.nodeError': 'Ошибка создания узла фильтра. Вероятно, браузер не поддерживает данный тип фильтров.',\n                        'options-output.filter.biquad.clone': 'Клонировать в виде БИХ-фильтра',\n                        'options-output.filter.biquad.clone.{pre,post}': 'Клонировать с коэффициентами по версиям {до,после} 2016-04-15',\n                        'options-output.show': 'Показать',\n                        'options-output.hide': 'Скрыть',\n                        'code-output.warning.jsfiddle-run': 'Для корректного вывода звука в JSFiddle может потребоваться нажатие кнопки <kbd>Run</kbd>',\n                        'code-output.warning.interesting': 'Для нетривиального JavaScript-кода нужно включить по крайней мере один источник и последующую обработку звука',\n                        'code.title': 'Пример использования Web Audio API \\u2014 сгенерированный код',\n                        'comment.context': 'создаём [аудио-контекст][context]',\n                        'comment.sources.audio': 'создаём [узел источника аудио][source]',\n                        'comment.sources.video': 'создаём [узел источника видео][source]',\n                        'comment.filters.gain': 'создаём [узел усилителя][gain]',\n                        'comment.filters.panner': 'создаём [узел панорамирования][panner]',\n                        'comment.filters.biquad': 'создаём [узел биквадратичного фильтра][biquad]',\n                        'comment.filters.iir': 'создаём [узел БИХ-фильтра][iir]',\n                        'comment.filters.convolver': 'создаём прямой путь и путь через [узел свёртки][convolver]',\n                        'comment.filters.convolver.single': 'создаём [узел свёртки][convolver]',\n                        'comment.filters.equalizer': 'создаём эквалайзер в виде последовательности [peaking][peaking] [биквадратичных фильтров][biquad]',\n                        'comment.filters.equalizer.single': 'создаём эквалайзер в виде [peaking][peaking] [биквадратичного фильтра][biquad]',\n                        'comment.destination': 'соединяем последний узел с [выходом][destination]',\n                        'comment.destination.compressor': 'создаём [узел компрессора][compressor]',\n                        'comment.destination.waveform': 'создаём [узел анализатора][analyser] для визуализации формы волны',\n                        'units.pixel.a': 'px',\n                        'units.pixel.{1,2,5}': 'пиксел{ь,я,ей}',\n                        'units.hertz.a': 'Гц',\n                        'units.hertz.{1,2,5}': 'Герц{,а,}',\n                        'units.decibel.a': 'дБ',\n                        'units.decibel.{1,2,5}': 'децибел{,а,ов}'\n                    }\n                };\n                /*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\n                for (var lang in langStrings) {\n                    var strings = langStrings[lang];\n                    strings = require(12)(strings);\n                    //strings=require('crnx-base/i18n-link-wikipedia')(lang)(strings)\n                    strings = require(19)(lang)(strings);\n                    strings = require(2)(lang)(strings);\n                    langStrings[lang] = strings;\n                }\n                module.exports = require(13)(langStrings);\n            },\n            {\n                '12': 12,\n                '13': 13,\n                '19': 19,\n                '2': 2\n            }\n        ],\n        36: [\n            function (require, module, exports) {\n                'use strict';\n                var FilterOptionOutput = require(33);\n                var IIRFilterOptionOutput = function (_FilterOptionOutput) {\n                    babelHelpers.inherits(IIRFilterOptionOutput, _FilterOptionOutput);\n                    function IIRFilterOptionOutput() {\n                        babelHelpers.classCallCheck(this, IIRFilterOptionOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _FilterOptionOutput.apply(this, arguments));\n                    }\n                    IIRFilterOptionOutput.prototype.getFilterNode = function getFilterNode(audioContext) {\n                        return audioContext.createIIRFilter(this.option.entries[0].entries.map(function (entry) {\n                            return entry.value;\n                        }), this.option.entries[1].entries.map(function (entry) {\n                            return entry.value;\n                        }));\n                    };\n                    return IIRFilterOptionOutput;\n                }(FilterOptionOutput);\n                module.exports = IIRFilterOptionOutput;\n            },\n            { '33': 33 }\n        ],\n        37: [\n            function (require, module, exports) {\n                'use strict';\n                var idCounter = 0;\n                function generateId() {\n                    return 'webaudio-starter-id-' + idCounter++;\n                }\n                var i18ns = require(35);\n                var Options = require(40);\n                var Code = require(29);\n                var OptionsOutput = require(39);\n                var CodeOutput = require(28);\n                $(function () {\n                    $('.webaudio-starter').each(function () {\n                        var $container = $(this);\n                        var lang = $container.closest('[lang]').attr('lang');\n                        var i18n = i18ns(lang);\n                        var options = new Options();\n                        var codeOutput = new CodeOutput(function () {\n                            return new Code(options.fix(), i18n);\n                        }, i18n);\n                        options.addUpdateCallback(codeOutput.update);\n                        var optionsOutput = new OptionsOutput(options, generateId, i18n);\n                        $container.empty().append(optionsOutput.$output, codeOutput.$output);\n                    });\n                });\n            },\n            {\n                '28': 28,\n                '29': 29,\n                '35': 35,\n                '39': 39,\n                '40': 40\n            }\n        ],\n        38: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = Object.create(require(18));\n                // differs from webgl-starter:\n                //\tinput is a boolean\n                // \tfloat subclasses have a fixed precision of 2\n                //\tno speed\n                //\tcan specify defaultMin, defaultMax\n                //\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\n                Option.LiveNumber = function (_Option$Number) {\n                    babelHelpers.inherits(_class, _Option$Number);\n                    function _class(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class);\n                        var dataValue = undefined, dataMin = undefined, dataMax = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataMin = data.min;\n                            dataMax = data.max;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this = babelHelpers.possibleConstructorReturn(this, _Option$Number.apply(this, arguments));\n                        if (settings.defaultMin !== undefined) {\n                            _this.defaultMin = settings.defaultMin;\n                        } else {\n                            _this.defaultMin = _this.availableMin;\n                        }\n                        if (settings.defaultMax !== undefined) {\n                            _this.defaultMax = settings.defaultMax;\n                        } else {\n                            _this.defaultMax = _this.availableMax;\n                        }\n                        _this._min = dataMin !== undefined ? dataMin : _this.defaultMin;\n                        _this._max = dataMax !== undefined ? dataMax : _this.defaultMax;\n                        _this._input = !!dataInput;\n                        _this._$range = null;\n                        return _this;\n                    }\n                    _class.prototype.updateInternalVisibility = function updateInternalVisibility() {\n                        if (this._$range)\n                            this._$range.toggle(this._input);\n                    };\n                    _class.prototype.exportHelper = function exportHelper(src) {\n                        var data = {};\n                        if (src.value != src.defaultValue)\n                            data.value = src.value;\n                        if (src.min != src.availableMin)\n                            data.min = src.min;\n                        if (src.max != src.availableMax)\n                            data.max = src.max;\n                        if (src.input)\n                            data.input = src.input;\n                        return data;\n                    };\n                    _class.prototype.export = function _export() {\n                        return this.exportHelper(this);\n                    };\n                    _class.prototype.fix = function fix() {\n                        var fixed = _Option$Number.prototype.fix.call(this);\n                        fixed.min = this.min;\n                        fixed.max = this.max;\n                        fixed.input = this.input;\n                        fixed.defaultValue = this.defaultValue;\n                        return fixed;\n                    };\n                    babelHelpers.createClass(_class, [\n                        {\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.updateInternalVisibility();\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'min',\n                            get: function () {\n                                return this._min;\n                            },\n                            set: function (min) {\n                                this._min = min;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: 'max',\n                            get: function () {\n                                return this._max;\n                            },\n                            set: function (max) {\n                                this._max = max;\n                                this.update();\n                            }\n                        },\n                        {\n                            key: '$range',\n                            get: function () {\n                                return this._$range;\n                            },\n                            set: function ($range) {\n                                this._$range = $range;\n                                this.updateInternalVisibility();\n                            }\n                        }\n                    ]);\n                    return _class;\n                }(Option.Number);\n                Option.LiveInt = function (_Option$LiveNumber) {\n                    babelHelpers.inherits(_class2, _Option$LiveNumber);\n                    function _class2() {\n                        babelHelpers.classCallCheck(this, _class2);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class2, [{\n                            key: 'precision',\n                            get: function () {\n                                return 0;\n                            }\n                        }]);\n                    return _class2;\n                }(Option.LiveNumber);\n                Option.LiveFloat = function (_Option$LiveNumber2) {\n                    babelHelpers.inherits(_class3, _Option$LiveNumber2);\n                    function _class3() {\n                        babelHelpers.classCallCheck(this, _class3);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$LiveNumber2.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(_class3, [{\n                            key: 'precision',\n                            get: function () {\n                                return 2;\n                            }\n                        }]);\n                    return _class3;\n                }(Option.LiveNumber);\n                var FixedLiveSelect = function () {\n                    function FixedLiveSelect(src) {\n                        babelHelpers.classCallCheck(this, FixedLiveSelect);\n                        this.value = src.value;\n                        this.input = src.input;\n                        this.defaultValue = src.defaultValue;\n                        this.availableValues = src.availableValues;\n                        this.name = src.name;\n                    }\n                    FixedLiveSelect.prototype.valueOf = function valueOf() {\n                        return this.value;\n                    };\n                    FixedLiveSelect.prototype.toString = function toString() {\n                        return this.value;\n                    };\n                    return FixedLiveSelect;\n                }();\n                Option.LiveSelect = function (_Option$Select) {\n                    babelHelpers.inherits(_class4, _Option$Select);\n                    function _class4(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class4);\n                        var dataValue = undefined, dataInput = undefined;\n                        if (typeof data == 'object') {\n                            dataValue = data.value;\n                            dataInput = data.input;\n                        } else {\n                            dataValue = data;\n                        }\n                        var _this4 = babelHelpers.possibleConstructorReturn(this, _Option$Select.apply(this, arguments));\n                        _this4._input = !!dataInput;\n                        return _this4;\n                    }\n                    _class4.prototype.export = function _export() {\n                        var data = {};\n                        if (this.value != this.defaultValue)\n                            data.value = this.value;\n                        if (this.input)\n                            data.input = this.input;\n                        return data;\n                    };\n                    _class4.prototype.fix = function fix() {\n                        return new FixedLiveSelect(this);\n                    };\n                    babelHelpers.createClass(_class4, [{\n                            key: 'input',\n                            get: function () {\n                                return this._input;\n                            },\n                            set: function (input) {\n                                this._input = input;\n                                this.update();\n                            }\n                        }]);\n                    return _class4;\n                }(Option.Select);\n                Option.AnyFloat = function (_Option$NonBoolean) {\n                    babelHelpers.inherits(_class5, _Option$NonBoolean);\n                    function _class5() {\n                        babelHelpers.classCallCheck(this, _class5);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$NonBoolean.apply(this, arguments));\n                    }\n                    return _class5;\n                }(Option.NonBoolean);\n                Option.BiquadFilter = function (_Option$Group) {\n                    babelHelpers.inherits(_class6, _Option$Group);\n                    function _class6() {\n                        babelHelpers.classCallCheck(this, _class6);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Group.apply(this, arguments));\n                    }\n                    _class6.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'LiveSelect',\n                                'type',\n                                [\n                                    'lowpass',\n                                    'highpass',\n                                    'bandpass',\n                                    'lowshelf',\n                                    'highshelf',\n                                    'peaking',\n                                    'notch',\n                                    'allpass'\n                                ]\n                            ],\n                            [\n                                'LiveInt',\n                                'frequency',\n                                [\n                                    0,\n                                    22050\n                                ],\n                                350,\n                                { unit: 'hertz' }\n                            ],\n                            [\n                                'LiveInt',\n                                'detune',\n                                [\n                                    0,\n                                    100\n                                ],\n                                { unit: '\\xA2' }\n                            ],\n                            [\n                                'LiveFloat',\n                                'Q',\n                                [\n                                    -4,\n                                    4\n                                ],\n                                0\n                            ],\n                            // log Q\n                            [\n                                'LiveInt',\n                                'gain',\n                                [\n                                    -30,\n                                    30\n                                ],\n                                0,\n                                { unit: 'decibel' }\n                            ]\n                        ];\n                        return _Option$Group.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    return _class6;\n                }(Option.Group);\n                Option.IIRFilterCoefs = function (_Option$Array) {\n                    babelHelpers.inherits(_class7, _Option$Array);\n                    function _class7(name, settings, data, parent, visibilityManager, makeEntry) {\n                        babelHelpers.classCallCheck(this, _class7);\n                        var _this7 = babelHelpers.possibleConstructorReturn(this, _Option$Array.apply(this, arguments));\n                        if (_this7._entries.length == 0) {\n                            var type = _this7.availableTypes[0];\n                            _this7._entries.push(_this7.makeEntry(type));\n                        }\n                        return _this7;\n                    }\n                    return _class7;\n                }(Option.Array);\n                Option.IIRFilter = function (_Option$Group2) {\n                    babelHelpers.inherits(_class8, _Option$Group2);\n                    function _class8() {\n                        babelHelpers.classCallCheck(this, _class8);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Group2.apply(this, arguments));\n                    }\n                    _class8.collectArgs = function collectArgs(scalarArg, arrayArg, settings) {\n                        settings = Object.create(settings);\n                        settings.descriptions = [\n                            [\n                                'IIRFilterCoefs',\n                                'feedforward',\n                                [[\n                                        'AnyFloat',\n                                        'b',\n                                        1\n                                    ]]\n                            ],\n                            [\n                                'IIRFilterCoefs',\n                                'feedback',\n                                [[\n                                        'AnyFloat',\n                                        'a',\n                                        1\n                                    ]]\n                            ]\n                        ];\n                        return _Option$Group2.collectArgs.call(this, scalarArg, arrayArg, settings);\n                    };\n                    return _class8;\n                }(Option.Group);\n                Option.Filters = function (_Option$Array2) {\n                    babelHelpers.inherits(_class9, _Option$Array2);\n                    function _class9() {\n                        babelHelpers.classCallCheck(this, _class9);\n                        return babelHelpers.possibleConstructorReturn(this, _Option$Array2.apply(this, arguments));\n                    }\n                    return _class9;\n                }(Option.Array);\n                module.exports = Option;\n            },\n            { '18': 18 }\n        ],\n        39: [\n            function (require, module, exports) {\n                'use strict';\n                var Option = require(38);\n                var BaseOptionsOutput = require(20);\n                var ArrayOptionOutput = require(1);\n                var BiquadFilterOptionOutput = require(26);\n                var IIRFilterOptionOutput = require(36);\n                var FiltersOptionOutput = function (_ArrayOptionOutput) {\n                    babelHelpers.inherits(FiltersOptionOutput, _ArrayOptionOutput);\n                    function FiltersOptionOutput() {\n                        babelHelpers.classCallCheck(this, FiltersOptionOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _ArrayOptionOutput.apply(this, arguments));\n                    }\n                    FiltersOptionOutput.prototype.writeDraggableSubOption = function writeDraggableSubOption(subOption, writeOption, i18n) {\n                        var $subOutput = _ArrayOptionOutput.prototype.writeDraggableSubOption.call(this, subOption, writeOption, i18n);\n                        var This = this;\n                        if (subOption instanceof Option.BiquadFilter) {\n                            $subOutput.find('button.clone').click(function () {\n                                var $button = $(this);\n                                var coefs = $button.data('coefs');\n                                if (coefs) {\n                                    var entry = This.option.makeEntry('iir', coefs);\n                                    This.$entries.append(This.writeDraggableSubOption(entry, writeOption, i18n));\n                                    This.updateArrayEntries();\n                                }\n                            });\n                        }\n                        return $subOutput;\n                    };\n                    return FiltersOptionOutput;\n                }(ArrayOptionOutput);\n                var IIRFilterCoefsOptionOutput = function (_ArrayOptionOutput2) {\n                    babelHelpers.inherits(IIRFilterCoefsOptionOutput, _ArrayOptionOutput2);\n                    function IIRFilterCoefsOptionOutput(option, writeOption, i18n, generateId) {\n                        babelHelpers.classCallCheck(this, IIRFilterCoefsOptionOutput);\n                        var _this2 = babelHelpers.possibleConstructorReturn(this, _ArrayOptionOutput2.call(this, option, writeOption, i18n, generateId));\n                        _this2.updateArrayEntryLabels();\n                        return _this2;\n                    }\n                    IIRFilterCoefsOptionOutput.prototype.canDeleteEntry = function canDeleteEntry($entry) {\n                        return this.option.entries.length > 1;\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntries = function updateArrayEntries() {\n                        _ArrayOptionOutput2.prototype.updateArrayEntries.call(this);\n                        this.updateArrayEntryLabels();\n                    };\n                    IIRFilterCoefsOptionOutput.prototype.updateArrayEntryLabels = function updateArrayEntryLabels() {\n                        this.$entries.children().each(function (i) {\n                            var c = $(this).data('option').name;\n                            $(this).find('label').html(c + '<sub>' + i + '</sub>:');\n                        });\n                    };\n                    return IIRFilterCoefsOptionOutput;\n                }(ArrayOptionOutput);\n                var OptionsOutput = function (_BaseOptionsOutput) {\n                    babelHelpers.inherits(OptionsOutput, _BaseOptionsOutput);\n                    function OptionsOutput() {\n                        babelHelpers.classCallCheck(this, OptionsOutput);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptionsOutput.apply(this, arguments));\n                    }\n                    OptionsOutput.prototype.setOptionClassWriters = function setOptionClassWriters(optionClassWriters) {\n                        _BaseOptionsOutput.prototype.setOptionClassWriters.call(this, optionClassWriters);\n                        optionClassWriters.set(Option.LiveNumber, function (option, writeOption, i18n, generateId) {\n                            var p = option.precision;\n                            var setInputAttrs = function ($input) {\n                                return $input.attr('min', option.availableMin).attr('max', option.availableMax).attr('step', Math.pow(0.1, p).toFixed(p));\n                            };\n                            var writeMinMaxInput = function (minOrMax) {\n                                return setInputAttrs($('<input type=\\'number\\' required>')).val(option[minOrMax]).on('input change', function () {\n                                    if (this.checkValidity()) {\n                                        option[minOrMax] = parseFloat(this.value);\n                                    }\n                                });\n                            };\n                            var inputCheckboxId = generateId();\n                            var $inputCheckbox = undefined, $rangeMinInput = undefined, $rangeMaxInput = undefined;\n                            var $output = optionClassWriters.get(Option.Number)(option, writeOption, i18n, generateId);\n                            $output.find('button').before($inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ', option.$range = $('<span class=\\'range\\'>').append(i18n('options-output.range') + ' ', $rangeMinInput = writeMinMaxInput('min'), ' .. ', $rangeMaxInput = writeMinMaxInput('max')), ' ').click(function () {\n                                $inputCheckbox.prop('checked', false).change();\n                                $rangeMinInput.val(option.defaultMin).change();\n                                $rangeMaxInput.val(option.defaultMax).change();\n                            });\n                            return $output;\n                        });\n                        optionClassWriters.set(Option.LiveSelect, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            var inputCheckboxId = generateId();\n                            var $select = undefined, $inputCheckbox = undefined;\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label> ', $select = $('<select id=\\'' + id + '\\'>').append(option.availableValues.map(function (availableValue) {\n                                return $('<option>').val(availableValue).html(i18n('options.' + option.fullName + '.' + availableValue));\n                            })).val(option.value).change(function () {\n                                option.value = this.value;\n                            }), ' ', $inputCheckbox = $('<input type=\\'checkbox\\' id=\\'' + inputCheckboxId + '\\'>').prop('checked', option.input).change(function () {\n                                option.input = $(this).prop('checked');\n                            }), ' <label for=\\'' + inputCheckboxId + '\\'>' + i18n('options-output.input') + '</label> ', $('<button type=\\'button\\'>' + i18n('options-output.reset') + '</button>').click(function () {\n                                $select.val(option.defaultValue).change();\n                                $inputCheckbox.prop('checked', false).change();\n                            }));\n                        });\n                        optionClassWriters.set(Option.AnyFloat, function (option, writeOption, i18n, generateId) {\n                            var id = generateId();\n                            return option.$ = $('<div class=\\'option\\'>').append('<label for=\\'' + id + '\\'>' + i18n('options.' + option.fullName) + ':</label> ', $('<input type=\\'number\\' id=\\'' + id + '\\' step=\\'any\\' required>').val(option.value).on('input change', function () {\n                                if (this.checkValidity()) {\n                                    option.value = parseFloat(this.value);\n                                }\n                            }));\n                        });\n                        optionClassWriters.set(Option.BiquadFilter, function () {\n                            return new (Function.prototype.bind.apply(BiquadFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.IIRFilter, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.IIRFilterCoefs, function () {\n                            return new (Function.prototype.bind.apply(IIRFilterCoefsOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                        optionClassWriters.set(Option.Filters, function () {\n                            return new (Function.prototype.bind.apply(FiltersOptionOutput, [null].concat(Array.prototype.slice.call(arguments))))().$output;\n                        });\n                    };\n                    return OptionsOutput;\n                }(BaseOptionsOutput);\n                module.exports = OptionsOutput;\n            },\n            {\n                '1': 1,\n                '20': 20,\n                '26': 26,\n                '36': 36,\n                '38': 38\n            }\n        ],\n        40: [\n            function (require, module, exports) {\n                'use strict';\n                var BaseOptions = require(21);\n                var Options = function (_BaseOptions) {\n                    babelHelpers.inherits(Options, _BaseOptions);\n                    function Options() {\n                        babelHelpers.classCallCheck(this, Options);\n                        return babelHelpers.possibleConstructorReturn(this, _BaseOptions.apply(this, arguments));\n                    }\n                    babelHelpers.createClass(Options, [\n                        {\n                            key: 'entriesDescription',\n                            get: function () {\n                                return [\n                                    [\n                                        'Array',\n                                        'sources',\n                                        [\n                                            [\n                                                'Group',\n                                                'audio',\n                                                [[\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            // original w3c mooc - is down now\n                                                            /*\r\n   'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n   'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n   'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n   */\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg'\n                                                        ]\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'video',\n                                                [\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.webm',\n                                                            'http://mainline.i3s.unice.fr/mooc/sintel.mp4'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'width',\n                                                        [\n                                                            1,\n                                                            1920\n                                                        ],\n                                                        320,\n                                                        { unit: 'pixel' }\n                                                    ],\n                                                    [\n                                                        'Int',\n                                                        'height',\n                                                        [\n                                                            1,\n                                                            1080\n                                                        ],\n                                                        240,\n                                                        { unit: 'pixel' }\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        'source'\n                                    ],\n                                    [\n                                        'Filters',\n                                        'filters',\n                                        [\n                                            [\n                                                'Group',\n                                                'gain',\n                                                [[\n                                                        'LiveFloat',\n                                                        'gain',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        { defaultMax: 1 }\n                                                    ]]\n                                            ],\n                                            [\n                                                'Group',\n                                                'panner',\n                                                [[\n                                                        'LiveFloat',\n                                                        'pan',\n                                                        [\n                                                            -1,\n                                                            1\n                                                        ],\n                                                        0\n                                                    ]]\n                                            ],\n                                            [\n                                                'BiquadFilter',\n                                                'biquad'\n                                            ],\n                                            [\n                                                'IIRFilter',\n                                                'iir'\n                                            ],\n                                            [\n                                                'Group',\n                                                'convolver',\n                                                [\n                                                    [\n                                                        'LiveFloat',\n                                                        'reverb',\n                                                        [\n                                                            0,\n                                                            1\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Text',\n                                                        'url',\n                                                        [// original w3c mooc - is down now\n                                                            /*\r\n   'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n   */\n                                                            // Web Audio Playground via RawGit\n                                                            'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg']\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'equalizer',\n                                                [\n                                                    60,\n                                                    170,\n                                                    350,\n                                                    1000,\n                                                    3500,\n                                                    10000\n                                                ].map(function (freq) {\n                                                    return [\n                                                        'LiveInt',\n                                                        'gain' + freq,\n                                                        [\n                                                            -30,\n                                                            30\n                                                        ],\n                                                        0,\n                                                        { unit: 'decibel' }\n                                                    ];\n                                                })\n                                            ]\n                                        ],\n                                        'filter'\n                                    ],\n                                    [\n                                        'Group',\n                                        'destination',\n                                        [\n                                            [\n                                                'Checkbox',\n                                                'compressor'\n                                            ],\n                                            // Firefox compresses automatically?\n                                            [\n                                                'Checkbox',\n                                                'waveform'\n                                            ]\n                                        ]\n                                    ],\n                                    [\n                                        'Group',\n                                        'canvas',\n                                        [\n                                            [\n                                                'Int',\n                                                'width',\n                                                [\n                                                    1,\n                                                    1920\n                                                ],\n                                                300,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Int',\n                                                'height',\n                                                [\n                                                    1,\n                                                    1080\n                                                ],\n                                                100,\n                                                { unit: 'pixel' }\n                                            ],\n                                            [\n                                                'Group',\n                                                'line',\n                                                [\n                                                    [\n                                                        'Float',\n                                                        'width',\n                                                        [\n                                                            0,\n                                                            10\n                                                        ],\n                                                        1,\n                                                        { unit: 'pixel' }\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                0,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ]\n                                                    ]\n                                                ]\n                                            ],\n                                            [\n                                                'Group',\n                                                'background',\n                                                [\n                                                    [\n                                                        'Select',\n                                                        'type',\n                                                        [\n                                                            'clear',\n                                                            'filled'\n                                                        ]\n                                                    ],\n                                                    [\n                                                        'Group',\n                                                        'color',\n                                                        [\n                                                            [\n                                                                'Int',\n                                                                'r',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'g',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'b',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ],\n                                                            [\n                                                                'Int',\n                                                                'a',\n                                                                [\n                                                                    0,\n                                                                    100\n                                                                ],\n                                                                100,\n                                                                { unit: '%' }\n                                                            ]\n                                                        ],\n                                                        { visibilityData: { 'canvas.background.type': ['filled'] } }\n                                                    ]\n                                                ]\n                                            ]\n                                        ],\n                                        { visibilityData: { 'destination.waveform': [true] } }\n                                    ]\n                                ];\n                            }\n                        },\n                        {\n                            key: 'optionClasses',\n                            get: function () {\n                                return require(38);\n                            }\n                        }\n                    ]);\n                    return Options;\n                }(BaseOptions);\n                module.exports = Options;\n            },\n            {\n                '21': 21,\n                '38': 38\n            }\n        ],\n        41: [\n            function (require, module, exports) {\n                'use strict';\n                var _templateObject = babelHelpers.taggedTemplateLiteralLoose([\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ], [\n                        '<audio src=',\n                        ' id=',\n                        ' controls loop crossorigin=',\n                        '></audio>'\n                    ]), _templateObject2 = babelHelpers.taggedTemplateLiteralLoose([\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ], [\n                        '<video src=',\n                        ' id=',\n                        ' width=',\n                        ' height=',\n                        ' controls loop crossorigin=',\n                        '></video>'\n                    ]);\n                var camelCase = require(5);\n                var Lines = require(16);\n                var JsLines = require(15);\n                var WrapLines = require(24);\n                var InterleaveLines = require(14);\n                var RefLines = require(22);\n                var CollectionFeature = require(30);\n                var Source = function () {\n                    function Source(options, n) {\n                        babelHelpers.classCallCheck(this, Source);\n                        this.options = options;\n                        this.n = n;\n                    }\n                    Source.prototype.getHtmlLines = function getHtmlLines(featureContext, i18n) {\n                        return WrapLines.b('<div>', '</div>').ae(this.getElementHtmlLines(featureContext, i18n));\n                    };\n                    Source.prototype.getJsInitLines = function getJsInitLines(i18n) {\n                        return JsLines.bae(RefLines.parse('// ' + i18n('comment.sources.' + this.type)), 'var ' + this.nodeJsName + '=ctx.createMediaElementSource(document.getElementById(\\'' + this.elementHtmlName + '\\'));');\n                    };\n                    // abstract:\n                    // get type()\n                    // getElementHtmlLines(featureContext,i18n)\n                    babelHelpers.createClass(Source, [\n                        {\n                            key: 'nSuffix',\n                            get: function () {\n                                if (this.n !== undefined) {\n                                    return '.' + this.n;\n                                } else {\n                                    return '';\n                                }\n                            }\n                        },\n                        {\n                            key: 'elementHtmlName',\n                            get: function () {\n                                return 'my.' + this.type + this.nSuffix;\n                            }\n                        },\n                        {\n                            key: 'nodeJsName',\n                            get: function () {\n                                return camelCase(this.type + this.nSuffix + '.node');\n                            }\n                        }\n                    ]);\n                    return Source;\n                }();\n                var sourceClasses = {\n                    audio: function (_Source) {\n                        babelHelpers.inherits(audio, _Source);\n                        function audio() {\n                            babelHelpers.classCallCheck(this, audio);\n                            return babelHelpers.possibleConstructorReturn(this, _Source.apply(this, arguments));\n                        }\n                        audio.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject, this.options.url, this.elementHtmlName, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        babelHelpers.createClass(audio, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'audio';\n                                }\n                            }]);\n                        return audio;\n                    }(Source),\n                    video: function (_Source2) {\n                        babelHelpers.inherits(video, _Source2);\n                        function video() {\n                            babelHelpers.classCallCheck(this, video);\n                            return babelHelpers.possibleConstructorReturn(this, _Source2.apply(this, arguments));\n                        }\n                        video.prototype.getElementHtmlLines = function getElementHtmlLines(featureContext, i18n) {\n                            return Lines.bae(Lines.html(_templateObject2, this.options.url, this.elementHtmlName, this.options.width, this.options.height, featureContext.audioContext ? 'anonymous' : false));\n                        };\n                        babelHelpers.createClass(video, [{\n                                key: 'type',\n                                get: function () {\n                                    return 'video';\n                                }\n                            }]);\n                        return video;\n                    }(Source)\n                };\n                var SourceSet = function (_CollectionFeature) {\n                    babelHelpers.inherits(SourceSet, _CollectionFeature);\n                    function SourceSet() {\n                        babelHelpers.classCallCheck(this, SourceSet);\n                        return babelHelpers.possibleConstructorReturn(this, _CollectionFeature.apply(this, arguments));\n                    }\n                    SourceSet.prototype.getEntryClass = function getEntryClass(entryOption) {\n                        return sourceClasses[entryOption.source];\n                    };\n                    SourceSet.prototype.requestFeatureContext = function requestFeatureContext(featureContext) {\n                        if (this.entries.length > 0) {\n                            featureContext.audioProcessing = true;\n                        }\n                    };\n                    SourceSet.prototype.getJsInitLines = function getJsInitLines(featureContext, i18n, prevNodeJsNames) {\n                        var a = InterleaveLines.b();\n                        if (featureContext.audioContext) {\n                            a.apply(undefined, this.entries.map(function (entry) {\n                                return entry.getJsInitLines(i18n);\n                            }));\n                        }\n                        return a.e();\n                    };\n                    SourceSet.prototype.getNodeJsNames = function getNodeJsNames(featureContext, prevNodeJsNames) {\n                        if (featureContext.audioContext) {\n                            return this.entries.map(function (entry) {\n                                return entry.nodeJsName;\n                            });\n                        } else {\n                            return prevNodeJsNames;\n                        }\n                    };\n                    return SourceSet;\n                }(CollectionFeature);\n                module.exports = SourceSet;\n            },\n            {\n                '14': 14,\n                '15': 15,\n                '16': 16,\n                '22': 22,\n                '24': 24,\n                '30': 30,\n                '5': 5\n            }\n        ]\n    }, {}, [37]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nclass ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$dragged=null\r\n\t\tthis.$entries=$(\"<div>\").append(\r\n\t\t\toption.entries.map(subOption=>this.writeDraggableSubOption(subOption,writeOption,i18n))\r\n\t\t)\r\n\t\tconst $buttons=$(\"<div>\")\r\n\t\toption.availableTypes.forEach((type,i)=>{\r\n\t\t\tif (i) $buttons.append(\" \")\r\n\t\t\t$buttons.append(\r\n\t\t\t\t$(\"<button type='button'>\").html(\r\n\t\t\t\t\ti18n('options.'+option.fullName+'.'+type+'.add')\r\n\t\t\t\t).click(()=>{\r\n\t\t\t\t\t//option.addEntry(type,entry=>this.$entries.append(this.writeDraggableSubOption(entry,writeOption,i18n)))\r\n\t\t\t\t\tthis.$entries.append(\r\n\t\t\t\t\t\tthis.writeDraggableSubOption(option.makeEntry(type),writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\r\n\t\t\t\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\",\r\n\t\t\tthis.$entries,\r\n\t\t\t$buttons\r\n\t\t)\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn true\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tthis.option.entries=this.$entries.children().map(function(){\r\n\t\t\treturn $(this).data('option')\r\n\t\t}).get()\r\n\t}\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\t// have to make drag handler 'draggable', not the whole item\r\n\t\t// because inputs and labels don't like to be inside 'draggable'\r\n\t\t// http://stackoverflow.com/questions/13017177/selection-disabled-while-using-html5-drag-and-drop\r\n\t\tconst moveUp=$moved=>{\r\n\t\t\t$moved.prev().before($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst moveDown=$moved=>{\r\n\t\t\t$moved.next().after($moved)\r\n\t\t\tthis.updateArrayEntries()\r\n\t\t}\r\n\t\tconst attemptDelete=$entry=>{\r\n\t\t\tif (this.canDeleteEntry($entry)) {\r\n\t\t\t\t$entry.remove()\r\n\t\t\t\tthis.updateArrayEntries()\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\treturn $(\"<div class='draggable-with-handle'>\").data('option',subOption).append(\r\n\t\t\t$(\"<div draggable='true' tabindex='0' title='\"+i18n('options-output.drag')+\"'>\")\r\n\t\t\t\t.on('dragstart',function(ev){\r\n\t\t\t\t\tThis.$dragged=$(this).parent()\r\n\t\t\t\t\tev.originalEvent.dataTransfer.effectAllowed='move'\r\n\t\t\t\t\tev.originalEvent.dataTransfer.setData('Text',name)\r\n\t\t\t\t\tif (ev.originalEvent.dataTransfer.setDragImage) { // doesn't work in IE\r\n\t\t\t\t\t\tev.originalEvent.dataTransfer.setDragImage(This.$dragged[0],0,0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tThis.$dragged.addClass('ghost')\r\n\t\t\t\t\t},0)\r\n\t\t\t\t})\r\n\t\t\t\t.keydown(function(ev){\r\n\t\t\t\t\tconst $handle=$(this)\r\n\t\t\t\t\tconst $sorted=$handle.parent()\r\n\t\t\t\t\tif (ev.keyCode==38) {\r\n\t\t\t\t\t\tmoveUp($sorted)\r\n\t\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t} else if (ev.keyCode==40) {\r\n\t\t\t\t\t\tmoveDown($sorted)\r\n\t\t\t\t\t\t$handle.focus()\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\twriteOption(subOption),\r\n\t\t\t$(\"<div tabindex='0' class='delete' title='\"+i18n('options-output.delete')+\"'>\").click(function(){\r\n\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t}).keydown(function(ev){\r\n\t\t\t\tif (ev.keyCode==13 || ev.keyCode==32) {\r\n\t\t\t\t\tattemptDelete($(this).parent())\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t).on('dragover',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tev.originalEvent.dataTransfer.dropEffect='move'\r\n\t\t\tconst $target=$(this)\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tif ($target.next().is(This.$dragged)) {\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y<dh) {\r\n\t\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.nextAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveUp(This.$dragged)\r\n\t\t\t\t} else if ($target.prev().is(This.$dragged)) {\r\n\t\t\t\t\tconst th=$target.height()\r\n\t\t\t\t\tconst dh=This.$dragged.height()\r\n\t\t\t\t\tconst y=ev.pageY-$target.offset().top\r\n\t\t\t\t\tif (y>th-dh) {\r\n\t\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ($target.prevAll().is(This.$dragged)) {\r\n\t\t\t\t\tmoveDown(This.$dragged)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).on('drop',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t}).on('dragend',function(ev){\r\n\t\t\tev.preventDefault()\r\n\t\t\tif (This.$dragged) {\r\n\t\t\t\tThis.$dragged.removeClass('ghost')\r\n\t\t\t\tThis.$dragged=null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=ArrayOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='code-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'save': \"Save source code\",\r\n\t\t\t'run': \"Run in new window\",\r\n\t\t\t'open.codepen': \"Open in CodePen\",\r\n\t\t\t'open.jsfiddle': \"Open in JSFiddle\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"embedded in HTML source code\",\r\n\t\t\t'mode.full': \"complete HTML\",\r\n\t\t\t'mode.body': \"only HTML body\",\r\n\t\t\t'mode.embed': \"embed in HTML\",\r\n\t\t\t'mode.paste': \"extract to paste into HTML later\",\r\n\t\t\t'mode.file': \"extract to load as external resource\",\r\n\t\t\t'formatting': \"Formatting\",\r\n\t\t\t'formatting.indent': \"indent with tabs\",\r\n\t\t\t'formatting.indentNumber': \"spaces per indent\",\r\n\t\t\t'formatting.jsSemicolons': \"JavaScript semicolons\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled.\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'save': \"Сохранить исходный код\",\r\n\t\t\t'run': \"Запустить в новом окне\",\r\n\t\t\t'open.codepen': \"Открыть в CodePen\",\r\n\t\t\t'open.jsfiddle': \"Открыть в JSFiddle\",\r\n\t\t\t'section.html': \"HTML\",\r\n\t\t\t'section.css': \"CSS\",\r\n\t\t\t'section.js': \"JavaScript\",\r\n\t\t\t'embedded': \"встроен в код HTML\",\r\n\t\t\t'mode.full': \"полностью\",\r\n\t\t\t'mode.body': \"только <code>body</code>\",\r\n\t\t\t'mode.embed': \"встроить в HTML\",\r\n\t\t\t'mode.paste': \"извлечь для последующей вставки в HTML\",\r\n\t\t\t'mode.file': \"извлечь для загрузки в качестве внешнего ресурса\",\r\n\t\t\t'formatting': \"Форматирование\",\r\n\t\t\t'formatting.indent': \"отступы с помощью tab\",\r\n\t\t\t'formatting.indentNumber': \"пробелов в отступе\",\r\n\t\t\t'formatting.jsSemicolons': \"<code>;</code> в JavaScript\",\r\n\t\t\t'warning.no-hljs': \"<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена.\",\r\n\t\t},\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst debounce=require('./fake-lodash/debounce')\r\nconst repeat=require('./fake-lodash/repeat')\r\n\r\nconst getHtmlDataUri=(html)=>'data:text/html;charset=utf-8,'+encodeURIComponent(html)\r\n\r\nconst makeObjectWithSetters=(values,setCallback)=>{\r\n\tconst obj={}\r\n\tfor (let prop in values) {\r\n\t\tObject.defineProperty(obj,prop,{\r\n\t\t\tget: ()=>values[prop],\r\n\t\t\tset: v=>{\r\n\t\t\t\tvalues[prop]=v\r\n\t\t\t\tsetCallback()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn obj\r\n}\r\n\r\nclass CodeOutput {\r\n\tconstructor(generateCode,i18n) {\r\n\t\tthis.formatting=makeObjectWithSetters(\r\n\t\t\tthis.defaultFormatting,\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.sectionModes=makeObjectWithSetters(\r\n\t\t\t{html:'full',css:'embed',js:'embed'},\r\n\t\t\t()=>{\r\n\t\t\t\tthis.update.flush()\r\n\t\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis._code=generateCode()\r\n\t\tthis.update=debounce(()=>{\r\n\t\t\tthis._code=generateCode()\r\n\t\t\tthis.applyUpdatedCode(i18n)\r\n\t\t},200)\r\n\r\n\t\tthis.initDomProps()\r\n\t\tconst writeFormattingControls=()=>{\r\n\t\t\tconst This=this\r\n\t\t\tlet $indentCheckbox,$indentNumber\r\n\t\t\tconst updateIndent=()=>{\r\n\t\t\t\tlet indent='\\t'\r\n\t\t\t\tif (!$indentCheckbox.prop('checked')) {\r\n\t\t\t\t\tlet n=4\r\n\t\t\t\t\tif ($indentNumber[0].checkValidity()) {\r\n\t\t\t\t\t\tn=Number($indentNumber.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindent=repeat(' ',n)\r\n\t\t\t\t}\r\n\t\t\t\tthis.formatting.indent=indent\r\n\t\t\t}\r\n\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\"<summary>\"+i18n('code-output.formatting')+\"</summary>\",\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentCheckbox=$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.indent=='\\t')\r\n\t\t\t\t\t\t\t.change(updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indent')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$indentNumber=$(\"<input type='number' min='0' max='32' required>\")\r\n\t\t\t\t\t\t\t.val(this.formatting.indent=='\\t'?4:this.formatting.indent.length)\r\n\t\t\t\t\t\t\t.on('input change',updateIndent),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.indentNumber')\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t$(\"<input type='checkbox'>\")\r\n\t\t\t\t\t\t\t.prop('checked',this.formatting.jsSemicolons)\r\n\t\t\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\t\t\tThis.formatting.jsSemicolons=this.checked\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\" \"+i18n('code-output.formatting.jsSemicolons')\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst writeSection=(sectionName)=>{\r\n\t\t\treturn $(\"<details open>\").append(\r\n\t\t\t\tthis.writeSectionSummary(sectionName,i18n),\r\n\t\t\t\tthis.$sectionCode[sectionName]=$(\"<div class='code'>\")\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst $output=$(\"<div class='code-output'>\").append(this.writeButtons(i18n)).append(\r\n\t\t\twriteFormattingControls(),\r\n\t\t\twriteSection('html'),\r\n\t\t\twriteSection('css'),\r\n\t\t\twriteSection('js')\r\n\t\t)\r\n\t\tif (!window.hljs) {\r\n\t\t\t$output.append(\"<p>\"+i18n('code-output.warning.no-hljs')+\"</p>\")\r\n\t\t}\r\n\t\t$output.append(this.writeButtons(i18n))\r\n\t\tthis.applyUpdatedCode(i18n)\r\n\r\n\t\t// public interface:\r\n\t\t// this.update\r\n\t\tthis.$output=$output\r\n\t}\r\n\r\n\t// private interface:\r\n\tget code() {\r\n\t\tthis.update.flush()\r\n\t\treturn this._code\r\n\t}\r\n\r\n\t// extend/override fns:\r\n\tget defaultFormatting() {\r\n\t\treturn {\r\n\t\t\tindent: '\\t',\r\n\t\t\tjsSemicolons: false,\r\n\t\t}\r\n\t}\r\n\tinitDomProps() {\r\n\t\tthis.$sectionCode={}\r\n\t\tthis.$saveButtons={}\r\n\t}\r\n\tapplyUpdatedCode(i18n) { // TODO pass code to avoid recursion on accessing this.code... or not b/c reading this.sectionModes and like\r\n\t\tconst sections=this.code.extractSections(this.sectionModes)\r\n\t\tfor (let sectionName in sections) {\r\n\t\t\tif (this.sectionModes[sectionName]=='embed') {\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t\"<p>\"+i18n('code-output.embedded')+\"</p>\"\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tlet $code\r\n\t\t\t\tthis.$sectionCode[sectionName].empty().append(\r\n\t\t\t\t\t$(\"<pre>\").append(\r\n\t\t\t\t\t\t$code=$(\"<code class='\"+sectionName+\"'>\")\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t$code.html(\r\n\t\t\t\t\tsections[sectionName].getHtml(this.formatting).join(\"\\n\")\r\n\t\t\t\t)\r\n\t\t\t\tif (window.hljs) {\r\n\t\t\t\t\thljs.highlightBlock($code[0])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sectionName!='html') { // extractable section\r\n\t\t\t\tthis.$saveButtons[sectionName].prop('disabled',this.sectionModes[sectionName]=='embed')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\tconst This=this\r\n\t\treturn $(\"<div>\").append(\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.run')+\"</button>\").click(function(){\r\n\t\t\t\tconst html=This.code.get(This.formatting).join(\"\\n\")\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * Firefox and Chrome have trouble showing the source\r\n\t\t\t\t\t// * weird bug in Firefox:\r\n\t\t\t\t\t//   in webgl-starter: add z-rotation, slider input, add speed, slider input, run, change rotation range, run again\r\n\t\t\t\t\t// * Firefox shows url of a generator page\r\n\t\t\t\t\tconst w=window.open(\"\",\"generatedCode\")\r\n\t\t\t\t\tw.document.open()\r\n\t\t\t\t\tw.document.write(html)\r\n\t\t\t\t\tw.document.close()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// has drawbacks:\r\n\t\t\t\t\t// * doesn't work in IE b/c they decided it's security risk\r\n\t\t\t\t\t// * long url\r\n\t\t\t\t\twindow.open(getHtmlDataUri(html),\"generatedCode\")\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.codepen')+\"</button>\").click(function(){\r\n\t\t\t\t// http://blog.codepen.io/documentation/api/prefill/\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\t$(\"<form method='post' action='http://codepen.io/pen/define/' target='codepenGeneratedCode'>\").append(\r\n\t\t\t\t\t$(\"<input type='hidden' name='data'>\").val(JSON.stringify({\r\n\t\t\t\t\t\thtml: getSection('html'),\r\n\t\t\t\t\t\tcss: getSection('css'),\r\n\t\t\t\t\t\tjs: getSection('js'),\r\n\t\t\t\t\t\ttitle: code.title,\r\n\t\t\t\t\t}))\r\n\t\t\t\t).appendTo('body').submit().remove()\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t$(\"<button type='button'>\"+i18n('code-output.open.jsfiddle')+\"</button>\").click(function(){\r\n\t\t\t\t// http://doc.jsfiddle.net/api/post.html\r\n\t\t\t\tconst sections=This.code.extractSections({html:'body',css:'paste',js:'paste'})\r\n\t\t\t\tconst getSection=sectionName=>\r\n\t\t\t\t\tsections[sectionName].get(This.formatting).join(\"\\n\")\r\n\t\t\t\tconst writeSection=sectionName=>\r\n\t\t\t\t\t$(\"<input type='hidden'>\")\r\n\t\t\t\t\t\t.attr('name',sectionName)\r\n\t\t\t\t\t\t.val(getSection(sectionName))\r\n\t\t\t\t$(\"<form method='post' action='http://jsfiddle.net/api/post/library/pure/' target='jsfiddleGeneratedCode'>\").append(\r\n\t\t\t\t\twriteSection('html'),\r\n\t\t\t\t\twriteSection('css'),\r\n\t\t\t\t\twriteSection('js'),\r\n\t\t\t\t\t$(\"<input type='hidden' name='title'>\").val(This.code.title),\r\n\t\t\t\t\t\"<input type='hidden' name='wrap' value='b'>\"\r\n\t\t\t\t).appendTo('body').submit().remove()\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst This=this\r\n\t\tconst $summary=$(\"<summary>\"+i18n('code-output.section.'+sectionName)+\"</summary>\")\r\n\t\t$summary.append(\r\n\t\t\t\" \",\r\n\t\t\t$(\"<select>\").append(\r\n\t\t\t\t(sectionName=='html'\r\n\t\t\t\t\t? ['full','body']\r\n\t\t\t\t\t: ['embed','paste','file']\r\n\t\t\t\t).map(mode=>\r\n\t\t\t\t\t$(\"<option>\").val(mode).html(i18n('code-output.mode.'+mode))\r\n\t\t\t\t)\r\n\t\t\t).val(this.sectionModes[sectionName]).change(function(){\r\n\t\t\t\tThis.sectionModes[sectionName]=this.value\r\n\t\t\t}),\r\n\t\t\t\" \",\r\n\t\t\t// doesn't work in IE\r\n\t\t\t//$(\"<a download='\"+section.filename+\"'><button type='button'>\"+i18n('code-output.save')+\"</button></a>\").click(function(){\r\n\t\t\t//\t// yes I want a button, but download attr is only available for links\r\n\t\t\t//\t$(this).attr('href',getHtmlDataUri(\r\n\t\t\t//\t\tsection.get(this.formatting).join(\"\\n\")\r\n\t\t\t//\t))\r\n\t\t\t//})\r\n\t\t\tthis.$saveButtons[sectionName]=$(\"<button type='button'>\"+i18n('code-output.save')+\"</button>\").click(function(){\r\n\t\t\t\tconst section=This.code.extractSections(This.sectionModes)[sectionName]\r\n\t\t\t\t// http://stackoverflow.com/a/24354303\r\n\t\t\t\tconst blob=new Blob(\r\n\t\t\t\t\t[section.get(This.formatting).join(\"\\n\")],\r\n\t\t\t\t\t{type:section.mimeType}\r\n\t\t\t\t)\r\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob,section.filename)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst $a=$(\"<a>\")\r\n\t\t\t\t\t\t.attr('download',section.filename)\r\n\t\t\t\t\t\t.attr('href',URL.createObjectURL(blob))\r\n\t\t\t\t\t\t.appendTo('body')\r\n\t\t\t\t\t$a.get(0).click()\r\n\t\t\t\t\t$a.remove()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\treturn $summary\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nclass CodeSection {\r\n\tconstructor(filename,mimeType,lines) {\r\n\t\tthis.filename=filename\r\n\t\tthis.mimeType=mimeType\r\n\t\tthis.lines=lines\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.lines.get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.lines.getHtml(formatting)\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeSection\r\n","// assumes string is dot-separated, like this: \"some.html.id\"\r\nvar capitalize=require('./capitalize')\r\nmodule.exports=function(s) {\r\n\treturn s.split('.').map((w,i)=>i>0?capitalize(w):w).join('')\r\n}\r\n","// assumes string is lowercase\r\nmodule.exports=function(s){\r\n\treturn s.charAt(0).toUpperCase()+s.slice(1)\r\n}\r\n","// no options\r\nmodule.exports=function(func,wait){\r\n\tvar timeoutId=null\r\n\tvar debounced=function(){\r\n\t\tclearTimeout(timeoutId)\r\n\t\ttimeoutId=setTimeout(function(){\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t},wait)\r\n\t}\r\n\tdebounced.flush=function(){\r\n\t\tif (timeoutId) {\r\n\t\t\ttimeoutId=null\r\n\t\t\tfunc()\r\n\t\t}\r\n\t}\r\n\treturn debounced\r\n}\r\n","module.exports=function(s){\r\n\tvar entityMap={\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#39;',\r\n\t\t// lodash also escapes `\r\n\t}\r\n\treturn String(s).replace(/[&<>\"']/g,m=>entityMap[m])\r\n}\r\n","module.exports=function(s,n){\r\n\treturn Array(n+1).join(s)\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbersInternal=(numbers,precision,keepDot,noPlus)=>{\r\n\tlet maxPrecision=0\r\n\tif (keepDot) {\r\n\t\tmaxPrecision=1\r\n\t}\r\n\tlet hasNegative=false\r\n\tfor (let i in numbers) {\r\n\t\tlet p\r\n\t\tif (precision!==undefined) {\r\n\t\t\tp=precision\r\n\t\t} else if (numbers[i].precision!==undefined) {\r\n\t\t\tp=numbers[i].precision\r\n\t\t} else {\r\n\t\t\tthrow new Error('formatNumbers received no precision')\r\n\t\t}\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(p)\r\n\t\tif (Number(s)<0) { // protects against negative zero\r\n\t\t\thasNegative=true\r\n\t\t}\r\n\t\tif (p>0) {\r\n\t\t\tp-=s.match(/0*$/)[0].length\r\n\t\t}\r\n\t\tif (p>maxPrecision) {\r\n\t\t\tmaxPrecision=p\r\n\t\t}\r\n\t}\r\n\tconst ss=Array.isArray(numbers)?[]:{}\r\n\tfor (let i in numbers) {\r\n\t\tconst number=Number(numbers[i])\r\n\t\tlet s=number.toFixed(maxPrecision)\r\n\t\tif (Number(s)>=0 && s.charAt(0)=='-') {  // protects against negative zero\r\n\t\t\ts=s.slice(1)\r\n\t\t}\r\n\t\tif (!noPlus && hasNegative && number>0) {\r\n\t\t\ts='+'+s\r\n\t\t}\r\n\t\tss[i]=s\r\n\t}\r\n\treturn ss\r\n}\r\n\r\nconst formatNumbers=(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.html =(number,precision)=>formatNumbersInternal(number,precision,false,true)\r\nformatNumbers.js   =(number,precision)=>formatNumbersInternal(number,precision)\r\nformatNumbers.glsl =(number,precision)=>formatNumbersInternal(number,precision,true)\r\n\r\nmodule.exports=formatNumbers\r\n","'use strict'\r\n\r\nclass GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tthis.option=option\r\n\t\tthis.$output=option.$=$(\"<fieldset>\").append(\"<legend>\"+i18n('options.'+option.fullName)+\"</legend>\").append(\r\n\t\t\toption.entries.map(writeOption)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=GroupOptionOutput\r\n","'use strict'\r\n\r\nmodule.exports=function(inStrings){\r\n\tconst strings={}\r\n\tconst expandRegexp=/^([^{]*)\\{([^}]*)\\}(.*)$/\r\n\tfunction expandIdAndString(id,string) {\r\n\t\tlet match\r\n\t\tif (match=expandRegexp.exec(id)) {\r\n\t\t\tconst idStart=match[1]\r\n\t\t\tconst idMids=match[2].split(',')\r\n\t\t\tconst idEnd=match[3]\r\n\t\t\tif (match=expandRegexp.exec(string)) {\r\n\t\t\t\tconst stringStart=match[1]\r\n\t\t\t\tconst stringMidsStr=match[2]\r\n\t\t\t\tconst stringMids=stringMidsStr.split(',')\r\n\t\t\t\tconst stringEnd=match[3]\r\n\t\t\t\tidMids.forEach((idMid,i)=>{\r\n\t\t\t\t\tconst stringMid=stringMids[i]\r\n\t\t\t\t\tif (stringMidsStr!='') {\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+stringMid+stringEnd)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,stringStart+idMid+stringEnd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tidMids.forEach(idMid=>{\r\n\t\t\t\t\texpandIdAndString(idStart+idMid+idEnd,string)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrings[id]=string\r\n\t\t}\r\n\t}\r\n\tfor (let id in inStrings) {\r\n\t\texpandIdAndString(id,inStrings[id])\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\n\r\nmodule.exports=langStrings=>lang=>{\r\n\tconst defaultLang='en'\r\n\tlang=lang||defaultLang\r\n\tlang=lang.split('-')[0]  // get primary language subtag\r\n\tlet strings=langStrings[lang]\r\n\tif (strings===undefined) {\r\n\t\tlang=defaultLang\r\n\t\tstrings=langStrings[lang]\r\n\t}\r\n\tconst i18n=function(id){\r\n\t\tif (strings[id]!==undefined) {\r\n\t\t\treturn strings[id]\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"undefined string \"+id)\r\n\t\t}\r\n\t}\r\n\ti18n.lang=lang\r\n\ti18n.has=id=>strings[id]!==undefined\r\n\tif (lang=='en') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','−')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns.indexOf('.')<0) {\r\n\t\t\t\tconst nn=Number(n)\r\n\t\t\t\tif (Math.abs(nn)==1) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn '2'\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (lang=='ru') {\r\n\t\ti18n.number=function(n){\r\n\t\t\treturn String(n).replace('-','−').replace('.',',')\r\n\t\t}\r\n\t\ti18n.pluralSuffix=function(n){\r\n\t\t\tconst ns=String(n)\r\n\t\t\tif (ns.indexOf('.')<0) {\r\n\t\t\t\tconst teen=ns.slice(-2,-1)==='1'\r\n\t\t\t\tif (ns.slice(-1)==='1' && !teen) {\r\n\t\t\t\t\treturn '1'\r\n\t\t\t\t} else if ('234'.indexOf(ns.slice(-1))>=0 && !teen) {\r\n\t\t\t\t\treturn '2'\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '5'\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn '2'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ti18n.plural=function(n,id){\r\n\t\treturn this(id+'.'+this.pluralSuffix(n))\r\n\t}\r\n\ti18n.numberWithUnits=function(n,unit,abbrFn){\r\n\t\tif (abbrFn===undefined) { // codegen needs its own fn\r\n\t\t\tabbrFn=(abbr,expansion)=>\"<abbr title='\"+escape(expansion)+\"'>\"+abbr+\"</abbr>\" // expansion is html for stuff like s^(-1)\r\n\t\t}\r\n\t\tlet s=this.number(n)\r\n\t\tif (unit!==undefined) {\r\n\t\t\tif (unit.length==1 && /^\\W/.test(unit)) {\r\n\t\t\t\ts+=unit\r\n\t\t\t} else {\r\n\t\t\t\ts+=' ' // nbsp\r\n\t\t\t\tlet abbr\r\n\t\t\t\tif (unit=='1/second') {\r\n\t\t\t\t\tabbr=i18n('units.second.a')+\"<sup>−1</sup>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tabbr=i18n('units.'+unit+'.a')\r\n\t\t\t\t}\r\n\t\t\t\tconst expansion=this.plural(n,'units.'+unit)\r\n\t\t\t\ts+=abbrFn(abbr,expansion)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn s\r\n\t}\r\n\treturn i18n\r\n}\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass InterleaveLines extends Lines {\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet first=true\r\n\t\tconst fp=()=>{\r\n\t\t\tif (first) {\r\n\t\t\t\tfirst=false\r\n\t\t\t} else {\r\n\t\t\t\tout.push('')\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (subOut.length>0) {\r\n\t\t\t\t\tfp()\r\n\t\t\t\t\tout.push(...subOut)\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tfp()\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=InterleaveLines\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\n\r\nclass JsLines extends Lines {\r\n\tprocessStringInGet(s,formatting) {\r\n\t\tif (formatting.jsSemicolons) {\r\n\t\t\treturn s.replace(/^;/,'')\r\n\t\t} else {\r\n\t\t\treturn s.replace(/;$/,'')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=JsLines\r\n","'use strict'\r\n\r\n/*\r\nCreate lines - short version:\r\n\treturn Lines.bae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\n\treturn SubclassOfLines.b(\r\n\t\tctorArgs\r\n\t).ae(\r\n\t\tline1,\r\n\t\tline2,\r\n\t\t...\r\n\t)\r\n\r\nCreate lines - long version:\r\n\tconst a=Lines.b()\r\n\ta( // shorthand for a.a()\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.a(\r\n\t\tlineAddedAfterLastLine\r\n\t)\r\n\ta.t(\r\n\t\tlineAppendedToLastLine\r\n\t)\r\n\treturn a.e()\r\n\r\nRead lines:\r\n\tformatting={indent:...,refs:...} // optional arg for some code formatting/annotation things\r\n\tlines.get(formatting) // get array of plaintext lines - need array to possibly put it line by line inside an <ol>\r\n\tlines.getHtml(formatting) // get array of html lines\r\n*/\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst repeat=require('./fake-lodash/repeat')\r\n\r\nconst TO={} // TODO Symbol\r\n\r\nclass Lines {\r\n\t// lines private interface:\r\n\tconstructor(data) {\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\tthrow new TypeError(\"attempted to construct Lines with non-array data argument\")\r\n\t\t}\r\n\t\tthis.data=data\r\n\t}\r\n\tisDataEmpty() {\r\n\t\tfor (let i=0;i<this.data.length;i++) {\r\n\t\t\tconst item=this.data[i]\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tif (!item.isEmpty()) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tprocessStringInGet(s,formatting) {\r\n\t\treturn s\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst out=[]\r\n\t\tlet addTo=false\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item===TO) {\r\n\t\t\t\taddTo=true\r\n\t\t\t} else if (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tif (addTo && subOut.length>0) {\r\n\t\t\t\t\tout.push(out.pop()+subOut.shift())\r\n\t\t\t\t}\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t\taddTo=false\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tlet s=this.processStringInGet(item,formatting)\r\n\t\t\t\tif (formatting.indent!==undefined && formatting.indent!='\\t') {\r\n\t\t\t\t\ts=s.replace(/^(\\t)+/,match=>repeat(formatting.indent,match.length))\r\n\t\t\t\t}\r\n\t\t\t\ts=(html ? escape(s) : s)\r\n\t\t\t\tif (addTo) {\r\n\t\t\t\t\tout.push(out.pop()+s)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout.push(s)\r\n\t\t\t\t}\r\n\t\t\t\taddTo=false\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn out\r\n\t}\r\n\r\n\t// lines public interface:\r\n\tstatic b() {\r\n\t\tconst data=[]\r\n\t\tconst makeLines=()=>new this(data,...arguments)\r\n\t\tconst a=function(){\r\n\t\t\treturn a.a(...arguments)\r\n\t\t}\r\n\t\ta.a=function(){\r\n\t\t\tdata.push(...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.t=function(){\r\n\t\t\tdata.push(TO,...arguments)\r\n\t\t\treturn this\r\n\t\t}\r\n\t\ta.e=makeLines\r\n\t\ta.ae=function(){\r\n\t\t\treturn this.a(...arguments).e()\r\n\t\t}\r\n\t\treturn a\r\n\t}\r\n\tstatic ba() {\r\n\t\treturn this.b().a(...arguments)\r\n\t}\r\n\tstatic be() {\r\n\t\treturn this.b().e()\r\n\t}\r\n\tstatic bae() {\r\n\t\treturn this.b().a(...arguments).e()\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tget(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,false)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\tif (formatting===undefined) formatting={}\r\n\t\treturn this.doGet(formatting,true)\r\n\t}\r\n\tcount() {\r\n\t\treturn this.doGet({},false).length // can be faster b/c don't need to output stuff\r\n\t}\r\n\r\n\t// TODO make HtmlLines\r\n\tstatic html(strings/*,...values*/) {\r\n\t\t// html template tag\r\n\t\t// usage example for attributes: Lines.html`<input type=text value=${value}>`\r\n\t\t// usage example for elements: Lines.html`<option>${option}</option>`\r\n\t\treturn strings.reduce((r,s,i)=>{\r\n\t\t\tlet v=arguments[i]\r\n\t\t\tswitch (r.slice(-1)) {\r\n\t\t\tcase '=':\r\n\t\t\t\tif (v===false) {\r\n\t\t\t\t\treturn r.replace(/\\s+[a-zA-Z0-9-]+=$/,'')+s // TODO more permitting attr name regexp\r\n\t\t\t\t} else if (v===true) {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t}\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;')\r\n\t\t\t\tif (v=='') {\r\n\t\t\t\t\treturn r.replace(/=$/,'')+s\r\n\t\t\t\t} else if (!/[\\s\"'=<>`]/.test(v)) {\r\n\t\t\t\t\treturn r+v+s\r\n\t\t\t\t} else if (!/'/.test(v)) {\r\n\t\t\t\t\treturn r+\"'\"+v+\"'\"+s\r\n\t\t\t\t} else {\r\n\t\t\t\t\tv=v.replace(/\"/g,'&quot;')\r\n\t\t\t\t\treturn r+'\"'+v+'\"'+s\r\n\t\t\t\t}\r\n\t\t\tcase '>':\r\n\t\t\t\tv=String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;')\r\n\t\t\t\treturn r+v+s\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"invalid character before substitution\")\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=Lines\r\n","'use strict'\r\n\r\nconst WrapLines=require('./wrap-lines')\r\n\r\nclass NoseWrapLines extends WrapLines {\r\n\tisEmpty() {\r\n\t\treturn this.isDataEmpty()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn []\r\n\t\t} else {\r\n\t\t\treturn super.doGet(formatting,html)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=NoseWrapLines\r\n","'use strict'\r\n\r\n/*\r\nuse Option.<Class>.make(<description w/o className>)(data) to create Option object\r\n\tTHIS WON'T WORK WITH Arrays/Groups!\r\n\r\nfixed options spec:\r\n\tinput option returns its value in primitive context (possibly with valueOf() method)\r\n\t\tvalue has primitive type\r\n\toptions have the following properties in order of priority (most important first)\r\n\t\ttype property (defaults to 'type') if option is an array member\r\n\t\t\twhy need type property if there's name? - because name is not imported/exported\r\n\t\tsuboption-named properties equal to suboptions for collections\r\n\t\t'entries' array of suboptions for array and collection\r\n\t\t'value' and 'name' properties for non-boolean options\r\n\tTODO decide on: boolean option cannot be an array member (where to store it's type?)\r\n*/\r\n\r\nconst Option={}\r\n\r\n// abstract classes\r\n\r\nOption.Base = class {\r\n\tstatic make(name) {\r\n\t\tlet nScalars=0, nArrays=0, nObjects=0\r\n\t\tlet scalarArg, arrayArg=[], objectArg={}\r\n\t\tfor (let i=1;i<arguments.length;i++) {\r\n\t\t\tlet arg=arguments[i]\r\n\t\t\tif (typeof arg == 'string' || typeof arg == 'number' || typeof arg == 'boolean') {\r\n\t\t\t\tif (nScalars++==0) scalarArg=arg\r\n\t\t\t} else if (Array.isArray(arg)) {\r\n\t\t\t\tif (nArrays++==0) arrayArg=arg\r\n\t\t\t} else if (arg instanceof Object) {\r\n\t\t\t\tif (nObjects++==0) objectArg=arg\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst optionClass=this\r\n\t\tconst settings=this.collectArgs(scalarArg,arrayArg,objectArg)\r\n\t\treturn function(data,parent,visibilityManager,makeEntry){\r\n\t\t\treturn new optionClass(name,settings,data,parent,visibilityManager,makeEntry)\r\n\t\t}\r\n\t}\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn settings\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tthis.parent=parent\r\n\t\tthis.name=name\r\n\t\tthis.fullName=name\r\n\t\tif (parent && parent.fullName!==null) {\r\n\t\t\tthis.fullName=parent.fullName+'.'+name\r\n\t\t}\r\n\t\tthis.updateCallbacks=[]\r\n\t\tthis._$=null\r\n\t\t// visibility and callbacks\r\n\t\tthis.isVisible=()=>true\r\n\t\tif (visibilityManager) {\r\n\t\t\tvisibilityManager.register(this)\r\n\t\t\tif (settings.visibilityData!==undefined) {\r\n\t\t\t\tthis.isVisible=()=>{\r\n\t\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\t\tconst value=visibilityManager.options[testName].value\r\n\t\t\t\t\t\tif (settings.visibilityData[testName].indexOf(value)<0) {\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let testName in settings.visibilityData) {\r\n\t\t\t\t\tvisibilityManager.declareAffectedBy(this,testName)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget $() {\r\n\t\treturn this._$\r\n\t}\r\n\tset $($) {\r\n\t\tthis._$=$\r\n\t\tthis.updateVisibility()\r\n\t}\r\n\tupdateVisibility() {\r\n\t\tif (this.$) this.$.toggle(this.isVisible())\r\n\t}\r\n\tupdate() {\r\n\t\tthis.updateCallbacks.forEach(updateCallback=>{\r\n\t\t\tupdateCallback()\r\n\t\t})\r\n\t\tif (this.parent) {\r\n\t\t\tthis.parent.update()\r\n\t\t}\r\n\t}\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.updateCallbacks.push(updateCallback)\r\n\t}\r\n\tshortenExport(data) { // used by parent\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\treturn data.value\r\n\t\t} else {\r\n\t\t\treturn data\r\n\t\t}\r\n\t}\r\n\tshortenExportAssign(data,parentData,name) {\r\n\t\tconst dataKeys=Object.keys(data)\r\n\t\tif (dataKeys.length==1 && dataKeys[0]=='value') {\r\n\t\t\tparentData[name]=data.value\r\n\t\t} else if (dataKeys.length>0) {\r\n\t\t\tparentData[name]=data\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Input = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.defaultValue===undefined) settings.defaultValue=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.defaultValue=settings.defaultValue\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdata=data.value\r\n\t\t}\r\n\t\tif (data!==undefined) {\r\n\t\t\tthis._value=data\r\n\t\t} else {\r\n\t\t\tthis._value=this.defaultValue\r\n\t\t}\r\n\t}\r\n\tget value() {\r\n\t\treturn this._value\r\n\t}\r\n\tset value(value) {\r\n\t\tthis._value=value\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\treturn data\r\n\t}\r\n}\r\n\r\nOption.Boolean = class extends Option.Input {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\treturn super.collectArgs(!!scalarArg,arrayArg,settings)\r\n\t}\r\n\tfix() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.NonBoolean = class extends Option.Input {\r\n\tfix() {\r\n\t\tconst value=this.value\r\n\t\treturn { // can't use fixed value in boolean context\r\n\t\t\tname: this.name,\r\n\t\t\tvalue,\r\n\t\t\tvalueOf() { return value },\r\n\t\t\ttoString() { return String(value) },\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Factor = class extends Option.NonBoolean {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableValues===undefined) settings.availableValues=arrayArg\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableValues[0]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableValues=settings.availableValues\r\n\t}\r\n}\r\n\r\nOption.Number = class extends Option.NonBoolean { // requires precision, gives step = Math.pow(0.1,precision).toFixed(precision)\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.availableMin===undefined) settings.availableMin=arrayArg[0]\r\n\t\tif (settings.availableMax===undefined) settings.availableMax=arrayArg[1]\r\n\t\tif (scalarArg===undefined) scalarArg=settings.availableMin\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableMin=settings.availableMin\r\n\t\tthis.availableMax=settings.availableMax\r\n\t\tthis.unit=settings.unit\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.precision=this.precision\r\n\t\tfixed.unit=this.unit\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.Collection = class extends Option.Base {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.entries=settings.descriptions.map(x=>{\r\n\t\t\tconst subName=x[1]\r\n\t\t\tlet subData\r\n\t\t\tif (typeof data == 'object') subData=data[subName]\r\n\t\t\treturn makeEntry(x,subData,this,visibilityManager) // nested option\r\n\t\t})\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tentry.shortenExportAssign(entry.export(),data,entry.name)\r\n\t\t})\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\tconst fixedEntries=[]\r\n\t\tconst fixed={\r\n\t\t\tname: this.name,\r\n\t\t\tentries: fixedEntries,\r\n\t\t}\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tfixedEntries.push(fixed[entry.name]=entry.fix())\r\n\t\t})\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\n// concrete classes\r\n\r\nOption.Void = class extends Option.Base { // useful as array entry w/o settings\r\n\texport() {\r\n\t\treturn {}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Checkbox = class extends Option.Boolean {}\r\n\r\nOption.Select = class extends Option.Factor {}\r\n\r\nOption.Text = class extends Option.Factor {}\r\n\r\nOption.Int = class extends Option.Number {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.Float = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.precision!==undefined) {\r\n\t\t\tthis.precision=settings.precision\r\n\t\t} else {\r\n\t\t\tif (this.availableMax>=100) {\r\n\t\t\t\tthis.precision=1\r\n\t\t\t} else if (this.availableMax>=10) {\r\n\t\t\t\tthis.precision=2\r\n\t\t\t} else {\r\n\t\t\t\tthis.precision=3\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.Root = class extends Option.Collection {}\r\n\r\nOption.Group = class extends Option.Collection {}\r\n\r\nOption.Array = class extends Option.Base { // TODO consider extending Collection\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tif (settings.descriptions===undefined) settings.descriptions=arrayArg\r\n\t\tif (settings.typePropertyName===undefined) settings.typePropertyName=scalarArg\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tthis.availableConstructors=new Map\r\n\t\tif (visibilityManager) visibilityManager.enterArray()\r\n\t\tsettings.descriptions.forEach(x=>{ // TODO test array inside array\r\n\t\t\tconst type=x[1]\r\n\t\t\tconst ctor=subData=>makeEntry(x,subData,this,visibilityManager)\r\n\t\t\tthis.availableConstructors.set(type,ctor)\r\n\t\t})\r\n\t\tif (visibilityManager) visibilityManager.exitArray()\r\n\t\tif (settings.typePropertyName!==undefined) {\r\n\t\t\tthis.typePropertyName=settings.typePropertyName\r\n\t\t} else {\r\n\t\t\tthis.typePropertyName='type'\r\n\t\t}\r\n\t\t// populate array entries from data:\r\n\t\tthis._entries=[]\r\n\t\tlet subDatas=[]\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tsubDatas=data\r\n\t\t} else if (typeof data == 'object') {\r\n\t\t\tsubDatas=data.value\r\n\t\t}\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\tfor (let i=0;i<subDatas.length;i++) {\r\n\t\t\tconst subData=subDatas[i]\r\n\t\t\tlet subType=defaultType\r\n\t\t\tif (typeof subData == 'object' && subData[this.typePropertyName]!==undefined) {\r\n\t\t\t\tsubType=subData[this.typePropertyName]\r\n\t\t\t}\r\n\t\t\tlet subCtor=this.availableConstructors.get(subType)\r\n\t\t\tif (subCtor) {\r\n\t\t\t\tthis._entries.push(subCtor(subData))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget availableTypes() {\r\n\t\tconst types=[]\r\n\t\tthis.availableConstructors.forEach((_,type)=>{\r\n\t\t\ttypes.push(type)\r\n\t\t})\r\n\t\treturn types\r\n\t}\r\n\tget entries() {\r\n\t\treturn this._entries\r\n\t}\r\n\tset entries(entries) {\r\n\t\tthis._entries=entries\r\n\t\tthis.update()\r\n\t}\r\n\tmakeEntry(type,data) {\r\n\t\treturn this.availableConstructors.get(type)(data)\r\n\t}\r\n\texport() {\r\n\t\tlet defaultType=this.availableTypes[0]\r\n\t\treturn {\r\n\t\t\tvalue: this._entries.map(entry=>{\r\n\t\t\t\tconst subData=entry.export()\r\n\t\t\t\tconst subType=entry.name\r\n\t\t\t\tif (subType!=defaultType) subData[this.typePropertyName]=subType\r\n\t\t\t\treturn entry.shortenExport(subData)\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n\tfix() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\tentries: this._entries.map(entry=>{\r\n\t\t\t\tconst subFixed=entry.fix()\r\n\t\t\t\tif (typeof subFixed == 'object') subFixed[this.typePropertyName]=entry.name\r\n\t\t\t\treturn subFixed\r\n\t\t\t}),\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nmodule.exports=lang=>strings=>{\r\n\tconst additionalStringsPrefix='options-output'\r\n\tconst additionalStrings={\r\n\t\ten: {\r\n\t\t\t'reset': \"Reset\",\r\n\t\t\t'drag': \"Drag or press ↑/↓ while in focus to reorder\",\r\n\t\t\t'delete': \"Delete\",\r\n\t\t},\r\n\t\tru: {\r\n\t\t\t'reset': \"Сбросить\",\r\n\t\t\t'drag': \"Перетаскивайте или нажимайте ↑/↓, пока элемент в фокусе, чтобы изменить порядок\",\r\n\t\t\t'delete': \"Удалить\",\r\n\t\t}\r\n\t}\r\n\tfor (let id in additionalStrings[lang]) {\r\n\t\tstrings[additionalStringsPrefix+'.'+id]=additionalStrings[lang][id]\r\n\t}\r\n\treturn strings\r\n}\r\n","'use strict'\r\n\r\nconst formatNumbers=require('./format-numbers')\r\nconst Option=require('./option-classes')\r\nconst ArrayOptionOutput=require('./array-option-output')\r\nconst GroupOptionOutput=require('./group-option-output')\r\n\r\nclass OptionsOutput {\r\n\tconstructor(options,generateId,i18n) {\r\n\t\tconst optionClassWriters=new Map\r\n\t\tthis.setOptionClassWriters(optionClassWriters)\r\n\t\tfunction writeOption(option) {\r\n\t\t\tlet optionProto=option\r\n\t\t\twhile (optionProto=Object.getPrototypeOf(optionProto)) {\r\n\t\t\t\tconst optionClassWriter=optionClassWriters.get(optionProto.constructor)\r\n\t\t\t\tif (optionClassWriter) {\r\n\t\t\t\t\treturn optionClassWriter(option,writeOption,i18n,generateId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// public prop:\r\n\t\tthis.$output=writeOption(options.root)\r\n\t}\r\n\t// override this fn for custom writers\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\toptionClassWriters.set(Option.Root,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='options-output'>\").append(\r\n\t\t\t\toption.entries.map(writeOption)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Group,function(){\r\n\t\t\treturn new GroupOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Void,(option,writeOption,i18n,generateId)=>{\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\")\r\n\t\t\t\t.html(i18n('options.'+option.fullName))\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Checkbox,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option no-lead'>\").append(\r\n\t\t\t\t$(\"<input type='checkbox' id='\"+id+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.value)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.value=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\"</label>\"\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Select,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst valueId=value=>'options.'+option.fullName+'.'+value\r\n\t\t\tconst valueInfoId=value=>'options-info.'+option.fullName+'.'+value\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $select\r\n\t\t\toption.$=$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label> \",\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>\r\n\t\t\t\t\t\t$(\"<option>\").val(availableValue).html(i18n(valueId(availableValue)))\r\n\t\t\t\t\t)\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tif (option.availableValues.some(availableValue=>i18n.has(valueInfoId(availableValue)))) {\r\n\t\t\t\tlet $tip,$tipContent\r\n\t\t\t\toption.$.append(\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$tip=$(\"<span class='tip-info'>\").append(\r\n\t\t\t\t\t\t$tipContent=$(\"<span class='tip-content'>\")\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tconst handler=function(){\r\n\t\t\t\t\tif (i18n.has(valueInfoId(this.value))) {\r\n\t\t\t\t\t\t$tipContent.html(i18n(valueInfoId(this.value)))\r\n\t\t\t\t\t\t$tip.show()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$tip.hide()\r\n\t\t\t\t\t\t$tipContent.empty()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thandler.call($select[0])\r\n\t\t\t\t$select.change(handler)\r\n\t\t\t}\r\n\t\t\treturn option.$\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Text,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst listId=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label> \",\r\n\t\t\t\t$(\"<input type='text' id='\"+id+\"' list='\"+listId+\"' />\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\toption.value=this.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<datalist id='\"+listId+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(availableValue=>$(\"<option>\").text(availableValue))\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Number,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst setInputAttrsAndListeners=($input,getOtherInput)=>setInputAttrs($input)\r\n\t\t\t\t.val(option.value)\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst $that=getOtherInput()\r\n\t\t\t\t\t\t$that.val(this.value)\r\n\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst id=generateId()\r\n\t\t\tlet $sliderInput,$numberInput\r\n\t\t\tlet $rangeMinInput,$rangeMaxInput\r\n\t\t\tconst fmt=formatNumbers({\r\n\t\t\t\tmin: option.availableMin,\r\n\t\t\t\tmax: option.availableMax\r\n\t\t\t},option.precision)\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label>\",\r\n\t\t\t\t\" <span class='min'>\"+i18n.numberWithUnits(fmt.min,option.unit)+\"</span> \",\r\n\t\t\t\t$sliderInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='range' id='\"+id+\"'>\"),\r\n\t\t\t\t\t()=>$numberInput\r\n\t\t\t\t),\r\n\t\t\t\t\" <span class='max'>\"+i18n.numberWithUnits(fmt.max,option.unit)+\"</span> \",\r\n\t\t\t\t$numberInput=setInputAttrsAndListeners(\r\n\t\t\t\t\t$(\"<input type='number' required>\"),\r\n\t\t\t\t\t()=>$sliderInput\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$sliderInput.val(option.defaultValue).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Array,function(){\r\n\t\t\treturn new ArrayOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nclass OptionVisibilityManager {\r\n\tconstructor() {\r\n\t\tthis.options={}\r\n\t\tthis.affects={}\r\n\t\tthis.inArray=0\r\n\t}\r\n\tregister(option) {\r\n\t\tif (!this.inArray) {\r\n\t\t\tthis.options[option.fullName]=option\r\n\t\t\toption.addUpdateCallback(()=>{\r\n\t\t\t\tthis.updateVisibilityAffectedBy(option.fullName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tdeclareAffectedBy(option,byFullName) {\r\n\t\tif (this.affects[byFullName]===undefined) {\r\n\t\t\tthis.affects[byFullName]=[]\r\n\t\t}\r\n\t\tthis.affects[byFullName].push(option)\r\n\t}\r\n\tupdateVisibilityAffectedBy(byFullName) {\r\n\t\tif (this.affects[byFullName]!==undefined) {\r\n\t\t\tthis.affects[byFullName].forEach(option=>{\r\n\t\t\t\toption.updateVisibility()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tenterArray() {\r\n\t\tthis.inArray+=1\r\n\t}\r\n\texitArray() {\r\n\t\tthis.inArray-=1\r\n\t}\r\n}\r\n\r\nclass Options {\r\n\tconstructor(data) { // data = imported values, import is done in ctor to avoid calling updateCallback later\r\n\t\tconst Option=this.optionClasses\r\n\t\tconst makeEntry=(description,data,parent,visibilityManager)=>{\r\n\t\t\tconst className=description[0]\r\n\t\t\tif (Option[className]===undefined) {\r\n\t\t\t\tthrow new Error(`invalid option type '${className}'`)\r\n\t\t\t}\r\n\t\t\tconst makeArgs=description.slice(1)\r\n\t\t\treturn Option[className].make(...makeArgs)(\r\n\t\t\t\tdata,parent,visibilityManager,makeEntry\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.root=Option.Root.make(null,this.entriesDescription)(\r\n\t\t\tdata,null,new OptionVisibilityManager,makeEntry\r\n\t\t)\r\n\t}\r\n\t// methods to be redefined by subclasses\r\n\t// TODO make them static?\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n\tget entriesDescription() {\r\n\t\treturn []\r\n\t}\r\n\t// public methods\r\n\taddUpdateCallback(updateCallback) {\r\n\t\tthis.root.addUpdateCallback(updateCallback)\r\n\t}\r\n\texport() {\r\n\t\treturn this.root.shortenExport(this.root.export())\r\n\t}\r\n\tfix() {\r\n\t\treturn this.root.fix()\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass RefLines extends Lines {\r\n\tconstructor(data,ref) {\r\n\t\tsuper(data)\r\n\t\tthis.ref=ref\r\n\t}\r\n\tstatic parse(s) {\r\n\t\tconst a=Lines.ba(\"\")\r\n\t\tconst re=/^(.*?)\\[([^\\]]+)\\]\\[([^\\]]+)\\]/\r\n\t\tfor (;s.length>0;) {\r\n\t\t\tconst match=re.exec(s)\r\n\t\t\tif (match) {\r\n\t\t\t\ta.t(match[1])\r\n\t\t\t\ta.t(this.b(match[3]).ae(match[2]))\r\n\t\t\t\ts=s.substr(match[0].length)\r\n\t\t\t} else {\r\n\t\t\t\ta.t(s)\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tconst plainOut=super.doGet(formatting,html)\r\n\t\tlet href\r\n\t\tif (html && typeof formatting.refs == 'object') {\r\n\t\t\thref=formatting.refs[this.ref]\r\n\t\t}\r\n\t\tif (href!==undefined) {\r\n\t\t\treturn plainOut.map(s=>\"<a href='\"+escape(href)+\"'>\"+s+\"</a>\")\r\n\t\t} else {\r\n\t\t\treturn plainOut\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=RefLines\r\n","'use strict'\r\n\r\nconst Lines=require('./lines')\r\nconst NoseWrapLines=require('./nose-wrap-lines')\r\nconst CodeSection=require('./code-section')\r\n\r\nclass WebCode {\r\n\t// public:\r\n\tget filename() {\r\n\t\treturn this.basename+'.html'\r\n\t}\r\n\tget mimeType() {\r\n\t\treturn 'text/html'\r\n\t}\r\n\tget(formatting) {\r\n\t\treturn this.getLines().get(formatting)\r\n\t}\r\n\tgetHtml(formatting) {\r\n\t\treturn this.getLines().getHtml(formatting)\r\n\t}\r\n\textractSections(sectionModes) {\r\n\t\tif (sectionModes===undefined) {\r\n\t\t\tsectionModes={}\r\n\t\t}\r\n\t\tlet stylePlaceLines=NoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines)\r\n\t\tlet styleExtractLines=Lines.be()\r\n\t\tif (sectionModes.css=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tstylePlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tstylePlaceLines=Lines.bae(\"<!-- <style> \"+this.getSectionPasteComment('css')+\" </style> -->\")\r\n\t\t\t}\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t} else if (sectionModes.css=='file') {\r\n\t\t\tstylePlaceLines=Lines.bae(Lines.html`<link rel=stylesheet href=${this.basename+'.css'}>`)\r\n\t\t\tstyleExtractLines=this.cachedStyleLines\r\n\t\t}\r\n\t\tlet scriptPlaceLines=NoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\tlet scriptExtractLines=Lines.be()\r\n\t\tif (sectionModes.js=='paste') {\r\n\t\t\tif (sectionModes.html=='body') {\r\n\t\t\t\tscriptPlaceLines=Lines.be()\r\n\t\t\t} else {\r\n\t\t\t\tscriptPlaceLines=Lines.bae(\"<!-- <script> \"+this.getSectionPasteComment('js')+\" </script> -->\")\r\n\t\t\t}\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t} else if (sectionModes.js=='file') {\r\n\t\t\tscriptPlaceLines=Lines.bae(Lines.html`<script src=${this.basename+'.js'}></script>`)\r\n\t\t\tscriptExtractLines=this.cachedScriptLines\r\n\t\t}\r\n\t\tlet htmlExtractLines\r\n\t\tif (sectionModes.html=='body') {\r\n\t\t\thtmlExtractLines=this.getBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t} else {\r\n\t\t\thtmlExtractLines=this.getFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines)\r\n\t\t}\r\n\t\tconst type=sectionName=>'text/'+(sectionName=='js'?'javascript':sectionName)\r\n\t\treturn {\r\n\t\t\thtml: new CodeSection(this.filename,type('html'),htmlExtractLines),\r\n\t\t\tcss:  new CodeSection(this.basename+'.css',type('css'),styleExtractLines),\r\n\t\t\tjs:   new CodeSection(this.basename+'.js',type('js'),scriptExtractLines),\r\n\t\t}\r\n\t}\r\n\t// get title()\r\n\r\n\t// private:\r\n\tgetLines() {\r\n\t\treturn this.getFullHtmlSectionLines(\r\n\t\t\tNoseWrapLines.b(\"<style>\",\"</style>\").ae(this.cachedStyleLines),\r\n\t\t\tNoseWrapLines.b(\"<script>\",\"</script>\").ae(this.cachedScriptLines)\r\n\t\t)\r\n\t}\r\n\tgetFullHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\tconst a=Lines.b()\r\n\t\ta(\"<!DOCTYPE html>\")\r\n\t\tif (this.lang!==null) {\r\n\t\t\ta(Lines.html`<html lang=${this.lang}>`)\r\n\t\t} else {\r\n\t\t\ta(\"<html>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\t\"<head>\",\r\n\t\t\t\"<meta charset=utf-8>\"\r\n\t\t)\r\n\t\tif (this.title!==null) {\r\n\t\t\ta(\"<title>\"+this.title+\"</title>\")\r\n\t\t}\r\n\t\ta(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\t\"</head>\",\r\n\t\t\t\"<body>\",\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines,\r\n\t\t\t\"</body>\",\r\n\t\t\t\"</html>\"\r\n\t\t)\r\n\t\treturn a.e()\r\n\t}\r\n\tgetBodyHtmlSectionLines(stylePlaceLines,scriptPlaceLines) {\r\n\t\treturn Lines.bae(\r\n\t\t\tstylePlaceLines,\r\n\t\t\tthis.cachedHeadLines,\r\n\t\t\tthis.cachedBodyLines,\r\n\t\t\tscriptPlaceLines\r\n\t\t)\r\n\t}\r\n\tget cachedStyleLines()  { if (!this._styleLines)  this._styleLines =this.styleLines;  return this._styleLines  }\r\n\tget cachedHeadLines()   { if (!this._headLines)   this._headLines  =this.headLines;   return this._headLines   }\r\n\tget cachedBodyLines()   { if (!this._bodyLines)   this._bodyLines  =this.bodyLines;   return this._bodyLines   }\r\n\tget cachedScriptLines() { if (!this._scriptLines) this._scriptLines=this.scriptLines; return this._scriptLines }\r\n\r\n\t// to be redefined in subclasses:\r\n\tget basename() { // filename base\r\n\t\treturn 'source'\r\n\t}\r\n\tget lang() { // language tag for <html lang=xx> or null to skip it - likely read from i18n\r\n\t\treturn null\r\n\t}\r\n\tget title() { // page title or null to skip it\r\n\t\treturn null\r\n\t}\r\n\tget styleLines() { // contents of <style>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget headLines() { // contents of <head> following <style>, goes to <body> in html body mode\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget bodyLines() { // contents of <body> preceding <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tget scriptLines() { // contents of <script>\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetSectionPasteComment(sectionName) { // section placeholder comment in paste mode - likely to be overridden with i18n\r\n\t\treturn sectionName+\" goes here\"\r\n\t}\r\n}\r\n\r\nmodule.exports=WebCode\r\n","'use strict'\r\n\r\nconst escape=require('./fake-lodash/escape')\r\nconst Lines=require('./lines')\r\n\r\nclass WrapLines extends Lines {\r\n\tconstructor(data) {\r\n\t\tsuper(data)\r\n\t\tthis.wrappers=[]\r\n\t\tfor (let i=1;i<arguments.length;i++) {\r\n\t\t\tthis.wrappers.push(arguments[i])\r\n\t\t}\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn false\r\n\t}\r\n\tdoGet(formatting,html) {\r\n\t\tlet indent='\\t'\r\n\t\tif (formatting.indent!==undefined) {\r\n\t\t\tindent=formatting.indent\r\n\t\t}\r\n\t\tconst out=[]\r\n\t\tlet i=0\r\n\t\tconst pushWrapper=()=>{\r\n\t\t\tconst item=this.wrappers[i]\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut)\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(s)\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\tpushWrapper()\r\n\t\tthis.data.forEach(item=>{\r\n\t\t\tif (item instanceof Lines) {\r\n\t\t\t\tconst subOut=item.doGet(formatting,html)\r\n\t\t\t\tout.push(...subOut.map(s=>indent+s))\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof item == 'string') {\r\n\t\t\t\tconst s=(html ? escape(item) : item)\r\n\t\t\t\tout.push(indent+s)\r\n\t\t\t\tif (this.wrappers.length!=2) {\r\n\t\t\t\t\tpushWrapper()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (this.wrappers.length==2) {\r\n\t\t\tpushWrapper()\r\n\t\t}\r\n\t\treturn out\r\n\t}\r\n}\r\n\r\nmodule.exports=WrapLines\r\n","'use strict'\r\n\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass AudioContext extends Feature {\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.context')),\r\n\t\t\t\t\"var ctx=new (AudioContext || webkitAudioContext);\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=AudioContext\r\n","'use strict'\r\n\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass BiquadFilterOptionOutput extends FilterOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet $cloneButton\r\n\t\tconst computeCoefs=(sampleRate,type,frequency,detune,Q,gain,post20160415)=>{\r\n\t\t\t// constants defined in the spec\r\n\t\t\tconst F_s=sampleRate\r\n\t\t\tconst f_0=frequency*Math.pow(2,detune/1200)\r\n\t\t\tconst G=gain\r\n\t\t\tconst A=Math.pow(10,G/40)\r\n\t\t\tconst omega_0=2*Math.PI*f_0/F_s\r\n\t\t\tconst alpha_Q=Math.sin(omega_0)/(2*Q)\r\n\t\t\tconst Q_dB=Math.pow(10,Q/20) // fix for incorrect alpha_B\r\n\t\t\tconst alpha_B=Math.sin(omega_0)/2*Math.sqrt((4-Math.sqrt(16-16/(Q_dB*Q_dB)))/2) // was incorrect in the spec\r\n\t\t\tconst alpha_Q_dB=Math.sin(omega_0)/(2*Q_dB) // introduced on 2016-04-15\r\n\t\t\tconst S=1\r\n\t\t\tconst alpha_S=Math.sin(omega_0)/2*Math.sqrt((A+1/A)*(1/S-1)+2)\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst c=Math.cos(omega_0)\r\n\t\t\tconst aSA2=2*alpha_S*Math.sqrt(A)\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\tcase 'lowpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1-c)/2,   1-c, (1-c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'highpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [(1+c)/2, -(1+c), (1+c)/2],\r\n\t\t\t\t\tfeedback: (post20160415\r\n\t\t\t\t\t\t? [1+alpha_Q_dB, -2*c, 1-alpha_Q_dB]\r\n\t\t\t\t\t\t: [1+alpha_B   , -2*c, 1-alpha_B   ]\r\n\t\t\t\t\t),\r\n\t\t\t\t}\r\n\t\t\tcase 'bandpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [alpha_Q, 0, -alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'notch':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1, -2*c, 1],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'allpass':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1-alpha_Q, -2*c, 1+alpha_Q],\r\n\t\t\t\t\tfeedback: [1+alpha_Q, -2*c, 1-alpha_Q],\r\n\t\t\t\t}\r\n\t\t\tcase 'peaking':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [1+alpha_Q*A, -2*c, 1-alpha_Q*A],\r\n\t\t\t\t\tfeedback: [1+alpha_Q/A, -2*c, 1-alpha_Q/A],\r\n\t\t\t\t}\r\n\t\t\tcase 'lowshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t 2*A*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) - (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c + aSA2,\r\n\t\t\t\t\t\t  -2*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) + (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\tcase 'highshelf':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfeedforward: [\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c + aSA2 ),\r\n\t\t\t\t\t\t-2*A*( (A-1) + (A+1)*c ),\r\n\t\t\t\t\t\t   A*( (A+1) + (A-1)*c - aSA2 ),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tfeedback: [\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c + aSA2,\r\n\t\t\t\t\t\t   2*( (A-1) - (A+1)*c ),\r\n\t\t\t\t\t\t       (A+1) - (A-1)*c - aSA2,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst This=this\r\n\t\tlet $cloneUi\r\n\t\tconst writeCloneButton=(post20160415)=>{\r\n\t\t\treturn $(\"<button type='button' class='clone'>\"+i18n(\r\n\t\t\t\t'options-output.filter.biquad.clone.'+(post20160415?'post':'pre')\r\n\t\t\t)+\"</button>\").click(function(){\r\n\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\tconst fixedOption=option.fix()\r\n\t\t\t\t\tconst coefs=computeCoefs(\r\n\t\t\t\t\t\taudioContext.sampleRate,\r\n\t\t\t\t\t\tfixedOption.type.value,\r\n\t\t\t\t\t\tfixedOption.frequency.value,\r\n\t\t\t\t\t\tfixedOption.detune.value,\r\n\t\t\t\t\t\tMath.pow(10,fixedOption.Q.value),\r\n\t\t\t\t\t\tfixedOption.gain.value,\r\n\t\t\t\t\t\tpost20160415\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (coefs) {\r\n\t\t\t\t\t\t$(this).data('coefs',coefs)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).removeData('coefs')\r\n\t\t\t\t\t}\r\n\t\t\t\t},$cloneUi,i18n('options-output.filter.contextError'))\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.$output.append(\r\n\t\t\t$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.biquad.clone')+\":</label> \",\r\n\t\t\t\t$cloneUi=$(\"<span>\").append(\r\n\t\t\t\t\twriteCloneButton(false),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\twriteCloneButton(true)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetFilterNode(audioContext) {\r\n\t\tconst biquadNode=audioContext.createBiquadFilter()\r\n\t\tconst fixedOption=this.option.fix()\r\n\t\tbiquadNode.type=fixedOption.type.value\r\n\t\tbiquadNode.frequency.value=fixedOption.frequency.value\r\n\t\tbiquadNode.detune.value=fixedOption.detune.value\r\n\t\tbiquadNode.Q.value=Math.pow(10,fixedOption.Q.value)\r\n\t\tbiquadNode.gain.value=fixedOption.gain.value\r\n\t\treturn biquadNode\r\n\t}\r\n}\r\n\r\nmodule.exports=BiquadFilterOptionOutput\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Canvas extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=Lines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"<div>\",\r\n\t\t\t\tLines.html`\t<canvas id=my.canvas width=${this.options.width} height=${this.options.height}></canvas>`,\r\n\t\t\t\t\"</div>\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"var canvas=document.getElementById('my.canvas');\",\r\n\t\t\t\t\"var canvasContext=canvas.getContext('2d');\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tconst writeStyle=(canvasContextProperty,colorOption)=>{\r\n\t\t\tconst cs=['r','g','b']\r\n\t\t\tconst color=cs.map(c=>colorOption[c]+\"%\").join()\r\n\t\t\tconst isBlack=cs.every(c=>colorOption[c]==0)\r\n\t\t\tif (colorOption.a==100) {\r\n\t\t\t\tif (!isBlack) {\r\n\t\t\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgb(\"+color+\")';\")\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ta(\"canvasContext.\"+canvasContextProperty+\"='rgba(\"+color+\",\"+(colorOption.a/100).toFixed(2)+\")';\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (featureContext.canvas) {\r\n\t\t\tif (this.options.background.type=='clear') {\r\n\t\t\t\ta(\"canvasContext.clearRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t} else {\r\n\t\t\t\twriteStyle('fillStyle',this.options.background.color)\r\n\t\t\t\ta(\"canvasContext.fillRect(0,0,canvas.width,canvas.height);\")\r\n\t\t\t}\r\n\t\t\tif (this.options.line.width!=1.0) {\r\n\t\t\t\ta(\"canvasContext.lineWidth=\"+this.options.line.width+\";\")\r\n\t\t\t}\r\n\t\t\twriteStyle('strokeStyle',this.options.line.color)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\nconst BaseCodeOutput=require('crnx-base/code-output')\r\n\r\nclass CodeOutput extends BaseCodeOutput {\r\n\tget defaultFormatting() {\r\n\t\tconst formatting=super.defaultFormatting\r\n\t\tformatting.refs={\r\n\t\t\tcontext:     'https://www.w3.org/TR/webaudio/#AudioContext',\r\n\t\t\tsource:      'https://www.w3.org/TR/webaudio/#MediaElementAudioSourceNode',\r\n\t\t\tgain:        'https://www.w3.org/TR/webaudio/#GainNode',\r\n\t\t\tpanner:      'https://www.w3.org/TR/webaudio/#the-stereopannernode-interface',\r\n\t\t\tbiquad:      'https://www.w3.org/TR/webaudio/#the-biquadfilternode-interface',\r\n\t\t\tiir:         'https://www.w3.org/TR/webaudio/#the-iirfilternode-interface',\r\n\t\t\tconvolver:   'https://www.w3.org/TR/webaudio/#ConvolverNode',\r\n\t\t\tpeaking:     'https://www.w3.org/TR/webaudio/#idl-def-BiquadFilterType.peaking',\r\n\t\t\tdestination: 'https://www.w3.org/TR/webaudio/#AudioDestinationNode',\r\n\t\t\tcompressor:  'https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface',\r\n\t\t\tanalyser:    'https://www.w3.org/TR/webaudio/#the-analysernode-interface',\r\n\t\t}\r\n\t\treturn formatting\r\n\t}\r\n\tinitDomProps() {\r\n\t\tsuper.initDomProps()\r\n\t\tthis.$warnings=$()\r\n\t}\r\n\tapplyUpdatedCode(i18n) {\r\n\t\tsuper.applyUpdatedCode(i18n)\r\n\t\tthis.$warnings.toggle(!this.code.isInteresting)\r\n\t}\r\n\twriteButtons(i18n) {\r\n\t\treturn super.writeButtons(i18n).append(\r\n\t\t\t\" <span class='tip-warn'><span class='tip-content'>\"+i18n('code-output.warning.jsfiddle-run')+\"</span></span>\"\r\n\t\t)\r\n\t}\r\n\twriteSectionSummary(sectionName,i18n) {\r\n\t\tconst $section=super.writeSectionSummary(sectionName,i18n)\r\n\t\tif (sectionName=='html' || sectionName=='js') {\r\n\t\t\tlet $warning\r\n\t\t\t$section.append(\r\n\t\t\t\t\" \",\r\n\t\t\t\t$warning=$(\"<span class='tip-warn'><span class='tip-content'>\"+i18n('code-output.warning.interesting')+\"</span></span>\")\r\n\t\t\t)\r\n\t\t\tthis.$warnings=this.$warnings.add($warning)\r\n\t\t}\r\n\t\treturn $section\r\n\t}\r\n}\r\n\r\nmodule.exports=CodeOutput\r\n","'use strict'\r\n\r\nconst AudioContext=require('./audio-context')\r\nconst SourceSet=require('./source-set')\r\nconst FilterSequence=require('./filter-sequence')\r\nconst Destination=require('./destination')\r\nconst Canvas=require('./canvas')\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst BaseWebCode=require('crnx-base/web-code')\r\n\r\nclass Code extends BaseWebCode {\r\n\tconstructor(options,i18n) {\r\n\t\tsuper()\r\n\t\tthis.i18n=i18n\r\n\t\tthis.featureContext={}\r\n\t\tthis.features=[\r\n\t\t\tnew AudioContext,\r\n\t\t\tnew SourceSet(options.sources),\r\n\t\t\tnew FilterSequence(options.filters),\r\n\t\t\tnew Destination(options.destination),\r\n\t\t\tnew Canvas(options.canvas),\r\n\t\t]\r\n\t\tthis.features.forEach(feature=>{\r\n\t\t\tfeature.requestFeatureContext(this.featureContext)\r\n\t\t})\r\n\t\tthis.isInteresting=!!this.featureContext.audioContext\r\n\t}\r\n\tget basename() {\r\n\t\treturn 'webaudio'\r\n\t}\r\n\tget lang() {\r\n\t\treturn this.i18n.lang\r\n\t}\r\n\tget title() {\r\n\t\treturn this.i18n('code.title')\r\n\t}\r\n\tget styleLines() {\r\n\t\tconst a=Lines.b()\r\n\t\tif (this.featureContext.alignedInputs) {\r\n\t\t\ta(\r\n\t\t\t\t\"label {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 15em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"\tline-height: 0.8em;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".min {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: right;\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\".max {\",\r\n\t\t\t\t\"\tdisplay: inline-block;\",\r\n\t\t\t\t\"\twidth: 5em;\",\r\n\t\t\t\t\"\ttext-align: left;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.featureContext.canvas) {\r\n\t\t\ta(\r\n\t\t\t\t\"canvas {\",\r\n\t\t\t\t\"\tborder: 1px solid;\",\r\n\t\t\t\t\"}\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget bodyLines() {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.features.map(feature=>feature.getHtmlLines(this.featureContext,this.i18n))\r\n\t\t)\r\n\t}\r\n\tget scriptLines() {\r\n\t\tlet prevNodeJsNames\r\n\t\treturn InterleaveLines.bae(\r\n\t\t\t...this.features.map(feature=>{\r\n\t\t\t\tconst lines=feature.getJsInitLines(this.featureContext,this.i18n,prevNodeJsNames)\r\n\t\t\t\tprevNodeJsNames=feature.getNodeJsNames(this.featureContext,prevNodeJsNames)\r\n\t\t\t\treturn lines\r\n\t\t\t}),\r\n\t\t\tNoseWrapLines.b(\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"function visualize() {\"\r\n\t\t\t\t),\r\n\t\t\t\tJsLines.bae(\r\n\t\t\t\t\t\"\trequestAnimationFrame(visualize);\",\r\n\t\t\t\t\t\"}\",\r\n\t\t\t\t\t\"requestAnimationFrame(visualize);\"\r\n\t\t\t\t)\r\n\t\t\t).ae(\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopPreLines(this.featureContext,this.i18n)),\r\n\t\t\t\t...this.features.map(feature=>feature.getJsLoopVisLines(this.featureContext,this.i18n))\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=Code\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst Feature=require('./feature')\r\n\r\nclass CollectionFeature extends Feature {\r\n\tconstructor(entryOptions) {\r\n\t\tsuper()\r\n\t\tconst entryCounts=new Map\r\n\t\tentryOptions.entries.forEach(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tentryCounts.set(entryClass,entryCounts.get(entryClass)+1||1)\r\n\t\t})\r\n\t\tconst entryCounts2=new Map\r\n\t\tthis.entries=entryOptions.entries.map(entryOption=>{\r\n\t\t\tconst entryClass=this.getEntryClass(entryOption)\r\n\t\t\tif (entryCounts.get(entryClass)>1) {\r\n\t\t\t\tconst n=entryCounts2.get(entryClass)||0\r\n\t\t\t\tentryCounts2.set(entryClass,n+1)\r\n\t\t\t\treturn new entryClass(entryOption,n)\r\n\t\t\t} else {\r\n\t\t\t\treturn new entryClass(entryOption)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(...this.entries.map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\t// abstract:\r\n\t// getEntryClass(entryOption) {}\r\n}\r\n\r\nmodule.exports=CollectionFeature\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst Feature=require('./feature')\r\n\r\nclass Destination extends Feature {\r\n\tconstructor(options) {\r\n\t\tsuper()\r\n\t\tthis.options=options\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tif (this.options.compressor || this.options.waveform) {\r\n\t\t\tfeatureContext.audioContext=true\r\n\t\t}\r\n\t\tif (this.options.waveform) {\r\n\t\t\tfeatureContext.canvas=true\r\n\t\t}\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tconst a=NoseWrapLines.b(\"<div>\",\"</div>\")\r\n\t\tif (featureContext.audioProcessing && this.options.compressor) {\r\n\t\t\ta(\r\n\t\t\t\t\"<input id=my.compressor type=checkbox checked>\",\r\n\t\t\t\tLines.html`<label for=my.compressor>${i18n('options.destination.compressor.enable')}</label>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioProcessing && featureContext.audioContext) {\r\n\t\t\tif (this.options.compressor) {\r\n\t\t\t\tlet nextNodeJsName=(this.options.waveform ? 'analyserNode' : 'ctx.destination')\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.compressor')),\r\n\t\t\t\t\t\"var compressorNode=ctx.createDynamicsCompressor();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(compressorNode);\")\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length>0) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"document.getElementById('my.compressor').onchange=function(){\",\r\n\t\t\t\t\t\t\"\tif (this.checked) {\",\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(compressorNode);\"),\r\n\t\t\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".disconnect(compressorNode);\"),\r\n\t\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>\"\\t\\t\"+prevNodeJsName+\".connect(\"+nextNodeJsName+\");\"),\r\n\t\t\t\t\t\t\"\t}\",\r\n\t\t\t\t\t\t\"};\",\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tprevNodeJsNames=['compressorNode']\r\n\t\t\t}\r\n\t\t\tif (this.options.waveform) {\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination.waveform')),\r\n\t\t\t\t\t\"var analyserNode=ctx.createAnalyser();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(analyserNode);\"),\r\n\t\t\t\t\t\"analyserNode.fftSize=1024;\",\r\n\t\t\t\t\t\"var analyserData=new Uint8Array(analyserNode.frequencyBinCount);\",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t)\r\n\t\t\t\tprevNodeJsNames=['analyserNode']\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.destination')),\r\n\t\t\t\t...prevNodeJsNames.map(prevNodeJsName=>prevNodeJsName+\".connect(ctx.destination);\")\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\tconst a=JsLines.b()\r\n\t\tif (featureContext.audioProcessing && this.options.waveform) {\r\n\t\t\ta(\r\n\t\t\t\t\"analyserNode.getByteTimeDomainData(analyserData);\",\r\n\t\t\t\t\"canvasContext.beginPath();\",\r\n\t\t\t\t\"for (var i=0;i<analyserData.length;i++) {\",\r\n\t\t\t\t\"\tvar x=i*canvas.width/analyserData.length;\",\r\n\t\t\t\t\"\tvar y=analyserData[i]*canvas.height/255;\",\r\n\t\t\t\t\"\tif (i==0) {\",\r\n\t\t\t\t\"\t\tcanvasContext.moveTo(x,y);\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tcanvasContext.lineTo(x,y);\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"canvasContext.stroke();\"\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn [\"ctx.destination\"]\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Destination\r\n","'use strict'\r\n\r\nconst Lines=require('crnx-base/lines')\r\n\r\nclass Feature {\r\n\trequestFeatureContext(featureContext) {\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopPreLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetJsLoopVisLines(featureContext,i18n) {\r\n\t\treturn Lines.be()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=Feature\r\n","'use strict'\r\n\r\nconst debounce=require('crnx-base/fake-lodash/debounce')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst GroupOptionOutput=require('crnx-base/group-option-output')\r\n\r\nconst width=300\r\nconst height=300\r\nconst pad=30\r\nconst maxNGridLines=10\r\nconst fontSize=10\r\nconst fontOffset=3\r\nlet audioContext\r\nlet frequencyArray,magnitudeArray,phaseArray\r\n\r\nclass FilterOptionOutput extends GroupOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tlet shown=false\r\n\t\tlet $magnitudeFigure, $phaseFigure\r\n\t\tlet magnitudeCanvasContext, phaseCanvasContext\r\n\t\tconst updatePlots=(filterNode)=>{\r\n\t\t\tfilterNode.getFrequencyResponse(frequencyArray,magnitudeArray,phaseArray)\r\n\t\t\tfor (let i=0;i<width;i++) { // convert to decibels\r\n\t\t\t\tmagnitudeArray[i]=20*Math.log(magnitudeArray[i])/Math.LN10\r\n\t\t\t}\r\n\t\t\tfunction wrap(v,maxAbs) {\r\n\t\t\t\tv%=maxAbs*2\r\n\t\t\t\tif (Math.abs(v)<=maxAbs) return v\r\n\t\t\t\treturn v-(v>0?1:-1)*maxAbs*2\r\n\t\t\t}\r\n\t\t\tlet k=0\r\n\t\t\tlet v0=0\r\n\t\t\tfor (let i=0;i<width;i++) { // unwrap phase\r\n\t\t\t\tlet v1=wrap(phaseArray[i]/Math.PI,1)\r\n\t\t\t\tk+=(v1<v0 && (v0-v1)>((v1+2)-v0))\r\n\t\t\t\tk-=(v1>v0 && (v1-v0)>(v0-(v1-2)))\r\n\t\t\t\tv0=v1\r\n\t\t\t\tphaseArray[i]=v0+2*k\r\n\t\t\t}\r\n\t\t\tconst plotResponse=(canvasContext,array,units,enforcedRange,majorGridLineTest)=>{\r\n\t\t\t\tlet min,max\r\n\t\t\t\tconst setPlotRange=(min0,max0)=>{\r\n\t\t\t\t\tconst ph=pad/height\r\n\t\t\t\t\tmin=((min0+max0)*ph-min0)/(2*ph-1)\r\n\t\t\t\t\tmax=((min0+max0)*ph-max0)/(2*ph-1)\r\n\t\t\t\t}\r\n\t\t\t\tconst minArr=Math.min(...array)\r\n\t\t\t\tconst maxArr=Math.max(...array)\r\n\t\t\t\tsetPlotRange(\r\n\t\t\t\t\tMath.min(0,-enforcedRange+Math.max(0,maxArr-enforcedRange),minArr),\r\n\t\t\t\t\tMath.max(0,enforcedRange-Math.max(0,-enforcedRange-minArr),maxArr)\r\n\t\t\t\t)\r\n\t\t\t\tconst calcX=v=>width*(v-frequencyArray[0])/(frequencyArray[width-1]-frequencyArray[0])\r\n\t\t\t\tconst calcY=v=>height*(1-(v-min)/(max-min))\r\n\t\t\t\tconst drawGrid=(min,max,calcY,labelLimit,units,majorGridLineTest)=>{\r\n\t\t\t\t\tcanvasContext.save()\r\n\t\t\t\t\tcanvasContext.translate(0,0.5) // don't translate along x to keep dashes sharp\r\n\t\t\t\t\tcanvasContext.fillStyle='#444'\r\n\t\t\t\t\tcanvasContext.font=`${fontSize}px`\r\n\t\t\t\t\tcanvasContext.textAlign='right'\r\n\t\t\t\t\tconst numLogs=Math.log(max-min)-Math.log(maxNGridLines)\r\n\t\t\t\t\tlet k\r\n\t\t\t\t\tlet p=Infinity\r\n\t\t\t\t\t;[1,2,5].forEach(tk=>{\r\n\t\t\t\t\t\tconst tp=Math.ceil((numLogs-Math.log(tk))/Math.LN10)\r\n\t\t\t\t\t\tif (tp<p) {\r\n\t\t\t\t\t\t\tp=tp\r\n\t\t\t\t\t\t\tk=tk\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst dv=k*Math.pow(10,p)\r\n\t\t\t\t\tconst v0=Math.ceil(min/dv)*dv\r\n\t\t\t\t\tconst numbers=[]\r\n\t\t\t\t\tfor (let v=v0;v<max;v+=dv) {\r\n\t\t\t\t\t\tnumbers.push(v)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst fmt=formatNumbers(numbers,p<0?-p:0)\r\n\t\t\t\t\tconst getLabel=n=>`${i18n.number(n)}${units}`\r\n\t\t\t\t\tconst labelWidth=Math.max(...fmt.map(n=>canvasContext.measureText(getLabel(n)).width))\r\n\t\t\t\t\tfor (let v=v0,i=0;v<max;v+=dv,i++) {\r\n\t\t\t\t\t\tconst y=Math.round(calcY(v))\r\n\t\t\t\t\t\tconst drawLine=()=>{\r\n\t\t\t\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\t\t\t\tcanvasContext.moveTo(0,y)\r\n\t\t\t\t\t\t\tcanvasContext.lineTo(width,y)\r\n\t\t\t\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst majorGridLine=majorGridLineTest(Number(fmt[i]))\r\n\t\t\t\t\t\tif (majorGridLine) {\r\n\t\t\t\t\t\t\tcanvasContext.strokeStyle='rgba(70%,70%,100%,0.3)'\r\n\t\t\t\t\t\t\tcanvasContext.setLineDash([])\r\n\t\t\t\t\t\t\tcanvasContext.lineWidth=3\r\n\t\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcanvasContext.strokeStyle=(majorGridLine ? '#000' : '#888')\r\n\t\t\t\t\t\tcanvasContext.setLineDash([1])\r\n\t\t\t\t\t\tcanvasContext.lineWidth=1\r\n\t\t\t\t\t\tdrawLine()\r\n\t\t\t\t\t\tif (y-fontOffset-fontSize>labelLimit) {\r\n\t\t\t\t\t\t\tcanvasContext.fillText(getLabel(fmt[i]),fontOffset+labelWidth,y-fontOffset)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasContext.restore()\r\n\t\t\t\t\treturn labelWidth\r\n\t\t\t\t}\r\n\t\t\t\tcanvasContext.clearRect(0,0,width,height)\r\n\t\t\t\tconst yLabelWidth=drawGrid(min,max,calcY,0,units,majorGridLineTest)\r\n\t\t\t\tcanvasContext.save()\r\n\t\t\t\tcanvasContext.rotate(-Math.PI/2)\r\n\t\t\t\tcanvasContext.translate(-height,0)\r\n\t\t\t\tdrawGrid(frequencyArray[0],frequencyArray[width-1],calcX,fontOffset+yLabelWidth,' '+i18n('units.hertz.a'),v=>false)\r\n\t\t\t\tcanvasContext.restore()\r\n\t\t\t\tcanvasContext.save()\r\n\t\t\t\tcanvasContext.translate(0.5,0.5)\r\n\t\t\t\tcanvasContext.strokeStyle='#F00'\r\n\t\t\t\tcanvasContext.beginPath()\r\n\t\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\t\tconst x=i\r\n\t\t\t\t\tconst y=calcY(array[i])\r\n\t\t\t\t\tif (i==0) {\r\n\t\t\t\t\t\tcanvasContext.moveTo(x,y)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcanvasContext.lineTo(x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcanvasContext.stroke()\r\n\t\t\t\tcanvasContext.restore()\r\n\t\t\t}\r\n\t\t\tplotResponse(magnitudeCanvasContext,magnitudeArray,' '+i18n('units.decibel.a'),1,v=>v==0)\r\n\t\t\tplotResponse(phaseCanvasContext,phaseArray,'π',0.1,v=>v%2==0)\r\n\t\t}\r\n\t\tconst delayedUpdate=debounce(()=>{\r\n\t\t\ttry {\r\n\t\t\t\tupdatePlots(this.getFilterNode(audioContext))\r\n\t\t\t} catch (e) {}\r\n\t\t},50)\r\n\t\tconst This=this\r\n\t\tthis.$output.append(\r\n\t\t\t$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label>\"+i18n('options-output.filter.frequencyResponse')+\":</label> \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.show')+\"</button>\").click(function(){\r\n\t\t\t\t\tconst $button=$(this)\r\n\t\t\t\t\tif (!shown) {\r\n\t\t\t\t\t\tThis.runIfCanCreateAudioContext(audioContext=>{\r\n\t\t\t\t\t\t\tlet filterNode\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tfilterNode=This.getFilterNode(audioContext)\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t$button.replaceWith(i18n('options-output.filter.nodeError'))\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet $magnitudeCanvas, $phaseCanvas\r\n\t\t\t\t\t\t\t$button.before(\r\n\t\t\t\t\t\t\t\t$magnitudeFigure=$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.magnitude')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t$magnitudeCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t$phaseFigure=$(\"<figure>\").append(\r\n\t\t\t\t\t\t\t\t\t\"<figcaption>\"+i18n('options-output.filter.phase')+\"</figcaption>\",\r\n\t\t\t\t\t\t\t\t\t$phaseCanvas=$(`<canvas width='${width}' height='${height}'></canvas>`)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t).text(i18n('options-output.hide'))\r\n\t\t\t\t\t\t\tmagnitudeCanvasContext=$magnitudeCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tphaseCanvasContext=$phaseCanvas[0].getContext('2d')\r\n\t\t\t\t\t\t\tupdatePlots(filterNode)\r\n\t\t\t\t\t\t\tshown=true\r\n\t\t\t\t\t\t},$button,i18n('options-output.filter.contextError'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$magnitudeFigure.remove()\r\n\t\t\t\t\t\t$phaseFigure.remove()\r\n\t\t\t\t\t\t$button.text(i18n('options-output.show'))\r\n\t\t\t\t\t\tshown=false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t\toption.addUpdateCallback(()=>{\r\n\t\t\tif (shown) {\r\n\t\t\t\tdelayedUpdate()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\trunIfCanCreateAudioContext(fn,$ui,errorMessage) {\r\n\t\tconst initAudioContext=()=>{\r\n\t\t\taudioContext=new (AudioContext || webkitAudioContext)\r\n\t\t\tfrequencyArray=new Float32Array(width)\r\n\t\t\tmagnitudeArray=new Float32Array(width)\r\n\t\t\tphaseArray=new Float32Array(width)\r\n\t\t\tconst maxFreq=audioContext.sampleRate/2\r\n\t\t\tfor (let i=0;i<width;i++) {\r\n\t\t\t\tfrequencyArray[i]=maxFreq/width*(i+0.5)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!audioContext) {\r\n\t\t\ttry {\r\n\t\t\t\tinitAudioContext()\r\n\t\t\t} catch (e) {\r\n\t\t\t\t$ui.replaceWith(errorMessage)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tfn(audioContext)\r\n\t}\r\n\t// abstract\r\n\t// getFilterNode(audioContext)\r\n}\r\n\r\nmodule.exports=FilterOptionOutput\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst formatNumbers=require('crnx-base/format-numbers')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst NoseWrapLines=require('crnx-base/nose-wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Filter {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tgetPropertyOptionName(property) {\r\n\t\treturn 'options.filters.'+this.type+'.'+property.name\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetPropertyInputHtmlName(propertyName) {\r\n\t\treturn 'my.'+this.type+this.nSuffix+'.'+propertyName\r\n\t}\r\n\tgetPropertyInputJsName(propertyName) {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.'+propertyName+'.input')\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tconst hasRangeInputs=this.nodeProperties.some(property=>{\r\n\t\t\tif (property.type=='range') {\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\treturn option.input\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (hasRangeInputs) {\r\n\t\t\tfeatureContext.alignedInputs=true\r\n\t\t}\r\n\t}\r\n\tgetHtmlPropertyLines(i18n,property) {\r\n\t\tconst option=this.options[property.name]\r\n\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\tconst a=Lines.b()\r\n\t\tif (property.type=='range' && option.input) {\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst fmtAttrs=formatNumbers.html({ min:option.min, max:option.max, value:option.value },p)\r\n\t\t\tconst fmtLabels=formatNumbers({ min:option.min, max:option.max },p)\r\n\t\t\tconst minMax=n=>i18n.numberWithUnits(n,option.unit,(a,e)=>Lines.html`<abbr title=${e}>`+a+`</abbr>`)\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\t\"<span class=min>\"+minMax(fmtLabels.min)+\"</span>\",\r\n\t\t\t\tLines.html`<input id=${inputHtmlName} type=range value=${fmtAttrs.value} min=${fmtAttrs.min} max=${fmtAttrs.max} step=${p?Math.pow(0.1,p).toFixed(p):false}>`,\r\n\t\t\t\t\"<span class=max>\"+minMax(fmtLabels.max)+\"</span>\"\r\n\t\t\t)\r\n\t\t} else if (property.type=='select' && option.input) {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<label for=${inputHtmlName}>${i18n(this.getPropertyOptionName(property))}:</label>`,\r\n\t\t\t\tWrapLines.b(\r\n\t\t\t\t\tLines.html`<select id=${inputHtmlName}>`,`</select>`\r\n\t\t\t\t).ae(\r\n\t\t\t\t\t...option.availableValues.map(value=>{\r\n\t\t\t\t\t\tconst title=i18n(this.getPropertyOptionName(property)+'.'+value)\r\n\t\t\t\t\t\treturn Lines.html`<option selected=${option.value==value} value=${value!=title && value}>${title}</option>`\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t} else if (property.type=='xhr') {\r\n\t\t\ta(\r\n\t\t\t\tLines.html`<span id=${inputHtmlName}>${i18n(this.getPropertyOptionName(property)+'.loading')}</span>`\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tget skipNode() {\r\n\t\treturn false\r\n\t}\r\n\t// { not called if skipNode is set\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn Lines.bae(\r\n\t\t\t...this.nodeProperties.map(\r\n\t\t\t\tproperty=>NoseWrapLines.b(\r\n\t\t\t\t\t\"<div>\",\"</div>\"\r\n\t\t\t\t).ae(\r\n\t\t\t\t\tthis.getHtmlPropertyLines(i18n,property)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\tget nodeJsNames() {\r\n\t\treturn [this.nodeJsName]\r\n\t}\r\n\t// }\r\n\t// abstract:\r\n\t// get type()\r\n\t// get ctxCreateMethodName()\r\n\t// get nodeProperties()\r\n}\r\n\r\nclass SinglePathFilter extends Filter {\r\n\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\treturn Lines.bae(\r\n\t\t\tsuper.getJsInitLines(i18n,prevNodeJsNames),\r\n\t\t\t...this.nodeProperties.map(property=>{\r\n\t\t\t\tconst option=this.options[property.name]\r\n\t\t\t\tconst nodePropertyJsName=this.nodeJsName+\".\"+property.name+(property.type=='range'?\".value\":\"\")\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (option.input) {\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName(property.name)\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName(property.name)\r\n\t\t\t\t\tlet value=inputJsName+\".value\"\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst eventProp=(property.type=='range'?'oninput':'onchange')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t// was for IE11 compat (but IE11 has no Web Audio): (property.type=='range'?inputJsName+\".oninput=\":\"\")+inputJsName+\".onchange=function(){\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".\"+eventProp+\"=function(){\",\r\n\t\t\t\t\t\t\"\t\"+nodePropertyJsName+\"=\"+value+\";\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (option.value!=option.defaultValue) {\r\n\t\t\t\t\tlet value=option.value\r\n\t\t\t\t\tif (property.type=='select') {\r\n\t\t\t\t\t\tvalue=\"'\"+value+\"'\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (property.fn) {\r\n\t\t\t\t\t\tvalue=property.fn(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\tnodePropertyJsName+\"=\"+value+\";\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass PassiveByDefaultSinglePathFilter extends SinglePathFilter {\r\n\tget skipNode() {\r\n\t\treturn this.nodeProperties.every(property=>{\r\n\t\t\tconst option=this.options[property.name]\r\n\t\t\treturn option.value==option.defaultValue && !option.input\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst filterClasses={\r\n\tgain: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'gain' }\r\n\t\tget ctxCreateMethodName() { return 'createGain' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tpanner: class extends PassiveByDefaultSinglePathFilter {\r\n\t\tget type()                { return 'panner' }\r\n\t\tget ctxCreateMethodName() { return 'createStereoPanner' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'pan',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tbiquad: class extends SinglePathFilter {\r\n\t\tget type()                { return 'biquad' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'type',\r\n\t\t\t\t\ttype:'select',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'frequency',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'detune',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'Q',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t\tfn:x=>`Math.pow(10,${x})`,\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'gain',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\t// lowshelf, highshelf and peaking are passive when gain==0\r\n\t\t\treturn (\r\n\t\t\t\t!this.options.type.input && ['lowshelf','highshelf','peaking'].indexOf(this.options.type.value)>=0 &&\r\n\t\t\t\t!this.options.gain.input && this.options.gain==0\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tiir: class extends SinglePathFilter {\r\n\t\tget type()                { return 'iir' }\r\n\t\tget ctxCreateMethodName() { return 'createIIRFilter' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn []\r\n\t\t}\r\n\t\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\t\treturn JsLines.bae(\r\n\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type)),\r\n\t\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"([\"+this.options.feedforward.entries+\"],[\"+this.options.feedback.entries+\"]);\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tconvolver: class extends Filter {\r\n\t\tget type()                { return 'convolver' }\r\n\t\tget ctxCreateMethodName() { return 'createConvolver' }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname:'reverb',\r\n\t\t\t\t\ttype:'range',\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:'buffer',\r\n\t\t\t\t\ttype:'xhr',\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tget dryGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.dry.gain.node')\r\n\t\t}\r\n\t\tget wetGainNodeJsName() {\r\n\t\t\treturn camelCase(this.type+this.nSuffix+'.wet.gain.node')\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.options.reverb==0 && !this.options.reverb.input\r\n\t\t}\r\n\t\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\t\tconst messageHtmlName=this.getPropertyInputHtmlName('buffer')\r\n\t\t\tconst a=JsLines.b()\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type)))\r\n\t\t\t} else {\r\n\t\t\t\ta(RefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')))\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var \"+this.nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\",\r\n\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.nodeJsName+\");\"\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.wetGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\tthis.nodeJsName+\".connect(\"+this.wetGainNodeJsName+\");\",\r\n\t\t\t\t\t\"var \"+this.dryGainNodeJsName+\"=ctx.createGain();\",\r\n\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+this.dryGainNodeJsName+\");\"\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tif (this.options.reverb.input) {\r\n\t\t\t\t\tconst inputHtmlName=this.getPropertyInputHtmlName('reverb')\r\n\t\t\t\t\tconst inputJsName=this.getPropertyInputJsName('reverb')\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById('\"+inputHtmlName+\"');\",\r\n\t\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\t\"\t\"+this.wetGainNodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"\t\"+this.dryGainNodeJsName+\".gain.value=1-\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\t\"})();\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta(\r\n\t\t\t\t\"var xhr=new XMLHttpRequest();\",\r\n\t\t\t\t\"xhr.open('GET','\"+this.options.url+\"');\", // TODO html escape\r\n\t\t\t\t\"xhr.responseType='arraybuffer';\",\r\n\t\t\t\t\"xhr.onload=function(){\",\r\n\t\t\t\t\"\tif (this.status==200) {\", // TODO we are checking status here, but what if <audio>'s status is an error?\r\n\t\t\t\t\"\t\tctx.decodeAudioData(this.response,function(buffer){\",\r\n\t\t\t\t\"\t\t\t\"+this.nodeJsName+\".buffer=buffer;\",\r\n\t\t\t\t\"\t\t\tdocument.getElementById('\"+messageHtmlName+\"').textContent='';\",\r\n\t\t\t\t\"\t\t});\",\r\n\t\t\t\t\"\t} else {\",\r\n\t\t\t\t\"\t\tthis.onerror();\",\r\n\t\t\t\t\"\t}\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.onerror=function(){\",\r\n\t\t\t\t\"\tdocument.getElementById('\"+messageHtmlName+\"').textContent='\"+i18n('options.filters.convolver.buffer.error')+\"';\",\r\n\t\t\t\t\"};\",\r\n\t\t\t\t\"xhr.send();\"\r\n\t\t\t)\r\n\t\t\treturn a.e()\r\n\t\t}\r\n\t\tget nodeJsNames() {\r\n\t\t\tif (this.options.reverb.input || this.options.reverb!=1) {\r\n\t\t\t\treturn [this.wetGainNodeJsName,this.dryGainNodeJsName]\r\n\t\t\t} else {\r\n\t\t\t\treturn [this.nodeJsName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tequalizer: class extends Filter {\r\n\t\tget type()                { return 'equalizer' }\r\n\t\tget ctxCreateMethodName() { return 'createBiquadFilter' }\r\n\t\tget frequencies()         { return [60,170,350,1000,3500,10000] }\r\n\t\tget nodeProperties() {\r\n\t\t\treturn this.frequencies.map(freq=>({\r\n\t\t\t\tname:'gain'+freq,\r\n\t\t\t\ttype:'range',\r\n\t\t\t}))\r\n\t\t}\r\n\t\tgetFrequencyOption(i) {\r\n\t\t\treturn this.options[this.nodeProperties[i].name]\r\n\t\t}\r\n\t\tget affectedFreqsAndOptions() {\r\n\t\t\treturn this.frequencies.map((freq,i)=>{\r\n\t\t\t\tconst option=this.getFrequencyOption(i)\r\n\t\t\t\treturn {freq,option}\r\n\t\t\t}).filter(fo=>(fo.option.input!=false || fo.option.value!=0))\r\n\t\t}\r\n\t\trequestFeatureContext(featureContext) {\r\n\t\t\tif (!this.allGainsConstant) {\r\n\t\t\t\tfeatureContext.alignedInputs=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tget skipNode() {\r\n\t\t\treturn this.affectedFreqsAndOptions.length==0\r\n\t\t}\r\n\t\tgetJsInitLines(i18n,prevNodeJsNames) {\r\n\t\t\tconst singleFreq=this.affectedFreqsAndOptions.length==1\r\n\t\t\tconst allGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==false)\r\n\t\t\tconst noGainsConstant=this.affectedFreqsAndOptions.every(fo=>fo.option.input==true)\r\n\t\t\tconst getJsData=()=>{\r\n\t\t\t\treturn this.affectedFreqsAndOptions.map(fo=>{\r\n\t\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\t\treturn fo.freq\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"[\"+fo.freq+\",\"+(fo.option.input ? 'null' : fo.option.value)+\"]\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).join()\r\n\t\t\t}\r\n\t\t\tconst getJsDataItem=()=>{\r\n\t\t\t\tif (noGainsConstant) {\r\n\t\t\t\t\treturn \"freq\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"freqData\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst getJsLoopLines=()=>{\r\n\t\t\t\tconst freq=(singleFreq ? this.affectedFreqsAndOptions[0].freq : 'freq')\r\n\t\t\t\tconst gain=(singleFreq ? this.affectedFreqsAndOptions[0].option.value : 'gain')\r\n\t\t\t\tconst nodeJsName=((allGainsConstant || singleFreq) ? this.nodeJsName : 'node')\r\n\t\t\t\tconst inputJsName=(singleFreq\r\n\t\t\t\t\t? this.getPropertyInputJsName('gain'+freq)\r\n\t\t\t\t\t: 'input'\r\n\t\t\t\t)\r\n\t\t\t\tconst inputHtmlNameExpr=(singleFreq\r\n\t\t\t\t\t? \"'\"+this.getPropertyInputHtmlName('gain'+freq)+\"'\"\r\n\t\t\t\t\t: \"'\"+this.getPropertyInputHtmlName('gain')+\"'+freq\"\r\n\t\t\t\t)\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\tif (!(noGainsConstant || singleFreq)) {\r\n\t\t\t\t\ta(\"var freq=freqData[0], gain=freqData[1];\")\r\n\t\t\t\t}\r\n\t\t\t\tif (allGainsConstant && !singleFreq) {\r\n\t\t\t\t\ta(\"\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var \")\r\n\t\t\t\t}\r\n\t\t\t\ta.t(nodeJsName+\"=ctx.\"+this.ctxCreateMethodName+\"();\")\r\n\t\t\t\tif (singleFreq) {\r\n\t\t\t\t\ta(\r\n\t\t\t\t\t\t...prevNodeJsNames.map(\r\n\t\t\t\t\t\t\tprevNodeJsName=>prevNodeJsName+\".connect(\"+nodeJsName+\");\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode.connect(\"+nodeJsName+\");\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\r\n\t\t\t\t\t\t\t\"prevNodes.forEach(function(prevNode){\",\r\n\t\t\t\t\t\t\t\"\tprevNode.connect(\"+nodeJsName+\");\",\r\n\t\t\t\t\t\t\t\"});\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\tnodeJsName+\".type='peaking';\",\r\n\t\t\t\t\tnodeJsName+\".frequency.value=\"+freq+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst constLines=JsLines.bae(\r\n\t\t\t\t\tnodeJsName+\".gain.value=\"+gain+\";\"\r\n\t\t\t\t)\r\n\t\t\t\tconst varLines=JsLines.bae(\r\n\t\t\t\t\t\"var \"+inputJsName+\"=document.getElementById(\"+inputHtmlNameExpr+\");\",\r\n\t\t\t\t\t\";(\"+inputJsName+\".oninput=function(){\",\r\n\t\t\t\t\t\"\t\"+nodeJsName+\".gain.value=\"+inputJsName+\".value;\",\r\n\t\t\t\t\t\"})();\"\r\n\t\t\t\t)\r\n\t\t\t\tif (!noGainsConstant && allGainsConstant) {\r\n\t\t\t\t\ta(constLines)\r\n\t\t\t\t} else if (noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(varLines)\r\n\t\t\t\t} else if (!noGainsConstant && !allGainsConstant) {\r\n\t\t\t\t\ta(WrapLines.b(\"if (gain!==null) {\",\"} else {\",\"}\").ae(constLines,varLines))\r\n\t\t\t\t}\r\n\t\t\t\tif (!singleFreq) {\r\n\t\t\t\t\tconst outerNodeJsName=(allGainsConstant ? nodeJsName : this.nodeJsName+\"=\"+nodeJsName)\r\n\t\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\t\ta(\"prevNode=\"+outerNodeJsName+\";\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta(\"prevNodes=[\"+outerNodeJsName+\"];\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t\tif (singleFreq) {\r\n\t\t\t\treturn JsLines.bae(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type+'.single')),\r\n\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tconst a=JsLines.b()\r\n\t\t\t\ta(\r\n\t\t\t\t\tRefLines.parse(\"// \"+i18n('comment.filters.'+this.type))\r\n\t\t\t\t)\r\n\t\t\t\tif (prevNodeJsNames.length==1) {\r\n\t\t\t\t\ta(\"var prevNode=\"+prevNodeJsNames[0]+\";\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta(\"var prevNodes=[\"+prevNodeJsNames.join()+\"];\")\r\n\t\t\t\t}\r\n\t\t\t\ta(\r\n\t\t\t\t\t\"var \"+this.nodeJsName+\";\",\r\n\t\t\t\t\tWrapLines.b(\r\n\t\t\t\t\t\tJsLines.bae(\";[\"+getJsData()+\"].forEach(function(\"+getJsDataItem()+\"){\"),JsLines.bae(\"});\")\r\n\t\t\t\t\t).ae(\r\n\t\t\t\t\t\tgetJsLoopLines()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\treturn a.e()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass FilterSequence extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn filterClasses[entryOption.filter]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (!featureContext.audioProcessing) return\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tfeatureContext.audioContext=true\r\n\t\t\t\tentry.requestFeatureContext(featureContext)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn Lines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>entry.getHtmlLines(featureContext,i18n)))\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return Lines.be()\r\n\t\treturn InterleaveLines.bae(...this.entries.filter(entry=>!entry.skipNode).map(entry=>{\r\n\t\t\tconst lines=entry.getJsInitLines(i18n,prevNodeJsNames)\r\n\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\treturn lines\r\n\t\t}))\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (!featureContext.audioProcessing) return prevNodeJsNames\r\n\t\tthis.entries.forEach(entry=>{\r\n\t\t\tif (!entry.skipNode) {\r\n\t\t\t\tprevNodeJsNames=entry.nodeJsNames\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn prevNodeJsNames\r\n\t}\r\n}\r\n\r\nmodule.exports=FilterSequence\r\n","'use strict'\r\n\r\nconst langStrings={\r\n\ten:{\r\n\t\t'options.sources': \"Sources\",\r\n\t\t'options.sources.{audio,video}': \"{Audio,Video} element\",\r\n\t\t'options.sources.{audio,video}.add': \"Add {} element\",\r\n\t\t'options.sources.{audio,video}.url': \"Source URL\",\r\n\t\t'options.sources.video.{width,height}': \"Player {}\",\r\n\r\n\t\t'options.filters': \"Filters\",\r\n\t\t'options.filters.gain': \"Gain\",\r\n\t\t'options.filters.gain.add': \"Add gain\",\r\n\t\t'options.filters.gain.gain': \"Gain\",\r\n\t\t'options.filters.panner': \"Stereo panner\",\r\n\t\t'options.filters.panner.add': \"Add stereo panner\",\r\n\t\t'options.filters.panner.pan': \"Pan\",\r\n\t\t'options.filters.biquad': \"Biquad filter\", // [[Digital biquad filter]]\r\n\t\t'options.filters.biquad.add': \"Add biquad filter\",\r\n\t\t'options.filters.biquad.type': \"Filter type\",\r\n\t\t'options.filters.biquad.type.{lowpass,highpass,bandpass,lowshelf,highshelf,peaking,notch,allpass}': \"{}\",\r\n\t\t'options.filters.biquad.frequency': \"Frequency\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \"log(Q)\",\r\n\t\t'options.filters.biquad.gain': \"Gain\",\r\n\t\t'options.filters.iir': \"IIR filter\",\r\n\t\t'options.filters.iir.add': \"Add IIR filter\",\r\n\t\t'options.filters.iir.feedforward': \"Feedforward coefficients\", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \"Add coefficient\",\r\n\t\t'options.filters.iir.feedback': \"Feedback coefficients\", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \"Add coefficient\",\r\n\t\t'options.filters.convolver': \"Convolver\",\r\n\t\t'options.filters.convolver.add': \"Add convolver\",\r\n\t\t'options.filters.convolver.url': \"Impulse responce URL\",\r\n\t\t'options.filters.convolver.reverb': \"Reverb (dry/wet)\",\r\n\t\t'options.filters.convolver.buffer.loading': \"Loading and decoding the impulse response\",\r\n\t\t'options.filters.convolver.buffer.error': \"Error while loading the impulse response\",\r\n\t\t'options.filters.equalizer': \"Equalizer\",\r\n\t\t'options.filters.equalizer.add': \"Add equalizer\",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"{} Hz gain\",\r\n\r\n\t\t'options.destination': \"Destination\",\r\n\t\t'options.destination.compressor': \"Add dynamics compressor before the destination\",\r\n\t\t'options.destination.compressor.enable': \"Enable dynamics compressor\",\r\n\t\t'options.destination.waveform': \"Add waveform visualization\",\r\n\r\n\t\t'options.canvas': \"Canvas\",\r\n\t\t'options.canvas.{width,height}': \"Canvas {}\",\r\n\t\t'options.canvas.line': \"Waveform line\",\r\n\t\t'options.canvas.line.width': \"Waveform line width\",\r\n\t\t'options.canvas.line.color': \"Waveform line color\",\r\n\t\t'options.canvas.line.color.{r,g,b,a}': \"Waveform line {red,green,blue,opacity}\",\r\n\t\t'options.canvas.background': \"Background\",\r\n\t\t'options.canvas.background.type': \"Background type\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{}\",\r\n\t\t'options.canvas.background.color': \"Background fill color\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': \"Background fill {red,green,blue,opacity (blur)}\",\r\n\r\n\t\t'options-output.input': \"Editable\",\r\n\t\t'options-output.range': \"with range\",\r\n\t\t'options-output.filter.frequencyResponse': \"Frequency response\",\r\n\t\t'options-output.filter.magnitude': \"Magnitude\",\r\n\t\t'options-output.filter.phase': \"Phase\",\r\n\t\t'options-output.filter.contextError': \"Error creating audio context. Your browser likely doesn't support Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Error creating filter node. Your browser likely doesn't support this filter type.\",\r\n\t\t'options-output.filter.biquad.clone': \"Clone as IIR filter\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"Clone with {}-2016-04-15 coefficients\",\r\n\t\t'options-output.show': \"Show\",\r\n\t\t'options-output.hide': \"Hide\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"You may have to click <kbd>Run</kbd> in JSFiddle to get sound output working\",\r\n\t\t'code-output.warning.interesting': \"You need at least one source and some processing enabled to get interesting JavaScript code\",\r\n\r\n\t\t'code.title': \"Web Audio API example — generated code\",\r\n\r\n\t\t'comment.context': \"create [audio context][context]\",\r\n\t\t'comment.sources.audio': \"create [audio source node][source]\",\r\n\t\t'comment.sources.video': \"create [video source node][source]\",\r\n\t\t'comment.filters.gain': \"create [gain node][gain]\",\r\n\t\t'comment.filters.panner': \"create [stereo panner node][panner]\",\r\n\t\t'comment.filters.biquad': \"create [biquad filter node][biquad]\",\r\n\t\t'comment.filters.iir': \"create [IIR filter node][iir]\",\r\n\t\t'comment.filters.convolver': \"create dry and wet routes with [convolver node][convolver]\",\r\n\t\t'comment.filters.convolver.single': \"create [convolver node][convolver]\",\r\n\t\t'comment.filters.equalizer': \"create equalizer as a sequence of [peaking][peaking] [biquad filter nodes][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"create equalizer as a [peaking][peaking] [biquad filter node][biquad]\",\r\n\t\t'comment.destination': \"connect last node to [destination][destination]\",\r\n\t\t'comment.destination.compressor': \"create [dynamics compressor node][compressor]\",\r\n\t\t'comment.destination.waveform': \"create [analyser node][analyser] for waveform visualization\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2}': \"pixel{,s}\",\r\n\t\t'units.hertz.a': \"Hz\",\r\n\t\t'units.hertz.{1,2}': \"Hertz\",\r\n\t\t'units.decibel.a': \"dB\",\r\n\t\t'units.decibel.{1,2}': \"decibel{,s}\",\r\n\t},\r\n\tru:{\r\n\t\t'options.sources': \"Источники\",\r\n\t\t'options.sources.{audio,video}': \"Элемент <code>{}</code>\",\r\n\t\t'options.sources.{audio,video}.add': \"Добавить элемент <code>{}</code>\",\r\n\t\t'options.sources.{audio,video}.url': \"URL источника\",\r\n\t\t'options.sources.video.{width,height}': \"{Ширина,Высота} проигрывателя\",\r\n\r\n\t\t'options.filters': \"Фильтры\",\r\n\t\t'options.filters.gain': \"Усилитель\",\r\n\t\t'options.filters.gain.add': \"Добавить усилитель\",\r\n\t\t'options.filters.gain.gain': \"Коэффициент усиления\",\r\n\t\t'options.filters.panner': \"Панорамирование\",\r\n\t\t'options.filters.panner.add': \"Добавить панорамирование\",\r\n\t\t'options.filters.panner.pan': \"Баланс\",\r\n\t\t'options.filters.biquad': \"Биквадратичный фильтр\",\r\n\t\t'options.filters.biquad.add': \"Добавить биквадратичный фильтр\",\r\n\t\t'options.filters.biquad.type': \"Тип фильтра\",\r\n\t\t'options.filters.biquad.type.lowpass': \"нижних частот\",\r\n\t\t'options.filters.biquad.type.highpass': \"верхних частот\",\r\n\t\t'options.filters.biquad.type.bandpass': \"полосовой\",\r\n\t\t'options.filters.biquad.type.{lowshelf,highshelf,peaking}': \"{}\", // TODO\r\n\t\t'options.filters.biquad.type.notch': \"полосно-заграждающий\",\r\n\t\t'options.filters.biquad.type.allpass': \"всепропускающий\", // http://www.dsplib.ru/content/allpass/allpass.html\r\n\t\t'options.filters.biquad.frequency': \"Частота\",\r\n\t\t'options.filters.biquad.detune': \"Detune\",\r\n\t\t'options.filters.biquad.Q': \"Логарифм добротности\",\r\n\t\t'options.filters.biquad.gain': \"Усиление\",\r\n\t\t'options.filters.iir': \"БИХ-фильтр\",\r\n\t\t'options.filters.iir.add': \"Добавить БИХ-фильтр\",\r\n\t\t'options.filters.iir.feedforward': \"Коэффициенты прямой связи\", // Transfer fn numerator coefs\r\n\t\t'options.filters.iir.feedforward.b': \"b\",\r\n\t\t'options.filters.iir.feedforward.b.add': \"Добавить коэффициент\",\r\n\t\t'options.filters.iir.feedback': \"Коэффициенты обратной связи\", // Transfer fn denominator coefs\r\n\t\t'options.filters.iir.feedback.a': \"a\",\r\n\t\t'options.filters.iir.feedback.a.add': \"Добавить коэффициент\",\r\n\t\t'options.filters.convolver': \"Свёртка\",\r\n\t\t'options.filters.convolver.add': \"Добавить свёртку\",\r\n\t\t'options.filters.convolver.url': \"URL импульсной характеристики\",\r\n\t\t'options.filters.convolver.reverb': \"Соотношение прямого/обработанного звука\", // http://www.ixbt.com/proaudio/theory-of-reverb.shtml\r\n\t\t'options.filters.convolver.buffer.loading': \"Идёт загрузка и декодирование импульсной характеристики\",\r\n\t\t'options.filters.convolver.buffer.error': \"Ошибка загрузки импульсной характеристики\",\r\n\t\t'options.filters.equalizer': \"Эквалайзер\",\r\n\t\t'options.filters.equalizer.add': \"Добавить эквалайзер\",\r\n\t\t'options.filters.equalizer.gain{60,170,350,1000,3500,10000}': \"Усиление частоты {} Гц\",\r\n\r\n\t\t'options.destination': \"Выход\",\r\n\t\t'options.destination.compressor': \"Добавить компрессор перед выходом\",\r\n\t\t'options.destination.compressor.enable': \"Включить компрессор\",\r\n\t\t'options.destination.waveform': \"Добавить визуализацию формы волны\",\r\n\r\n\t\t'options.canvas': \"Элемент <code>canvas</code>\",\r\n\t\t'options.canvas.{width,height}': \"{Ширина,Высота} элемента <code>canvas</code>\",\r\n\t\t'options.canvas.line': \"Линия волны\",\r\n\t\t'options.canvas.line.width': \"Ширина линии волны\",\r\n\t\t'options.canvas.line.color': \"Цвет линии волны\",\r\n\t\t'options.canvas.line.color.{r,g,b,a}': \"{Красный ,Зелёный ,Синий ,Альфа-}канал линии волны\",\r\n\t\t'options.canvas.background': \"Фон\",\r\n\t\t'options.canvas.background.type': \"Тип фона\",\r\n\t\t'options.canvas.background.type.{clear,filled}': \"{прозрачный,закрашенный}\",\r\n\t\t'options.canvas.background.color': \"Цвет фона\",\r\n\t\t'options.canvas.background.color.{r,g,b,a}': \"{Красный ,Зелёный ,Синий ,Альфа-}канал фона\",\r\n\r\n\t\t'options-output.input': \"Значение изменяемо\",\r\n\t\t'options-output.range': \"в диапазоне\",\r\n\t\t'options-output.filter.frequencyResponse': \"Частотная характеристика\",\r\n\t\t'options-output.filter.magnitude': \"Амплитуда\",\r\n\t\t'options-output.filter.phase': \"Фаза\",\r\n\t\t'options-output.filter.contextError': \"Ошибка создания аудио-контекста. Вероятно, браузер не поддерживает Web Audio API.\",\r\n\t\t'options-output.filter.nodeError': \"Ошибка создания узла фильтра. Вероятно, браузер не поддерживает данный тип фильтров.\",\r\n\t\t'options-output.filter.biquad.clone': \"Клонировать в виде БИХ-фильтра\",\r\n\t\t'options-output.filter.biquad.clone.{pre,post}': \"Клонировать с коэффициентами по версиям {до,после} 2016-04-15\",\r\n\t\t'options-output.show': \"Показать\",\r\n\t\t'options-output.hide': \"Скрыть\",\r\n\r\n\t\t'code-output.warning.jsfiddle-run': \"Для корректного вывода звука в JSFiddle может потребоваться нажатие кнопки <kbd>Run</kbd>\",\r\n\t\t'code-output.warning.interesting': \"Для нетривиального JavaScript-кода нужно включить по крайней мере один источник и последующую обработку звука\",\r\n\r\n\t\t'code.title': \"Пример использования Web Audio API — сгенерированный код\",\r\n\r\n\t\t'comment.context': \"создаём [аудио-контекст][context]\",\r\n\t\t'comment.sources.audio': \"создаём [узел источника аудио][source]\",\r\n\t\t'comment.sources.video': \"создаём [узел источника видео][source]\",\r\n\t\t'comment.filters.gain': \"создаём [узел усилителя][gain]\",\r\n\t\t'comment.filters.panner': \"создаём [узел панорамирования][panner]\",\r\n\t\t'comment.filters.biquad': \"создаём [узел биквадратичного фильтра][biquad]\",\r\n\t\t'comment.filters.iir': \"создаём [узел БИХ-фильтра][iir]\",\r\n\t\t'comment.filters.convolver': \"создаём прямой путь и путь через [узел свёртки][convolver]\",\r\n\t\t'comment.filters.convolver.single': \"создаём [узел свёртки][convolver]\",\r\n\t\t'comment.filters.equalizer': \"создаём эквалайзер в виде последовательности [peaking][peaking] [биквадратичных фильтров][biquad]\",\r\n\t\t'comment.filters.equalizer.single': \"создаём эквалайзер в виде [peaking][peaking] [биквадратичного фильтра][biquad]\",\r\n\t\t'comment.destination': \"соединяем последний узел с [выходом][destination]\",\r\n\t\t'comment.destination.compressor': \"создаём [узел компрессора][compressor]\",\r\n\t\t'comment.destination.waveform': \"создаём [узел анализатора][analyser] для визуализации формы волны\",\r\n\r\n\t\t'units.pixel.a': \"px\",\r\n\t\t'units.pixel.{1,2,5}': \"пиксел{ь,я,ей}\",\r\n\t\t'units.hertz.a': \"Гц\",\r\n\t\t'units.hertz.{1,2,5}': \"Герц{,а,}\",\r\n\t\t'units.decibel.a': \"дБ\",\r\n\t\t'units.decibel.{1,2,5}': \"децибел{,а,ов}\",\r\n\t},\r\n}\r\n\r\n/*\r\nfunction i18nLinkFilter(inStrings) {\r\n\tconst linkRegexp=/\\[(\\S+)\\s+([^\\]]+)]/g\r\n\tconst outStrings={}\r\n\tfor (let id in inStrings) {\r\n\t\toutStrings[id]=inStrings[id].replace(linkRegexp,(match,url,text)=>\"<a href='\"+url+\"'>\"+text+\"</a>\")\r\n\t}\r\n\treturn outStrings\r\n}\r\nstrings=i18nLinkFilter(strings)\r\n*/\r\n\r\nfor (let lang in langStrings) {\r\n\tlet strings=langStrings[lang]\r\n\tstrings=require('crnx-base/i18n-expand-curly')(strings)\r\n\t//strings=require('crnx-base/i18n-link-wikipedia')(lang)(strings)\r\n\tstrings=require('crnx-base/options-output-i18n')(lang)(strings)\r\n\tstrings=require('crnx-base/code-output-i18n')(lang)(strings)\r\n\tlangStrings[lang]=strings\r\n}\r\n\r\nmodule.exports=require('crnx-base/i18n')(langStrings)\r\n","'use strict'\r\n\r\nconst FilterOptionOutput=require('./filter-option-output')\r\n\r\nclass IIRFilterOptionOutput extends FilterOptionOutput {\r\n\tgetFilterNode(audioContext) {\r\n\t\treturn audioContext.createIIRFilter(\r\n\t\t\tthis.option.entries[0].entries.map(entry=>entry.value),\r\n\t\t\tthis.option.entries[1].entries.map(entry=>entry.value)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nmodule.exports=IIRFilterOptionOutput\r\n","'use strict'\r\n\r\nlet idCounter=0\r\nfunction generateId() {\r\n\treturn 'webaudio-starter-id-'+(idCounter++)\r\n}\r\n\r\nconst i18ns=require('./i18n')\r\nconst Options=require('./options')\r\nconst Code=require('./code')\r\nconst OptionsOutput=require('./options-output')\r\nconst CodeOutput=require('./code-output')\r\n\r\n$(function(){\r\n\t$('.webaudio-starter').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst lang=$container.closest('[lang]').attr('lang')\r\n\t\tconst i18n=i18ns(lang)\r\n\t\tconst options=new Options()\r\n\t\tconst codeOutput=new CodeOutput(()=>new Code(options.fix(),i18n),i18n)\r\n\t\toptions.addUpdateCallback(codeOutput.update)\r\n\t\tconst optionsOutput=new OptionsOutput(options,generateId,i18n)\r\n\t\t$container.empty().append(\r\n\t\t\toptionsOutput.$output,\r\n\t\t\tcodeOutput.$output\r\n\t\t)\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst Option=Object.create(require('crnx-base/option-classes'))\r\n\r\n// differs from webgl-starter:\r\n//\tinput is a boolean\r\n// \tfloat subclasses have a fixed precision of 2\r\n//\tno speed\r\n//\tcan specify defaultMin, defaultMax\r\n//\tfixed has defaultValue - although it's potentially confusing: user input default vs Web Audio Node property default - they are currently the same\r\nOption.LiveNumber = class extends Option.Number {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataMin,dataMax,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataMin  =data.min\r\n\t\t\tdataMax  =data.max\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tif (settings.defaultMin!==undefined) {\r\n\t\t\tthis.defaultMin=settings.defaultMin\r\n\t\t} else {\r\n\t\t\tthis.defaultMin=this.availableMin\r\n\t\t}\r\n\t\tif (settings.defaultMax!==undefined) {\r\n\t\t\tthis.defaultMax=settings.defaultMax\r\n\t\t} else {\r\n\t\t\tthis.defaultMax=this.availableMax\r\n\t\t}\r\n\t\tthis._min=(dataMin!==undefined)?dataMin:this.defaultMin\r\n\t\tthis._max=(dataMax!==undefined)?dataMax:this.defaultMax\r\n\t\tthis._input=!!dataInput\r\n\t\tthis._$range=null\r\n\t}\r\n\tupdateInternalVisibility() {\r\n\t\tif (this._$range) this._$range.toggle(this._input)\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.updateInternalVisibility()\r\n\t\tthis.update()\r\n\t}\r\n\tget min() {\r\n\t\treturn this._min\r\n\t}\r\n\tset min(min) {\r\n\t\tthis._min=min\r\n\t\tthis.update()\r\n\t}\r\n\tget max() {\r\n\t\treturn this._max\r\n\t}\r\n\tset max(max) {\r\n\t\tthis._max=max\r\n\t\tthis.update()\r\n\t}\r\n\tget $range() {\r\n\t\treturn this._$range\r\n\t}\r\n\tset $range($range) {\r\n\t\tthis._$range=$range\r\n\t\tthis.updateInternalVisibility()\r\n\t}\r\n\texportHelper(src) {\r\n\t\tconst data={}\r\n\t\tif (src.value!=src.defaultValue) data.value=src.value\r\n\t\tif (src.min!=src.availableMin) data.min=src.min\r\n\t\tif (src.max!=src.availableMax) data.max=src.max\r\n\t\tif (src.input) data.input=src.input\r\n\t\treturn data\r\n\t}\r\n\texport() {\r\n\t\treturn this.exportHelper(this)\r\n\t}\r\n\tfix() {\r\n\t\tconst fixed=super.fix()\r\n\t\tfixed.min=this.min\r\n\t\tfixed.max=this.max\r\n\t\tfixed.input=this.input\r\n\t\tfixed.defaultValue=this.defaultValue\r\n\t\treturn fixed\r\n\t}\r\n}\r\n\r\nOption.LiveInt = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 0\r\n\t}\r\n}\r\n\r\nOption.LiveFloat = class extends Option.LiveNumber {\r\n\tget precision() {\r\n\t\treturn 2\r\n\t}\r\n}\r\n\r\nclass FixedLiveSelect {\r\n\tconstructor(src) {\r\n\t\tthis.value=src.value\r\n\t\tthis.input=src.input\r\n\t\tthis.defaultValue=src.defaultValue\r\n\t\tthis.availableValues=src.availableValues\r\n\t\tthis.name=src.name\r\n\t}\r\n\tvalueOf() {\r\n\t\treturn this.value\r\n\t}\r\n\ttoString() {\r\n\t\treturn this.value\r\n\t}\r\n}\r\n\r\nOption.LiveSelect = class extends Option.Select {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tlet dataValue,dataInput\r\n\t\tif (typeof data == 'object') {\r\n\t\t\tdataValue=data.value\r\n\t\t\tdataInput=data.input\r\n\t\t} else {\r\n\t\t\tdataValue=data\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t\tthis._input=!!dataInput\r\n\t}\r\n\tget input() {\r\n\t\treturn this._input\r\n\t}\r\n\tset input(input) {\r\n\t\tthis._input=input\r\n\t\tthis.update()\r\n\t}\r\n\texport() {\r\n\t\tconst data={}\r\n\t\tif (this.value!=this.defaultValue) data.value=this.value\r\n\t\tif (this.input) data.input=this.input\r\n\t\treturn data\r\n\t}\r\n\tfix() {\r\n\t\treturn new FixedLiveSelect(this)\r\n\t}\r\n}\r\n\r\nOption.AnyFloat = class extends Option.NonBoolean {\r\n}\r\n\r\nOption.BiquadFilter = class extends Option.Group {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['LiveSelect','type',[\r\n\t\t\t\t'lowpass','highpass','bandpass','lowshelf','highshelf','peaking','notch','allpass'\r\n\t\t\t]],\r\n\t\t\t['LiveInt','frequency',[0,22050],350,{ unit: 'hertz' }],\r\n\t\t\t['LiveInt','detune',[0,100],{ unit: '¢' }],\r\n\t\t\t['LiveFloat','Q',[-4,4],0], // log Q\r\n\t\t\t['LiveInt','gain',[-30,30],0,{ unit: 'decibel' }],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.IIRFilterCoefs = class extends Option.Array {\r\n\tconstructor(name,settings,data,parent,visibilityManager,makeEntry) {\r\n\t\tsuper(...arguments)\r\n\t\tif (this._entries.length==0) {\r\n\t\t\tconst type=this.availableTypes[0]\r\n\t\t\tthis._entries.push(this.makeEntry(type))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nOption.IIRFilter = class extends Option.Group {\r\n\tstatic collectArgs(scalarArg,arrayArg,settings) {\r\n\t\tsettings=Object.create(settings)\r\n\t\tsettings.descriptions=[\r\n\t\t\t['IIRFilterCoefs','feedforward',[\r\n\t\t\t\t['AnyFloat','b',1],\r\n\t\t\t]],\r\n\t\t\t['IIRFilterCoefs','feedback',[\r\n\t\t\t\t['AnyFloat','a',1],\r\n\t\t\t]],\r\n\t\t]\r\n\t\treturn super.collectArgs(scalarArg,arrayArg,settings)\r\n\t}\r\n}\r\n\r\nOption.Filters = class extends Option.Array {\r\n}\r\n\r\nmodule.exports=Option\r\n","'use strict'\r\n\r\nconst Option=require('./option-classes')\r\nconst BaseOptionsOutput=require('crnx-base/options-output')\r\nconst ArrayOptionOutput=require('crnx-base/array-option-output')\r\nconst BiquadFilterOptionOutput=require('./biquad-filter-option-output')\r\nconst IIRFilterOptionOutput=require('./iir-filter-option-output')\r\n\r\nclass FiltersOptionOutput extends ArrayOptionOutput {\r\n\twriteDraggableSubOption(subOption,writeOption,i18n) {\r\n\t\tconst $subOutput=super.writeDraggableSubOption(subOption,writeOption,i18n)\r\n\t\tconst This=this\r\n\t\tif (subOption instanceof Option.BiquadFilter) {\r\n\t\t\t$subOutput.find('button.clone').click(function(){\r\n\t\t\t\tconst $button=$(this)\r\n\t\t\t\tconst coefs=$button.data('coefs')\r\n\t\t\t\tif (coefs) {\r\n\t\t\t\t\tconst entry=This.option.makeEntry('iir',coefs)\r\n\t\t\t\t\tThis.$entries.append(\r\n\t\t\t\t\t\tThis.writeDraggableSubOption(entry,writeOption,i18n)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tThis.updateArrayEntries()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn $subOutput\r\n\t}\r\n}\r\n\r\nclass IIRFilterCoefsOptionOutput extends ArrayOptionOutput {\r\n\tconstructor(option,writeOption,i18n,generateId) {\r\n\t\tsuper(option,writeOption,i18n,generateId)\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tcanDeleteEntry($entry) {\r\n\t\treturn this.option.entries.length>1\r\n\t}\r\n\tupdateArrayEntries() {\r\n\t\tsuper.updateArrayEntries()\r\n\t\tthis.updateArrayEntryLabels()\r\n\t}\r\n\tupdateArrayEntryLabels() {\r\n\t\tthis.$entries.children().each(function(i){\r\n\t\t\tconst c=$(this).data('option').name\r\n\t\t\t$(this).find('label').html(`${c}<sub>${i}</sub>:`)\r\n\t\t})\r\n\t}\r\n}\r\n\r\nclass OptionsOutput extends BaseOptionsOutput {\r\n\tsetOptionClassWriters(optionClassWriters) {\r\n\t\tsuper.setOptionClassWriters(optionClassWriters)\r\n\t\toptionClassWriters.set(Option.LiveNumber,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst p=option.precision\r\n\t\t\tconst setInputAttrs=$input=>$input\r\n\t\t\t\t.attr('min',option.availableMin)\r\n\t\t\t\t.attr('max',option.availableMax)\r\n\t\t\t\t.attr('step',Math.pow(0.1,p).toFixed(p))\r\n\t\t\tconst writeMinMaxInput=minOrMax=>setInputAttrs($(\"<input type='number' required>\"))\r\n\t\t\t\t.val(option[minOrMax])\r\n\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\toption[minOrMax]=parseFloat(this.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tlet $inputCheckbox,$rangeMinInput,$rangeMaxInput\r\n\t\t\tconst $output=optionClassWriters.get(Option.Number)(option,writeOption,i18n,generateId)\r\n\t\t\t$output.find('button').before(\r\n\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \",\r\n\t\t\t\toption.$range=$(\"<span class='range'>\").append(\r\n\t\t\t\t\ti18n('options-output.range')+\" \",\r\n\t\t\t\t\t$rangeMinInput=writeMinMaxInput('min'),\r\n\t\t\t\t\t\" .. \",\r\n\t\t\t\t\t$rangeMaxInput=writeMinMaxInput('max')\r\n\t\t\t\t),\r\n\t\t\t\t\" \"\r\n\t\t\t).click(function(){\r\n\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t$rangeMinInput.val(option.defaultMin).change()\r\n\t\t\t\t$rangeMaxInput.val(option.defaultMax).change()\r\n\t\t\t})\r\n\t\t\treturn $output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.LiveSelect,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\tconst inputCheckboxId=generateId()\r\n\t\t\tlet $select,$inputCheckbox\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label> \",\r\n\t\t\t\t$select=$(\"<select id='\"+id+\"'>\").append(\r\n\t\t\t\t\toption.availableValues.map(function(availableValue){\r\n\t\t\t\t\t\treturn $(\"<option>\").val(availableValue).html(i18n('options.'+option.fullName+'.'+availableValue))\r\n\t\t\t\t\t})\r\n\t\t\t\t).val(option.value).change(function(){\r\n\t\t\t\t\toption.value=this.value\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$inputCheckbox=$(\"<input type='checkbox' id='\"+inputCheckboxId+\"'>\")\r\n\t\t\t\t\t.prop('checked',option.input)\r\n\t\t\t\t\t.change(function(){\r\n\t\t\t\t\t\toption.input=$(this).prop('checked')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\" <label for='\"+inputCheckboxId+\"'>\"+i18n('options-output.input')+\"</label> \",\r\n\t\t\t\t$(\"<button type='button'>\"+i18n('options-output.reset')+\"</button>\").click(function(){\r\n\t\t\t\t\t$select.val(option.defaultValue).change()\r\n\t\t\t\t\t$inputCheckbox.prop('checked',false).change()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.AnyFloat,(option,writeOption,i18n,generateId)=>{\r\n\t\t\tconst id=generateId()\r\n\t\t\treturn option.$=$(\"<div class='option'>\").append(\r\n\t\t\t\t\"<label for='\"+id+\"'>\"+i18n('options.'+option.fullName)+\":</label> \",\r\n\t\t\t\t$(\"<input type='number' id='\"+id+\"' step='any' required>\")\r\n\t\t\t\t\t.val(option.value)\r\n\t\t\t\t\t.on('input change',function(){\r\n\t\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\t\toption.value=parseFloat(this.value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.BiquadFilter,function(){\r\n\t\t\treturn new BiquadFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilter,function(){\r\n\t\t\treturn new IIRFilterOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.IIRFilterCoefs,function(){\r\n\t\t\treturn new IIRFilterCoefsOptionOutput(...arguments).$output\r\n\t\t})\r\n\t\toptionClassWriters.set(Option.Filters,function(){\r\n\t\t\treturn new FiltersOptionOutput(...arguments).$output\r\n\t\t})\r\n\t}\r\n}\r\n\r\nmodule.exports=OptionsOutput\r\n","'use strict'\r\n\r\nconst BaseOptions=require('crnx-base/options')\r\n\r\nclass Options extends BaseOptions {\r\n\tget entriesDescription() {\r\n\t\treturn [\r\n\t\t\t['Array','sources',[\r\n\t\t\t\t['Group','audio',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc - is down now\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/guitarRiff1.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/drums.mp3',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/LaSueur.mp3',\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/bass.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/drums.ogg',\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/guitar.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','video',[\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/elephants-dream-medium.mp4',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.webm',\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/sintel.mp4',\r\n\t\t\t\t\t]],\r\n\t\t\t\t\t['Int','width',[1,1920],320,{ unit: 'pixel' }],\r\n\t\t\t\t\t['Int','height',[1,1080],240,{ unit: 'pixel' }],\r\n\t\t\t\t]],\r\n\t\t\t],'source'],\r\n\t\t\t['Filters','filters',[\r\n\t\t\t\t['Group','gain',[\r\n\t\t\t\t\t['LiveFloat','gain',[0,10],1,{\r\n\t\t\t\t\t\tdefaultMax: 1,\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','panner',[\r\n\t\t\t\t\t['LiveFloat','pan',[-1,1],0],\r\n\t\t\t\t]],\r\n\t\t\t\t['BiquadFilter','biquad'],\r\n\t\t\t\t['IIRFilter','iir'],\r\n\t\t\t\t['Group','convolver',[\r\n\t\t\t\t\t['LiveFloat','reverb',[0,1]],\r\n\t\t\t\t\t['Text','url',[\r\n\t\t\t\t\t\t// original w3c mooc - is down now\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t'http://mainline.i3s.unice.fr/mooc/Scala-Milan-Opera-Hall.wav',\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// Web Audio Playground via RawGit\r\n\t\t\t\t\t\t'https://cdn.rawgit.com/cwilso/WebAudio/9ece1787cede81ddcd26f2a78d4fb3ba0812379a/sounds/irHall.ogg',\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','equalizer',[60,170,350,1000,3500,10000].map(\r\n\t\t\t\t\tfreq=>['LiveInt','gain'+freq,[-30,30],0,{ unit: 'decibel' }]\r\n\t\t\t\t)],\r\n\t\t\t],'filter'],\r\n\t\t\t['Group','destination',[\r\n\t\t\t\t['Checkbox','compressor'], // Firefox compresses automatically?\r\n\t\t\t\t['Checkbox','waveform'],\r\n\t\t\t]],\r\n\t\t\t['Group','canvas',[\r\n\t\t\t\t['Int','width',[1,1920],300,{ unit: 'pixel' }],\r\n\t\t\t\t['Int','height',[1,1080],100,{ unit: 'pixel' }],\r\n\t\t\t\t['Group','line',[\r\n\t\t\t\t\t['Float','width',[0,10],1,{ unit: 'pixel' }],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],0,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t]],\r\n\t\t\t\t]],\r\n\t\t\t\t['Group','background',[\r\n\t\t\t\t\t['Select','type',['clear','filled']],\r\n\t\t\t\t\t['Group','color',[\r\n\t\t\t\t\t\t['Int','r',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','g',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','b',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t\t['Int','a',[0,100],100,{ unit: '%' }],\r\n\t\t\t\t\t],{\r\n\t\t\t\t\t\tvisibilityData: {'canvas.background.type':['filled']}\r\n\t\t\t\t\t}],\r\n\t\t\t\t]],\r\n\t\t\t],{\r\n\t\t\t\tvisibilityData: {'destination.waveform':[true]}\r\n\t\t\t}],\r\n\t\t]\r\n\t}\r\n\tget optionClasses() {\r\n\t\treturn require('./option-classes')\r\n\t}\r\n}\r\n\r\nmodule.exports=Options\r\n","'use strict'\r\n\r\nconst camelCase=require('crnx-base/fake-lodash/camelcase')\r\nconst Lines=require('crnx-base/lines')\r\nconst JsLines=require('crnx-base/js-lines')\r\nconst WrapLines=require('crnx-base/wrap-lines')\r\nconst InterleaveLines=require('crnx-base/interleave-lines')\r\nconst RefLines=require('crnx-base/ref-lines')\r\nconst CollectionFeature=require('./collection-feature')\r\n\r\nclass Source {\r\n\tconstructor(options,n) {\r\n\t\tthis.options=options\r\n\t\tthis.n=n\r\n\t}\r\n\tget nSuffix() {\r\n\t\tif (this.n!==undefined) {\r\n\t\t\treturn '.'+this.n\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\tget elementHtmlName() {\r\n\t\treturn 'my.'+this.type+this.nSuffix\r\n\t}\r\n\tget nodeJsName() {\r\n\t\treturn camelCase(this.type+this.nSuffix+'.node')\r\n\t}\r\n\tgetHtmlLines(featureContext,i18n) {\r\n\t\treturn WrapLines.b(\"<div>\",\"</div>\").ae(\r\n\t\t\tthis.getElementHtmlLines(featureContext,i18n)\r\n\t\t)\r\n\t}\r\n\tgetJsInitLines(i18n) {\r\n\t\treturn JsLines.bae(\r\n\t\t\tRefLines.parse(\"// \"+i18n('comment.sources.'+this.type)),\r\n\t\t\t\"var \"+this.nodeJsName+\"=ctx.createMediaElementSource(document.getElementById('\"+this.elementHtmlName+\"'));\"\r\n\t\t)\r\n\t}\r\n\t// abstract:\r\n\t// get type()\r\n\t// getElementHtmlLines(featureContext,i18n)\r\n}\r\n\r\nconst sourceClasses={\r\n\taudio: class extends Source {\r\n\t\tget type() { return 'audio' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<audio src=${this.options.url} id=${this.elementHtmlName} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></audio>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tvideo: class extends Source {\r\n\t\tget type() { return 'video' }\r\n\t\tgetElementHtmlLines(featureContext,i18n) {\r\n\t\t\treturn Lines.bae(\r\n\t\t\t\tLines.html`<video src=${this.options.url} id=${this.elementHtmlName} width=${this.options.width} height=${this.options.height} controls loop crossorigin=${featureContext.audioContext?'anonymous':false}></video>`\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n}\r\n\r\nclass SourceSet extends CollectionFeature {\r\n\tgetEntryClass(entryOption) {\r\n\t\treturn sourceClasses[entryOption.source]\r\n\t}\r\n\trequestFeatureContext(featureContext) {\r\n\t\tif (this.entries.length>0) {\r\n\t\t\tfeatureContext.audioProcessing=true\r\n\t\t}\r\n\t}\r\n\tgetJsInitLines(featureContext,i18n,prevNodeJsNames) {\r\n\t\tconst a=InterleaveLines.b()\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\ta(...this.entries.map(entry=>entry.getJsInitLines(i18n)))\r\n\t\t}\r\n\t\treturn a.e()\r\n\t}\r\n\tgetNodeJsNames(featureContext,prevNodeJsNames) {\r\n\t\tif (featureContext.audioContext) {\r\n\t\t\treturn this.entries.map(entry=>entry.nodeJsName)\r\n\t\t} else {\r\n\t\t\treturn prevNodeJsNames\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=SourceSet\r\n"],"sourceRoot":"."}